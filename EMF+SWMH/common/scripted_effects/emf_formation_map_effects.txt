# -*- ck2.scripted_effects -*-

emf_make_eastern_marches_dejure = {
	d_niederbayern = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_oberbayern = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_nordgau = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_osterreich = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_tyrol = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_salzburg = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_styria = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_carinthia = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_merania = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	d_aquileia = {
		show_scope_change = no
		de_jure_liege = k_eastern_marches
	}
	k_bavaria = {
		show_scope_change = no
		any_direct_de_jure_vassal_title = {
			show_scope_change = no
			limit = {
				NOR = {
					title = d_niederbayern
					title = d_oberbayern
					title = d_nordgau
					title = d_osterreich
					title = d_tyrol
					title = d_salzburg
				}
			}
			de_jure_liege = k_eastern_marches
		}
	}
	k_carinthia = {
		show_scope_change = no
		any_direct_de_jure_vassal_title = {
			show_scope_change = no
			limit = {
				NOR = {
					title = d_styria
					title = d_carinthia
					title = d_merania
					title = d_aquileia
				}
			}
			de_jure_liege = k_eastern_marches
		}
	}
}

emf_add_extra_counties_to_amalfi = {
	c_napoli = {
		show_scope_change = no
		if = {
			limit = { holder = ROOT }
			de_jure_liege = d_amalfi
		}
		else = {
			custom_tooltip = { text = THIS_WOULD_BECOME_PART_OF_NEW_TITLE_IF_YOU_HELD_IT }
			de_jure_liege = d_capua
		}
	}
}

emf_make_powys_dejure = {
	d_powys = {
		show_scope_change = no
		c_powys_wenwynwyn = {
			show_scope_change = no
			if = {
				limit = { NOT = { de_jure_liege = PREV } }
				de_jure_liege = PREV
			}
		}
		c_rhwng = {
			show_scope_change = no
			if = {
				limit = { NOT = { de_jure_liege = PREV } }
				de_jure_liege = PREV
			}
		}
		c_buellt = {
			show_scope_change = no
			if = {
				limit = { NOT = { de_jure_liege = PREV } }
				de_jure_liege = PREV
			}
		}
		c_shrewsbury = {
			show_scope_change = no
			if = {
				limit = { NOT = { de_jure_liege = PREV } }
				de_jure_liege = PREV
			}
		}
		c_hereford = {
			show_scope_change = no
			if = {
				limit = { NOT = { de_jure_liege = PREV } }
				de_jure_liege = PREV
			}
		}
	}
}

emf_add_extra_dejure_vassal_titles_of_austria = {
	c_salzburg = {
		show_scope_change = no
		if = {
			limit = { owner_under_ROOT = yes }
			if = {
				limit = { ROOT = { has_landed_title = d_tyrol } }
				de_jure_liege = d_tyrol
				d_tyrol = {
					show_scope_change = no
					de_jure_liege = k_austria
				}
			}
			else = {
				d_tyrol = {
					show_scope_change = no
					custom_tooltip = { text = THIS_WOULD_BECOME_PART_OF_NEW_TITLE_IF_YOU_HELD_IT }
				}
				de_jure_liege = d_styria
			}
		}
		else = {
			custom_tooltip = { text = THIS_WOULD_BECOME_PART_OF_NEW_TITLE_IF_YOU_CONTROLLED_IT }
		}
	}
}
