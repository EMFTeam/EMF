# -*- ck2 -*-

emf_good_tactic_leader_score = {
	modifier = {
		factor = 0.65
		OR = {
			flank_has_leader = no
			leader = { martial < 2 }
		}
	}
	modifier = {
		factor = 0.7
		OR = {
			flank_has_leader = no
			leader = { martial < 4 }
		}
	}
	modifier = {
		factor = 0.7
		OR = {
			flank_has_leader = no
			leader = { martial < 6 }
		}
	}
	modifier = {
		factor = 0.75
		OR = {
			flank_has_leader = no
			leader = { martial < 8 }
		}
	}
	modifier = {
		factor = 0.75
		OR = {
			flank_has_leader = no
			leader = { martial < 10 }
		}
	}
	modifier = {
		factor = 1.1
		leader = { martial >= 12 }
	}
	modifier = {
		factor = 1.2
		leader = { martial >= 14 }
	}
	modifier = {
		factor = 1.3
		leader = { martial >= 16 }
	}
	modifier = {
		factor = 1.35
		leader = { martial >= 18 }
	}
	modifier = {
		factor = 1.35
		leader = { martial >= 20 }
	}
	modifier = {
		factor = 1.35
		leader = { martial >= 22 }
	}
	modifier = {
		factor = 1.35
		leader = { martial >= 24 }
	}
	modifier = {
		factor = 1.35
		leader = { martial >= 26 }
	}
}

emf_ok_tactic_leader_score = {
	modifier = {
		factor = 0.8
		OR = {
			flank_has_leader = no
			leader = { martial < 2 }
		}
	}
	modifier = {
		factor = 0.9
		OR = {
			flank_has_leader = no
			leader = { martial < 4 }
		}
	}
	modifier = {
		factor = 0.9
		OR = {
			flank_has_leader = no
			leader = { martial < 6 }
		}
	}
	modifier = {
		factor = 0.95
		OR = {
			flank_has_leader = no
			leader = { martial < 8 }
		}
	}
	modifier = {
		factor = 0.95
		OR = {
			flank_has_leader = no
			leader = { martial < 10 }
		}
	}
	modifier = {
		factor = 1.1
		leader = { martial >= 12 }
	}
	modifier = {
		factor = 1.1
		leader = { martial >= 14 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 16 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 18 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 20 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 22 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 24 }
	}
	modifier = {
		factor = 1.05
		leader = { martial >= 26 }
	}
}

emf_bad_tactic_leader_score = {
	modifier = {
		factor = 1.2
		OR = {
			flank_has_leader = no
			leader = { martial < 2 }
		}
	}
	modifier = {
		factor = 1.2
		OR = {
			flank_has_leader = no
			leader = { martial < 4 }
		}
	}
	modifier = {
		factor = 1.2
		OR = {
			flank_has_leader = no
			leader = { martial < 6 }
		}
	}
	modifier = {
		factor = 1.2
		OR = {
			flank_has_leader = no
			leader = { martial < 8 }
		}
	}
	modifier = {
		factor = 1.2
		OR = {
			flank_has_leader = no
			leader = { martial < 10 }
		}
	}
	modifier = {
		factor = 0.95
		leader = { martial >= 12 }
	}
	modifier = {
		factor = 0.95
		leader = { martial >= 14 }
	}
	modifier = {
		factor = 0.95
		leader = { martial >= 16 }
	}
	modifier = {
		factor = 0.95
		leader = { martial >= 18 }
	}
	modifier = {
		factor = 0.8
		leader = { martial >= 20 }
	}
	modifier = {
		factor = 0.8
		leader = { martial >= 22 }
	}
	modifier = {
		factor = 0.8
		leader = { martial >= 24 }
	}
	modifier = {
		factor = 0.8
		leader = { martial >= 26 }
	}
}

emf_bad_tactic_tech_skirmish_score = {
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				# Cannot be the unit owner leading troops themselves (see ChangeLog.txt for CKII v2.4.4), so the scope
				# `liege` is indeed guaranteed to be the unit owner
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_SKIRMISH = 2
					}
					trigger_else = {
						capital_scope = { TECH_SKIRMISH = 2 }
					}
				}
			}
			# If we get here in control flow: since the leader is neither a commander nor a marshal, the `leader` scope
			# is indeed the unit owner and NOT the leader/liege scope (unless the unit owner is independent, and then
			# they'd be equivalent).
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_SKIRMISH = 2
			}
			trigger_else = {
				capital_scope = { TECH_SKIRMISH = 2 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_SKIRMISH = 4
					}
					trigger_else = {
						capital_scope = { TECH_SKIRMISH = 4 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_SKIRMISH = 4
			}
			trigger_else = {
				capital_scope = { TECH_SKIRMISH = 4 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_SKIRMISH = 6
					}
					trigger_else = {
						capital_scope = { TECH_SKIRMISH = 6 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_SKIRMISH = 6
			}
			trigger_else = {
				capital_scope = { TECH_SKIRMISH = 6 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_SKIRMISH = 8
					}
					trigger_else = {
						capital_scope = { TECH_SKIRMISH = 8 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_SKIRMISH = 8
			}
			trigger_else = {
				capital_scope = { TECH_SKIRMISH = 8 }
			}
		}
	}
}

emf_bad_tactic_tech_melee_score = {
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				# Cannot be the unit owner leading troops themselves (see ChangeLog.txt for CKII v2.4.4), so the scope
				# `liege` is indeed guaranteed to be the unit owner
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_MELEE = 2
					}
					trigger_else = {
						capital_scope = { TECH_MELEE = 2 }
					}
				}
			}
			# If we get here in control flow: since the leader is neither a commander nor a marshal, the `leader` scope
			# is indeed the unit owner and NOT the leader/liege scope (unless the unit owner is independent, and then
			# they'd be equivalent).
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_MELEE = 2
			}
			trigger_else = {
				capital_scope = { TECH_MELEE = 2 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_MELEE = 4
					}
					trigger_else = {
						capital_scope = { TECH_MELEE = 4 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_MELEE = 4
			}
			trigger_else = {
				capital_scope = { TECH_MELEE = 4 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_MELEE = 6
					}
					trigger_else = {
						capital_scope = { TECH_MELEE = 6 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_MELEE = 6
			}
			trigger_else = {
				capital_scope = { TECH_MELEE = 6 }
			}
		}
	}
	modifier = {
		factor = 0.8
		flank_has_leader = yes
		leader = {
			trigger_if = {
				limit = {
					OR = {
						has_job_title = job_marshal
						has_minor_title = title_commander
					}
				}
				liege = {
					trigger_if = {
						limit = { is_nomadic = yes }
						TECH_MELEE = 8
					}
					trigger_else = {
						capital_scope = { TECH_MELEE = 8 }
					}
				}
			}
			trigger_else_if = {
				limit = { is_nomadic = yes }
				TECH_MELEE = 8
			}
			trigger_else = {
				capital_scope = { TECH_MELEE = 8 }
			}
		}
	}
}
