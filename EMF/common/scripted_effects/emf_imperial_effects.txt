
emf_switch_to_feudal_gov_effect = {
	if = {
		limit = { religion_group = muslim }
		set_government_type = muslim_government
	}
	if = {
		limit = { NOT = { religion_group = muslim } }
		set_government_type = feudal_government
	}
}

emf_switch_to_imperial_effect = {
	if = {
		limit = { religion_group = muslim }
		set_government_type = muslim_imperial_government
	}
	if = {
		limit = { NOT = { religion_group = muslim } }
		set_government_type = imperial_government
	}
}

emf_imperial_add_decadence_1 = {
	custom_tooltip = {
		text = REALM_THINKS_DECADENT
		hidden_tooltip = {
			any_vassal = {
				limit = {
					NOT = { character = event_target:current_viceroy }
				}
				opinion = { who = PREV modifier = opinion_decadent_emperor years = 20 }
			}
		}
	}
}

emf_imperial_add_decadence_2 = {
	custom_tooltip = {
		text = REALM_THINKS_DECADENT
		hidden_tooltip = {
			any_vassal = {
				limit = {
					NOT = { character = event_target:current_viceroy }
				}
				opinion = { who = PREV modifier = opinion_decadent_emperor multiplier = 2 years = 20 }
			}
		}
	}
}

emf_imperial_save_viceroy_pick_effect = {
	if = {
		limit = {
			event_target:council_first_pick = { always = yes }
			event_target:council_second_pick = { always = yes }
			NOT = { event_target:council_third_pick = { always = yes } }
		}
		save_event_target_as = council_third_pick
	}
	if = {
		limit = {
			event_target:council_first_pick = { always = yes }
			NOT = { event_target:council_second_pick = { always = yes } }
		}
		save_event_target_as = council_second_pick
	}
	if = {
		limit = {
			NOT = { event_target:council_first_pick = { always = yes } }
		}
		save_event_target_as = council_first_pick
	}
}

# ROOT = liege who originally sent relative away, FROM = relative
emf_return_home_effect = {
	if = {
		limit  = { is_ruler = yes }
		FROM = { move_character = ROOT }
	}
	if = {
		limit = { is_ruler = no }
		random_dynasty_member = {
			limit = { is_ruler = yes }
			FROM = { move_character = PREV }
		}
	}
}
