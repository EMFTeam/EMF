
# For de jure empire formation/restoration via decision, effect counterpart to same-named trigger
emf_empires_create_dj_empire_basic_effect = {
	if = {
		limit = { ai = no }
		wealth = -600
		piety = -400
	}
	prestige = 500
}

#### MONGOL INVASION ####

emf_empires_spawn_mongol_unit_effect = {
	spawn_unit = {
		province = event_target:emf_target_province
		earmark = horde_invasion
		troops =
		{
			horse_archers = { 1800 1800 }
			light_cavalry = { 1067 1067 }
			light_infantry = { 361 361 }
			heavy_infantry = { 140 140 }
			knights = { 32 32 }
		}
	}
}

#### AI MISSION (#1): RESTORE BYZANTIUM #####

# THIS = mission ruler
emf_aim1_init_effect = {
	hidden_tooltip = {
		emf_aim1_cleanup_effect = yes
		set_character_flag = emf_aim1
	}
}

# THIS = mission ruler
emf_aim1_cleanup_effect = {
	hidden_tooltip = {
		clr_character_flag = emf_aim1
		set_variable = { which = emf_aim1_ticks value = 0 }
		set_variable = { which = emf_aim1_peace_ticks value = 0 }
		set_variable = { which = emf_aim1_wins value = 0 }
		set_variable = { which = emf_aim1_losses value = 0 }
		set_variable = { which = emf_aim1_legitimacy value = 0 }
		# WOULD-BE-TODO: clear pledged-support opinions, clear support-denial opinions, clear
		# opinion_aim1_potential_target NAP-dissolving TOMs, etc.
	}
}

# CANCELED/DEFERRED PROJECT, but WOULD-BE-TODO:
# - use additive_power_diff_modifier or stacking modifiers based upon relative_power_including_allies_defender to increase
#   likelihood of going to war against this target on this tick
# - use the number of stored peace ticks to increase the likelihood of going to war.
#
# this [ultra-simplified] design chooses the least powerful targets to evaluate emf_aim1_pick_war_effect before more powerful
# ones, ensuring that, if we do decide to go to war, it was against the weakest possible candidate at this time.  from there,
# we'd then use a recursive-immediate function to [potentially] repeatedly spawn [relatively small units] matched against
# ourself, up to a maximum dependent upon our accumulated budget in peace ticks, and otherwise terminating once we've spawned
# enough auxiliary troops for the total emf_war_target/relative_power_including_allies_defender to be less than 0.8, we DoW
# emf_war_target for an appropriate duchy with the emf_reclaim_byz CB and reset any unused peace ticks to 0.
#
# Given the [simplified] approach of "spending" peace ticks upon soldier recruitment but not allowing ourselves to spend
# beyond our peace ticket budget, the modifiers in emf_aim1_pick_war_effect regarding total peace ticks vs. the power
# differential with the target should be designed such that we are unlikely to run out of peace-tick budget before we reach
# a favorable powerful differential [indeed, event spawns usually shouldn't be required at all due to the target preference
# algorithm and those AIs most likely to be promoted to this mission already being apparently fit and powerful potential ERE
# successor states, BUT...] if indeed this weighted-random function decides it's time to wage war.  Failure to be conservative
# about the importance of peace ticks vs. power differential here will result in a counterproductive amount of failed
# offensive wars, although the system should still be designed to promote a few of those happening during the mission.
#
# There's also the constant threat of invasion of Thrace by other powers to consider, whom will prefer to do so whenever
# we're already engaged in a war (though the threat of that will start to drop significantly as our "legitimacy" variable
# rises-- a measure of our effectiveness/progress toward restoring the ERE, defending and holding Constantinople successfully,
# and a few other dynamic factors related predominantly to our degree of success at receiving pledges of support from other
# byzantine rulers, a constant process of sending letters offering favors/etc. upon the expected restoration of the ERE and
# potentially receiving gold to support us in addition to a pledge which prevents them from threatening Thrace so long as we
# continue to hold it-- i.e., as long as our mission doesn't invalidate).
emf_aim1_pick_war_effect = {
	random_list = {
		1000 = { # Yep, let's go to war with this guy.
			save_event_target_as = emf_war_target
		}
		1000 = { # Do nothing for this tick.
		}
	}
}
