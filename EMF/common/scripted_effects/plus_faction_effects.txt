
plus_faction_glory_victory_effect = {
	if = {
		limit = { any_vassal = { leads_faction = faction_glory } }
		custom_tooltip = { text = GLORYFACTIONMOODPLUS_NONAME }
		hidden_tooltip = { character_event = { id = PlusFaction.460 days = 1 } }
	}
}

plus_faction_glory_defeat_effect = {
	if = {
		limit = { any_vassal = { leads_faction = faction_glory } }
		custom_tooltip = { text = GLORYFACTIONMOODMINUS }
		hidden_tooltip = { character_event = { id = PlusFaction.461 days = 1 } }
	}
}

plus_faction_save_old_gender_law_effect = {
	if = {
		limit = {
			is_primary_holder_title = yes
			higher_tier_than = count
		}
		clr_title_flag = former_cognatic_succession
		clr_title_flag = former_agnatic_succession
		clr_title_flag = former_true_cognatic_succession
		if = {
			limit = { has_law = cognatic_succession }
			set_title_flag = former_cognatic_succession
		}
		if = {
			limit = { has_law = agnatic_succession }
			set_title_flag = former_agnatic_succession
		}
		if = {
			limit = { has_law = true_cognatic_succession }
			set_title_flag = former_true_cognatic_succession
		}
	}
}

plus_faction_save_old_succ_law_effect = {
	if = {
		limit = {
			is_primary_holder_title = yes
			higher_tier_than = count
		}
		clr_title_flag = former_gavelkind
		clr_title_flag = former_seniority
		clr_title_flag = former_primogeniture
		clr_title_flag = former_feudal_elective
		clr_title_flag = former_tanistry
		clr_title_flag = former_ultimogeniture
		if = {
			limit = { has_law = succ_gavelkind }
			set_title_flag = former_gavelkind
		}
		if = {
			limit = { has_law = succ_seniority }
			set_title_flag = former_seniority
		}
		if = {
			limit = { has_law = succ_primogeniture }
			set_title_flag = former_primogeniture
		}
		if = {
			limit = { has_law = succ_feudal_elective }
			set_title_flag = former_feudal_elective
		}
		if = {
			limit = { has_law = succ_tanistry }
			set_title_flag = former_tanistry
		}
		if = {
			limit = { has_law = succ_ultimogeniture }
			set_title_flag = former_ultimogeniture
		}
	}
}


plus_faction_cleanup_flags_effect = {
	if = {
		limit = {
			war = no
			OR = {
				has_character_flag = faction_court_war
				has_character_flag = faction_prosperity_war
				has_character_flag = faction_glory_war
				has_character_flag = faction_tradition_war
			}
		}
		clr_character_flag = faction_court_war
		clr_character_flag = faction_prosperity_war
		clr_character_flag = faction_glory_war
		clr_character_flag = faction_tradition_war
	}
	if = {
		limit = {
			NOR = {
				leads_faction = faction_court
				leads_faction = faction_prosperity
				leads_faction = faction_glory
				leads_faction = faction_tradition
			}
			OR = {
				has_character_flag = faction_meeting
				has_character_flag = faction_meeting_called
				has_character_flag = faction_meeting_begun
				has_character_flag = faction_meeting_postponed
				has_character_flag = faction_leadership_challenge
			}
		}
		clr_character_flag = faction_meeting
		clr_character_flag = can_make_demand
		clr_character_flag = faction_meeting_called
		clr_character_flag = faction_meeting_begun
		clr_character_flag = faction_meeting_postponed
		clr_character_flag = faction_leadership_challenge
		clr_character_flag = faction_is_happy
		clr_character_flag = faction_is_content
		clr_character_flag = faction_is_unhappy
		clr_character_flag = faction_is_angry
		clr_character_flag = made_great_speech
		clr_character_flag = made_good_speech
		clr_character_flag = made_fair_speech
		clr_character_flag = made_poor_speech
		clr_character_flag = made_terrible_speech
		clr_character_flag = liege_opinion_increased
		clr_character_flag = liege_opinion_slightly_increased
		clr_character_flag = liege_opinion_slightly_decreased
		clr_character_flag = liege_opinion_decreased
		clr_character_flag = demand_money_liege
		clr_character_flag = demand_support_liege
		clr_character_flag = faction_demand_refused
	}
	if = {
		limit = {
			OR = {
				had_character_flag = { flag = faction_meeting_called days = 365 }
				had_character_flag = { flag = faction_meeting_begun days = 365 }
				had_character_flag = { flag = faction_leadership_challenge days = 365 }
			}
		}
		clr_character_flag = can_make_demand
		clr_character_flag = faction_meeting_called
		clr_character_flag = faction_meeting_begun
		clr_character_flag = faction_meeting_postponed
		clr_character_flag = faction_leadership_challenge
		clr_character_flag = faction_is_happy
		clr_character_flag = faction_is_content
		clr_character_flag = faction_is_unhappy
		clr_character_flag = faction_is_angry
		clr_character_flag = made_great_speech
		clr_character_flag = made_good_speech
		clr_character_flag = made_fair_speech
		clr_character_flag = made_poor_speech
		clr_character_flag = made_terrible_speech
		clr_character_flag = liege_opinion_increased
		clr_character_flag = liege_opinion_slightly_increased
		clr_character_flag = liege_opinion_slightly_decreased
		clr_character_flag = liege_opinion_decreased
		clr_character_flag = demand_money_liege
		clr_character_flag = demand_support_liege
		clr_character_flag = faction_demand_refused
	}
	if = {
		limit = { had_character_flag = { flag = former_faction_leader days = 7 } }
		clr_character_flag = former_faction_leader
	}
	if = {
		limit = { had_character_flag = { flag = faction_reboot days = 7 } }
		clr_character_flag = faction_reboot
	}
	#check title flags
	any_demesne_title = {
		limit = {
			higher_tier_than = count
		}
		if = {
			limit = {
				has_title_flag = former_gavelkind
				has_law = succ_gavelkind
			}
			clr_title_flag = former_gavelkind
		}
		if = {
			limit = {
				has_title_flag = former_seniority
				has_law = succ_seniority
			}
			clr_title_flag = former_seniority
		}
		if = {
			limit = {
				has_title_flag = former_primogeniture
				has_law = succ_primogeniture
			}
			clr_title_flag = former_primogeniture
		}
		if = {
			limit = {
				has_title_flag = former_gavelkind
				has_law = succ_gavelkind
			}
			clr_title_flag = former_gavelkind
		}
		if = {
			limit = {
				has_title_flag = former_feudal_elective
				has_law = succ_feudal_elective
			}
			clr_title_flag = former_feudal_elective
		}
		if = {
			limit = {
				has_title_flag = former_tanistry
				has_law = succ_tanistry
			}
			clr_title_flag = former_tanistry
		}
		if = {
			limit = {
				has_title_flag = former_ultimogeniture
				has_law = succ_ultimogeniture
			}
			clr_title_flag = former_ultimogeniture
		}
		if = {
			limit = {
				has_title_flag = former_cognatic_succession
				has_law = cognatic_succession
			}
			clr_title_flag = former_cognatic_succession
		}
		if = {
			limit = {
				has_title_flag = former_agnatic_succession
				has_law = agnatic_succession
			}
			clr_title_flag = former_agnatic_succession
		}
		if = {
			limit = {
				has_title_flag = former_true_cognatic_succession
				has_law = true_cognatic_succession
			}
			clr_title_flag = former_true_cognatic_succession
		}
	}
}
