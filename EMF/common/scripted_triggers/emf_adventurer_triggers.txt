
# ROOT = adventurer
emf_adventurer_is_valid_trigger = {
	has_character_modifier = planning_claimant_adventure
	NOR = {
		prisoner = yes
		trait = incapable
	}
	any_independent_ruler = {
		is_landed = yes
		has_opinion_modifier = { who = PREV modifier = opinion_targeted_by_adventurer }
		reverse_has_opinion_modifier = { who = PREV modifier = opinion_claimant_adventure_target }
		ROOT = { any_claim = { holder = PREVPREV } }
	}
}

# THIS = potential host, ROOT = adventurer
emf_adventurer_can_approach_trigger = {
	is_landed = yes
	religion_group = ROOT
	NOR = {
		is_heresy_of = ROOT
		is_parent_religion = ROOT
	}
	NOT = { has_character_flag = emf_adv_approached_@ROOT }
	capital_scope = { owner = { character = PREVPREV } } # Need to own their capital province
	NOT = { character = event_target:emf_adv_target }
	# Need to have provinces from which we can recruit (i.e., other adventurers haven't already depleted them all recently)
	any_realm_province = { NOT = { has_province_modifier = adventurer_recruited } }
}

# THIS = "vassal" (or below, of some host) to approach, ROOT = adventurer
emf_adventurer_can_approach_vassal_trigger = {
	wealth = 10
	is_adult = yes
	prisoner = no
	NOT = { trait = incapable }
	NOT = { has_character_flag = emf_adv_approached_@ROOT }
	OR = {
		dynasty = ROOT
		is_close_relative = ROOT
		any_spouse = { is_close_relative = ROOT }
		opinion = { who = ROOT value = 40 }
		NOT = { opinion = { who = event_target:emf_adv_target value = -40 } }
	}
}

# THIS = province, ROOT = adventurer
emf_adventurer_can_recruit_province_trigger = {
	NOR = {
		has_province_flag = emf_adv_recruited_@ROOT
		has_province_modifier = adventurer_recruited
		any_province_holding = { is_occupied = yes }
	}
}

# ROOT = adventurer
emf_adventurer_like_adventurer_trigger = {
	OR = {
		is_close_relative = ROOT
		is_friend = ROOT
		opinion = { who = ROOT value = 40 }
	}
}

# ROOT = adventurer
emf_adventurer_hate_adventurer_target_trigger = {
	OR = {
		NOT = { opinion = { who = event_target:emf_adv_target value = -40 } }
		is_rival = event_target:emf_adv_target
		war_with = event_target:emf_adv_target
		AND = {
			is_foe = event_target:emf_adv_target
			NOT = { opinion = { who = event_target:emf_adv_target value = 0 } }
		}
	}
}

# THIS = candidate for initial relocation, ROOT = adventurer
emf_adventurer_plausible_external_start_court_trigger = {
	emf_adventurer_can_approach_trigger = yes
	NOR = {
		same_realm = event_target:emf_adv_target
		is_allied_with = event_target:emf_adv_target
		has_non_aggression_pact_with = event_target:emf_adv_target
		opinion = { who = event_target:emf_adv_target value = 25 }
	}
}

# ROOT = adventurer, THIS = adventurer's claim
emf_adventurer_claim_is_valid_target_trigger = {
	# only held count- or above-tier de jure titles (unless primary) that aren't landless
	holder_scope = { independent = yes }
	higher_tier_than = BARON
	OR = {
		is_primary_holder_title = yes
		is_titular = no
	}
	is_landless_type_title = no
	holder_scope = {
		is_landed = yes
		# weak claims only allowed against women/regencies/recent-succession unless claimant is ambitious
		OR = {
			ROOT = { has_strong_claim = PREVPREV }
			ROOT = { trait = ambitious }
			is_female = yes
			OR = { # appropriate regencies, not merely traveling or some such
				is_adult = no
				trait = incapable
			}
			has_character_modifier = emf_mod_recent_succession
		}
	}
	# claimant must be male unless ambitious and the gender succession law of the title is NOT agnatic
	OR = {
		ROOT = { is_female = no }
		AND = {
			ROOT = { trait = ambitious }
			succ_law_title = { NOT = { has_law = agnatic_succession } }
		}
	}
	holder_scope = {
		# not held by theocracy of claimant's religion
		NAND = {
			is_theocracy = yes
			religion = ROOT
		}
		# cannot target nomads for their clan title or primary title
		NAND = {
			is_nomadic = yes
			OR = {
				clan_title = { title = PREVPREV }
				primary_title = { title = PREVPREV }
			}
		}
		# cannot target merchant republics if their capital is a de jure vassal of the title
		NAND = {
			is_merchant_republic = yes
			capital_holding = { de_jure_liege_or_above = PREVPREV }
		}
		# cannot be targeted by another adventurer or have been recently targeted
		NOR = {
			has_character_modifier = adventurer_target_timer
			has_any_opinion_modifier = opinion_targeted_by_adventurer
		}
		# cannot not like the target too much
		NOT = { reverse_opinion = { who = ROOT value = 25 } }
		# cannot target close relatives unless they are hated or the claimant is a bastard
		OR = {
			ROOT = { trait = bastard }
			NOT = { reverse_opinion = { who = ROOT value = -25 } }
			NOT = { is_close_relative = ROOT }
		}
	}
}
