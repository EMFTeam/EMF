# -*- ck2.scripted_triggers -*-

#### TITLE AUTODESTRUCTION #### 

# titles w/ EMF "autodestroy" enabled will be automatically destroyed when they're titular and the holder gains a
# same-rank de jure title or the holder gains a higher-rank title of any sort[*]. only duchies, kingdoms, and empires
# can qualify for autodestroy. autodestruction is not just implemented on the edges of title transfer but also polled on
# yearly pulse. While executing an on_new_holder on_action for a gained de jure title, several possible transient
# conditions can be true under which title destruction should not occur, so the solution is edges + levels.
#
# [*] note that nomads and some other types of special title holders are excluded.
#
# NOTE: this autodestroy mechanic is solely limited to AI title holders! we will not automatically destroy the titles
# of players out from under them, except in those cases in the code that go further than we do with this generalized
# functionality (and all such cases involve the player taking explicit action first).


# is the title THIS subject to EMF autodestroy, given the above conditions?
emf_is_title_autodestroyed = {
	OR = {
		has_title_flag = emf_autodestroy # Dynamically marked for autodestroy (AED can sometimes create empires w/ this)
		title = k_spanish_galicia
		# SWMH & vanilla-specific titles and any assoc. logic will be found in the '_map.txt' versions of this file
		# in at least EMF/ and EMF+SWMH/
		emf_is_title_autodestroyed_swmh = yes
		emf_is_title_autodestroyed_vanilla = yes
	}
}

