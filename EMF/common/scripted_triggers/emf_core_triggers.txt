
#### EMF CORE PROPERTIES TRIGGERS ####

emf_peace_trigger = {
	OR = {
		war = no
		NOT = {
			# Only consider wars in which we're primary defender/attacker
			any_war = {
				OR = {
					defender = { character = PREV }
					attacker = { character = PREV }
				}
			}
		}
	}
}

emf_feminist_religion_trigger = {
	OR = {
		religion = cathar
		religion = messalian
		religion = bogomilist
		religion = mazdaki
	}
}

#### UTILITY/CONVENIENCE TRIGGERS ####

# Version of `completely_controls` that doesn't care about baron-tier control
#
# THIS = Duke/King/Empire title (if titular has same behavior as completely_controls)
# ROOT = Ruler

emf_can_inherit_trigger = {
	NOR = {
		trait = bastard
		trait = monk
		trait = nun
		trait = eunuch
		trait = horse
		AND = { # TODO: verify that this covers all cultures in SWMH which disinherit_from_blinding = yes
			culture_group = byzantine
			trait = blinded
		}
		is_consort = yes # Concubines cannot inherit
		holy_order = yes
		any_liege = { holy_order = yes }
		AND = {
			NOR = {
				religion_group = pagan_group
				religion_group = muslim
			}
			OR = {
				is_theocracy = yes
				AND = { # Nominees
					# TODO: trigger on all of the religions which allow nominating bishops
					is_ruler = no
					any_heir_title = { is_theocracy = yes }
				}
			}
		}
	}
}

emf_minor_title_basic_allowed_to_hold_trigger = {
	OR = {
		is_ruler = no
		primary_title = { temporary = no }
	}
}

emf_hiprio_decision_basic_potential_trigger = {
	OR = {
		AND = {
			multiplayer = yes
			NOT = { is_multiplayer_host_character = yes }
		}
		had_global_flag = { flag = EMF days = 1 }
	}
}

emf_can_disturb_trigger = {
	NOT = { has_character_flag = do_not_disturb }
}

emf_ROOT_completely_controls_counties_trigger = {
	custom_tooltip = {
		text = emf_ctt_completely_controls_counties_trigger
		hidden_tooltip = {
			NOT = {
				any_de_jure_vassal_title = {
					tier = COUNT
					holder_scope = {
						NOR = {
							character = ROOT
							is_liege_or_above = ROOT
						}
					}
				}
			}
		}
	}
}

#### TRIGGERS THAT OUGHT BE PART OF THE LANGUAGE ####
# (or approximations thereof-- obviously they'd not be so obtuse if real triggers)
# Note that we don't use the '_trigger' suffix pattern for these OR the 'emf_' prefix pattern.

under_ROOT = {
	custom_tooltip = {
		text = emf_ctt_under_ROOT
		hidden_tooltip = {
			OR = {
				character = ROOT
				is_liege_or_above = ROOT
			}
		}
	}
}

under_FROM = {
	custom_tooltip = {
		text = emf_ctt_under_FROM
		hidden_tooltip = {
			OR = {
				character = FROM
				is_liege_or_above = FROM
			}
		}
	}
}

owner_under_ROOT = {
	custom_tooltip = {
		text = emf_ctt_owner_under_ROOT
		hidden_tooltip = {
			owner = {
				OR = {
					character = ROOT
					is_liege_or_above = ROOT
				}
			}
		}
	}
	
}

owner_under_FROM = {
	custom_tooltip = {
		text = emf_ctt_owner_under_FROM
		hidden_tooltip = {
			owner = {
				OR = {
					character = FROM
					is_liege_or_above = FROM
				}
			}
		}
	}
}
