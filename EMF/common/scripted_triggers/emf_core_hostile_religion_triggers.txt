# -*- ck2.scripted_triggers -*-
# Audax Validator EnableCommentMetadata

# These triggers would ideally all be 1, but lack of parameterization of scripted triggers = several variants only in scope
# context. They're in a separate file, because a) submodders may want to more easily be able to change the definition of
# which religions are hostile to which (which is an asymmetric relationship in some cases), and b) their redundancy was
# unwelcome in emf_core_triggers.

# Remember, if you change the logic in one trigger, you must change them all to be identical (except for the reference scope).

# THIS = Char considered for hostility to religion of FROM (may be character or province, effectively)
emf_hostile_religion_to_FROM = {
	OR = {
		NOR = {
			religion_group = FROM
			emf_syncretized_religion_with_FROM = yes
		}
		is_heresy_of = FROM
		is_parent_religion = FROM
		AND = {
			has_dharmic_religion_trigger = yes
			FROM = { religion = taoist }
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				religion_group = muslim
				religion_group = pagan_group
				religion = paulician
				religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			NOR = {
				religion = FROM
				is_reformed_religion = FROM
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					religion = bogomilist
					FROM = { religion = catholic }
					is_heretic = yes
				}
				AND = {
					religion = catholic
					FROM = {
						religion = bogomilist
						is_heretic = yes
					}
				}
			}
		}
		AND = {
			OR = {
				religion_group = FROM
				emf_syncretized_religion_with_FROM = yes
			}
			FROM = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			NOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
		}
	}
}

emf_hostile_religion_to_ROOT = {
	OR = {
		NOR = {
			religion_group = ROOT
			emf_syncretized_religion_with_ROOT = yes
		}
		is_heresy_of = ROOT
		is_parent_religion = ROOT
		AND = {
			has_dharmic_religion_trigger = yes
			FROM = { religion = taoist }
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				religion_group = muslim
				religion_group = pagan_group
				religion = paulician
				religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			NOR = {
				religion = ROOT
				is_reformed_religion = ROOT
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					religion = bogomilist
					ROOT = { religion = catholic }
					is_heretic = yes
				}
				AND = {
					religion = catholic
					ROOT = {
						religion = bogomilist
						is_heretic = yes
					}
				}
			}
		}
		AND = {
			OR = {
				religion_group = ROOT
				emf_syncretized_religion_with_ROOT = yes
			}
			ROOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			NOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
		}
	}
}

emf_hostile_religion_to_PREV = {
	OR = {
		NOR = {
			religion_group = PREV
			emf_syncretized_religion_with_PREV = yes
		}
		is_heresy_of = PREV
		is_parent_religion = PREV
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				religion_group = muslim
				religion_group = pagan_group
				religion = paulician
				religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			NOR = {
				religion = PREV
				is_reformed_religion = PREV
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					religion = bogomilist
					PREV = { religion = catholic }
					is_heretic = yes
				}
				AND = {
					religion = catholic
					PREV = {
						religion = bogomilist
						is_heretic = yes
					}
				}
			}
		}
		AND = {
			OR = {
				religion_group = PREV
				emf_syncretized_religion_with_PREV = yes
			}
			PREV = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			NOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
		}
	}
}

emf_hostile_religion_to_target_ruler = {
	OR = {
		NOR = {
			religion_group = event_target:target_ruler
			event_target:target_ruler = { emf_PREV_is_syncretized_with_religion = yes }
		}
		is_heresy_of = event_target:target_ruler
		is_parent_religion = event_target:target_ruler
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				religion_group = muslim
				religion_group = pagan_group
				religion = paulician
				religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			NOR = {
				religion = event_target:target_ruler
				is_reformed_religion = event_target:target_ruler
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					religion = bogomilist
					event_target:target_ruler = { religion = catholic }
					is_heretic = yes
				}
				AND = {
					religion = catholic
					event_target:target_ruler = {
						religion = bogomilist
						is_heretic = yes
					}
				}
			}
		}
		AND = {
			OR = {
				religion_group = event_target:target_ruler
				event_target:target_ruler = { emf_PREV_is_syncretized_with_religion = yes }
			}
			event_target:target_ruler = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			NOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
		}
	}
}

# These triggers are similar to those above, but work off of THIS's true religion vs. what THIS knows about FROM's religion
emf_hostile_true_religion_to_FROM = {
	OR = {
		NOT = {
			trigger_if = {
				limit = {
					FROM = { has_secret_religion = yes }
					can_see_secret_religion = FROM
				}
				OR = {
					true_religion_group = FROM
					emf_syncretized_true_religion_with_FROMs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = FROM target_type = public }
					emf_syncretized_true_religion_with_FROM = yes
				}
			}
		}
		trigger_if = {
			limit = {
				has_secret_religion = no
				OR = {
					FROM = { has_secret_religion = no }
					NOT = { can_see_secret_religion = FROM }
				}
			}
			OR = {
				is_heresy_of = FROM
				is_parent_religion = FROM
			}
		}
		# Workarounds because is_heresy_of and is_parent_religion require character scopes and have no secret religion variant
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				OR = {
					FROM = { has_secret_religion = no }
					NOT = { can_see_secret_religion = FROM }
				}
				true_religion_group = { target = FROM target_type = public }
				NOT = { true_religion = { target = FROM target_type = public } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				OR = {
					is_heresy_of = FROM
					is_parent_religion = FROM
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = no
				FROM = { has_secret_religion = yes }
				can_see_secret_religion = FROM
				religion_group = { target = FROM target_type = true }
				NOT = { religion = { target = FROM target_type = true } }
			}
			any_character = {
				religion = { target = FROM target_type = true }
				OR = {
					is_heresy_of = PREV
					is_parent_religion = PREV
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				FROM = { has_secret_religion = yes }
				can_see_secret_religion = FROM
				true_religion_group = { target = FROM target_type = true }
				NOT = { true_religion = { target = FROM target_type = true } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				any_character = {
					religion = { target = FROM target_type = true }
					OR = {
						is_heresy_of = PREV
						is_parent_religion = PREV
					}
				}
			}
		}
		AND = {
			has_dharmic_true_religion_trigger = yes
			trigger_if = {
				limit = {
					FROM = { has_secret_religion = yes }
					can_see_secret_religion = FROM
				}
				FROM = { true_religion = taoist }
			}
			trigger_else = {
				FROM = { religion = taoist }
			}
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				true_religion_group = muslim
				true_religion_group = pagan_group
				true_religion = paulician
				true_religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			trigger_if = {
				limit = {
					FROM = { has_secret_religion = yes }
					can_see_secret_religion = FROM
				}
				NOR = {
					true_religion = FROM
					AND = {
						true_religion = norse_pagan_reformed
						FROM = { true_religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						FROM = { true_religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						FROM = { true_religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						FROM = { true_religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						FROM = { true_religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						FROM = { true_religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						FROM = { true_religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						FROM = { true_religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						FROM = { true_religion = hellenic_pagan }
					}
				}
			}
			trigger_else = {
				NOR = {
					true_religion = { target = FROM target_type = public }
					AND = {
						true_religion = norse_pagan_reformed
						FROM = { religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						FROM = { religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						FROM = { religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						FROM = { religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						FROM = { religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						FROM = { religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						FROM = { religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						FROM = { religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						FROM = { religion = hellenic_pagan }
					}
				}
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					true_religion = bogomilist
					trigger_if = {
						limit = {
							FROM = { has_secret_religion = yes }
							can_see_secret_religion = FROM
						}
						FROM = { true_religion = catholic }
					}
					trigger_else = {
						FROM = { religion = catholic }
					}
					any_character = {
						religion = bogomilist
						is_heretic = yes
					}
				}
				AND = {
					true_religion = catholic
					trigger_if = {
						limit = {
							FROM = { has_secret_religion = yes }
							can_see_secret_religion = FROM
						}
						FROM = {
							true_religion = bogomilist
							any_character = {
								religion = bogomilist
								is_heretic = yes
							}
						}
					}
					trigger_else = {
						FROM = {
							religion = bogomilist
							is_heretic = yes
						}
					}
				}
			}
		}
		AND = {
			trigger_if = {
				limit = {
					FROM = { has_secret_religion = yes }
					can_see_secret_religion = FROM
				}
				OR = {
					true_religion_group = FROM
					emf_syncretized_true_religion_with_FROMs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = FROM target_type = public }
					emf_syncretized_true_religion_with_FROM = yes
				}
			}
			FROM = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			is_devil_worshiper_trigger = no
		}
	}
}

emf_hostile_true_religion_to_ROOT = {
	OR = {
		NOT = {
			trigger_if = {
				limit = {
					ROOT = { has_secret_religion = yes }
					can_see_secret_religion = ROOT
				}
				OR = {
					true_religion_group = ROOT
					emf_syncretized_true_religion_with_ROOTs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = ROOT target_type = public }
					emf_syncretized_true_religion_with_ROOT = yes
				}
			}
		}
		trigger_if = {
			limit = {
				has_secret_religion = no
				OR = {
					ROOT = { has_secret_religion = no }
					NOT = { can_see_secret_religion = ROOT }
				}
			}
			OR = {
				is_heresy_of = ROOT
				is_parent_religion = ROOT
			}
		}
		# Workarounds because is_heresy_of and is_parent_religion require character scopes and have no secret religion variant
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				OR = {
					ROOT = { has_secret_religion = no }
					NOT = { can_see_secret_religion = ROOT }
				}
				true_religion_group = { target = ROOT target_type = public }
				NOT = { true_religion = { target = ROOT target_type = public } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				OR = {
					is_heresy_of = ROOT
					is_parent_religion = ROOT
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = no
				ROOT = { has_secret_religion = yes }
				can_see_secret_religion = ROOT
				religion_group = { target = ROOT target_type = true }
				NOT = { religion = { target = ROOT target_type = true } }
			}
			any_character = {
				religion = { target = ROOT target_type = true }
				OR = {
					is_heresy_of = PREV
					is_parent_religion = PREV
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				ROOT = { has_secret_religion = yes }
				can_see_secret_religion = ROOT
				true_religion_group = { target = ROOT target_type = true }
				NOT = { true_religion = { target = ROOT target_type = true } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				any_character = {
					religion = { target = ROOT target_type = true }
					OR = {
						is_heresy_of = PREV
						is_parent_religion = PREV
					}
				}
			}
		}
		AND = {
			has_dharmic_true_religion_trigger = yes
			trigger_if = {
				limit = {
					ROOT = { has_secret_religion = yes }
					can_see_secret_religion = ROOT
				}
				ROOT = { true_religion = taoist }
			}
			trigger_else = {
				ROOT = { religion = taoist }
			}
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				true_religion_group = muslim
				true_religion_group = pagan_group
				true_religion = paulician
				true_religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			trigger_if = {
				limit = {
					ROOT = { has_secret_religion = yes }
					can_see_secret_religion = ROOT
				}
				NOR = {
					true_religion = ROOT
					AND = {
						true_religion = norse_pagan_reformed
						ROOT = { true_religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						ROOT = { true_religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						ROOT = { true_religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						ROOT = { true_religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						ROOT = { true_religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						ROOT = { true_religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						ROOT = { true_religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						ROOT = { true_religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						ROOT = { true_religion = hellenic_pagan }
					}
				}
			}
			trigger_else = {
				NOR = {
					true_religion = { target = ROOT target_type = public }
					AND = {
						true_religion = norse_pagan_reformed
						ROOT = { religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						ROOT = { religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						ROOT = { religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						ROOT = { religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						ROOT = { religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						ROOT = { religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						ROOT = { religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						ROOT = { religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						ROOT = { religion = hellenic_pagan }
					}
				}
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					true_religion = bogomilist
					trigger_if = {
						limit = {
							ROOT = { has_secret_religion = yes }
							can_see_secret_religion = ROOT
						}
						ROOT = { true_religion = catholic }
					}
					trigger_else = {
						ROOT = { religion = catholic }
					}
					any_character = {
						religion = bogomilist
						is_heretic = yes
					}
				}
				AND = {
					true_religion = catholic
					trigger_if = {
						limit = {
							ROOT = { has_secret_religion = yes }
							can_see_secret_religion = ROOT
						}
						ROOT = {
							true_religion = bogomilist
							any_character = {
								religion = bogomilist
								is_heretic = yes
							}
						}
					}
					trigger_else = {
						ROOT = {
							religion = bogomilist
							is_heretic = yes
						}
					}
				}
			}
		}
		AND = {
			trigger_if = {
				limit = {
					ROOT = { has_secret_religion = yes }
					can_see_secret_religion = ROOT
				}
				OR = {
					true_religion_group = ROOT
					emf_syncretized_true_religion_with_ROOTs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = ROOT target_type = public }
					emf_syncretized_true_religion_with_ROOT = yes
				}
			}
			ROOT = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			is_devil_worshiper_trigger = no
		}
	}
}

emf_hostile_true_religion_to_PREV = {
	OR = {
		NOT = {
			trigger_if = {
				limit = {
					PREV = { has_secret_religion = yes }
					can_see_secret_religion = PREV
				}
				OR = {
					true_religion_group = PREV
					emf_syncretized_true_religion_with_PREVs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = PREV target_type = public }
					emf_syncretized_true_religion_with_PREV = yes
				}
			}
		}
		trigger_if = {
			limit = {
				has_secret_religion = no
				OR = {
					PREV = { has_secret_religion = no }
					NOT = { can_see_secret_religion = PREV }
				}
			}
			OR = {
				is_heresy_of = PREV
				is_parent_religion = PREV
			}
		}
		# Workarounds because is_heresy_of and is_parent_religion require character scopes and have no secret religion variant
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				OR = {
					PREV = { has_secret_religion = no }
					NOT = { can_see_secret_religion = PREV }
				}
				true_religion_group = { target = PREV target_type = public }
				NOT = { true_religion = { target = PREV target_type = public } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				OR = {
					is_heresy_of = PREVPREV
					is_parent_religion = PREVPREV
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = no
				PREV = { has_secret_religion = yes }
				can_see_secret_religion = PREV
				religion_group = { target = PREV target_type = true }
				NOT = { religion = { target = PREV target_type = true } }
			}
			any_character = {
				religion = { target = PREVPREV target_type = true }
				OR = {
					is_heresy_of = PREV
					is_parent_religion = PREV
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				PREV = { has_secret_religion = yes }
				can_see_secret_religion = PREV
				true_religion_group = { target = PREV target_type = true }
				NOT = { true_religion = { target = PREV target_type = true } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				any_character = {
					religion = { target = PREVPREVPREV target_type = true }
					OR = {
						is_heresy_of = PREV
						is_parent_religion = PREV
					}
				}
			}
		}
		AND = {
			has_dharmic_true_religion_trigger = yes
			trigger_if = {
				limit = {
					PREV = { has_secret_religion = yes }
					can_see_secret_religion = PREV
				}
				PREV = { true_religion = taoist }
			}
			trigger_else = {
				PREV = { religion = taoist }
			}
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				true_religion_group = muslim
				true_religion_group = pagan_group
				true_religion = paulician
				true_religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			trigger_if = {
				limit = {
					PREV = { has_secret_religion = yes }
					can_see_secret_religion = PREV
				}
				NOR = {
					true_religion = PREV
					AND = {
						true_religion = norse_pagan_reformed
						PREV = { true_religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						PREV = { true_religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						PREV = { true_religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						PREV = { true_religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						PREV = { true_religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						PREV = { true_religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						PREV = { true_religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						PREV = { true_religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						PREV = { true_religion = hellenic_pagan }
					}
				}
			}
			trigger_else = {
				NOR = {
					true_religion = { target = PREV target_type = public }
					AND = {
						true_religion = norse_pagan_reformed
						PREV = { religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						PREV = { religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						PREV = { religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						PREV = { religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						PREV = { religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						PREV = { religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						PREV = { religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						PREV = { religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						PREV = { religion = hellenic_pagan }
					}
				}
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					true_religion = bogomilist
					trigger_if = {
						limit = {
							PREV = { has_secret_religion = yes }
							can_see_secret_religion = PREV
						}
						PREV = { true_religion = catholic }
					}
					trigger_else = {
						PREV = { religion = catholic }
					}
					any_character = {
						religion = bogomilist
						is_heretic = yes
					}
				}
				AND = {
					true_religion = catholic
					trigger_if = {
						limit = {
							PREV = { has_secret_religion = yes }
							can_see_secret_religion = PREV
						}
						PREV = {
							true_religion = bogomilist
							any_character = {
								religion = bogomilist
								is_heretic = yes
							}
						}
					}
					trigger_else = {
						PREV = {
							religion = bogomilist
							is_heretic = yes
						}
					}
				}
			}
		}
		AND = {
			trigger_if = {
				limit = {
					PREV = { has_secret_religion = yes }
					can_see_secret_religion = PREV
				}
				OR = {
					true_religion_group = PREV
					emf_syncretized_true_religion_with_PREVs_true_religion = yes
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = PREV target_type = public }
					emf_syncretized_true_religion_with_PREV = yes
				}
			}
			PREV = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			is_devil_worshiper_trigger = no
		}
	}
}

emf_hostile_true_religion_to_target_ruler = {
	OR = {
		NOT = {
			trigger_if = {
				limit = {
					event_target:target_ruler = { has_secret_religion = yes }
					can_see_secret_religion = event_target:target_ruler
				}
				OR = {
					true_religion_group = event_target:target_ruler
					event_target:target_ruler = { emf_PREV_true_religion_is_syncretized_with_true_religion = yes }
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = event_target:target_ruler target_type = public }
					event_target:target_ruler = { emf_PREV_true_religion_is_syncretized_with_religion = yes }
				}
			}
		}
		trigger_if = {
			limit = {
				has_secret_religion = no
				OR = {
					event_target:target_ruler = { has_secret_religion = no }
					NOT = { can_see_secret_religion = event_target:target_ruler }
				}
			}
			OR = {
				is_heresy_of = event_target:target_ruler
				is_parent_religion = event_target:target_ruler
			}
		}
		# Workarounds because is_heresy_of and is_parent_religion require character scopes and have no secret religion variant
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				OR = {
					event_target:target_ruler = { has_secret_religion = no }
					NOT = { can_see_secret_religion = event_target:target_ruler }
				}
				true_religion_group = { target = event_target:target_ruler target_type = public }
				NOT = { true_religion = { target = event_target:target_ruler target_type = public } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				OR = {
					is_heresy_of = event_target:target_ruler
					is_parent_religion = event_target:target_ruler
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = no
				event_target:target_ruler = { has_secret_religion = yes }
				can_see_secret_religion = event_target:target_ruler
				religion_group = { target = event_target:target_ruler target_type = true }
				NOT = { religion = { target = event_target:target_ruler target_type = true } }
			}
			any_character = {
				religion = { target = event_target:target_ruler target_type = true }
				OR = {
					is_heresy_of = PREV
					is_parent_religion = PREV
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_secret_religion = yes
				event_target:target_ruler = { has_secret_religion = yes }
				can_see_secret_religion = event_target:target_ruler
				true_religion_group = { target = event_target:target_ruler target_type = true }
				NOT = { true_religion = { target = event_target:target_ruler target_type = true } }
			}
			any_character = {
				religion = { target = PREV target_type = true }
				any_character = {
					religion = { target = event_target:target_ruler target_type = true }
					OR = {
						is_heresy_of = PREV
						is_parent_religion = PREV
					}
				}
			}
		}
		AND = {
			has_dharmic_true_religion_trigger = yes
			trigger_if = {
				limit = {
					event_target:target_ruler = { has_secret_religion = yes }
					can_see_secret_religion = event_target:target_ruler
				}
				event_target:target_ruler = { true_religion = taoist }
			}
			trigger_else = {
				event_target:target_ruler = { religion = taoist }
			}
		}
		AND = { # Hostile within group (but for reformed religions, not hostile to unreformed version)
			OR = {
				true_religion_group = muslim
				true_religion_group = pagan_group
				true_religion = paulician
				true_religion_scope = {
					has_religion_feature = religion_syncretic_muslim
				}
			}
			trigger_if = {
				limit = {
					event_target:target_ruler = { has_secret_religion = yes }
					can_see_secret_religion = event_target:target_ruler
				}
				NOR = {
					true_religion = event_target:target_ruler
					AND = {
						true_religion = norse_pagan_reformed
						event_target:target_ruler = { true_religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						event_target:target_ruler = { true_religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						event_target:target_ruler = { true_religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						event_target:target_ruler = { true_religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						event_target:target_ruler = { true_religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						event_target:target_ruler = { true_religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						event_target:target_ruler = { true_religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						event_target:target_ruler = { true_religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						event_target:target_ruler = { true_religion = hellenic_pagan }
					}
				}
			}
			trigger_else = {
				NOR = {
					true_religion = { target = event_target:target_ruler target_type = public }
					AND = {
						true_religion = norse_pagan_reformed
						event_target:target_ruler = { religion = norse_pagan }
					}
					AND = {
						true_religion = tengri_pagan_reformed
						event_target:target_ruler = { religion = tengri_pagan }
					}
					AND = {
						true_religion = baltic_pagan_reformed
						event_target:target_ruler = { religion = baltic_pagan }
					}
					AND = {
						true_religion = finnish_pagan_reformed
						event_target:target_ruler = { religion = finnish_pagan }
					}
					AND = {
						true_religion = aztec_reformed
						event_target:target_ruler = { religion = aztec }
					}
					AND = {
						true_religion = slavic_pagan_reformed
						event_target:target_ruler = { religion = slavic_pagan }
					}
					AND = {
						true_religion = west_african_pagan_reformed
						event_target:target_ruler = { religion = west_african_pagan }
					}
					AND = {
						true_religion = zun_pagan_reformed
						event_target:target_ruler = { religion = zun_pagan }
					}
					AND = {
						true_religion = hellenic_pagan_reformed
						event_target:target_ruler = { religion = hellenic_pagan }
					}
				}
			}
		}
		AND = { # Heresies of multiple parent religions
			OR = {
				AND = {
					true_religion = bogomilist
					trigger_if = {
						limit = {
							event_target:target_ruler = { has_secret_religion = yes }
							can_see_secret_religion = event_target:target_ruler
						}
						event_target:target_ruler = { true_religion = catholic }
					}
					trigger_else = {
						event_target:target_ruler = { religion = catholic }
					}
					any_character = {
						religion = bogomilist
						is_heretic = yes
					}
				}
				AND = {
					true_religion = catholic
					trigger_if = {
						limit = {
							event_target:target_ruler = { has_secret_religion = yes }
							can_see_secret_religion = event_target:target_ruler
						}
						event_target:target_ruler = {
							true_religion = bogomilist
							any_character = {
								religion = bogomilist
								is_heretic = yes
							}
						}
					}
					trigger_else = {
						event_target:target_ruler = {
							religion = bogomilist
							is_heretic = yes
						}
					}
				}
			}
		}
		AND = {
			trigger_if = {
				limit = {
					event_target:target_ruler = { has_secret_religion = yes }
					can_see_secret_religion = event_target:target_ruler
				}
				OR = {
					true_religion_group = event_target:target_ruler
					event_target:target_ruler = { emf_PREV_true_religion_is_syncretized_with_true_religion = yes }
				}
			}
			trigger_else = {
				OR = {
					true_religion_group = { target = event_target:target_ruler target_type = public }
					event_target:target_ruler = { emf_PREV_true_religion_is_syncretized_with_religion = yes }
				}
			}
			event_target:target_ruler = {
				# Audax Validator "." Ignore_NEXT
				has_character_modifier = known_satanist
			}
			is_devil_worshiper_trigger = no
		}
	}
}
