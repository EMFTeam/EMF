# -*- ck2.decisions -*-
targetted_decisions = {
	emf_customize_ruler_dynasty = {
		only_playable = yes
		filter = all
		ai_target_filter = self
		
		from_potential = {
			ai = no
			trait = emf_customize_ruler
			NOR = {
				has_character_flag = customizing_ruler
				had_global_flag = { flag = EMF days = 15 }
			}
		}
		potential = {
			NOR = {
				dynasty = FROM
				dynasty = none
			}
		}
		allow = {
			culture_group = FROM
		}
		effect = {
			FROM = {
				set_character_flag = customizing_ruler
				if = {
					limit = { trait = bastard }
					character_event = { id = emf_startup.1000 tooltip = CUSTOMIZE_RULER_BASTARD }
					break = yes
				}
				character_event = { id = emf_startup.1000 tooltip = CUSTOMIZE_RULER_CHECK }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
}

decisions = {
	emf_toggle_customization = {
		only_playable = yes
		potential = {
			ai = no
			OR = {
				multiplayer = no
				is_multiplayer_host_character = yes
			}
		}
		effect = {
			if = {
				limit = { NOT = { has_character_flag = emf_toggle_customization_off } }
				set_character_flag = emf_toggle_customization_off
				break = yes
			}
			if = {
				limit = { has_character_flag = emf_toggle_customization_off }
				clr_character_flag = emf_toggle_customization_off
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	# New World Order
	emf_customize_nwo = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
		}
		allow = {
		}
		effect = {
			custom_tooltip = {
				text = emf_ctt_nwo_customize
			}
			hidden_tooltip = {
				e_hip = { owner = { character_event = { id = emf_nwo.0 } } }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	# Convert to Merchant Republic
	emf_customize_mr = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
			is_merchant_republic = no
		}
		allow = {
			is_adult = yes
			is_female = no
			OR = {
				is_feudal = yes
				is_republic = yes
			}
			NOT = { religion_group = muslim }
			capital_scope = {
				port = yes
				OR = {
					has_empty_holding = yes
					any_province_holding = {
						holding_type = city
					}
				}
			}
		}
		effect = {
			custom_tooltip = {
				text = emf_ctt_mr_customize
			}
			hidden_tooltip = {
				narrative_event = { id = emf_mr.1 }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	# Feudalize Tribes
	emf_customize_feudalizer = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
			NOT = { has_global_flag = emf_feudalizer }
		}
		allow = {
		}
		effect = {
			custom_tooltip = {
				text = emf_ctt_feudalizer_customize
			}
			hidden_tooltip = {
				e_hip = { owner = { character_event = { id = emf_feudalizer.0 } } }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	# Add Ahistorical Empires
	emf_customize_aae = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
			NOT = { has_global_flag = emf_ahistorical_empires }
		}
		effect = {
			custom_tooltip = {
				text = emf_customize_aae_desc
				hidden_tooltip = {
					e_hip = { owner = { character_event = { id = emf_empires.21 } } }
				}
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	# Remove Ahistorical Empires
	emf_customize_nae = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
			has_global_flag = emf_ahistorical_empires
		}
		effect = {
			custom_tooltip = {
				text = emf_customize_nae_desc
				hidden_tooltip = {
					e_hip = { owner = { character_event = { id = emf_empires.20 } } }
				}
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	emf_random_rulers = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
			NOT = { has_global_flag = random_rulers }
		}
		effect = {
			custom_tooltip = {
				text = emf_ctt_random_rulers
			}
			hidden_tooltip = {
				narrative_event = { id = emf_rr.0 }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	emf_lucky_rulers = {
		only_playable = yes
		potential = {
			ai = no
			NOT = { has_character_flag = emf_toggle_customization_off }
			emf_hiprio_decision_basic_potential_trigger = no
		}
		effect = {
			hidden_tooltip = {
				character_event = { id = emf_lucky.0 }
			}	
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	emf_customize_mr_rules = {
		only_playable = yes
		potential = {
			ai = no
			OR = {
				multiplayer = no
				is_multiplayer_host_character = yes
			}
			NOT = { has_character_flag = emf_toggle_customization_off }
		}
		effect = {
			custom_tooltip = {
				text = emf_mr_ctt_customize_rules
			}
			hidden_tooltip = {
				character_event = { id = emf_mr.100 }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	emf_customize_no_cooldowns = {
		only_playable = yes
		potential = {
			ai = no
			OR = {
				multiplayer = no
				is_multiplayer_host_character = yes
			}
			NOT = { has_character_flag = emf_toggle_customization_off }
			NOT = { has_global_flag = emf_no_cooldowns }
		}
		effect = {
			custom_tooltip = {
				text = emf_ctt_no_cooldowns
			}
			hidden_tooltip = {
				set_global_flag = emf_no_cooldowns
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
}

