decisions = {
	adventurer_warn_target = {
		potential = {
			ROOT = { adv_is_valid_trigger = yes }
			ai = yes
		}
		allow = {
			NOT = { has_character_flag = warned_adventurer_target }
			had_character_flag = { flag = planning_claimant_adventure days = 180 }
			OR = {
				wealth = 200
				AND = {
					wealth = 100
					diplomacy = 10
					martial = 10
					OR = {
						diplomacy = 16
						trait = genius
						trait = brilliant_strategist
					}
				}
				AND = {
					wealth = 100
					any_opinion_modifier_target = {
						has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer }
						any_vassal = {
							leads_faction = faction_pretender
							supported_claimant = { character = ROOT }
							faction_power = {
								faction = faction_pretender
								power = 0.5
							}
						}
					}
				}
			}
		}
		effect = {
			set_character_flag = warned_adventurer_target
			random_opinion_modifier_target = {
				limit = {
					independent = yes
					demesne_size = 1
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target }
					has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer }
					any_demesne_title = { claimed_by = ROOT }
				}
				character_event = { id = TOG.1240 }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	abandon_adventure = {
		potential = {
			has_character_modifier = planning_claimant_adventure
			NOT = { has_character_flag = began_adventure }
			ai = yes
		}
		allow = {
			OR = {
				any_demesne_title = { adventurer = no }
				trait = incapable
				NOT = {
					any_opinion_modifier_target = {
						independent = yes
						demesne_size = 1
						has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer }
						any_demesne_title = { claimed_by = ROOT }
					}
				}
			}
		}
		effect = {
			# If this is a timeout, tell the targeted ruler
			if = {
				limit = {
					NOT = { any_demesne_title = { adventurer = no } }
					NOT = { trait = incapable }
					any_opinion_modifier_target = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target }
						NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer } }
						any_demesne_title = { claimed_by = ROOT }
					}
				}
				random_opinion_modifier_target = {
					limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target } }
					log = "[Root.GetBestName] has abandoned [Root.GetHerHis] adventure against [This.GetBestName] due to a time out"
					character_event = { id = TOG.1241 }
				}
			}
			# If the adventurer has become incapable, tell the targeted ruler
			if = {
				limit = {
					trait = incapable
					any_opinion_modifier_target = {
						has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer }
					}
				}
				random_opinion_modifier_target = {
					limit = { has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer } }
					log = "[Root.GetBestName] has abandoned [Root.GetHerHis] adventure against [This.GetBestName] due to becoming incapable"
					character_event = { id = TOG.1242 }
				}
			}
			# If the adventurer has become a ruler, tell the targeted ruler
			if = {
				limit = {
					NOT = { trait = incapable }
					any_demesne_title = { adventurer = no }
					any_opinion_modifier_target = {
						has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer }
					}
				}
				random_opinion_modifier_target = {
					limit = { has_opinion_modifier = { who = ROOT modifier = opinion_targeted_by_adventurer } }
					log = "[Root.GetBestName] has abandoned [Root.GetHerHis] adventure against [This.GetBestName] due to getting a new title"
					character_event = { id = TOG.1243 }
				}
			}
			
			adv_find_friendly_court_effect = yes
			
			# remove all adventurer statuses
			log = "---> [Root.GetBestName] will retire to the court of [new_court_home.GetBestName]"
			ROOT = { adv_abandon_adventure_effect = yes }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	launch_adventure = {
		potential = {
			ROOT = { adv_is_valid_trigger = yes }
			ai = yes
			war = no
		}
		allow = {
			# has been planning for a minimum of one year
			had_character_flag = { flag = planning_claimant_adventure days = 365 }
			# is not disqualified
			NOR = {
				trait = wounded
				is_ill = yes
				has_character_flag = began_adventure
			}
			OR = {
				# has enough wealth on their own
				wealth = 400
				# has half the wealth and is very capable
				AND = {
					wealth = 200
					diplomacy = 10
					martial = 10
					OR = {
						diplomacy = 16
						trait = genius
						trait = brilliant_strategist
					}
				}
				# has half the wealth and the target has a faction ready to support them
				AND = {
					wealth = 200
					any_opinion_modifier_target = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target }
						any_vassal = {
							leads_faction = faction_pretender
							supported_claimant = { character = ROOT }
							faction_power = { faction = faction_pretender power = 0.5 }
						}
					}
				}
			}
		}
		effect = {
			set_character_flag = began_adventure
			remove_character_modifier = do_not_disturb
			add_character_modifier = { name = do_not_disturb duration = 15 hidden = yes }
			# begin the war
			character_event = { id = TOG.1246 days = 15 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.05
				always = yes
			}
			modifier = {
				factor = 0.75
				martial = 10
			}
			modifier = {
				factor = 0.75
				martial = 12
			}
			modifier = {
				factor = 0.75
				martial = 14
			}
			modifier = {
				factor = 0.75
				martial = 16
			}
			modifier = {
				factor = 0.75
				martial = 18
			}
			modifier = {
				factor = 0.75
				martial = 20
			}
			modifier = {
				factor = 1.5
				NOT = { martial = 8 }
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 5
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
			modifier = {
				factor = 5
				had_character_flag = { flag = planning_claimant_adventure days = 730 }
			}
			modifier = {
				factor = 5
				had_character_flag = { flag = planning_claimant_adventure days = 900 }
			}
			modifier = {
				factor = 5
				had_character_flag = { flag = planning_claimant_adventure days = 1000 }
			}
		}
	}
}

