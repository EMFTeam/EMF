targetted_decisions = {

	recruit_faction_member = {
		ai_target_filter = realm
		filter = realm
		
		from_potential = {
			is_playable = yes
			is_adult = yes
			independent = no
			prisoner = no
			pf_leader_trigger = yes
		}
		potential = {
			is_playable = yes
			is_adult = yes
			independent = no
			prisoner = no
			same_liege = FROM
			NOR = {
				character = FROM
				pf_leader_trigger = yes
				trait = incapable
				liege = { current_heir = { character = ROOT } }
				has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction }
			}
			OR = {
				FROM = { NOT = { leads_faction = faction_court } }
				NOR = {
					in_faction = faction_court
					has_character_flag = faction_court_supporter
				}
			}
			OR = {
				FROM = { NOT = { leads_faction = faction_prosperity } }
				NOR = {
					in_faction = faction_prosperity
					has_character_flag = faction_prosperity_supporter
				}
			}
			OR = {
				FROM = { NOT = { leads_faction = faction_glory } }
				NOR = {
					in_faction = faction_glory
					has_character_flag = faction_glory_supporter
				}
			}
			OR = {
				FROM = { NOT = { leads_faction = faction_tradition } }
				NOR = {
					in_faction = faction_tradition
					has_character_flag = faction_tradition_supporter
					trait = cynical
					trait = excommunicated
					NOT = { liege = { religion = ROOT } }
				}
			}
		}
		allow = {
			NOT = { is_rival = FROM }
			is_ill = no
			custom_tooltip = {
				text = IS_NOT_BUSY
				hidden_tooltip = {
					war = no
					in_command = no
					NOT = { trait = in_hiding }
					NOT = { has_character_flag = do_not_disturb }
				}
			}
			custom_tooltip = {
				text = NOT_RECENTLY_RECRUITED
				hidden_tooltip = {
					NOT = { has_character_modifier = recruit_faction_target_timer }
				}
			}
			custom_tooltip = {
				text = NOT_REBUFFED_RECRUIT
				hidden_tooltip = {
					FROM = {
						NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_rebuffed_recruitment } }
					}
				}
			}
			FROM = {
				is_ill = no
				custom_tooltip = {
					text = IS_NOT_BUSY
					hidden_tooltip = {
						war = no
						in_command = no
						NOT = { trait = in_hiding }
						NOT = { has_character_flag = do_not_disturb }
					}
				}
				custom_tooltip = {
					text = NOT_RECENTLY_RECRUIT
					hidden_tooltip = {
						NOT = { has_character_modifier = recruit_faction_timer }
					}
				}
			}
		}
		effect = {
			character_event = { id = PlusFaction.111 days = 15 tooltip = ATTEMPT_RECRUIT_FACTION }
			hidden_tooltip = {
				add_character_modifier = {
					name = recruit_faction_target_timer
					duration = 365
					hidden = yes
				}
				FROM = {
					character_event = { id = PlusFaction.110 }
					hidden_tooltip = {
						set_character_flag = do_not_disturb
						character_event = { id = PlusFaction.1100 days = 15 } #clear flag
					}
					add_character_modifier = {
						name = recruit_faction_timer
						duration = 365
						hidden = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
				always = yes
			}
			modifier = {
				factor = 0.5
				pf_member_trigger = yes
				FROM = {
					NOR = {
						trait = ambitious
						trait = brave
						trait = diligent
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					OR = {
						trait = content
						trait = craven
						trait = humble
					}
				}
			}
			modifier = {
				factor = 10
				OR = {
					is_close_relative = FROM
					opinion = { who = FROM value = 50 }
				}
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 0
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
		}
	}
	
	court_faction_member = {
		ai_target_filter = realm
		filter = realm
		
		from_potential = {
			is_playable = yes
			is_adult = yes
			independent = no
			prisoner = no
			pf_member_trigger = yes
		}
		potential = {
			ai = yes
			is_adult = yes
			is_playable = yes
			independent = no
			prisoner = no
			same_liege = FROM
			NOR = {
				character = FROM
				trait = incapable
			}
			OR = {
				AND = {
					in_faction = faction_court
					FROM = { in_faction = faction_court }
				}
				AND = {
					in_faction = faction_prosperity
					FROM = { in_faction = faction_prosperity }
				}
				AND = {
					in_faction = faction_glory
					FROM = { in_faction = faction_glory }
				}
				AND = {
					in_faction = faction_tradition
					FROM = { in_faction = faction_tradition }
				}
			}
		}
		allow = {
			NOT = { is_rival = FROM }
			is_ill = no
			custom_tooltip = {
				text = IS_NOT_BUSY
				hidden_tooltip = {
					war = no
					in_command = no
					NOT = { trait = in_hiding }
					NOT = { has_character_flag = do_not_disturb }
				}
			}
			custom_tooltip = {
				text = NOT_RECENTLY_COURTED
				hidden_tooltip = {
					NOT = { has_character_modifier = court_faction_target_timer }
				}
			}
			custom_tooltip = {
				text = NOT_BAD_COURT_RECENT
				hidden_tooltip = {
					opinion = { who = FROM value = -50 }
					NOT = { has_opinion_modifier = { who = ROOT modifier = unpleasant_meeting } }
				}
			}
			FROM = {
				is_ill = no
				custom_tooltip = {
					text = IS_NOT_BUSY
					hidden_tooltip = {
						war = no
						in_command = no
						NOT = { trait = in_hiding }
						NOT = { has_character_flag = do_not_disturb }
					}
				}
				custom_tooltip = {
					text = NOT_RECENTLY_COURT
					hidden_tooltip = {
						NOT = { has_character_modifier = court_faction_timer }
					}
				}
			}
		}
		effect = {
			FROM = { character_event = { id = PlusFaction.125 tooltip = ATTEMPT_COURT_FACTION } }
			hidden_tooltip = {
				add_character_modifier = {
					name = court_faction_target_timer
					duration = 365
					hidden = yes
				}
				FROM = {
					hidden_tooltip = {
						set_character_flag = do_not_disturb
						character_event = { id = PlusFaction.1100 days = 15 } #clear flag
					}
					add_character_modifier = {
						name = court_faction_timer
						duration = 365
						hidden = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
				always = yes
			}
			modifier = {
				factor = 10
				FROM = { trait = gregarious }
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = ambitious
						trait = diligent
						diplomacy = 15
					}
				}
			}
			modifier = {
				factor = 2
				higher_tier_than = COUNT
			}
			modifier = {
				factor = 2
				higher_tier_than = DUKE
			}
			modifier = {
				factor = 0.5
				lower_tier_than = COUNT
			}
			modifier = {
				factor = 0.5
				FROM = { NOT = { diplomacy = 8 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0
				pf_leader_trigger = yes
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = shy
						trait = paranoid
						trait = slothful
					}
				}
			}
		}
	}
}

decisions = {

	hold_court_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			ai = no
			leads_faction = faction_court
			pf_war_trait_trigger = no
			any_faction_backer = { in_faction = faction_court }
			had_global_flag = { flag = HIP days = 730 }
			NOR = {
				has_character_flag = faction_meeting_called
				has_character_flag = faction_meeting_begun
				has_character_flag = faction_leadership_challenge
			}
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					pf_pending_civil_war_trigger = no
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_court_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP51 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = { in_faction = faction_court }
					character_event = { id = PlusFaction.302 }
				}
				character_event = { id = PlusFaction.303 days = 15 } #meeting postponed
				character_event = { id = PlusFaction.304 days = 15 } #start the meeting
				character_event = { id = PlusFaction.350 days = 15 } #leadership challenged
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	hold_prosperity_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			ai = no
			leads_faction = faction_prosperity
			pf_war_trait_trigger = no
			any_faction_backer = { in_faction = faction_prosperity }
			had_global_flag = { flag = HIP days = 730 }
			NOR = {
				has_character_flag = faction_meeting_called
				has_character_flag = faction_meeting_begun
				has_character_flag = faction_leadership_challenge
			}
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					pf_pending_civil_war_trigger = no
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_prosperity_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP52 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = { in_faction = faction_prosperity }
					character_event = { id = PlusFaction.302 }
				}
				character_event = { id = PlusFaction.303 days = 15 } #meeting postponed
				character_event = { id = PlusFaction.304 days = 15 } #start the meeting
				character_event = { id = PlusFaction.350 days = 15 } #leadership challenged
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	hold_glory_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			ai = no
			leads_faction = faction_glory
			pf_war_trait_trigger = no
			any_faction_backer = { in_faction = faction_glory }
			had_global_flag = { flag = HIP days = 730 }
			NOR = {
				has_character_flag = faction_meeting_called
				has_character_flag = faction_meeting_begun
				has_character_flag = faction_leadership_challenge
			}
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					pf_pending_civil_war_trigger = no
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_glory_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP53 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = { in_faction = faction_glory }
					character_event = { id = PlusFaction.302 }
				}
				character_event = { id = PlusFaction.303 days = 15 } #meeting postponed
				character_event = { id = PlusFaction.304 days = 15 } #start the meeting
				character_event = { id = PlusFaction.350 days = 15 } #leadership challenged
			}
		}
		ai_will_do = {
			factor = 0
		}
	}

	hold_tradition_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			ai = no
			leads_faction = faction_tradition
			pf_war_trait_trigger = no
			any_faction_backer = { in_faction = faction_tradition }
			had_global_flag = { flag = HIP days = 730 }
			NOR = {
				has_character_flag = faction_meeting_called
				has_character_flag = faction_meeting_begun
				has_character_flag = faction_leadership_challenge
			}
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					pf_pending_civil_war_trigger = no
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_tradition_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP54 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = { in_faction = faction_tradition }
					character_event = { id = PlusFaction.302 }
				}
				character_event = { id = PlusFaction.303 days = 15 } #meeting postponed
				character_event = { id = PlusFaction.304 days = 15 } #start the meeting
				character_event = { id = PlusFaction.350 days = 15 } #leadership challenged
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	faction_send_ultimatum = {
		is_high_prio = yes
		
		potential = {
			independent = no
			OR = {
				pf_leader_trigger = yes
				leads_faction = faction_succ_seniority
				leads_faction = faction_succ_primogeniture
				leads_faction = faction_succ_gavelkind
				leads_faction = faction_succ_feudal_elective
			}
			pf_has_demands_trigger = yes
			has_character_flag = civil_war_faction_leader
			OR = {
				NOT = { has_character_flag = faction_regular_ultimatum_taken }
				had_character_flag = { flag = faction_regular_ultimatum_taken days = 7 }
			}
		}
		allow = {
			liege = {
				NOT = { war_with = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
		}
		effect = {
			log = "[Root.GetTitledName] has issued a regular faction ultimatum to [Root.Liege.GetTitledName]"
			set_character_flag = faction_regular_ultimatum_taken
			pf_punish_deceitful_player_effect = yes
			if = {
				limit = {
					ROOT = {
						NOR = {
							has_character_flag = demands_seniority
							has_character_flag = demands_primogeniture
							has_character_flag = demands_gavelkind
							has_character_flag = demands_feudal_elective
						}
					}
				}
				liege = {
					letter_event = { id = PlusFaction.400 tooltip = SEND_REGULAR_ULTIMATUM }
				}
			}
			if = {
				limit = {
					ROOT = {
						OR = {
							has_character_flag = demands_seniority
							has_character_flag = demands_primogeniture
							has_character_flag = demands_gavelkind
							has_character_flag = demands_feudal_elective
						}
					}
				}
				liege = {
					letter_event = { id = PlusFaction.470 tooltip = SEND_REGULAR_ULTIMATUM }
				}
			}
		}
		ai_will_do = {
			factor = 1
			# AI will not take war while 30-day timer lasts
			# unless there are no vassals left to join the faction
			modifier = {
				factor = 0
				has_character_modifier = declare_civil_war_timer
				liege = {
					any_vassal = {
						pf_root_faction_backer_trigger = no
						has_character_flag = will_join_civil_war
					}
				}
			}
			# Still has the power to have the revolt
			modifier = {
				factor = 0
				NOR = {
					AND = {
						leads_faction = faction_court
						pf_not_regular_faction_war_trigger = no
						faction_power = { faction = faction_court power = 0.75 }
					}
					AND = {
						leads_faction = faction_prosperity
						pf_not_regular_faction_war_trigger = no
						faction_power = { faction = faction_prosperity power = 0.75 }
					}
					AND = {
						leads_faction = faction_glory
						pf_not_regular_faction_war_trigger = no
						faction_power = { faction = faction_glory power = 0.75 }
					}
					AND = {
						leads_faction = faction_tradition
						pf_not_regular_faction_war_trigger = no
						faction_power = { faction = faction_tradition power = 0.75 }
					}
					AND = {
						leads_faction = faction_succ_seniority
						has_character_flag = demands_seniority
						faction_power = { faction = faction_succ_seniority power = 0.75 }
					}
					AND = {
						leads_faction = faction_succ_primogeniture
						has_character_flag = demands_primogeniture
						faction_power = { faction = faction_succ_primogeniture power = 0.75 }
					}
					AND = {
						leads_faction = faction_succ_gavelkind
						has_character_flag = demands_gavelkind
						faction_power = { faction = faction_succ_gavelkind power = 0.75 }
					}
					AND = {
						leads_faction = faction_succ_feudal_elective
						has_character_flag = demands_feudal_elective
						faction_power = { faction = faction_succ_feudal_elective power = 0.75 }
					}
				}
			}
		}
	}
	
	faction_begin_civil_war = {
		is_high_prio = yes
		
		potential = {
			independent = no
			pf_leader_trigger = yes
			pf_has_demands_trigger = no
			has_character_flag = civil_war_faction_leader
			NOT = { has_character_flag = preparing_claimant_faction_war }
			NOT = { has_character_flag = preparing_religious_faction_war }
		}
		allow = {
			liege = {
				NOT = { war_with = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
		}
		effect = {
			log = "[Root.GetTitledName] has issued a began a faction war to overthrow [Root.Liege.GetTitledName]"
			pf_punish_deceitful_player_effect = yes
			liege = {
				tooltip = {
					reverse_war = {
						target = ROOT
						casus_belli = cb_faction_overthrow_ruler
					}
				}
				hidden_tooltip = {
					letter_event = { id = PlusFaction.406 }
				}
			}
			hidden_tooltip = {
				character_event = { id = PlusFaction.399 days = 1 } #clear flags
			}
		}
		ai_will_do = {
			factor = 1
			# AI will not take war while 30-day timer lasts
			# unless there are no vassals left to join the faction
			modifier = {
				factor = 0
				has_character_modifier = declare_civil_war_timer
				liege = {
					any_vassal = {
						pf_root_faction_backer_trigger = no
						has_character_flag = will_join_civil_war
					}
				}
			}
			# Still has the power to have the revolt
			modifier = {
				factor = 0
				NOR = {
					AND = {
						leads_faction = faction_court
						faction_power = { faction = faction_court power = 0.75 }
					}
					AND = {
						leads_faction = faction_prosperity
						faction_power = { faction = faction_prosperity power = 0.75 }
					}
					AND = {
						leads_faction = faction_glory
						faction_power = { faction = faction_glory power = 0.75 }
					}
					AND = {
						leads_faction = faction_tradition
						faction_power = { faction = faction_tradition power = 0.75 }
					}
				}
			}
		}
	}
	
	# faction_antiking_ultimatum = {
	# 	is_high_prio = yes
		
	# 	potential = {
	# 		leads_faction = faction_antiking
	# 		OR = {
	# 			NOT = { has_character_flag = faction_install_antiking_ultimatum_taken }
	# 			had_character_flag = { flag = faction_install_antiking_ultimatum_taken days = 7 }
	# 		}
	# 	}
	# 	allow = {
	# 		war = no
	# 		has_regent = no
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			NOT = { reverse_has_truce = ROOT }
	# 		}
	# 		NOT = {
	# 			any_realm_title = {
	# 				is_occupied = yes
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		log = "[Root.GetTitledName] has issued an Antiking ultimatum to [Root.Liege.GetTitledName]"
	# 		liege = {
	# 			letter_event = { id = 8200 days = 3 tooltip = EVTTOOLTIP8005 }
	# 		}
	# 		hidden_tooltip = {
	# 			set_character_flag = faction_install_antiking_ultimatum_taken
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_antiking power = 0.75 } }
	# 		}		
	# 		modifier = {
	# 			factor = 0.5 # Slow it down a bit
	# 			always = yes
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			ai_not_busy_trigger = no
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			liege = {
	# 				any_war = {
	# 					OR = {
	# 						AND = {
	# 							defender = { character = PREVPREV }
	# 							NOT = { using_cb = depose_liege }
	# 							NOT = { using_cb = overthrow_ruler }
	# 							NOT = { using_cb = overthrow_ruler_no_calls }
	# 							NOT = { using_cb = claim_on_liege_plot }
	# 							NOT = { using_cb = other_claim_on_liege_plot }
	# 							NOT = { using_cb = cb_faction_overthrow_ruler }
	# 						}
	# 						AND = {
	# 							attacker = { character = PREVPREV }
	# 							OR = {
	# 								using_cb = invasion
	# 								using_cb = holy_war
	# 								using_cb = tribal_invasion
	# 								using_cb = manifest_destiny_invasion
	# 								using_cb = viking_invasion
	# 							}
	# 						}
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# }

	# faction_claimant_prepare = {
	# 	is_high_prio = yes
		
	# 	potential = {
	# 		ai = no
	# 		leads_faction = faction_pretender
	# 		NOT = { has_character_flag = civil_war_faction_leader }
	# 		NOT = { has_character_flag = civil_war_faction_member }
	# 	}
	# 	allow = {
	# 		war = no
	# 		has_regent = no
	# 		faction_power = {
	# 			faction = faction_pretender
	# 			power = 0.5
	# 		}
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			NOT = { reverse_has_truce = ROOT }
	# 			custom_tooltip = {
	# 				text = HAS_NO_CIVIL_WAR
	# 				hidden_tooltip = { pf_war_flag_trigger = no }
	# 			}
	# 		}
	# 		custom_tooltip = {
	# 			text = NO_PENDING_CIVIL_WAR
	# 			hidden_tooltip = { pf_pending_civil_war_trigger = no }
	# 		}
	# 		capital_holding = {
	# 			controller = {
	# 				character = ROOT
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		set_character_flag = preparing_claimant_faction_war
	# 		# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
	# 		# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
	# 		custom_tooltip = {
	# 			text = MAY_TAKE_ULTIMATUM_DECISION
	# 			hidden_tooltip = {
	# 				set_character_flag = civil_war_faction_leader
	# 				add_character_modifier = {
	# 					name = declare_civil_war_timer
	# 					duration = 30
	# 					hidden = yes
	# 				}
	# 			}
	# 		}
	# 		# invite all other vassals to join the coming civil war
	# 		liege = {
	# 			custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
	# 			hidden_tooltip = {
	# 				any_vassal = {
	# 					limit = { NOT = { in_faction = faction_pretender } }
	# 					letter_event = { id = PlusFaction.422 }
	# 				}
	# 			}
	# 		}
	# 		hidden_tooltip = {
	# 			any_faction_backer = {
	# 				faction = faction_pretender
	# 				set_character_flag = civil_war_faction_member
	# 			}
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 0
	# 	}
	# }
	
	# faction_claimant_ultimatum = {
	# 	is_high_prio = yes

	# 	potential = {
	# 		independent = no
	# 		leads_faction = faction_pretender
	# 		has_character_flag = preparing_claimant_faction_war
	# 		has_character_flag = civil_war_faction_leader
	# 		OR = {
	# 			NOT = { has_character_flag = faction_claimant_ultimatum_taken }
	# 			had_character_flag = { flag = faction_claimant_ultimatum_taken days = 7 }
	# 		}
	# 	}
	# 	allow = {
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			custom_tooltip = {
	# 				text = HAS_NO_CIVIL_WAR
	# 				hidden_tooltip = { pf_war_flag_trigger = no }
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		pf_punish_deceitful_player_effect = yes
	# 		clr_character_flag = preparing_claimant_faction_war
	# 		liege = {
	# 			letter_event = { id = 8036 days = 7 tooltip = "EVTTOOLTIP8005" }
	# 		}
	# 		if = {
	# 			limit = {
	# 				supported_claimant = {
	# 					NOT = { character = ROOT }
	# 					OR = {
	# 						NOT = { same_liege = ROOT }
	# 						NOT = { in_faction = faction_pretender }
	# 						NOT = { supported_claimant = { character = PREV } }
	# 					}
	# 				}
	# 			}
	# 			supported_claimant = {
	# 				letter_event = { id = 8037 days = 1 }
	# 			}
	# 		}
	# 		hidden_tooltip = {
	# 			set_character_flag = faction_claimant_ultimatum_taken
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 1
	# 		# AI will not take war while 30-day timer lasts
	# 		# unless there are no vassals left to join the faction
	# 		modifier = {
	# 			factor = 0
	# 			has_character_modifier = declare_civil_war_timer
	# 			liege = {
	# 				any_vassal = {
	# 					NOT = { in_faction = faction_pretender }
	# 					has_character_flag = will_join_civil_war
	# 				}
	# 			}
	# 		}
	# 		# Still has the power to have the revolt
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_pretender power = 0.75 } }
	# 		}
	# 	}
	# }

	# faction_religious_prepare = {
	# 	is_high_prio = yes
		
	# 	potential = {
	# 		ai = no
	# 		leads_faction = faction_religious
	# 		NOT = { has_character_flag = civil_war_faction_leader }
	# 		NOT = { has_character_flag = civil_war_faction_member }
	# 	}
	# 	allow = {
	# 		war = no
	# 		has_regent = no
	# 		faction_power = {
	# 			faction = faction_religious
	# 			power = 0.5
	# 		}
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			NOT = { reverse_has_truce = ROOT }
	# 			custom_tooltip = {
	# 				text = HAS_NO_CIVIL_WAR
	# 				hidden_tooltip = { pf_war_flag_trigger = no }
	# 			}
	# 		}
	# 		custom_tooltip = {
	# 			text = NO_PENDING_CIVIL_WAR
	# 			hidden_tooltip = { pf_pending_civil_war_trigger = no }
	# 		}
	# 		capital_holding = {
	# 			controller = {
	# 				character = ROOT
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		set_character_flag = preparing_religious_faction_war
	# 		# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
	# 		# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
	# 		custom_tooltip = {
	# 			text = MAY_TAKE_ULTIMATUM_DECISION
	# 			hidden_tooltip = {
	# 				set_character_flag = civil_war_faction_leader
	# 				add_character_modifier = {
	# 					name = declare_civil_war_timer
	# 					duration = 30
	# 					hidden = yes
	# 				}
	# 			}
	# 		}
	# 		# invite all other vassals to join the coming civil war
	# 		liege = {
	# 			custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
	# 			hidden_tooltip = {
	# 				any_vassal = {
	# 					limit = {
	# 						religion = ROOT
	# 						NOT = { in_faction = faction_religious }
	# 					}
	# 					letter_event = { id = Plus.255 }
	# 				}
	# 			}
	# 		}
	# 		hidden_tooltip = {
	# 			any_faction_backer = {
	# 				faction = faction_religious
	# 				set_character_flag = civil_war_faction_member
	# 			}
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			factor = 0
	# 			e_placeholder = {
	# 				NOT = { had_title_flag = { flag = startup days = 730 } }
	# 			}
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_religious power = 0.75 } }
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_religious power = 1.0 } }
	# 			NOR = {
	# 				martial = 15
	# 				trait = lunatic
	# 				trait = possessed
	# 				trait = wroth
	# 				trait = brave
	# 			}
	# 		}
	# 		modifier = {
	# 			factor = 0.5 # Slow it down a bit
	# 			always = yes
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			ai_not_busy_trigger = no
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			liege = {
	# 				any_war = {
	# 					OR = {
	# 						AND = {
	# 							defender = { character = PREVPREV }
	# 							NOT = { using_cb = depose_liege }
	# 							NOT = { using_cb = overthrow_ruler }
	# 							NOT = { using_cb = overthrow_ruler_no_calls }
	# 							NOT = { using_cb = claim_on_liege_plot }
	# 							NOT = { using_cb = other_claim_on_liege_plot }
	# 							NOT = { using_cb = cb_faction_overthrow_ruler }
	# 						}
	# 						AND = {
	# 							attacker = { character = PREVPREV }
	# 							OR = {
	# 								using_cb = invasion
	# 								using_cb = holy_war
	# 								using_cb = tribal_invasion
	# 								using_cb = manifest_destiny_invasion
	# 								using_cb = viking_invasion
	# 							}
	# 						}
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# }	
	
	# faction_religious_ultimatum = {
	# 	is_high_prio = yes
		
	# 	potential = {
	# 		independent = no
	# 		leads_faction = faction_religious
	# 		has_character_flag = preparing_religious_faction_war
	# 		has_character_flag = civil_war_faction_leader
	# 		OR = {
	# 			NOT = { has_character_flag = faction_religious_ultimatum_taken }
	# 			had_character_flag = { flag = faction_religious_ultimatum_taken days = 7 }
	# 		}
	# 	}
	# 	allow = {
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			custom_tooltip = {
	# 				text = HAS_NO_CIVIL_WAR
	# 				hidden_tooltip = { pf_war_flag_trigger = no }
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		log = "[Root.GetTitledName] has issued a Religious ultimatum to [Root.Liege.GetTitledName]"
	# 		pf_punish_deceitful_player_effect = yes
	# 		clr_character_flag = preparing_claimant_faction_war
	# 		liege = {
	# 			letter_event = { id = Plus.250 tooltip = SEND_RELIGIOUS_ULTIMATUM }
	# 		}
	# 		hidden_tooltip = {
	# 			set_character_flag = faction_religious_ultimatum_taken
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 1
	# 		# AI will not take war while 30-day timer lasts
	# 		# unless there are no vassals left to join the faction
	# 		modifier = {
	# 			factor = 0
	# 			has_character_modifier = declare_civil_war_timer
	# 			liege = {
	# 				any_vassal = {
	# 					religion = ROOT
	# 					NOT = { in_faction = faction_religious }
	# 					has_character_flag = will_join_civil_war
	# 				}
	# 			}
	# 		}
	# 		# Still has the power to have the revolt
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_religious power = 0.75 } }
	# 		}
	# 	}
	# }
	
	# faction_separatist_war = {
	# 	is_high_prio = yes

	# 	potential = {
	# 		ai = no
	# 		leads_faction = faction_separatist
	# 		NOT = { has_character_modifier = faction_independence_ultimatum_timer }
	# 	}
	# 	allow = {
	# 		war = no
	# 		has_regent = no
	# 		faction_power = {
	# 			faction = faction_separatist
	# 			power = 0.5
	# 		}
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			NOT = { reverse_has_truce = ROOT }
	# 			custom_tooltip = {
	# 				text = HAS_NO_CIVIL_WAR
	# 				hidden_tooltip = { pf_war_flag_trigger = no }
	# 			}
	# 		}
	# 		custom_tooltip = {
	# 			text = NO_PENDING_CIVIL_WAR
	# 			hidden_tooltip = { pf_pending_civil_war_trigger = no }
	# 		}
	# 		NOT = {
	# 			any_realm_title = {
	# 				is_occupied = yes
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		hidden_tooltip = {
	# 			set_character_flag = original_war_liege
	# 			pf_setup_rebel_effect = yes
	# 			any_faction_backer = {
	# 				faction = faction_separatist
	# 				pf_setup_rebel_effect = yes
	# 			}
	# 		}
	# 		liege = {
	# 			set_character_flag = faction_separatist_war
	# 			reverse_war = {
	# 				target = ROOT
	# 				casus_belli = cb_faction_independence
	# 				faction = faction_separatist
	# 			}
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 0
	# 	}
	# }	

	# faction_overthrow_ultimatum = {
	# 	is_high_prio = yes
		
	# 	potential = {
	# 		leads_faction = faction_overthrow
	# 		OR = {
	# 			NOT = { has_character_flag = faction_overthrow_ultimatum_taken }
	# 			had_character_flag = { flag = faction_overthrow_ultimatum_taken days = 7 }
	# 		}
	# 	}
	# 	allow = {
	# 		war = no
	# 		prisoner = no
	# 		liege = {
	# 			NOT = { war_with = ROOT }
	# 			NOT = { reverse_has_truce = ROOT }
	# 		}
	# 		NOT = {
	# 			any_realm_title = {
	# 				is_occupied = yes
	# 			}
	# 		}
	# 	}
	# 	effect = {
	# 		log = "[Root.GetTitledName] has issued a nomadic Overthrow ultimatum to [Root.Liege.GetTitledName]"
	# 		liege = {
	# 			letter_event = { id = 8210 days = 3 tooltip = EVTTOOLTIP8005 }
	# 		}
	# 		hidden_tooltip = {
	# 			set_character_flag = faction_overthrow_ultimatum_taken
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			factor = 0
	# 			e_placeholder = {
	# 				NOT = { had_title_flag = { flag = startup days = 730 } }
	# 			}
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			NOT = { faction_power = { faction = faction_overthrow power = 0.75 } }
	# 		}
	# 		modifier = {
	# 			factor = 0.5 # Slow it down a bit
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			ai_not_busy_trigger = no
	# 		}
	# 		modifier = {
	# 			factor = 0
	# 			liege = {
	# 				war = yes
	# 				has_character_flag = has_current_revolt
	# 			}
	# 		}		
	# 		modifier = {
	# 			factor = 0
	# 			liege = {
	# 				any_war = {
	# 					OR = {
	# 						AND = {
	# 							defender = { character = PREV }
	# 							NOT = { using_cb = depose_liege }
	# 							NOT = { using_cb = overthrow_ruler }
	# 							NOT = { using_cb = overthrow_ruler_no_calls }
	# 							NOT = { using_cb = claim_on_liege_plot }
	# 							NOT = { using_cb = other_claim_on_liege_plot }
	# 							NOT = { using_cb = cb_faction_overthrow_ruler }
	# 						}
	# 						AND = {
	# 							attacker = { character = PREV }
	# 							OR = {
	# 								using_cb = invasion
	# 								using_cb = holy_war
	# 								using_cb = tribal_invasion
	# 								using_cb = manifest_destiny_invasion
	# 								using_cb = viking_invasion
	# 							}
	# 						}
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# }

	faction_succ_seniority_prepare = {
		is_high_prio = yes
		
		potential = {
			leads_faction = faction_succ_seniority
			NOT = { has_character_flag = civil_war_faction_leader }
			NOT = { has_character_flag = civil_war_faction_member }
		}
		allow = {
			war = no
			prisoner = no
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
			custom_tooltip = {
				text = NO_PENDING_CIVIL_WAR
				hidden_tooltip = { pf_pending_civil_war_trigger = no }
			}
			NOT = {
				any_realm_title = {
					is_occupied = yes
				}
			}
		}
		effect = {
			set_character_flag = demands_seniority
			clr_character_flag = demands_primogeniture
			clr_character_flag = demands_gavelkind
			clr_character_flag = demands_feudal_elective
			# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
			# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
			custom_tooltip = {
				text = MAY_TAKE_ULTIMATUM_DECISION
				hidden_tooltip = {
					set_character_flag = civil_war_faction_leader
					add_character_modifier = {
						name = declare_civil_war_timer
						duration = 30
						hidden = yes
					}
				}
			}
			# invite all other vassals to join the coming civil war
			liege = {
				custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
				hidden_tooltip = {
					any_vassal = {
						limit = { NOT = { in_faction = faction_succ_seniority } }
						letter_event = { id = PlusFaction.415 }
					}
					any_vassal = {
						limit = { in_faction = faction_succ_seniority }
						set_character_flag = civil_war_faction_member
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { had_global_flag = { flag = HIP days = 730 } }
			}			
			modifier = {
				factor = 0.5 # Slow it down a bit
			}
			modifier = {
				factor = 0
				ai_not_busy_trigger = no
			}
			modifier = {
				factor = 0
				NOT = { 
					faction_power = {
						faction = faction_succ_seniority
						power = 0.75
					}
				}
			}			
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_seniority
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_seniority
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0
				liege = {
					war = yes
					has_character_flag = has_current_revolt
				}
			}
			modifier = {
				factor = 0
				liege = {
					any_war = {
						OR = {
							AND = {
								defender = { character = PREV }
								attacker = { NOT = { same_realm = ROOT } }
							}
							AND = {
								any_defender = { character = PREV }
								using_cb = crusade
							}
							AND = {
								attacker = { character = PREV }
								OR = {
									using_cb = invasion
									using_cb = religious
									using_cb = emf_religious_reconquest
									using_cb = emf_special_religious
									using_cb = tribal_invasion
									using_cb = viking_invasion
								}
							}
							AND = {
								any_attacker = { character = PREV }
								using_cb = crusade
							}
						}
					}
				}
			}
		}
	}
	
	faction_succ_primogeniture_prepare = {
		is_high_prio = yes
		
		potential = {
			leads_faction = faction_succ_primogeniture
			NOT = { has_character_flag = civil_war_faction_leader }
			NOT = { has_character_flag = civil_war_faction_member }
		}
		allow = {
			war = no
			prisoner = no
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
			custom_tooltip = {
				text = NO_PENDING_CIVIL_WAR
				hidden_tooltip = { pf_pending_civil_war_trigger = no }
			}
			NOT = {
				any_realm_title = {
					is_occupied = yes
				}
			}
		}
		effect = {
			log = "[Root.GetTitledName] has issued a Primogeniture ultimatum to [Root.Liege.GetTitledName]"
			clr_character_flag = demands_seniority
			set_character_flag = demands_primogeniture
			clr_character_flag = demands_gavelkind
			clr_character_flag = demands_feudal_elective
			# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
			# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
			custom_tooltip = {
				text = MAY_TAKE_ULTIMATUM_DECISION
				hidden_tooltip = {
					set_character_flag = civil_war_faction_leader
					add_character_modifier = {
						name = declare_civil_war_timer
						duration = 30
						hidden = yes
					}
				}
			}
			# invite all other vassals to join the coming civil war
			liege = {
				custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
				hidden_tooltip = {
					any_vassal = {
						limit = { NOT = { in_faction = faction_succ_primogeniture } }
						letter_event = { id = PlusFaction.415 }
					}
					any_vassal = {
						limit = { in_faction = faction_succ_primogeniture }
						set_character_flag = civil_war_faction_member
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { had_global_flag = { flag = HIP days = 730 } }
			}
			modifier = {
				factor = 0.5 # Slow it down a bit
			}
			modifier = {
				factor = 0
				NOT = { 
					faction_power = {
						faction = faction_succ_primogeniture
						power = 0.75
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_primogeniture
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_primogeniture
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0
				liege = {
					war = yes
					has_character_flag = has_current_revolt
				}
			}
			modifier = {
				factor = 0
				liege = {
					any_war = {
						OR = {
							AND = {
								defender = { character = PREV }
								attacker = { NOT = { same_realm = ROOT } }
							}
							AND = {
								any_defender = { character = PREV }
								using_cb = crusade
							}
							AND = {
								attacker = { character = PREV }
								OR = {
									using_cb = invasion
									using_cb = religious
									using_cb = emf_religious_reconquest
									using_cb = emf_special_religious
									using_cb = tribal_invasion
									using_cb = viking_invasion
								}
							}
							AND = {
								any_attacker = { character = PREV }
								using_cb = crusade
							}
						}
					}
				}
			}
		}
	}
	
	faction_succ_gavelkind_prepare = {
		is_high_prio = yes
		
		potential = {
			leads_faction = faction_succ_gavelkind
			NOT = { has_character_flag = civil_war_faction_leader }
			NOT = { has_character_flag = civil_war_faction_member }
		}
		allow = {
			war = no
			prisoner = no
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
			custom_tooltip = {
				text = NO_PENDING_CIVIL_WAR
				hidden_tooltip = { pf_pending_civil_war_trigger = no }
			}
			NOT = {
				any_realm_title = {
					is_occupied = yes
				}
			}
		}
		effect = {
			log = "[Root.GetTitledName] has issued a Gavelkind ultimatum to [Root.Liege.GetTitledName]"
			clr_character_flag = demands_seniority
			clr_character_flag = demands_primogeniture
			set_character_flag = demands_gavelkind
			clr_character_flag = demands_feudal_elective
			# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
			# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
			custom_tooltip = {
				text = MAY_TAKE_ULTIMATUM_DECISION
				hidden_tooltip = {
					set_character_flag = civil_war_faction_leader
					add_character_modifier = {
						name = declare_civil_war_timer
						duration = 30
						hidden = yes
					}
				}
			}
			# invite all other vassals to join the coming civil war
			liege = {
				custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
				hidden_tooltip = {
					any_vassal = {
						limit = { NOT = { in_faction = faction_succ_gavelkind } }
						letter_event = { id = PlusFaction.415 }
					}
					any_vassal = {
						limit = { in_faction = faction_succ_gavelkind }
						set_character_flag = civil_war_faction_member
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { had_global_flag = { flag = HIP days = 730 } }
			}
			modifier = {
				factor = 0.5 # Slow it down a bit
			}
			modifier = {
				factor = 0
				NOT = { 
					faction_power = {
						faction = faction_succ_gavelkind
						power = 0.75
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_gavelkind
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_gavelkind
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0
				liege = {
					war = yes
					has_character_flag = has_current_revolt
				}
			}
			modifier = {
				factor = 0
				liege = {
					any_war = {
						OR = {
							AND = {
								defender = { character = PREV }
								attacker = { NOT = { same_realm = ROOT } }
							}
							AND = {
								any_defender = { character = PREV }
								using_cb = crusade
							}
							AND = {
								attacker = { character = PREV }
								OR = {
									using_cb = invasion
									using_cb = religious
									using_cb = emf_religious_reconquest
									using_cb = emf_special_religious
									using_cb = tribal_invasion
									using_cb = viking_invasion
								}
							}
							AND = {
								any_attacker = { character = PREV }
								using_cb = crusade
							}
						}
					}
				}
			}
		}
	}

	faction_succ_feudal_elective_prepare = {
		is_high_prio = yes
		
		potential = {
			leads_faction = faction_succ_feudal_elective	
			NOT = { has_character_flag = civil_war_faction_leader }
			NOT = { has_character_flag = civil_war_faction_member }
		}
		allow = {
			war = no
			prisoner = no
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
				custom_tooltip = {
					text = HAS_NO_CIVIL_WAR
					hidden_tooltip = { pf_war_flag_trigger = no }
				}
			}
			custom_tooltip = {
				text = NO_PENDING_CIVIL_WAR
				hidden_tooltip = { pf_pending_civil_war_trigger = no }
			}
			NOT = {
				any_realm_title = {
					is_occupied = yes
				}
			}
		}
		effect = {
			log = "[Root.GetTitledName] has issued a Feudal Elective ultimatum to [Root.Liege.GetTitledName]"
			clr_character_flag = demands_seniority
			clr_character_flag = demands_primogeniture
			clr_character_flag = demands_gavelkind
			set_character_flag = demands_feudal_elective
			# allow the faction leader to now take the 'Make Ultimatum to Liege' decision
			# and set the timer so the AI doesn't use the decision for 30 days (unless everyone has joined)
			custom_tooltip = {
				text = MAY_TAKE_ULTIMATUM_DECISION
				hidden_tooltip = {
					set_character_flag = civil_war_faction_leader
					add_character_modifier = {
						name = declare_civil_war_timer
						duration = 30
						hidden = yes
					}
				}
			}
			# invite all other vassals to join the coming civil war
			liege = {
				custom_tooltip = { text = INVITE_TO_JOIN_CIVIL_WAR }
				hidden_tooltip = {
					any_vassal = {
						limit = { NOT = { in_faction = faction_succ_feudal_elective } }
						letter_event = { id = PlusFaction.415 }
					}
					any_vassal = {
						limit = { in_faction = faction_succ_feudal_elective }
						set_character_flag = civil_war_faction_member
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { had_global_flag = { flag = HIP days = 730 } }
			}
			modifier = {
				factor = 0.5 # Slow it down a bit
			}
			modifier = {
				factor = 0
				NOT = { 
					faction_power = {
						faction = faction_succ_feudal_elective
						power = 0.75
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_feudal_elective
						power = 1.0
					}
				}
			}	
			modifier = {
				factor = 0.1
				NOT = { 
					faction_power = {
						faction = faction_succ_feudal_elective
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0
				liege = {
					war = yes
					has_character_flag = has_current_revolt
				}
			}
			modifier = {
				factor = 0
				liege = {
					any_war = {
						OR = {
							AND = {
								defender = { character = PREV }
								attacker = { NOT = { same_realm = ROOT } }
							}
							AND = {
								any_defender = { character = PREV }
								using_cb = crusade
							}
							AND = {
								attacker = { character = PREV }
								OR = {
									using_cb = invasion
									using_cb = religious
									using_cb = emf_religious_reconquest
									using_cb = emf_special_religious
									using_cb = tribal_invasion
									using_cb = viking_invasion
								}
							}
							AND = {
								any_attacker = { character = PREV }
								using_cb = crusade
							}
						}
					}
				}
			}
		}
	}
}

