# -*- ck2.events -*-

#################################
# NEW TOURNAMENT EVENTS
# Written by Rylock
#################################

namespace = emf_tournament

### TOURNAMENT PREPARATION

# Ruler announces the tournament
long_character_event = {
	id = emf_tournament.100
	picture = GFX_evt_tournament
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100_muslim
		picture = GFX_evt_furusiyya
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
		emf_do_not_disturb_effect = yes
		emf_clear_tournament_flags = yes
		set_character_flag = emf_planning_tournament
		save_event_target_as = tournament_host
		narrative_event = { id = emf_tournament.120 days = 60 } #Start the tournament
	}
	
	option = {
		name = {
			text = EVTOPTA_emf_tournament_100
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_100_nomad
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_100_muslim
			trigger = { emf_uses_muslim_tournament = yes }
		}
		hidden_tooltip = {
			emf_clear_tournament_opinions = yes
			any_realm_character = {
				limit = {
					age = 14
					prisoner = no
					OR = {
						NOT = { dynasty = none }
						any_spouse = { NOT = { dynasty = none } }
						liege = { character = ROOT }
						trait = fair
						trait = ambitious
					}
				}
				long_character_event = { id = emf_tournament.101 } #Hears announcement
			}
		}
	}
}
	
# Member of the realm must decide whether to attend the tournament
long_character_event = {
	id = emf_tournament.101
	picture = GFX_evt_tournament
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_100_muslim
		picture = GFX_evt_tournament_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = emf_fighting_in_tournament
		clr_character_flag = emf_spectator_at_tournament
	}
	
	option = {
		name = {
			text = EVTOPTA_emf_tournament_101 #I will fight in the tournament
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_101_nomad #I will saddle my horse now!
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_101_muslim #I will compete, for the glory of Allah!
			trigger = { emf_uses_muslim_tournament = yes }
		}
		trigger = {
			emf_can_fight_in_tournament = yes
			emf_can_disturb_trigger = yes
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				is_inaccessible_trigger = yes
			}
			modifier = {
				factor = 0
				is_ruler = yes
				is_feudal = no
				is_tribal = no
				is_nomadic = no
			}
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = duelist
					trait = impaler
					trait = hunter
				}
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.25
				combat_rating = 3
			}
			modifier = {
				factor = 1.25
				combat_rating = 4
			}
			modifier = {
				factor = 1.5
				combat_rating = 5
			}
			modifier = {
				factor = 2
				combat_rating = 6
			}
			modifier = {
				factor = 0.5
				NOT = { combat_rating = 2 }
			}
			modifier = {
				factor = 0.25
				NOT = { combat_rating = 1 }
			}
			modifier = {
				factor = 0
				NOT = { combat_rating = 0 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_nomadic = yes
					NOT = { culture_group = ROOT }
				}
			}
		}
		custom_tooltip = {
			text = FIGHT_IN_TOURNAMENT
			hidden_tooltip = {
				set_character_flag = emf_fighting_in_tournament
				set_variable = { which = "tournament_fighter" value = 0 }
				reverse_opinion = { who = FROM modifier = attending_tournament months = 12 }
				opinion = { who = FROM modifier = attending_tournament months = 12 }
			}
		}
		emf_do_not_disturb_effect = yes
		end_inaccessibility_effect = yes
	}
	option = {
		name = EVTOPTB_emf_tournament_101 #I will go for the spectacle
		trigger = {
			emf_currently_at_war = no
			emf_can_disturb_trigger = yes
			NOR = {
				trait = incapable
				is_ill = yes
				is_pregnant = yes
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_inaccessible_trigger = yes
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = duelist
					trait = impaler
					trait = hunter
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = brave
					trait = ambitious
					trait = proud
					combat_rating = 4
				}
			}
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 4
				NOT = { combat_rating = 2 }
			}
		}
		custom_tooltip = {
			text = ATTEND_TOURNAMENT
			hidden_tooltip = {
				set_character_flag = emf_spectator_at_tournament
				reverse_opinion = { who = FROM modifier = attending_tournament months = 12 }
				opinion = { who = FROM modifier = attending_tournament months = 12 }
			}
		}
		if = {
			limit = {
				emf_can_fight_in_tournament = yes
				is_inaccessible_trigger = no
				FROM = { is_nomadic = yes }
				OR = {
					is_ruler = no
					is_nomadic = yes
				}
			}
			reverse_opinion = {
				modifier = opinion_coward
				who = FROM
				years = 2
			}
		}
		emf_do_not_disturb_effect = yes
		end_inaccessibility_effect = yes
	}
	option = {
		name = EVTOPTC_emf_tournament_101 #I am not well enough to go...
		trigger = {
			OR = {
				trait = incapable
				is_ill = yes
				is_pregnant = yes
			}
		}
	}
	option = {
		name = EVTOPTD_emf_tournament_101 #I am too wrapped up in my own affairs, sadly
		trigger = {
			emf_currently_at_war = no
			emf_can_disturb_trigger = no
			NOR = {
				trait = incapable
				is_ill = yes
				is_pregnant = yes
			}
		}
	}
	option = {
		name = EVTOPTE_emf_tournament_101 #The war keeps me away
		trigger = {
			emf_currently_at_war = yes
			NOR = {
				trait = incapable
				is_ill = yes
				is_pregnant = yes
			}
		}
	}
	option = {
		name = EVTOPTF_emf_tournament_101 #I've no interest in attending
		trigger = {
			emf_currently_at_war = no
			emf_can_disturb_trigger = yes
			NOR = {
				trait = incapable
				is_ill = yes
				is_pregnant = yes
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				OR = {
					trait = scholar
					trait = gardener
					trait = paranoid
				}
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 0.1
				NOT = { age = 20 }
			}
			modifier = {
				factor = 2
				age = 40
			}
			modifier = {
				factor = 2
				age = 50
			}
		}
		if = {
			limit = {
				emf_can_fight_in_tournament = yes
				is_inaccessible_trigger = no
				OR = {
					is_ruler = no
					is_feudal = yes
					is_tribal = yes
					is_nomadic = yes
				}
			}
			if = {
				limit = { is_ruler = yes }
				prestige = -25
			}
			if = {
				limit = { is_ruler = yes }
				prestige = -10
			}
			if = {
				limit = { FROM = { is_nomadic = yes } }
				reverse_opinion = {
					modifier = opinion_coward
					who = FROM
					years = 2
				}
			}
			if = {
				limit = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				random = {
					chance = 25
					add_trait = craven
				}
			}
			if = {
				limit = { trait = brave }
				random = {
					chance = 25
					remove_trait = brave
				}
			}
		}
	}
}

# Cancel tournament if war begins
character_event = {
	id = emf_tournament.102
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_character_flag = emf_planning_tournament
			has_character_flag = emf_holding_tournament
			FROM = { has_character_flag = emf_planning_tournament }
			FROM = { has_character_flag = emf_holding_tournament }
		}
	}
	
	immediate = {
		if = {
			limit = { has_character_flag = emf_holding_tournament }
			character_event = { id = emf_tournament.103 }
		}
		if = {
			limit = { FROM = { has_character_flag = emf_holding_tournament } }
			FROM = { character_event = { id = emf_tournament.103 } }
		}
		if = {
			limit = { has_character_flag = emf_planning_tournament }
			character_event = { id = emf_tournament.105 }
		}
		if = {
			limit = { FROM = { has_character_flag = emf_planning_tournament } }
			FROM = { character_event = { id = emf_tournament.105 } }
		}
	}
}

# Tournament cancelled due to war
character_event = {
	id = emf_tournament.103
	border = GFX_event_normal_frame_war
	picture = GFX_evt_tournament
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103_muslim
		picture = GFX_evt_tournament_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	war = yes
	has_character_flag = emf_holding_tournament
	
	trigger = {
		has_character_flag = emf_holding_tournament
	}
	
	immediate = {
		save_event_target_as = tournament_host
		clr_character_flag = emf_holding_tournament
	}
	
	option = {
		name = CURSES
		clr_character_flag = emf_tournament_cooldown
		if = {
			limit = { emf_uses_nomad_tournament = no }
			scaled_wealth = { value = 0.25 min = 100 }
			prestige = -100
		}
		if = {
			limit = { emf_uses_nomad_tournament = yes }
			remove_character_modifier = holding_nomad_wargames
			scaled_wealth = { value = 0.25 min = 25 }
		}
		hidden_tooltip = {
			any_opinion_modifier_target = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
				character_event = { id = emf_tournament.104 }
			}
			emf_clear_tournament_opinions = yes
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}

# Inform attendees of cancellation due to war
character_event = {
	id = emf_tournament.104
	border = GFX_event_normal_frame_war
	picture = GFX_evt_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_103_muslim
		picture = GFX_evt_tournament_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	option = {
		name = I_SEE
		hidden_tooltip = {
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}

# Tournament planning cancelled due to war
character_event = {
	id = emf_tournament.105
	border = GFX_event_normal_frame_war
	picture = GFX_evt_tournament
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105_muslim
		picture = GFX_evt_tournament_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	war = yes
	has_character_flag = emf_planning_tournament
	
	trigger = {
		has_character_flag = emf_planning_tournament
	}
	
	immediate = {
		save_event_target_as = tournament_host
		clr_character_flag = emf_planning_tournament
	}
	
	option = {
		name = CURSES
		clr_character_flag = emf_tournament_cooldown
		if = {
			limit = { emf_uses_nomad_tournament = no }
			scaled_wealth = { value = 0.5 min = 200 }
			prestige = -100
		}
		if = {
			limit = { emf_uses_nomad_tournament = yes }
			remove_character_modifier = holding_nomad_wargames
			scaled_wealth = { value = 0.5 min = 50 }
		}
		hidden_tooltip = {
			any_opinion_modifier_target = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
				character_event = { id = emf_tournament.106 }
			}
			emf_clear_tournament_opinions = yes
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}

# Inform attendees of cancellation due to war
character_event = {
	id = emf_tournament.106
	border = GFX_event_normal_frame_war
	picture = GFX_evt_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_105_muslim
		picture = GFX_evt_tournament_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	option = {
		name = I_SEE
		hidden_tooltip = {
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}

# Ruler has died, the tournament is over
character_event = {
	id = emf_tournament.107
	picture = GFX_evt_death
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			has_character_flag = emf_holding_tournament
			has_character_flag = emf_planning_tournament
		}
	}
	
	immediate = {
		save_event_target_as = tournament_host
		any_opinion_modifier_target = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
			if = {
				limit = { ROOT = { has_character_flag = emf_planning_tournament } }
				character_event = { id = emf_tournament.108 }
			}
			if = {
				limit = { ROOT = { has_character_flag = emf_holding_tournament } }
				character_event = { id = emf_tournament.109 }
			}
		}
	}

	option = {
		name = CURSES
		if = {
			limit = { has_character_flag = emf_planning_tournament }
			if = {
				limit = { emf_uses_nomad_tournament = no }
				scaled_wealth = { value = 1.0 min = 200 }
				prestige = -100
			}
			if = {
				limit = { emf_uses_nomad_tournament = yes }
				remove_character_modifier = holding_nomad_wargames
				scaled_wealth = { value = 0.5 min = 50 }
			}
		}
	}
}

# Inform attendees of cancellation due to ruler's death
character_event = {
	id = emf_tournament.108
	picture = GFX_evt_death

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_107_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_tournament_108
		hidden_tooltip = {
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}

character_event = {
	id = emf_tournament.109
	picture = GFX_evt_death

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_109
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_109_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_109_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_tournament_108
		hidden_tooltip = {
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
		}
	}
}


### TOURNAMENT BEGINS

# The tournament events get underway
narrative_event = {
	id = emf_tournament.120
	picture = GFX_evt_tournament
	
	title = {
		text = EVTNAME_emf_tournament_120
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_120_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_120_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_120
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_120_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_120_muslim
		picture = GFX_evt_furusiyya
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	war = no
	
	trigger = {
		has_character_flag = emf_planning_tournament
	}
	
	immediate = {
		clr_character_flag = emf_planning_tournament
		set_character_flag = emf_holding_tournament
		if = {
			limit = { ai = no }
			if = {
				limit = { emf_uses_regular_tournament = yes }
				chronicle = {
					entry = CHRONICLE_GRAND_TOURNAMENT
					picture = GFX_evt_joust
				}
			}
			if = {
				limit = { emf_uses_muslim_tournament = yes }
				chronicle = {
					entry = CHRONICLE_FURUSIYYA
					picture = GFX_evt_joust
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_120 #I shall fight in the tournament
		trigger = { emf_can_fight_in_tournament = yes }
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 0
				is_female = yes
				NOR = {
					has_lifestyle_martial_trigger = yes
					trait = shieldmaiden
					combat_rating = 5
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = duelist
					trait = impaler
					trait = hunter
				}
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.25
				combat_rating = 3
			}
			modifier = {
				factor = 1.25
				combat_rating = 4
			}
			modifier = {
				factor = 1.5
				combat_rating = 5
			}
			modifier = {
				factor = 2
				combat_rating = 6
			}
			modifier = {
				factor = 0.25
				NOT = { combat_rating = 2 }
			}
			modifier = {
				factor = 0.1
				NOT = { combat_rating = 1 }
			}
		}
		set_character_flag = emf_fighting_in_tournament
		hidden_tooltip = {
			set_variable = { which = "tournament_fighter" value = 0 }
			character_event = { id = emf_tournament.249 days = 50 } #Calculate personal tournament score
		}
		
		#Send start event to all attendees
		any_opinion_modifier_target = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
			narrative_event = { id = emf_tournament.121 }
		}
		
		#Prompt events during the tournament
		character_event = { id = emf_tournament.130 days = 1 random = 15 }
		character_event = { id = emf_tournament.200 days = 45 } #New realm beauty
		character_event = { id = emf_tournament.250 days = 51 } #Pick tournament winners
		character_event = { id = emf_tournament.300 days = 55 } #Tournament ends
	}
	option = {
		name = EVTOPTB_emf_tournament_120 #I shall watch from the stands
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.25
				OR = {
					trait = duelist
					trait = impaler
					trait = brave
					trait = proud
					is_nomadic = yes
				}
			}
			modifier = {
				factor = 0.1
				combat_rating = 4
			}
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 4
				NOT = { combat_rating = 2 }
			}
		}
		set_character_flag = emf_spectator_at_tournament
		
		#Send start event to all attendees
		any_opinion_modifier_target = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
			narrative_event = { id = emf_tournament.121 }
		}
		
		#Prompt events during the tournament
		character_event = { id = emf_tournament.140 days = 1 random = 15 }
		character_event = { id = emf_tournament.200 days = 45 } #New realm beauty
		character_event = { id = emf_tournament.250 days = 51 } #Pick tournament winners
		character_event = { id = emf_tournament.300 days = 55 } #Tournament ends
	}
}

narrative_event = {
	id = emf_tournament.121
	picture = GFX_evt_tournament
	
	title = {
		text = EVTNAME_emf_tournament_120
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_120_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_120_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_121_fighting
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			FROM = { has_character_flag = emf_fighting_in_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_121_spectating
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			FROM = { has_character_flag = emf_spectator_at_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_121_nomad_fighting
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			FROM = { has_character_flag = emf_fighting_in_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_121_nomad_spectating
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			FROM = { has_character_flag = emf_spectator_at_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_121_muslim_fighting
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_nomad_tournament = yes
			FROM = { has_character_flag = emf_fighting_in_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_121_muslim_spectating
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_nomad_tournament = yes
			FROM = { has_character_flag = emf_spectator_at_tournament }
		}
	}
	
	is_triggered_only = yes
	
	capable_only = yes
	prisoner = no
	
	trigger = {
		same_realm = event_target:tournament_host
	}
	
	option = {
		name = EVTOPTA_emf_tournament_121
		trigger = { has_character_flag = emf_fighting_in_tournament }
		hidden_tooltip = {
			character_event = { id = emf_tournament.130 days = 1 random = 15 }
			character_event = { id = emf_tournament.249 days = 50 } #Calculate tournament score
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_121
		trigger = { has_character_flag = emf_spectator_at_tournament }
		hidden_tooltip = {
			character_event = { id = emf_tournament.140 days = 1 random = 15 }
		}
	}
}

# Main event picker for tournament fighters
character_event = {
	id = emf_tournament.130
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		random_list = {
			10 = { #character is killed
				modifier = {
					factor = 0.5
					combat_rating = 6
				}
				modifier = {
					factor = 0.5
					combat_rating = 5
				}
				modifier = {
					factor = 0.5
					combat_rating = 4
				}
				modifier = {
					factor = 0.5
					combat_rating = 3
				}
				modifier = {
					factor = 0.5
					combat_rating = 2
				}
				modifier = {
					factor = 0.5
					combat_rating = 1
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 1 }
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 0 }
				}
				modifier = {
					factor = 0.5
					trait = craven
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 0.75
					trait = agile
				}
				modifier = {
					factor = 1.5
					event_target:tournament_host = {
						NOT = {
							any_opinion_modifier_target = {
								count = 50
								has_character_flag = emf_fighting_in_tournament
								reverse_has_opinion_modifier = { who = PREV modifier = attending_tournament }
							}
						}
					}
				}
				character_event = { id = emf_tournament.150 days = 1 random = 25 }
			}
			13 = { #character maimed
				modifier = {
					factor = 0.5
					combat_rating = 6
				}
				modifier = {
					factor = 0.5
					combat_rating = 5
				}
				modifier = {
					factor = 0.5
					combat_rating = 4
				}
				modifier = {
					factor = 0.5
					combat_rating = 3
				}
				modifier = {
					factor = 0.5
					combat_rating = 2
				}
				modifier = {
					factor = 0.5
					combat_rating = 1
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 1 }
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 0 }
				}
				modifier = {
					factor = 0.5
					trait = craven
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 0.75
					trait = agile
				}
				modifier = {
					factor = 1.5
					event_target:tournament_host = {
						NOT = {
							any_opinion_modifier_target = {
								count = 50
								has_character_flag = emf_fighting_in_tournament
								reverse_has_opinion_modifier = { who = PREV modifier = attending_tournament }
							}
						}
					}
				}
				modifier = {
					factor = 1.5
					event_target:tournament_host = {
						NOT = {
							any_opinion_modifier_target = {
								count = 25
								has_character_flag = emf_fighting_in_tournament
								reverse_has_opinion_modifier = { who = PREV modifier = attending_tournament }
							}
						}
					}
				}
				character_event = { id = emf_tournament.152 days = 1 random = 25 }
			}
			20 = { #character wounded
				modifier = {
					factor = 0.5
					combat_rating = 6
				}
				modifier = {
					factor = 0.5
					combat_rating = 5
				}
				modifier = {
					factor = 0.5
					combat_rating = 4
				}
				modifier = {
					factor = 0.5
					combat_rating = 3
				}
				modifier = {
					factor = 0.5
					combat_rating = 2
				}
				modifier = {
					factor = 0.5
					combat_rating = 1
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 1 }
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 0 }
				}
				modifier = {
					factor = 0.5
					trait = craven
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 0.75
					trait = agile
				}
				modifier = {
					factor = 2.0
					event_target:tournament_host = {
						NOT = {
							any_opinion_modifier_target = {
								count = 50
								has_character_flag = emf_fighting_in_tournament
								reverse_has_opinion_modifier = { who = PREV modifier = attending_tournament }
							}
						}
					}
				}
				modifier = {
					factor = 2.0
					event_target:tournament_host = {
						NOT = {
							any_opinion_modifier_target = {
								count = 25
								has_character_flag = emf_fighting_in_tournament
								reverse_has_opinion_modifier = { who = PREV modifier = attending_tournament }
							}
						}
					}
				}
				character_event = { id = emf_tournament.154 days = 1 random = 25 }
			}
			40 = { #gain craven
				modifier = {
					factor = 0.5
					combat_rating = 6
				}
				modifier = {
					factor = 0.5
					combat_rating = 5
				}
				modifier = {
					factor = 0.5
					combat_rating = 4
				}
				modifier = {
					factor = 0.5
					combat_rating = 3
				}
				modifier = {
					factor = 0.5
					combat_rating = 2
				}
				modifier = {
					factor = 0.5
					combat_rating = 1
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 1 }
				}
				modifier = {
					factor = 1.5
					NOT = { combat_rating = 0 }
				}
				modifier = {
					factor = 0
					OR = {
						trait = craven
						trait = berserker
					}
				}
				modifier = {
					factor = 0.5
					trait = brave
				}
				character_event = { id = emf_tournament.156 days = 1 random = 25 }
			}
			40 = { #gain brave
				modifier = {
					factor = 1.5
					combat_rating = 6
				}
				modifier = {
					factor = 1.5
					combat_rating = 5
				}
				modifier = {
					factor = 1.5
					combat_rating = 4
				}
				modifier = {
					factor = 1.5
					combat_rating = 3
				}
				modifier = {
					factor = 1.5
					combat_rating = 2
				}
				modifier = {
					factor = 1.5
					combat_rating = 1
				}
				modifier = {
					factor = 0.5
					NOT = { combat_rating = 1 }
				}
				modifier = {
					factor = 0.5
					NOT = { combat_rating = 0 }
				}
				modifier = {
					factor = 0.5
					trait = craven
				}
				modifier = {
					factor = 0
					trait = brave
				}
				character_event = { id = emf_tournament.157 days = 1 random = 25 }
			}
			40 = { #promoted to tough soldier
				modifier = {
					factor = 0
					NOT = { trait = misguided_warrior }
				}
				character_event = { id = emf_tournament.158 days = 1 random = 25 }
			}
			40 = { #promoted to skilled tactician
				modifier = {
					factor = 0
					NOT = { trait = tough_soldier }
				}
				character_event = { id = emf_tournament.159 days = 1 random = 25 }
			}
			40 = { #promoted to brilliant strategist
				modifier = {
					factor = 0
					NOT = { trait = skilled_tactician }
				}
				character_event = { id = emf_tournament.160 days = 1 random = 25 }
			}
			40 = { #demoted to skilled tactician
				modifier = {
					factor = 0
					NOT = { trait = brilliant_strategist }
				}
				character_event = { id = emf_tournament.161 days = 1 random = 25 }
			}
			40 = { #demoted to tough soldier
				modifier = {
					factor = 0
					NOT = { trait = skilled_tactician }
				}
				character_event = { id = emf_tournament.162 days = 1 random = 25 }
			}
			40 = { #demoted to misguided warrior
				modifier = {
					factor = 0
					NOT = { trait = tough_soldier }
				}
				character_event = { id = emf_tournament.163 days = 1 random = 25 }
			}
			13 = { #gain homosexual
				modifier = {
					factor = 1.2
					trait = drunkard
				}
				modifier = {
					factor = 1.5
					trait = hedonist
				}
				modifier = {
					factor = 1.2
					trait = lustful
				}
				modifier = {
					factor = 0.5
					trait = temperate
				}
				modifier = {
					factor = 0.3
					trait = chaste
				}
				modifier = {
					factor = 0.3
					trait = zealous
				}
				modifier = {
					factor = 0
					OR = {
						is_female = yes
						trait = homosexual
						trait = celibate
						trait = eunuch
					}
				}
				character_event = { id = emf_tournament.164 days = 1 random = 25 }
			}
			13 = { #gain syphilitic
				modifier = {
					factor = 1.2
					trait = drunkard
				}
				modifier = {
					factor = 1.5
					trait = hedonist
				}
				modifier = {
					factor = 1.2
					trait = lustful
				}
				modifier = {
					factor = 0.5
					trait = temperate
				}
				modifier = {
					factor = 0.3
					trait = chaste
				}
				modifier = {
					factor = 0.3
					trait = zealous
				}
				modifier = {
					factor = 0
					OR = {
						is_adult = no
						trait = syphilitic
						trait = celibate
						trait = eunuch
					}
				}
				character_event = { id = emf_tournament.165 days = 1 random = 25 }
			}
			20 = { #gain drunkard
				modifier = {
					factor = 1.3
					trait = gluttonous
				}
				modifier = {
					factor = 1.1
					trait = lustful
				}
				modifier = {
					factor = 0.3
					trait = temperate
				}
				modifier = {
					factor = 0.5
					trait = chaste
				}
				modifier = {
					factor = 0
					trait = drunkard
				}
				character_event = { id = emf_tournament.166 days = 1 random = 25 }
			}
			20 = { #gain duelist
				modifier = {
					factor = 2
					trait = agile
				}
				modifier = {
					factor = 1.3
					trait = diligent
				}
				modifier = {
					factor = 1.3
					trait = wroth
				}
				modifier = {
					factor = 1.3
					trait = brave
				}
				modifier = {
					factor = 1.3
					is_strong_trigger = yes
				}
				modifier = {
					factor = 1.3
					martial = 10
				}
				modifier = {
					factor = 1.3
					martial = 15
				}
				modifier = {
					factor = 1.3
					martial = 20
				}
				modifier = {
					factor = 0
					OR = {
						NOT = { martial = 8 }
						trait = content
						trait = kind
						trait = craven
						is_weak_trigger = yes
						lifestyle_traits = 1
					}
				}
				character_event = { id = emf_tournament.167 days = 1 random = 25 }
			}
			40 = { #increase intrigue
				modifier = {
					factor = 1.2
					trait = elusive_shadow
				}
				modifier = {
					factor = 1.1
					trait = intricate_webweaver
				}
				modifier = {
					factor = 0.9
					trait = flamboyant_schemer
				}
				modifier = {
					factor = 0.7
					trait = amateurish_plotter
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = elusive_shadow
						trait = intricate_webweaver
						trait = flamboyant_schemer
						trait = amateurish_plotter
					}
				}
				modifier = {
					factor = 1.1
					trait = deceitful
				}
				modifier = {
					factor = 0.7
					trait = honest
				}
				modifier = {
					factor = 0.25
					martial = 10
				}
				modifier = {
					factor = 1.2
					NOT = { martial = 5 }
				}
				character_event = { id = emf_tournament.170 days = 1 random = 25 }
			}
			40 = { #decrease intrigue
				modifier = {
					factor = 0.8
					trait = elusive_shadow
				}
				modifier = {
					factor = 0.9
					trait = intricate_webweaver
				}
				modifier = {
					factor = 1.1
					trait = flamboyant_schemer
				}
				modifier = {
					factor = 1.5
					trait = amateurish_plotter
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = elusive_shadow
						trait = intricate_webweaver
						trait = flamboyant_schemer
						trait = amateurish_plotter
					}
				}
				modifier = {
					factor = 0.9
					trait = deceitful
				}
				modifier = {
					factor = 1.5
					trait = honest
				}
				modifier = {
					factor = 0.25
					martial = 10
				}
				modifier = {
					factor = 1.2
					NOT = {
						martial = 5
					}
				}
				character_event = { id = emf_tournament.171 days = 1 random = 25 }
			}
			40 = { #increase stewardship
				modifier = {
					factor = 1.5
					trait = midas_touched
				}
				modifier = {
					factor = 1.1
					trait = fortune_builder
				}
				modifier = {
					factor = 0.9
					trait = thrifty_clerk
				}
				modifier = {
					factor = 0.8
					trait = indulgent_wastrel
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = midas_touched
						trait = fortune_builder
						trait = thrifty_clerk
						trait = indulgent_wastrel
					}
				}
				modifier = {
					factor = 1.5
					trait = diligent
				}
				modifier = {
					factor = 0.9
					trait = slothful
				}
				character_event = { id = emf_tournament.172 days = 1 random = 25 }
			}
			40 = { #decrease stewardship
				modifier = {
					factor = 0.8
					trait = midas_touched
				}
				modifier = {
					factor = 0.9
					trait = fortune_builder
				}
				modifier = {
					factor = 1.1
					trait = thrifty_clerk
				}
				modifier = {
					factor = 1.5
					trait = indulgent_wastrel
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = midas_touched
						trait = fortune_builder
						trait = thrifty_clerk
						trait = indulgent_wastrel
					}
				}
				modifier = {
					factor = 0.9
					trait = diligent
				}
				modifier = {
					factor = 1.5
					trait = slothful
				}
				modifier = {
					factor = 0.25
					martial = 10
				}
				modifier = {
					factor = 1.2
					NOT = { martial = 5 }
				}
				character_event = { id = emf_tournament.173 days = 1 random = 25 }
			}
			40 = { #increase diplomacy
				modifier = {
					factor = 1.5
					trait = grey_eminence
				}
				modifier = {
					factor = 1.1
					trait = charismatic_negotiator
				}
				modifier = {
					factor = 0.9
					trait = underhanded_rogue
				}
				modifier = {
					factor = 0.8
					trait = naive_appeaser
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = grey_eminence
						trait = charismatic_negotiator
						trait = underhanded_rogue
						trait = naive_appeaser
					}
				}
				modifier = {
					factor = 1.5
					trait = gregarious
				}
				modifier = {
					factor = 0.9
					trait = shy
				}
				character_event = { id = emf_tournament.174 days = 1 random = 25 }
			}
			40 = { #decrease diplomacy
				modifier = {
					factor = 0.8
					trait = grey_eminence
				}
				modifier = {
					factor = 0.9
					trait = charismatic_negotiator
				}
				modifier = {
					factor = 1.1
					trait = underhanded_rogue
				}
				modifier = {
					factor = 1.5
					trait = naive_appeaser
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = grey_eminence
						trait = charismatic_negotiator
						trait = underhanded_rogue
						trait = naive_appeaser
					}
				}
				modifier = {
					factor = 0.9
					trait = gregarious
				}
				modifier = {
					factor = 1.5
					trait = shy
				}
				modifier = {
					factor = 0.25
					martial = 10
				}
				modifier = {
					factor = 1.2
					NOT = { martial = 5 }
				}
				character_event = { id = emf_tournament.175 days = 1 random = 25 }
			}
			1000 = {
				modifier = {
					factor = 0.1
					ai = no
				}
			}
		}
	
		# Chance of illness
		random = {
			chance = 10
			modifier = {
				factor = 0.5
				is_strong_trigger = yes
			}
			modifier = {
				factor = 0.75
				is_smart_trigger = yes
			}
			modifier = {
				factor = 0.75
				trait = temperate
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 0.5
				has_character_flag = emf_fighting_in_tournament
			}
			modifier = {
				factor = 1.25
				trait = stressed
			}
			modifier = {
				factor = 1.25
				trait = depressed
			}
			modifier = {
				factor = 1.25
				trait = drunkard
			}
			modifier = {
				factor = 1.25
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				trait = infirm
			}
			modifier = {
				factor = 2
				NOT = { health = 5.0 }
			}
			modifier = {
				factor = 2
				NOT = { health = 3.0 }
			}
			character_event = { id = emf_tournament.185 days = 15 random = 35 }
		}
	}
}

# Main event picker for tournament spectators
character_event = {
	id = emf_tournament.140
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_spectator_at_tournament

	trigger = {		
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
	}
	
	immediate = {
		random_list = {
			500 = {	#no event
				modifier = {
					factor = 0.1
					ai = no
				}
			}			
			2 = { #gain syphilitic
				modifier = {
					factor = 1.2
					trait = drunkard
				}
				modifier = {
					factor = 1.5
					trait = hedonist
				}
				modifier = {
					factor = 1.2
					trait = lustful
				}
				modifier = {
					factor = 0.5
					trait = temperate
				}
				modifier = {
					factor = 0.3
					trait = chaste
				}
				modifier = {
					factor = 0.3
					trait = zealous
				}
				modifier = {
					factor = 0
					OR = {
						is_adult = no
						trait = syphilitic
						trait = celibate
						trait = eunuch
					}
				}
				character_event = { id = emf_tournament.165 days = 1 random = 25 }
			}
			10 = { #gain drunkard
				modifier = {
					factor = 0
					OR = {
						is_female = yes
						religion_group = muslim
					}
				}
				modifier = {
					factor = 1.3
					trait = gluttonous
				}
				modifier = {
					factor = 1.1
					trait = lustful
				}
				modifier = {
					factor = 0.3
					trait = temperate
				}
				modifier = {
					factor = 0.5
					trait = chaste
				}
				modifier = {
					factor = 0
					trait = drunkard
				}
				character_event = { id = emf_tournament.166 days = 1 random = 25 }
			}
			10 = { #increase intrigue
				modifier = {
					factor = 1.2
					trait = elusive_shadow
				}
				modifier = {
					factor = 1.1
					trait = intricate_webweaver
				}
				modifier = {
					factor = 0.9
					trait = flamboyant_schemer
				}
				modifier = {
					factor = 0.7
					trait = amateurish_plotter
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = elusive_shadow
						trait = intricate_webweaver
						trait = flamboyant_schemer
						trait = amateurish_plotter
					}
				}
				modifier = {
					factor = 1.1
					trait = deceitful
				}
				modifier = {
					factor = 0.7
					trait = honest
				}
				character_event = { id = emf_tournament.170 days = 1 random = 25 }
			}
			10 = { #decrease intrigue
				modifier = {
					factor = 0.8
					trait = elusive_shadow
				}
				modifier = {
					factor = 0.9
					trait = intricate_webweaver
				}
				modifier = {
					factor = 1.1
					trait = flamboyant_schemer
				}
				modifier = {
					factor = 1.5
					trait = amateurish_plotter
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = elusive_shadow
						trait = intricate_webweaver
						trait = flamboyant_schemer
						trait = amateurish_plotter
					}
				}
				modifier = {
					factor = 0.9
					trait = deceitful
				}
				modifier = {
					factor = 1.5
					trait = honest
				}
				character_event = { id = emf_tournament.171 days = 1 random = 25 }
			}
			10 = { #increase stewardship
				modifier = {
					factor = 1.5
					trait = midas_touched
				}
				modifier = {
					factor = 1.1
					trait = fortune_builder
				}
				modifier = {
					factor = 0.9
					trait = thrifty_clerk
				}
				modifier = {
					factor = 0.8
					trait = indulgent_wastrel
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = midas_touched
						trait = fortune_builder
						trait = thrifty_clerk
						trait = indulgent_wastrel
					}
				}
				modifier = {
					factor = 1.5
					trait = diligent
				}
				modifier = {
					factor = 0.9
					trait = slothful
				}
				character_event = { id = emf_tournament.172 days = 1 random = 25 }
			}
			10 = { #decrease stewardship
				modifier = {
					factor = 0.8
					trait = midas_touched
				}
				modifier = {
					factor = 0.9
					trait = fortune_builder
				}
				modifier = {
					factor = 1.1
					trait = thrifty_clerk
				}
				modifier = {
					factor = 1.5
					trait = indulgent_wastrel
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = midas_touched
						trait = fortune_builder
						trait = thrifty_clerk
						trait = indulgent_wastrel
					}
				}
				modifier = {
					factor = 0.9
					trait = diligent
				}
				modifier = {
					factor = 1.5
					trait = slothful
				}
				character_event = { id = emf_tournament.173 days = 1 random = 25 }
			}
			10 = { #increase diplomacy
				modifier = {
					factor = 1.5
					trait = grey_eminence
				}
				modifier = {
					factor = 1.1
					trait = charismatic_negotiator
				}
				modifier = {
					factor = 0.9
					trait = underhanded_rogue
				}
				modifier = {
					factor = 0.8
					trait = naive_appeaser
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = grey_eminence
						trait = charismatic_negotiator
						trait = underhanded_rogue
						trait = naive_appeaser
					}
				}
				modifier = {
					factor = 1.5
					trait = gregarious
				}
				modifier = {
					factor = 0.9
					trait = shy
				}
				character_event = { id = emf_tournament.174 days = 1 random = 25 }
			}
			10 = { #decrease diplomacy
				modifier = {
					factor = 0.8
					trait = grey_eminence
				}
				modifier = {
					factor = 0.9
					trait = charismatic_negotiator
				}
				modifier = {
					factor = 1.1
					trait = underhanded_rogue
				}
				modifier = {
					factor = 1.5
					trait = naive_appeaser
				}
				modifier = {
					factor = 0.25
					NOR = {
						trait = grey_eminence
						trait = charismatic_negotiator
						trait = underhanded_rogue
						trait = naive_appeaser
					}
				}
				modifier = {
					factor = 0.9
					trait = gregarious
				}
				modifier = {
					factor = 1.5
					trait = shy
				}
				character_event = { id = emf_tournament.175 days = 1 random = 25 }
			}
			10 = { #lady becomes proud
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = proud
					}
				}
				modifier = {
					factor = 0.25
					trait = humble
				}
				modifier = {
					factor = 0.8
					trait = chaste
				}
				modifier = {
					factor = 0.8
					trait = temperate
				}
				modifier = {
					factor = 0.8
					trait = content
				}
				modifier = {
					factor = 0.8
					trait = kind
				}
				modifier = {
					factor = 0.8
					trait = slothful
				}
				modifier = {
					factor = 0.8
					trait = shy
				}				
				modifier = {
					factor = 1.25
					trait = envious
				}
				modifier = {
					factor = 1.25
					trait = ambitious
				}
				modifier = {
					factor = 1.25
					trait = arbitrary
				}
				modifier = {
					factor = 1.25
					trait = gregarious
				}
				modifier = { 
					factor = 3
					trait = fair
				}
				modifier = {
					factor = 2
					trait = tall
				}
				modifier = {
					factor = 0.5
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 0.25
					is_unattractive_trigger = yes
				}
				character_event = { id = emf_tournament.176 days = 1 random = 25 }
			}
			10 = { #lady becomes humble
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = humble
					}
				}
				modifier = {
					factor = 0.25
					trait = proud
				}
				modifier = {
					factor = 0.8
					trait = envious
				}
				modifier = {
					factor = 0.8
					trait = ambitious
				}
				modifier = {
					factor = 0.8
					trait = arbitrary
				}
				modifier = {
					factor = 0.8
					trait = diligent
				}
				modifier = {
					factor = 0.8
					trait = charitable
				}
				modifier = {
					factor = 0.8
					trait = gregarious
				}
				modifier = {
					factor = 0.25
					trait = fair
				}
				modifier = {
					factor = 0.5
					trait = tall
				}
				modifier = {
					factor = 1.25
					trait = chaste
				}
				modifier = {
					factor = 1.25
					trait = temperate
				}
				modifier = {
					factor = 1.5
					trait = content
				}
				modifier = {
					factor = 1.25
					trait = kind
				}
				modifier = {
					factor = 1.25
					trait = slothful
				}
				modifier = {
					factor = 1.5
					trait = shy
				}
				modifier = {
					factor = 2
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 4
					is_unattractive_trigger = yes
				}
				character_event = { id = emf_tournament.177 days = 1 random = 25 }
			}
			10 = { #lady becomes gregarious
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = gregarious
					}
				}				
				modifier = {
					factor = 0.25
					trait = shy
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = fair
						trait = wroth
						trait = ambitious
						trait = proud
					}
				}
				modifier = {
					factor = 0.8
					trait = chaste
				}
				modifier = {
					factor = 0.8
					trait = greedy
				}
				modifier = {
					factor = 0.8
					trait = honest
				}
				modifier = {
					factor = 0.8
					trait = cynical
				}
				modifier = {
					factor = 0.8
					trait = scholar
				}
				modifier = {
					factor = 0.8
					trait = gardener
				}
				modifier = {
					factor = 0.8
					trait = hunter
				}
				modifier = {
					factor = 0.8
					trait = falconer
				}
				modifier = {
					factor = 0.8
					NOT = { diplomacy = 10 }
				}
				modifier = {
					factor = 0.8
					NOT = { diplomacy = 8 }
				}
				modifier = {
					factor = 0.8
					NOT = { diplomacy = 6 }
				}
				modifier = {
					factor = 0
					NOT = { diplomacy = 4 }
				}
				modifier = {
					factor = 0.5
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 0.25
					is_unattractive_trigger = yes
				}
				character_event = { id = emf_tournament.178 days = 1 random = 25 }
			}
			10 = { #lady becomes shy
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = shy
					}
				}	
				modifier = {
					factor = 0.25
					trait = gregarious
				}				
				modifier = {
					factor = 1.5
					trait = humble
				}
				modifier = {
					factor = 1.5
					trait = craven
				}
				modifier = {
					factor = 0.5
					trait = lustful
				}
				modifier = {
					factor = 0.8
					trait = kind
				}
				modifier = {
					factor = 0.8
					trait = deceitful
				}
				modifier = {
					factor = 0.8
					trait = trusting
				}
				modifier = {
					factor = 0
					OR = {
						trait = hedonist
						trait = seductress
						trait = socializer
					}
				}
				modifier = {
					factor = 0.5
					OR = {
						trait = poet
						trait = falconer
						trait = gamer
					}
				}
				modifier = {
					factor = 0.8
					diplomacy = 10
				}
				modifier = {
					factor = 0.8
					diplomacy = 12
				}
				modifier = {
					factor = 0.8
					diplomacy = 14
				}
				modifier = {
					factor = 0
					diplomacy = 16
				}
				modifier = {
					factor = 2
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 4
					is_unattractive_trigger = yes
				}
				character_event = { id = emf_tournament.179 days = 1 random = 25 }
			}
			10 = { #lady becomes honest
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = honest
					}
				}
				modifier = {
					factor = 0.25
					trait = deceitful
				}				
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 1.25
					trait = charitable
				}
				modifier = {
					factor = 1.25
					trait = proud
				}
				modifier = {
					factor = 1.25
					trait = content
				}
				modifier = {
					factor = 1.25
					trait = diligent
				}
				modifier = {
					factor = 1.25
					is_strong_trigger = yes
				}
				modifier = {
					factor = 1.25
					trait = tall
				}
				modifier = {
					factor = 0.8
					is_weak_trigger = yes
				}
				modifier = {
					factor = 0.8
					trait = cynical
				}
				modifier = {
					factor = 0.8
					trait = paranoid
				}
				modifier = {
					factor = 0.8
					trait = ambitious
				}
				modifier = {
					factor = 0.8
					trait = envious
				}
				character_event = { id = emf_tournament.180 days = 1 random = 25 }
			}
			10 = { #lady becomes deceitful
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = deceitful
					}
				}
				modifier = {
					factor = 0.25
					trait = honest
				}				
				modifier = {
					factor = 0.8
					trait = trusting
				}
				modifier = {
					factor = 0.8
					trait = charitable
				}
				modifier = {
					factor = 0.8
					trait = proud
				}
				modifier = {
					factor = 0.8
					trait = content
				}
				modifier = {
					factor = 0.8
					trait = diligent
				}
				modifier = {
					factor = 0.8
					is_strong_trigger = yes
				}
				modifier = {
					factor = 0.8
					trait = tall
				}
				modifier = {
					factor = 1.25
					is_weak_trigger = yes
				}
				modifier = {
					factor = 1.25
					trait = cynical
				}
				modifier = {
					factor = 1.25
					trait = paranoid
				}
				modifier = {
					factor = 1.25
					trait = ambitious
				}
				modifier = {
					factor = 1.25
					trait = envious
				}
				character_event = { id = emf_tournament.181 days = 1 random = 25 }
			}
			10 = { #lady becomes lustful
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = lustful
						trait = celibate
					}
				}
				modifier = {
					factor = 4
					OR = {
						trait = hedonist
						trait = seductress
					}
				}
				modifier = {
					factor = 2
					trait = socializer
				}
				modifier = {
					factor = 0.25
					trait = chaste
				}				
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 1.25
					trait = kind
				}
				modifier = {
					factor = 1.25
					trait = proud
				}
				modifier = {
					factor = 1.25
					trait = wroth
				}
				modifier = {
					factor = 1.25
					trait = greedy
				}
				modifier = {
					factor = 1.25
					trait = poet
				}
				modifier = {
					factor = 1.25
					trait = mystic
				}
				modifier = {
					factor = 1.25
					trait = diligent
				}
				modifier = {
					factor = 0.8
					trait = temperate
				}
				modifier = {
					factor = 0.8
					trait = patient
				}
				modifier = {
					factor = 0.8
					trait = slothful
				}
				modifier = {
					factor = 0.8
					trait = cynical
				}
				modifier = {
					factor = 0.8
					trait = paranoid
				}
				modifier = {
					factor = 0.8
					trait = ambitious
				}
				modifier = {
					factor = 0.8
					trait = charitable
				}
				modifier = {
					factor = 0.8
					trait = gardener
				}
				modifier = {
					factor = 1.25
					has_attractive_trait_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_attractive_trigger = yes
				}
				modifier = {
					factor = 0.5
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 0.25
					is_unattractive_trigger = yes
				}			
				character_event = { id = emf_tournament.182 days = 1 random = 25 }
			}
			10 = { #lady becomes chaste
				modifier = {
					factor = 0
					OR = {
						is_female = no
						trait = chaste
						trait = hedonist
						trait = seductress
					}
				}
				modifier = {
					factor = 0.25
					trait = lustful
				}				
				modifier = {
					factor = 0.4
					trait = hedonist
				}
				modifier = {
					factor = 0.8
					trait = trusting
				}
				modifier = {
					factor = 0.8
					trait = kind
				}
				modifier = {
					factor = 0.8
					trait = proud
				}
				modifier = {
					factor = 0.8
					trait = wroth
				}
				modifier = {
					factor = 0.8
					trait = greedy
				}
				modifier = {
					factor = 0.8
					trait = poet
				}
				modifier = {
					factor = 0.8
					trait = mystic
				}
				modifier = {
					factor = 0.8
					trait = diligent
				}
				modifier = {
					factor = 1.25
					trait = temperate
				}
				modifier = {
					factor = 1.25
					trait = patient
				}
				modifier = {
					factor = 1.25
					trait = slothful
				}
				modifier = {
					factor = 1.25
					trait = cynical
				}
				modifier = {
					factor = 1.25
					trait = paranoid
				}
				modifier = {
					factor = 1.25
					trait = ambitious
				}
				modifier = {
					factor = 1.25
					trait = charitable
				}
				modifier = {
					factor = 1.25
					trait = gardener
				}
				modifier = {
					factor = 1.25
					trait = duelist
				}
				modifier = {
					factor = 1.5
					has_unattractive_trait_trigger = yes
				}
				modifier = {
					factor = 2
					is_unattractive_trigger = yes
				}
				character_event = { id = emf_tournament.183 days = 1 random = 25 }
			}
			10 = { #gain socializer
				character_event = { id = emf_tournament.168 days = 1 random = 25 }
			}
			10 = { #gain gamer
				character_event = { id = emf_tournament.169 days = 1 random = 25 }
			}
		}
	
		# Chance of illness
		random = {
			chance = 15
			modifier = {
				factor = 0.5
				is_strong_trigger = yes
			}
			modifier = {
				factor = 0.75
				is_smart_trigger = yes
			}
			modifier = {
				factor = 0.75
				trait = temperate
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 0.5
				has_character_flag = emf_fighting_in_tournament
			}
			modifier = {
				factor = 1.25
				trait = stressed
			}
			modifier = {
				factor = 1.25
				trait = depressed
			}
			modifier = {
				factor = 1.25
				trait = drunkard
			}
			modifier = {
				factor = 1.25
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				trait = infirm
			}
			modifier = {
				factor = 2
				NOT = { health = 5.0 }
			}
			modifier = {
				factor = 2
				NOT = { health = 3.0 }
			}
			character_event = { id = emf_tournament.185 days = 15 random = 35 }
		}
	}
}

# Fighter is killed in tournament
character_event = {
	id = emf_tournament.150
	picture = GFX_evt_death
	desc = EVTDESC_emf_tournament_150
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		emf_find_tournament_opponent_for_ROOT = yes
		event_target:tournament_opponent = {
			prestige = 25
			change_variable = { which = "tournament_fighter" value = 3 }
		}
		any_player = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.151 }
		}	
	}
	
	option = {
		name = EVTOPTA70009
		trigger = { emf_uses_regular_tournament = yes }
		death = {
			death_reason = death_tournament
			killer = event_target:tournament_opponent
		}
	}
	option = {
		name = EVTOPTA88259
		trigger = { emf_uses_muslim_tournament = yes }
		death = {
			death_reason = death_furusiyya
			killer = event_target:tournament_opponent
		}
	}
	option = {
		name = EVTOPTA_emf_tournament_150
		trigger = { emf_uses_nomad_tournament = yes }
		death = {
			death_reason = death_wargames
			killer = event_target:tournament_opponent
		}
	}
}

# Inform attendees
character_event = {
	id = emf_tournament.151
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_151
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_151_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_151_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			NOT = { has_character_flag = no_msg_death }
			character = event_target:tournament_opponent
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_151
		trigger = { NOT = { character = event_target:tournament_opponent } }
		opinion = { who = event_target:tournament_opponent modifier = opinion_impressed multiplier = 3 months = 12 }
	}
	option = {
		name = EVTOPTB_emf_tournament_151
		trigger = { NOT = { character = event_target:tournament_opponent } }
		set_character_flag = no_msg_death
	}
	option = {
		name = EVTOPTC_emf_tournament_151
		trigger = { character = event_target:tournament_opponent }
		tooltip = { prestige = 25 }
	}
}
	
# Fighter is maimed in tournament
character_event = {
	id = emf_tournament.152
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_152
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_152_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_152_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		emf_find_tournament_opponent_for_ROOT = yes
		event_target:tournament_opponent = {
			prestige = 10
			change_variable = { which = "tournament_fighter" value = 2 }
		}
		any_player = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.153 }
		}	
	}
	
	option = {
		name = {
			text = EVTOPTA70010
			trigger = { emf_uses_muslim_tournament = no }
		}
		name = {
			text = EVTOPTA88260
			trigger = { emf_uses_muslim_tournament = yes }
		}
		add_maimed_trait_effect = yes
		if = {
			limit = { has_unpleasant_personality_trigger = yes }
			opinion = { who = event_target:tournament_opponent modifier = opinion_wants_revenge months = 60 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = yes
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_resentful multiplier = 2 months = 60 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = no
				has_pleasant_trait_trigger = yes
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_impressed months = 60 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = no
				has_pleasant_trait_trigger = no
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_resentful months = 60 }
		}
	}
}

# Inform attendees
character_event = {
	id = emf_tournament.153
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_153
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_153_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_153_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			NOT = { has_character_flag = no_msg_wounded }
			character = event_target:tournament_opponent
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_153
		trigger = { NOT = { character = event_target:tournament_opponent } }
		opinion = { who = event_target:tournament_opponent modifier = opinion_impressed multiplier = 2 months = 12 }
	}
	option = {
		name = EVTOPTB_emf_tournament_153
		trigger = { NOT = { character = event_target:tournament_opponent } }
		set_character_flag = no_msg_wounded
	}
	option = {
		name = EVTOPTC_emf_tournament_153
		trigger = { character = event_target:tournament_opponent }
		tooltip = { prestige = 10 }
	}
}

# Fighter is wounded in tournament
character_event = {
	id = emf_tournament.154
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_154
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_154_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_154_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		emf_find_tournament_opponent_for_ROOT = yes
		event_target:tournament_opponent = {
			prestige = 5
			change_variable = { which = "tournament_fighter" value = 1 }
		}
		any_player = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.155 }
		}	
	}
	
	option = {
		name = {
			text = EVTOPTA70011
			trigger = { emf_uses_muslim_tournament = no }
		}
		name = {
			text = EVTOPTA88261
			trigger = { emf_uses_muslim_tournament = yes }
		}
		add_trait = wounded
		if = {
			limit = { has_unpleasant_personality_trigger = yes }
			opinion = { who = event_target:tournament_opponent modifier = opinion_wants_revenge months = 24 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = yes
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_resentful multiplier = 2 months = 24 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = no
				has_pleasant_trait_trigger = yes
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_impressed months = 24 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = no
				has_pleasant_trait_trigger = no
			}
			opinion = { who = event_target:tournament_opponent modifier = opinion_resentful months = 24 }
		}
	}
}

# Inform attendees
character_event = {
	id = emf_tournament.155
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_155
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_155_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_155_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			NOT = { has_character_flag = no_msg_wounded }
			character = event_target:tournament_opponent
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_155
		trigger = { NOT = { character = event_target:tournament_opponent } }
		opinion = { who = event_target:tournament_opponent modifier = opinion_impressed months = 12 }
	}
	option = {
		name = EVTOPTB_emf_tournament_153
		trigger = { NOT = { character = event_target:tournament_opponent } }
		set_character_flag = no_msg_wounded
	}
	option = {
		name = EVTOPTC_emf_tournament_155
		trigger = { character = event_target:tournament_opponent }
		tooltip = { prestige = 5 }
	}
}

# Fighter becomes craven
character_event = {
	id = emf_tournament.156
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_156
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_156_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_156_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA70012
		add_trait = craven
		prestige = -10
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = -2 }
		}
	}
}

# Fighter becomes brave
character_event = {
	id = emf_tournament.157
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_157
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_157_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_157_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA88263
		add_trait = brave
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = 2 }
		}
	}
}

# Fighter becomes tough soldier
character_event = {
	id = emf_tournament.158
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_158
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_158_muslim
		trigger = { emf_uses_regular_tournament = no }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = misguided_warrior
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA70014
		remove_trait = misguided_warrior
		add_trait = tough_soldier
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = 1 }
		}
	}
}

# Fighter becomes skilled tactician
character_event = {
	id = emf_tournament.159
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_159
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_159_muslim
		trigger = { emf_uses_regular_tournament = no }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = tough_soldier
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = {
			text = EVTOPTA70015
			trigger = { NOT = { religion_group = muslim } }
		}
		name = {
			text = EVTOPTA88265
			trigger = { religion_group = muslim }
		}
		remove_trait = tough_soldier
		add_trait = skilled_tactician
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = 1 }
		}
	}
}

# Fighter becomes brilliant strategist
character_event = {
	id = emf_tournament.160
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_160
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_160_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_160_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = skilled_tactician
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA70016
		remove_trait = skilled_tactician
		add_trait = brilliant_strategist
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = 1 }
		}
	}
}

# Fighter demoted to skilled tactician
character_event = {
	id = emf_tournament.161
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_161
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_161_muslim
		trigger = { emf_uses_regular_tournament = no }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = brilliant_strategist
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA88267
		remove_trait = brilliant_strategist
		add_trait = skilled_tactician
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = -2 }
		}
	}
}

# Fighter demoted to tough soldier
character_event = {
	id = emf_tournament.162
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_162
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_162_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_162_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = skilled_tactician
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA88268
		remove_trait = skilled_tactician
		add_trait = tough_soldier
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = -2 }
		}
	}
}

# Fighter demoted to misguided warrior
character_event = {
	id = emf_tournament.163
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_163
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_163_muslim
		trigger = { emf_uses_regular_tournament = no }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		trait = tough_soldier
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = {
			text = EVTOPTA70019
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88269
			trigger = { emf_uses_regular_tournament = no }
		}
		remove_trait = tough_soldier
		add_trait = misguided_warrior
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = -2 }
		}
	}
}

# Fighter becomes homosexual
character_event = {
	id = emf_tournament.164
	picture = GFX_evt_shadowy_cabal

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_164
		picture = GFX_evt_shadowy_cabal
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_164_nomad
		picture = GFX_evt_shadowy_cabal
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_164_muslim
		picture = GFX_evt_lunatic_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			trait = homosexual
			trait = celibate
			trait = eunuch
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA88273
		add_trait = homosexual
	}
}

# Tournament attendee becomes syphilitic
character_event = {
	id = emf_tournament.165
	picture = GFX_evt_lovers
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_165
		picture = GFX_evt_lovers
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_165_nomad
		picture = GFX_evt_lovers
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_165_muslim
		picture = GFX_evt_sultan
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOR = {
			trait = syphilitic
			trait = celibate
			trait = eunuch
		}
	}

	option = {
		name = {
			text = EVTOPTA70024
			trigger = { emf_uses_muslim_tournament = no }
		}
		name = {
			text = EVTOPTA88274
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = { has_dlc = "Reapers" }
			set_character_flag = got_syphilis
			character_event = { id = RIP.5007 }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }	
			add_trait = syphilitic
		}
	}
}

# Tournament attendee becomes drunkard
character_event = {
	id = emf_tournament.166
	picture = GFX_evt_drunk
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_166
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_166_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_166_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOT = { trait = drunkard }
	}

	option = {
		name = EVTOPTA70025
		add_trait = drunkard
		hidden_tooltip = {
			change_variable = { which = "tournament_fighter" value = -1 }
		}
	}
}

# Fighter becomes duelist
character_event = {
	id = emf_tournament.167
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_167
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_167_muslim
		trigger = { emf_uses_regular_tournament = no }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			lifestyle_traits = 1
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}

	option = {
		name = EVTOPTA88276
		add_trait = duelist
	}
}

# Tournament attendee becomes socializer
character_event = {
	id = emf_tournament.168
	picture = GFX_evt_courtiers_talking
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_168
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_168_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_168_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			lifestyle_traits = 1
			is_ill = yes
		}
	}

	option = {
		name = EVTOPTA_emf_tournament_168
		add_trait = socializer
	}
}

# Tournament attendee becomes gamer
character_event = {
	id = emf_tournament.169
	picture = GFX_evt_courtiers_talking
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_169
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_169_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_169_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			lifestyle_traits = 1
			is_ill = yes
		}
	}

	option = {
		name = EVTOPTA_emf_tournament_169
		add_trait = gamer
	}
}

# Tournament attendee gains intrigue
character_event = {
	id = emf_tournament.170
	picture = GFX_evt_whispers

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_170
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_170_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_170_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = EVTOPTA70027
		change_intrigue = 1
	}
}

# Tournament attendee loses intrigue
character_event = {
	id = emf_tournament.171
	picture = GFX_evt_whispers

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_171
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_171_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_171_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = {
			text = EVTOPTA70028
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88278
			trigger = { emf_uses_regular_tournament = no }
		}
		change_intrigue = -1
	}
}

# Tournament attendee gains stewardship
character_event = {
	id = emf_tournament.172
	picture = GFX_evt_market

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_172
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_172_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_172_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = EVTOPTA88279
		change_stewardship = 1
	}
}

# Tournament attendee loses stewardship
character_event = {
	id = emf_tournament.173
	picture = GFX_evt_market

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_173
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_173_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_173_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = {
			text = EVTOPTA70030
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88280
			trigger = { emf_uses_regular_tournament = no }
		}
		change_stewardship = -1
	}
}

# Tournament attendee gains diplomacy
character_event = {
	id = emf_tournament.174
	picture = GFX_evt_council

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_174
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_174_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_174_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = EVTOPTA70031
		change_diplomacy = 1
	}
}

# Tournament attendee loses diplomacy
character_event = {
	id = emf_tournament.175
	picture = GFX_evt_council

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_175
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_175_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_175_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
	}

	option = {
		name = EVTOPTA70032
		change_diplomacy = -1
	}
}

# Lady attending tournament becomes proud
character_event = {
	id = emf_tournament.176
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_176
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_176_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_176_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = proud }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_176
		add_trait = proud
	}
}

# Lady attending tournament becomes humble
character_event = {
	id = emf_tournament.177
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_177
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_177_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_177_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = humble }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_177
		add_trait = humble
	}
}

# Lady attending tournament becomes gregarious
character_event = {
	id = emf_tournament.178
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_178
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_178_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_178_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = gregarious }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_178
		add_trait = gregarious
	}
}

# Lady attending tournament becomes shy
character_event = {
	id = emf_tournament.179
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_179
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_179_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_179_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = shy }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_179
		add_trait = shy
	}
}

# Lady attending tournament becomes honest
character_event = {
	id = emf_tournament.180
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_180
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_180_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_180_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = honest }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_180
		add_trait = honest
	}
}

# Lady attending tournament becomes deceitful
character_event = {
	id = emf_tournament.181
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_181
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_181_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_181_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = deceitful }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_181
		add_trait = deceitful
	}
}

# Lady attending tournament becomes lustful
character_event = {
	id = emf_tournament.182
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_182
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_182_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_182_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = lustful }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_182
		add_trait = lustful
	}
}

# Lady attending tournament becomes chaste
character_event = {
	id = emf_tournament.183
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_183
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_183_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_183_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		is_ill = no
		NOT = { trait = chaste }
	}
	
	option = {
		name = EVTOPTA_emf_tournament_183
		add_trait = chaste
	}
}

# Men react poorly to lady contestant
character_event = {
	id = emf_tournament.184
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_184
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_184_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_184_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}	

	min_age = 16
	only_women = yes
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		top_liege = { has_character_flag = emf_holding_tournament }
		NOR = {
			has_game_rule = { name = gender value = all }
			emf_feminist_religion_trigger = yes
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
			has_character_flag = attending_tournament_sexism
		}
	}	
	
	mean_time_to_happen = {
		days = 30
		modifier = {
			factor = 2
			emf_formidable_woman_trigger = yes
		}
		modifier = {
			factor = 2
			is_councillor = yes
		}
		modifier = {
			factor = 2
			has_game_rule = { name = gender value = council }
		}
	}
	
	immediate = {
		top_liege = { save_event_target_as = tournament_host }
		set_character_flag = attending_tournament_sexism
	}
	
	option = {
		name = EVTOPTA_emf_tournament_184 #react with rage
		trigger = {
			NOT = { trait = patient }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
		piety = -25
		if = {
			limit = { NOT = { trait = wroth } }
			add_trait = wroth
		}
		if = {
			limit = {
				NOR = {
					trait = proud
					trait = humble
				}
			}
			random = {
				chance = 25
				emf_notify_add_proud_effect = yes
			}
		}
		if = {
			limit = { trait = humble }
			random = {
				chance = 25
				emf_notify_remove_humble_effect = yes
			}
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_184 #it doesn't bother me
		trigger = {
			NOT = { trait = wroth }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		prestige = -25
		if = {
			limit = { NOT = { trait = patient } }
			add_trait = patient
		}
		if = {
			limit = {
				NOR = {
					trait = humble
					trait = proud
				}
			}
			random = {
				chance = 25
				emf_notify_add_humble_effect = yes
			}
		}
		if = {
			limit = { trait = proud }
			random = {
				chance = 25
				emf_notify_remove_proud_effect = yes
			}
		}
	}
}

# Tournament attendee contracts an illness
character_event = {
	id = emf_tournament.185
	picture = GFX_evt_illness
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_185
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_185_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_185_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	min_age = 14
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes

	trigger = {
		is_ill = no
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		OR = {
			has_character_flag = emf_fighting_in_tournament
			has_character_flag = emf_spectator_at_tournament
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_185
		add_minor_symptom_effect = yes
	}
}

	
### FAIREST OF THEM ALL

# Finding the realm's greatest beauty
character_event = {
	id = emf_tournament.200
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = emf_holding_tournament
	}
	
	immediate = {
		# First find an ideal candidate
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					trait = gregarious
					trait = seductress
					trait = socializer
					trait = tall
					trait = melodious_voice
					trait = fertile
				}
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 22
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		# Then less ideal
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 22
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		# Then even less ideal
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 22
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					has_unattractive_trait_trigger = yes
					trait = scarred
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		# Then older versions
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					trait = gregarious
					trait = seductress
					trait = socializer
					trait = tall
					trait = melodious_voice
					trait = fertile
				}
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 26
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 26
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 26
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					has_unattractive_trait_trigger = yes
					trait = scarred
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		# Then even older versions
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					trait = gregarious
					trait = seductress
					trait = socializer
					trait = tall
					trait = melodious_voice
					trait = fertile
				}
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 30
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 30
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				trait = fair
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 30
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					has_unattractive_trait_trigger = yes
					trait = scarred
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		# Then non-fair but still attractive
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 22
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 26
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
		random_character = {
			limit = {
				has_character_flag = emf_spectator_at_tournament
				same_realm = ROOT
				is_female = yes
				prisoner = no
				age = 14
				is_attractive_trigger = yes
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					age = 30
					is_ill = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					trait = incapable
				}
			}
			character_event = { id = emf_tournament.201 }
			break = yes
		}
	}
}

# The beauty is informed
character_event = {
	id = emf_tournament.201
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_201
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_201_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_201_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	min_age = 14
	capable_only = yes
	prisoner = no
	only_women = yes
	has_character_flag = emf_spectator_at_tournament
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_201
		if = {
			limit = { NOT = { trait = beauty } }
			add_trait = beauty
		}
		hidden_tooltip = {
			# Inform players
			any_player = {
				limit = {
					NOT = { character = ROOT }
					NOT = { trait = beauty }
					same_realm = FROM
					OR = {
						character = FROM
						has_opinion_modifier = { who = FROM modifier = attending_tournament }
					}
				}
				character_event = { id = emf_tournament.202 }
			}
			# Inform former beauties and give them a chance for jealousy
			any_character = {
				limit = {
					NOT = { character = ROOT }
					trait = beauty
					OR = {
						character = FROM
						is_liege_or_above = FROM
					}
				}
				character_event = { id = emf_tournament.203 days = 1 }
			}
		}
	}
}

# Inform other attendees of the new beauty
character_event = {
	id = emf_tournament.202
	picture = GFX_evt_ladies_tournament

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_202
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_202_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_202_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_tournament_202
		tooltip = { FROM = { add_trait = beauty } }
	}
}

# Former beauties are relieved of their trait
character_event = {
	id = emf_tournament.203
	picture = GFX_evt_ladies_tournament

	desc = {
		text = EVTDESC_emf_tournament_203
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_203_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_203_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
		remove_trait = beauty
		tooltip = { FROM = { add_trait = beauty } }
		if = {
			limit = { has_unpleasant_personality_trigger = yes }
			opinion = { who = FROM modifier = opinion_wants_revenge months = 60 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = yes
			}
			opinion = { who = FROM modifier = opinion_jealous multiplier = 2 months = 60 }
		}
		if = {
			limit = {
				has_unpleasant_personality_trigger = no
				has_unpleasant_trait_trigger = no
				has_pleasant_trait_trigger = no
			}
			opinion = { who = FROM modifier = opinion_jealous months = 60 }
		}
	}
}


### TOURNAMENT ROMANCES

# Fighter is at the tournament and available
character_event = {
	id = emf_tournament.210
	
	hide_window = yes
	
	min_age = 16
	max_age = 40
	only_capable = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		top_liege = { has_character_flag = emf_holding_tournament }
		OR = {
			has_unattractive_trait_trigger = no
			higher_real_tier_than = COUNT
			is_strong_trigger = yes
			trait = brave
		}
		NOR = {
			has_lover = yes
			trait = celibate
			is_ill = yes
			is_pregnant = yes
			is_inaccessible_trigger = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_disability_trigger = yes
			has_character_flag = emf_tournament_romance
		}
	}
	
	mean_time_to_happen = {
		days = 50
		modifier = {
			factor = 0.5
			ai = no
		}
		modifier = {
			factor = 0.5
			OR = {
				has_focus = focus_seduction
				trait = homosexual
			}
		}
		modifier = {
			factor = 0.75
			trait = lustful
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = hedonist
				trait = seducer
				trait = seductress
			}
		}
		modifier = {
			factor = 0.75
			OR = {
				trait = fair
				trait = just
				trait = brave
				trait = gregarious
				trait = robust
				trait = strong
				trait = tall
				trait = melodious_voice
				trait = powerful_voice
				trait = calm_voice
			}
		}
		modifier = {
			factor = 2.0
			trait = chaste
		}
		modifier = {
			factor = 0.75
			NOT = { age = 24 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 20 }
		}
		modifier = {
			factor = 1.5
			age = 30
		}
		modifier = {
			factor = 1.25
			has_unpleasant_trait_trigger = yes
		}
		modifier = {
			factor = 1.5
			has_unpleasant_personality_trigger = yes
		}
	}

	immediate = {
		set_character_flag = emf_tournament_romance
		top_liege = { save_event_target_as = tournament_host }
		random_character = {
			limit = {
				same_realm = event_target:tournament_host
				root_mutual_attraction_trigger = yes
				is_attractive_trigger = yes
				is_adult = yes
				has_lover = no
				is_consort = no
				is_pregnant = no
				is_ill = no
				religion = ROOT
				OR = {
					has_character_flag = emf_fighting_in_tournament
					has_character_flag = emf_spectator_at_tournament 
				}
				NOR = {
					AND = {
						is_female = yes
						is_older_than = ROOT
						age_diff = { who = ROOT years = 2 }
					}
					trait = celibate
					is_inaccessible_trigger = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					is_close_relative = ROOT
					is_former_lover = ROOT
					is_rival = ROOT
					has_character_flag = emf_tournament_romance 
				}
			}
			set_character_flag = emf_tournament_romance 
			character_event = { id = emf_tournament.211 }
			break = yes
		}
		random_character = {
			limit = {
				same_realm = event_target:tournament_host
				root_mutual_attraction_trigger = yes
				is_adult = yes
				has_lover = no
				is_consort = no
				is_pregnant = no
				is_ill = no
				religion = ROOT
				OR = {
					has_character_flag = emf_fighting_in_tournament
					has_character_flag = emf_spectator_at_tournament 
				}
				NOR = {
					AND = {
						is_female = yes
						is_older_than = ROOT
						age_diff = { who = ROOT years = 2 }
					}
					trait = celibate
					is_inaccessible_trigger = yes
					has_unattractive_trait_trigger = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_disability_trigger = yes
					is_close_relative = ROOT
					is_former_lover = ROOT
					is_rival = ROOT
					has_character_flag = emf_tournament_romance 
				}
			}
			set_character_flag = emf_tournament_romance 
			character_event = { id = emf_tournament.211 }
		}
	}
}

# Spectator takes notice of the fighter
character_event = {
	id = emf_tournament.211
	picture = GFX_evt_courtly_love
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_211
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_211_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_211_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_211 #Send him a signal
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2
				FROM = { ai = no }
			}
			modifier = {
				factor = 3
				trait = homosexual
			}
			modifier = {
				factor = 3
				OR = {
					trait = hedonist
					trait = seducer
					trait = seductress
				}
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 1.5
				FROM = { is_attractive_trigger = yes }
			}
			modifier = {
				factor = 1.25
				FROM = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 1.25
				FROM = {
					is_female = no
					is_strong_trigger = yes
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					has_pleasant_trait_trigger = yes
					has_pleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				has_pleasant_personality_trigger = yes
			}
			modifier = {
				factor = 0.75
				FROM = {
					has_unpleasant_trait_trigger = yes
					has_unpleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				has_unpleasant_personality_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = ambitious
				any_liege = { character = FROM }
			}
			modifier = {
				factor = 1.5
				is_married = yes
				spouse = { has_lover = yes }
			}
			modifier = {
				factor = 1.25
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.5
				FROM = { is_married = yes }
			}
			modifier = {
				factor = 0.1
				is_married = yes
				NOR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					has_unpleasant_personality_trigger = yes
					is_evil_trigger = yes
					trait = homosexual
					spouse = { has_lover = yes }
				}				
			}
			modifier = {
				factor = 0
				is_married = yes
				spouse = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.75
				trait = temperate
			}
			modifier = {
				factor = 0.75
				trait = paranoid
			}
			modifier = {
				factor = 0.75
				FROM = { is_dumb_trigger = yes }
			}
			modifier = {
				factor = 0.75
				FROM = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -20 } }
			}
		}
		FROM = {
			character_event = { id = emf_tournament.212 tooltip = BECKON_TO_KNIGHT }
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_211 #Do nothing
		ai_chance = {
			factor = 25
			modifier = {
				factor = 5
				trait = chaste
			}
		}
		hidden_tooltip = {
			FROM = { clr_character_flag = emf_tournament_romance }
			if = {
				limit = { ai = yes }
				random = {
					chance = 50
					clr_character_flag = emf_tournament_romance
				}
			}
		}
	}
}

# Fighter has been signaled interest
character_event = {
	id = emf_tournament.212
	picture = GFX_evt_courtly_love
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_212
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_212_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_212_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_212 #Respond favorably
		ai_chance = {
			factor = 75
			modifier = {
				factor = 3
				trait = homosexual
			}
			modifier = {
				factor = 3
				OR = {
					trait = hedonist
					trait = seducer
					trait = seductress
				}
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 1.5
				FROM = { is_attractive_trigger = yes }
			}
			modifier = {
				factor = 1.25
				FROM = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 1.25
				FROM = {
					is_female = no
					is_strong_trigger = yes
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					has_pleasant_trait_trigger = yes
					has_pleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				has_pleasant_personality_trigger = yes
			}
			modifier = {
				factor = 0.75
				FROM = {
					has_unpleasant_trait_trigger = yes
					has_unpleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				has_unpleasant_personality_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = ambitious
				any_liege = { character = FROM }
			}
			modifier = {
				factor = 1.5
				is_married = yes
				spouse = { has_lover = yes }
			}
			modifier = {
				factor = 1.25
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.5
				FROM = { is_married = yes }
			}
			modifier = {
				factor = 0.1
				is_married = yes
				NOR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					has_unpleasant_personality_trigger = yes
					is_evil_trigger = yes
					trait = homosexual
					spouse = { has_lover = yes }
				}				
			}
			modifier = {
				factor = 0
				is_married = yes
				spouse = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.75
				trait = temperate
			}
			modifier = {
				factor = 0.75
				trait = paranoid
			}
			modifier = {
				factor = 0.75
				FROM = { is_dumb_trigger = yes }
			}
			modifier = {
				factor = 0.75
				FROM = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = 0 } }
			}
		}
		if = {
			limit = {
				FROM = { is_female = yes }
				is_female = no
			}
			character_event = { id = emf_tournament.214 tooltip = IMPRESS_HER }
			break = yes
		}
		character_event = { id = emf_tournament.217 tooltip = TAKE_THIS_FURTHER }
	}
	option = {
		name = EVTOPTB_emf_tournament_211 #Do nothing
		ai_chance = {
			factor = 25
			modifier = {
				factor = 5
				trait = chaste
			}
		}
		FROM = {
			character_event = { id = emf_tournament.213 tooltip = REJECT_HER }
		}
	}
}

# The fighter rejects the spectator
character_event = {
	id = emf_tournament.213
	picture = GFX_evt_courtly_love
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_213
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_213_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_213_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_213
		prestige = -25
		opinion = { who = FROM modifier = insulted }
	}
}

# The fighter attempts to impress the spectator
character_event = {
	id = emf_tournament.214
	picture = GFX_evt_courtly_love
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_214
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_214_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_214_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_214 #Impress her
		trigger = {
			OR = {
				AND = {
					random = 75
					NOT = { combat_rating = 1 }
				}
				AND = {
					random = 50
					combat_rating = 1
					NOT = { combat_rating = 3 }
				}
				AND = {
					random = 35
					combat_rating = 3
					NOT = { combat_rating = 5 }
				}
				AND = {
					random = 25
					combat_rating = 5
				}
			}
		}
		FROMFROM = {
			character_event = { id = emf_tournament.216 tooltip = SHE_IS_IMPRESSED }
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_214 #Fail
		trigger = {
			NOR = {
				AND = {
					random = 75
					NOT = { combat_rating = 1 }
				}
				AND = {
					random = 50
					combat_rating = 1
					NOT = { combat_rating = 3 }
				}
				AND = {
					random = 35
					combat_rating = 3
					NOT = { combat_rating = 5 }
				}
				AND = {
					random = 25
					combat_rating = 5
				}
			}
		}
		FROMFROM = {
			character_event = { id = emf_tournament.215 tooltip = SHE_IS_NOT_IMPRESSED }
		}
	}
}

# The fighter did not impress the spectator
character_event = {
	id = emf_tournament.215
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_215
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_215_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_215_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_215 #He's not right for me
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				FROM = {
					has_unpleasant_trait_trigger = yes
					has_unpleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				FROM = { has_unpleasant_personality_trigger = yes }
			}
			modifier = {
				factor = 0.75
				FROM = { is_attractive_trigger = yes }
			}
			modifier = {
				factor = 0.5
				trait = lustful
			}
			modifier = {
				factor = 2
				OR = {
					higher_tier_than = COUNT
					any_close_relative = { higher_tier_than = COUNT }
					any_claim = { higher_tier_than = COUNT }
				}
				FROM = {
					NOR = {
						higher_tier_than = COUNT
						any_close_relative = { higher_tier_than = COUNT }
						any_claim = { higher_tier_than = COUNT }
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -20 } }
			}
		}
		FROM = { character_event = { id = emf_tournament.218 tooltip = DUMP_HIM } }
	}
	option = {
		name = EVTOPTB_emf_tournament_215 #Continue the romance
		ai_chance = {
			factor = 25
		}
		FROM = { character_event = { id = emf_tournament.219 tooltip = BEGIN_AN_AFFAIR } }
	}
	option = {
		name = EVTOPTC_emf_tournament_215 #Leave the bedroom door ajar...
		trigger = { NOT = { trait = chaste } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.5
				has_pious_trait_trigger = yes
				is_pious_trigger = no
			}
			modifier = {
				factor = 0.25
				is_pious_trigger = yes
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 2
				OR = {
					trait = hedonist
					trait = seducer
					trait = seductress
				}
			}
			modifier = {
				factor = 3
				is_ruler = no
				is_female = yes
				OR = {
					trait = ambitious
					is_evil_trigger = yes
					has_unpleasant_personality_trigger = yes
				}
				FROM = {
					OR = {
						higher_tier_than = COUNT
						any_close_relative = { higher_tier_than = COUNT }
						any_claim = { higher_tier_than = COUNT }
					}
				}
			}
		}
		FROM = { character_event = { id = emf_tournament.223 tooltip = ONE_NIGHT_STAND } }
	}
}

# The fighter has impressed
character_event = {
	id = emf_tournament.216
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_216
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_216_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_216_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_216 #He's not right for me
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.25
				FROM = {
					has_unpleasant_trait_trigger = yes
					has_unpleasant_personality_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				FROM = { has_unpleasant_personality_trigger = yes }
			}
			modifier = {
				factor = 0.75
				FROM = { is_attractive_trigger = yes }
			}
			modifier = {
				factor = 0.5
				trait = lustful
			}
			modifier = {
				factor = 2
				OR = {
					higher_tier_than = COUNT
					any_close_relative = { higher_tier_than = COUNT }
					any_claim = { higher_tier_than = COUNT }
				}
				FROM = {
					NOR = {
						higher_tier_than = COUNT
						any_close_relative = { higher_tier_than = COUNT }
						any_claim = { higher_tier_than = COUNT }
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -20 } }
			}
		}
		FROM = { character_event = { id = emf_tournament.218 tooltip = DUMP_HIM } }
	}
	option = {
		name = EVTOPTB_emf_tournament_216 #Continue the romance
		ai_chance = {
			factor = 40
		}
		FROM = { character_event = { id = emf_tournament.219 tooltip = BEGIN_AN_AFFAIR } }
	}
	option = {
		name = EVTOPTC_emf_tournament_216 #Leave the bedroom door ajar...
		trigger = { NOT = { trait = chaste } }
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				has_pious_trait_trigger = yes
				is_pious_trigger = no
			}
			modifier = {
				factor = 0.25
				is_pious_trigger = yes
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 2
				OR = {
					trait = hedonist
					trait = seducer
					trait = seductress
				}
			}
			modifier = {
				factor = 3
				is_ruler = no
				is_female = yes
				OR = {
					trait = ambitious
					is_evil_trigger = yes
					has_unpleasant_personality_trigger = yes
				}
				FROM = {
					OR = {
						higher_tier_than = COUNT
						any_close_relative = { higher_tier_than = COUNT }
						any_claim = { higher_tier_than = COUNT }
					}
				}
			}
		}
		FROM = { character_event = { id = emf_tournament.223 tooltip = ONE_NIGHT_STAND } }
	}
}

# For non-standard romances (homosexuals and female fighters)
character_event = {
	id = emf_tournament.217
	picture = GFX_evt_courtly_love
	desc = EVTDESC_emf_tournament_217
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_217
		ai_chance = {
			factor = 75
		}
		FROM = {
			set_character_flag = non_standard_tournament_lover
			character_event = { id = emf_tournament.223 tooltip = TAKE_THIS_FURTHER }
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_217
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				trait = homosexual
			}
		}
		FROM = { character_event = { id = emf_tournament.218 tooltip = DUMP_HIM } }
	}
}

# The spectator rejects the fighter
character_event = {
	id = emf_tournament.218
	picture = GFX_evt_courtly_love
	desc = EVTDESC_emf_tournament_218
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_218
		prestige = -25
		opinion = { who = FROM modifier = insulted }
	}
}

# Spectator suggests continuing the romance after the tournament
character_event = {
	id = emf_tournament.219
	picture = GFX_evt_courtly_love
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_219
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_219_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_219_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_219 # Become lovers
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = chaste
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = lustful
			}
			modifier = {
				factor = 0.25
				OR = {
					trait = hedonist
					trait = seducer
					trait = seductress
				}
			}
		}
		tooltip = { add_lover = FROM }
		hidden_tooltip = {
			FROM = { character_event = { id = emf_tournament.220 } }
		}
	}
	option = {
		name = EVTOPTB_emf_tournament_219 # Not interested
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
		}
		FROM = { character_event = { id = emf_tournament.221 tooltip = DUMP_HER } }
	}
	option = {
		name = EVTOPTC_emf_tournament_219 # Let's just be friends
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 2
				is_married = yes
			}
			modifier = {
				factor = 0
				OR = {
					num_of_friends = 2
					FROM = { num_of_friends = 2 }
					FROM = {
						is_ruler = no
						NOT = { any_close_relative = { is_ruler = yes } }
					}
				}
			}
		}
		tooltip = { add_friend = FROM }
		hidden_tooltip = {
			FROM = { character_event = { id = emf_tournament.222 } }
		}
	}
}

# The romance will continue as courtly love
character_event = {
	id = emf_tournament.220
	picture = GFX_evt_courtly_love
	desc = EVTDESC_emf_tournament_220
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_220
		add_lover = FROM
	}
}

# No love? She gets dumped.
character_event = {
	id = emf_tournament.221
	picture = GFX_evt_courtly_love
	desc = EVTDESC_emf_tournament_221
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_221
		prestige = -25
		opinion = { who = FROM modifier = insulted }
	}
}

# The romance will continue as a friendship instead
character_event = {
	id = emf_tournament.222
	picture = GFX_evt_courtly_love
	desc = EVTDESC_emf_tournament_222
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_222
		add_friend = FROM
	}
}

# The one night stand
character_event = {
	id = emf_tournament.223
	picture = GFX_evt_lovers
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_223
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_223_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_223_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = {
			text = EVTOPTA_emf_tournament_223
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_223_nomad
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_223_muslim
			trigger = { emf_uses_muslim_tournament = yes }
		}
		prestige = 10
		if = {
			limit = {
				NOT = { trait = chaste }
				NOT = { trait = lustful }
			}
			add_trait = lustful
		}
		if = {
			limit = { trait = chaste }
			remove_trait = chaste
		}
		# Pregnancy chance
		hidden_tooltip = {
			if = {
				limit = { is_female = yes }
				FROM = { character_event = { id = WoL.97 } }
			}
			if = {
				limit = { is_female = no }
				FROM = { character_event = { id = WoL.98 } }
			}
		}
		if = {
			limit = { has_character_flag = non_standard_tournament_lover }
			tooltip = { add_lover = FROM }
		}
		if = {
			limit = { NOT = { has_character_flag = non_standard_tournament_lover } }
			opinion = { who = FROM modifier = opinion_tournament_lover months = 24 }
		}
		hidden_tooltip = {
			FROM = { character_event = { id = emf_tournament.224 } }
		}
	}
}

character_event = {
	id = emf_tournament.224
	picture = GFX_evt_lovers
	desc = EVTDESC_emf_tournament_224
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = {
			text = EVTOPTA_emf_tournament_223
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_223_nomad
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA_emf_tournament_223_muslim
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = {
				NOT = { trait = chaste }
				NOT = { trait = lustful }
			}
			add_trait = lustful
		}
		if = {
			limit = { trait = chaste }
			remove_trait = chaste
		}
		if = {
			limit = { has_character_flag = non_standard_tournament_lover }
			add_lover = FROM
		}
		if = {
			limit = { NOT = { has_character_flag = non_standard_tournament_lover } }
			opinion = { who = FROM modifier = opinion_tournament_lover months = 24 }
		}
	}
}


### MURDER AT THE TOURNAMENT

# An opportunity to kill a target at the tournament arises
character_event = {
	id = emf_tournament.225
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_225_both_fighting
		trigger = {
			has_character_flag = emf_fighting_in_tournament
			plot_target_char = { has_character_flag = emf_fighting_in_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_225_target_fighting
		trigger = {
			has_character_flag = emf_spectator_at_tournament
			plot_target_char = { has_character_flag = emf_fighting_in_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_225_plotter_fighting
		trigger = {
			has_character_flag = emf_fighting_in_tournament
			plot_target_char = { has_character_flag = emf_spectator_at_tournament }
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_225_both_spectating
		trigger = {
			has_character_flag = emf_spectator_at_tournament
			plot_target_char = { has_character_flag = emf_spectator_at_tournament }
		}
	}
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		OR = {
			has_plot = plot_kill_character
			has_plot = plot_kill_spouse
			has_plot = plot_take_revenge
		}
		OR = {
			has_character_flag = emf_fighting_in_tournament
			has_character_flag = emf_spectator_at_tournament
		}
		top_liege = {
			has_character_flag = emf_holding_tournament
			has_opinion_modifier = { who = ROOT modifier = attending_tournament }
		}
		plot_power = 0.75
		is_ill = no
		plot_target_char = {
			OR = {
				has_character_flag = emf_fighting_in_tournament
				has_character_flag = emf_spectator_at_tournament
			}
			same_realm = ROOT
			top_liege = { has_opinion_modifier = { who = PREV modifier = attending_tournament } }
			NOR = {
				prisoner = yes
				is_inaccessible_trigger = yes
				trait = incapable
				is_ill = yes
				is_pregnant = yes
				has_injury_trigger = yes
				is_maimed_trigger = yes
				has_severe_disability_trigger = yes
			}
		}
		NOT = { has_character_flag = murder_in_motion }
		NOT = { has_character_flag = emf_tournament_murder }
	}
	
	immediate = {
		set_character_flag = emf_tournament_murder
		top_liege = {
			set_character_flag = emf_tournament_murder
			save_event_target_as = tournament_host
		}
		plot_target_char = { save_event_target_as = plot_target }
	}
	
	mean_time_to_happen = {
		months = 6
		modifier = {
			factor = 0.5
			OR = {
				has_character_flag = emf_holding_tournament
				plot_target_char = { has_character_flag = emf_holding_tournament }
			}
		}
		modifier = {
			factor = 3.0
			top_liege = { has_character_flag = emf_tournament_murder }
		}
		modifier = {
			factor = 0.8
			plot_target_char = { trait = gregarious }
		}
		modifier = {
			factor = 0.8
			plot_target_char = { trait = trusting }
		}
		modifier = {
			factor = 1.2
			plot_target_char = { trait = paranoid }
		}
		modifier = {
			factor = 1.2
			plot_target_char = { trait = shy }
		}
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.10
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.20
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.30
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.40
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.50
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.60
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.70
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.80
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 0.90
			}
		}
		modifier = {
			factor = 0.9
			plot_power_contribution = {
				plotter = ROOT
				power = 1.0
			}
		}
	}

	option = {
		name = EVTOPTA_emf_tournament_225 # Proceed
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.1
				OR = {
					trait = craven
					trait = paranoid
					trait = patient
				}
			}
		}
		set_character_flag = murder_in_motion
		event_target:plot_target = { character_event = { id = emf_tournament.226 tooltip = TOURNAMENT_MURDER_BEGIN } }
	}
	option = {
		name = EVTOPTB_emf_tournament_225 # No, it's too risky
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.1
				OR = {
					trait = brave
					trait = wroth
					is_dumb_trigger = yes
				}
			}
		}
	}
}

# The murder attempt
character_event = {
	id = emf_tournament.226
	picture = GFX_evt_tournament
	border = GFX_event_normal_frame_intrigue

	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}	
	desc = {
		text = EVTDESC_emf_tournament_226
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_226_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_226_muslim
		picture = GFX_evt_furusiyya
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	hide_from = yes
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = target_victim
	}
	
	option = {
		name = EVTOPTA_emf_tournament_226 # Dies
		trigger = {
			NOR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = diligent
					random = 50
				}
				AND = {
					trait = trusting
					random = 90
				}
				AND = {
					NOT = { trait = diligent }
					NOT = { trait = trusting }
					NOT = { trait = paranoid }
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				40 = {
					hidden_tooltip = {
						FROM = { character_event = { id = emf_tournament.231 days = 1 } }
					}
					character_event = { id = emf_tournament.227 days = 1 } # Dies, murderer discovered
				}
				60 = {
					hidden_tooltip = {
						FROM = { character_event = { id = emf_tournament.232 days = 1 } }
					}
					character_event = { id = emf_tournament.228 days = 1 } # Dies, murderer unknown
				}
			}
		}
	}
	option = {
		name = EVTOPTA_emf_tournamnet_226 # Gets away
		trigger = {
			OR = {
				AND = {
					trait = paranoid
					random = 33
				}
				AND = {
					trait = diligent
					random = 50
				}
				AND = {
					trait = trusting
					random = 90
				}
				AND = {
					NOT = { trait = diligent }
					NOT = { trait = trusting }
					NOT = { trait = paranoid }
					random = 75
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				70 = {
					hidden_tooltip = {
						FROM = { character_event = { id = emf_tournament.233 days = 1 } }
					}
					character_event = { id = emf_tournament.229 days = 1 } # Lives, murderer discovered
				}
				30 = {
					hidden_tooltip = {
						FROM = { character_event = { id = emf_tournament.234 days = 1 } }
					}
					character_event = { id = emf_tournament.230 days = 1 } # Lives, murderer unknown
				}
			}
		}
	}
}

# Tournament murder - Dies, murderer(s) discovered
character_event = {
	id = emf_tournament.227
	desc = EVTDESC_emf_tournament_227
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
 		any_character = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.235 }
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_227
		death = {
			death_reason = death_murder
			killer = FROMFROM
		}
	}
	
}

# Tournament murder - Dies, murderer NOT discovered
character_event = {
	id = emf_tournament.228
	desc = EVTDESC_emf_tournament_228
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	hide_from = yes
	is_triggered_only = yes
	
	immediate = {
 		any_player = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.236 }
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_228
		death = {
			death_reason = death_murder_unknown
			killer = FROMFROM
		}
	}
}

# Tournament murder - Lives, murderer discovered
character_event = {
	id = emf_tournament.229
	desc = EVTDESC_emf_tournament_229
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
 		any_character = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.237 }
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_227
	}
}

# Tournament murder - Lives, murderer NOT discovered
character_event = {
	id = emf_tournament.230
	desc = EVTDESC_emf_tournament_230
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	hide_from = yes
	is_triggered_only = yes
	
	immediate = {
 		any_player = {
			limit = {
				NOT = { character = ROOT }
				OR = {
					character = event_target:tournament_host
					has_opinion_modifier = { who = event_target:tournament_host modifier = attending_tournament }
				}
			}
			character_event = { id = emf_tournament.238 }
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_230
	}
}

# Tournament murder - Notification: Success, but discovered
character_event = {
	id = emf_tournament.231
	desc = EVTDESC_emf_tournament_231
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
		character_event = { id = 10 } # Consequences of discovery
		clear_event_target = target_victim
	}

	option = {
		name = CURSES
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
	}
}

# Tournament murder - Notification: Success, and NOT discovered
character_event = {
	id = emf_tournament.232
	desc = EVTDESC_emf_tournament_232
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
	}
}

# Tournament murder - Notification: Failure, and discovered
character_event = {
	id = emf_tournament.233
	desc = EVTDESC_emf_tournament_233
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	immediate = {
		character_event = { id = 11 } # Consequences of discovery
		clear_event_target = target_victim
	}

	option = {
		name = CURSES
		set_character_flag = abort_plot
		tooltip = { reveal_plot = yes }
	}
}

# Tournament murder - Notification: Failure, but NOT discovered
character_event = {
	id = emf_tournament.234
	desc = EVTDESC_emf_tournament_234
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_234
		clr_character_flag = murder_in_motion
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
	}
}

# Tournament murder - Inform attendees of murder (discovered)
character_event = {
	id = emf_tournament.235
	desc = EVTDESC_emf_tournament_235
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
		if = {
			limit = {
				character = event_target:tournament_host
				NOT = { any_backed_character = { character = FROMFROMFROM } }
			}
			opinion = { who = FROMFROMFROM modifier = devious_plotter years = 5 }
			break = yes
		}
		if = {
			limit = {
				NOT = { any_backed_character = { character = FROMFROMFROM } }
				NOT = { is_rival = FROM }
			}
			opinion = { who = FROMFROMFROM modifier = opinion_angry years = 1 }
			break = yes
		}
		opinion = { who = FROMFROMFROM modifier = opinion_pleased years = 1 }
	}
}

# Tournament murder - Inform attendees of murder
character_event = {
	id = emf_tournament.236
	desc = EVTDESC_emf_tournament_236
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Tournament murder - Inform attendees of attempted murder (discovered)
character_event = {
	id = emf_tournament.237
	desc = EVTDESC_emf_tournament_237
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
		if = {
			limit = {
				character = event_target:tournament_host
				NOT = { any_backed_character = { character = FROMFROMFROM } }
			}
			opinion = { who = FROMFROMFROM modifier = devious_plotter years = 5 }
			break = yes
		}
		if = {
			limit = {
				NOT = { any_backed_character = { character = FROMFROMFROM } }
				NOT = { is_rival = FROM }
			}
			opinion = { who = FROMFROMFROM modifier = opinion_angry years = 1 }
			break = yes
		}
		opinion = { who = FROMFROMFROM modifier = opinion_pleased years = 1 }
	}
}

# Tournament murder - Inform attendees of attempted murder
character_event = {
	id = emf_tournament.238
	desc = EVTDESC_emf_tournament_238
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}


### TOURNAMENT WINNERS

# Calculate tournament scores
character_event = {
	id = emf_tournament.249
	
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_character_flag = emf_fighting_in_tournament
	
	trigger = {
		event_target:tournament_host = { has_character_flag = emf_holding_tournament }
		same_realm = event_target:tournament_host
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		emf_calculate_tournament_score = yes
	}
}

# Pick tournament winners
character_event = {
	id = emf_tournament.250
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = emf_holding_tournament
	}
	
	immediate = {
		# Pick tournament winner
		random_character = {
			limit = {
				same_realm = ROOT
				OR = {
					character = ROOT
					has_opinion_modifier = { who = ROOT modifier = attending_tournament }
				}
				NOR = {
					is_ill = yes
					is_pregnant = yes
					has_injury_trigger = yes
					is_maimed_trigger = yes
					has_severe_disability_trigger = yes
					any_character = {
						check_variable = { which = "tournament_fighter" which = PREV }
						same_realm = ROOT
						OR = {
							character = ROOT
							has_opinion_modifier = { who = ROOT modifier = attending_tournament }
						}
						NOR = {
							character = PREV
							is_ill = yes
							is_pregnant = yes
							has_injury_trigger = yes
							is_maimed_trigger = yes
							has_severe_disability_trigger = yes
						}
					}
				}
			}
			set_character_flag = emf_placed_in_tournament
			save_event_target_as = emf_tournament_winner
		}
		if = {
			# Nomads only have a first place winner
			limit = { is_nomadic = no }
			# Pick second place
			random_character = {
				limit = {
					same_realm = ROOT
					OR = {
						character = ROOT
						has_opinion_modifier = { who = ROOT modifier = attending_tournament }
					}
					NOR = {
						is_ill = yes
						is_pregnant = yes
						has_injury_trigger = yes
						is_maimed_trigger = yes
						has_severe_disability_trigger = yes
						has_character_flag = emf_placed_in_tournament
						any_character = {
							check_variable = { which = "tournament_fighter" which = PREV }
							same_realm = ROOT
							OR = {
								character = ROOT
								has_opinion_modifier = { who = ROOT modifier = attending_tournament }
							}
							NOR = {
								character = PREV
								is_ill = yes
								is_pregnant = yes
								has_injury_trigger = yes
								is_maimed_trigger = yes
								has_severe_disability_trigger = yes
								has_character_flag = emf_placed_in_tournament
							}
						}
					}
				}
				set_character_flag = emf_placed_in_tournament
				save_event_target_as = emf_tournament_second
			}
			# Pick third place
			random_character = {
				limit = {
					same_realm = ROOT
					OR = {
						character = ROOT
						has_opinion_modifier = { who = ROOT modifier = attending_tournament }
					}
					NOR = {
						is_ill = yes
						is_pregnant = yes
						has_injury_trigger = yes
						is_maimed_trigger = yes
						has_severe_disability_trigger = yes
						has_character_flag = emf_placed_in_tournament
						any_character = {
							check_variable = { which = "tournament_fighter" which = PREV }
							same_realm = ROOT
							OR = {
								character = ROOT
								has_opinion_modifier = { who = ROOT modifier = attending_tournament }
							}
							NOR = {
								character = PREV
								is_ill = yes
								is_pregnant = yes
								has_injury_trigger = yes
								is_maimed_trigger = yes
								has_severe_disability_trigger = yes
								has_character_flag = emf_placed_in_tournament
							}
						}
					}
				}
				set_character_flag = emf_placed_in_tournament
				save_event_target_as = emf_tournament_third
			}
		}
	
		# Notify winners
		event_target:emf_tournament_winner = { character_event = { id = emf_tournament.251 } }
		event_target:emf_tournament_second = { character_event = { id = emf_tournament.251 } }
		event_target:emf_tournament_third = { character_event = { id = emf_tournament.251 } }
	}
}

# Inform tournament winners
character_event = {
	id = emf_tournament.251
	picture = GFX_evt_melee
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_251_winner
		trigger = {
			emf_uses_regular_tournament = yes
			character = event_target:emf_tournament_winner
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_second
		trigger = {
			emf_uses_regular_tournament = yes
			character = event_target:emf_tournament_second
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_third
		trigger = {
			emf_uses_regular_tournament = yes
			character = event_target:emf_tournament_third
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_nomad_winner
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			character = event_target:emf_tournament_winner
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_muslim_winner
		trigger = {
			emf_uses_muslim_tournament = yes
			character = event_target:emf_tournament_winner
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_muslim_second
		trigger = {
			emf_uses_muslim_tournament = yes
			character = event_target:emf_tournament_second
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_251_muslim_third
		trigger = {
			emf_uses_muslim_tournament = yes
			character = event_target:emf_tournament_third
		}
	}

	is_triggered_only = yes

	option = {
		trigger = { character = event_target:emf_tournament_winner }
		name = {
			text = EVTOPTA70020
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_HL_7055
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA88270
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = { emf_uses_nomad_tournament = no }
			wealth = 100
			prestige = 300
		}
		if = {
			limit = { emf_uses_nomad_tournament = yes }
			prestige = 200
			wealth = 30
		}
		if = {
			limit = { emf_uses_regular_tournament = yes }
			add_character_modifier = {
				name = emf_tournament_winner
				years = 10
			}
		}
		if = {
			limit = { emf_uses_nomad_tournament = yes }
			add_character_modifier = {
				name = emf_wargames_winner
				years = 10
			}
		}
		if = {
			limit = { emf_uses_muslim_tournament = yes }
			add_character_modifier = {
				name = emf_furusiyya_winner
				years = 10
			}
		}
		hidden_tooltip = {
			if = {
				limit = { NOT = { character = event_target:tournament_host } }
				event_target:tournament_host = { character_event = { id = emf_tournament.253 days = 3 } }
			}
			event_target:tournament_host = {
				any_realm_character = {
					limit = {
						ai = no
						has_opinion_modifier = { who = PREV modifier = attending_tournament }
					}
					character_event = { id = emf_tournament.253 days = 3 }
				}
			}
			if = {
				limit = { religion_group = muslim }
				any_dynasty_member = {
					limit = { 
						OR = {
							ai = no
							dynasty_head = { character = PREV }
						}
						NOT = { character = ROOT }
						NOT = { character = event_target:tournament_host }
					}
					character_event = { id = emf_tournament.252 }
				}
			}
		}
	}
	option = {
		trigger = { character = event_target:emf_tournament_second }
		name = {
			text = EVTOPTA70021
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88271
			trigger = { emf_uses_muslim_tournament = yes }
		}
		wealth = 75
		prestige = 250
		hidden_tooltip = {
			if = {
				limit = { NOT = { character = event_target:tournament_host } }
				event_target:tournament_host = { character_event = { id = emf_tournament.254 days = 2 } }
			}
			event_target:tournament_host = {
				any_realm_character = {
					limit = {
						ai = no
						has_opinion_modifier = { who = PREV modifier = attending_tournament }
					}
					character_event = { id = emf_tournament.254 days = 2 }
				}
			}
			if = {
				limit = { religion_group = muslim }
				any_dynasty_member = {
					limit = { 
						OR = {
							ai = no
							dynasty_head = { character = PREV }
						}
						NOT = { character = ROOT }
						NOT = { character = event_target:tournament_host }
					}
					character_event = { id = emf_tournament.252 }
				}
			}
		}
	}
	option = {
		trigger = { character = event_target:emf_tournament_third }
		name = {
			text = EVTOPTA70022
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88272
			trigger = { emf_uses_muslim_tournament = yes }
		}
		wealth = 50
		prestige = 200
		hidden_tooltip = {
			if = {
				limit = { NOT = { character = event_target:tournament_host } }
				event_target:tournament_host = { character_event = { id = emf_tournament.255 days = 1 } }
			}
			event_target:tournament_host = {
				any_realm_character = {
					limit = {
						ai = no
						has_opinion_modifier = { who = PREV modifier = attending_tournament }
					}
					character_event = { id = emf_tournament.255 days = 1 }
				}
			}
			if = {
				limit = { religion_group = muslim }
				any_dynasty_member = {
					limit = { 
						OR = {
							ai = no
							dynasty_head = { character = PREV }
						}
						NOT = { character = ROOT }
						NOT = { character = event_target:tournament_host }
					}
					character_event = { id = emf_tournament.252 }
				}
			}
		}
	}
}

# Inform dynasty members for muslim furusiyya winners
character_event = {
	id = emf_tournament.252
	picture = GFX_evt_joust_muslim
	
	desc = {
		text = EVTDESC_emf_tournament_252_winner
		trigger = { FROM = { character = event_target:emf_tournament_winner } }
	}
	desc = {
		text = EVTDESC_emf_tournament_252_second
		trigger = { FROM = { character = event_target:emf_tournament_second } }
	}
	desc = {
		text = EVTDESC_emf_tournament_252_third
		trigger = { FROM = { character = event_target:emf_tournament_third } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA88301
		trigger = { FROM = { character = event_target:emf_tournament_winner } }
		prestige = 20
		piety = 10
	}
	option = {
		name = EVTOPTA88302
		trigger = { FROM = { character = event_target:emf_tournament_second } }
		prestige = 10
		piety = 5
	}
	option = {
		name = EVTOPTA88303
		trigger = { FROM = { character = event_target:emf_tournament_third } }
		prestige = 5
	}
}

# Inform attendees of tournament winner
character_event = {
	id = emf_tournament.253
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_NOMAD
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_253
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_253_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_253_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA70034
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA_HL_7060
			trigger = { emf_uses_nomad_tournament = yes }
		}
		name = {
			text = EVTOPTA88284
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = { character = event_target:tournament_host }
			opinion = {
				modifier = opinion_tournament_winner
				who = FROM
				years = 20
			}
			if = {
				limit = {
					emf_uses_muslim_tournament = yes
					FROM = { dynasty = ROOT }
				}
				piety = 25
			}
		}
		if = {
			limit = { emf_uses_regular_tournament = yes }
			tooltip = {
				FROM = {
					prestige = 300
					wealth = 100
					add_character_modifier = {
						name = emf_tournament_winner
						years = 10
					}
				}
			}
		}
		if = {
			limit = { emf_uses_muslim_tournament = yes }
			tooltip = {
				FROM = {
					prestige = 300
					wealth = 100
					add_character_modifier = {
						name = emf_furusiyya_winner
						years = 10
					}
				}
			}
		}
		if = {
			limit = { emf_uses_nomad_tournament = yes }
			tooltip = {
				FROM = {
					prestige = 200
					wealth = 30
					add_character_modifier = {
						name = emf_wargames_winner
						years = 10
					}
				}
			}
		}
	}
}

# Inform attendees of second place fighter
character_event = {
	id = emf_tournament.254
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_254
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_254_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = {
			text = EVTOPTA70035
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88285
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = { character = event_target:tournament_host }
			opinion = {
				modifier = opinion_tournament_second_place
				who = FROM
				years = 15
			}
			if = {
				limit = {
					emf_uses_muslim_tournament = yes
					FROM = { dynasty = ROOT }
				}
				piety = 15
			}
		}
		tooltip = {
			FROM = {
				prestige = 250
				wealth = 75
			}
		}
	}
}

# Inform attendees of third place fighter
character_event = {
	id = emf_tournament.255
	picture = GFX_evt_joust
	
	title = {
		text = EMF_TOURNAMENT_NAME
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EMF_TOURNAMENT_NAME_MUSLIM
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_255
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_255_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = {
			text = EVTOPTA70036
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88286
			trigger = { emf_uses_muslim_tournament = yes }
		}
		if = {
			limit = { character = event_target:tournament_host }
			opinion = {
				modifier = opinion_tournament_third_place
				who = FROM
				years = 10
			}
			if = {
				limit = {
					emf_uses_muslim_tournament = yes
					FROM = { dynasty = ROOT }
				}
				piety = 10
			}
		}
		tooltip = {
			FROM = {
				prestige = 200
				wealth = 50
			}
		}
	}
}

### END OF THE TOURNAMENT

# Tournament ends
character_event = {
	id = emf_tournament.300
	picture = GFX_evt_tournament
	
	title = {
		text = EVTNAME_emf_tournament_300
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_300
		picture = GFX_evt_tournament
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_300_nomad
		picture = GFX_evt_horsemanship
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_300_muslim
		picture = GFX_evt_furusiyya
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = emf_holding_tournament
	}
	
	option = {
		name = EVTOPTA88252
		emf_imperial_decay_minus_1_effect = yes
		pf_court_plus2_effect = yes
		pf_glory_plus2_effect = yes
		if = {
			limit = { has_dlc = "Reapers" }
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						change_variable = { which = prosperity_value value = 15 }
					}
				}
			}
		}
		if = {
			limit = { is_nomadic = yes }
			remove_character_modifier = holding_nomad_wargames
		}
		if = {
			limit = { has_character_flag = emf_placed_in_tournament }
			if = {
				limit = { trait = stressed }
				remove_trait = stressed
			}
			if = {
				limit = { trait = depressed }
				remove_trait = depressed
			}
		}
		if = {
			limit = { has_character_flag = emf_spectator_at_tournament }
			if = {
				limit = { trait = stressed }
				random = {
					chance = 25
					emf_notify_remove_stressed_effect = yes
				}
			}
			if = {
				limit = { trait = depressed }
				random = {
					chance = 25
					emf_notify_remove_depressed_effect = yes
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = { has_character_flag = emf_fighting_in_tournament }
				character_event = { id = emf_cta.10 } #Possible advance of swordsmanship trait
			}
			any_opinion_modifier_target = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_tournament } }
				if = {
					limit = {
						same_realm = ROOT
						has_character_flag = emf_fighting_in_tournament
					}
					opinion = { modifier = opinion_tournament_participant who = ROOT years = 5 }
					character_event = { id = emf_tournament.301 }
				}
				if = {
					limit = {
						same_realm = ROOT
						has_character_flag = emf_spectator_at_tournament
					}
					opinion = { modifier = opinion_tournament_spectator who = ROOT years = 5 }
					character_event = { id = emf_tournament.302 }
				}
				emf_clear_tournament_flags = yes
				emf_can_disturb_effect = yes
			}
			emf_clear_tournament_flags = yes
			emf_can_disturb_effect = yes
			emf_clear_tournament_opinions = yes
		}
	}
}

# Wrap-up event for fighters in the tournament
character_event = {
	id = emf_tournament.301
	picture = GFX_evt_joust
	
	title = {
		text = EVTNAME_emf_tournament_300
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_301_winner
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = emf_placed_in_tournament
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_1
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_1
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_2
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_2
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_3
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_3
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_4
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_4
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_5
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_5
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_6
		picture = GFX_evt_tournament
		trigger = {
			emf_uses_regular_tournament = yes
			has_character_flag = tournament_result_6
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_winner_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = emf_placed_in_tournament
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_1_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_1
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_2_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_2
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_3_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_3
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_4_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_4
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_5_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_5
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_6_nomad
		picture = GFX_evt_horsemanship
		trigger = {
			emf_uses_nomad_tournament = yes
			has_character_flag = tournament_result_6
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_winner_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = emf_placed_in_tournament
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_1_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_1
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_2_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_2
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_3_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_3
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_4_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_4
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_5_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_5
		}
	}
	desc = {
		text = EVTDESC_emf_tournament_301_6_muslim
		picture = GFX_evt_furusiyya
		trigger = {
			emf_uses_muslim_tournament = yes
			has_character_flag = tournament_result_6
		}
	}
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			is_ill = yes
			is_pregnant = yes
			has_injury_trigger = yes
			is_maimed_trigger = yes
			has_severe_disability_trigger = yes
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { has_character_flag = emf_placed_in_tournament } }
			random_list = {
				10 = {
					modifier = {
						factor = 2
						check_variable = { which = "tournament_fighter" value = 5.0 }
					}
					set_character_flag = tournament_result_1 #Good
				}
				10 = {
					modifier = {
						factor = 2
						check_variable = { which = "tournament_fighter" value = 5.0 }
					}
					modifier = {
						factor = 2
						check_variable = { which = "tournament_fighter" value = 8.0 }
					}
					set_character_flag = tournament_result_2 #Great
				}
				10 = {
					modifier = {
						factor = 2
						NOT = { check_variable = { which = "tournament_fighter" value = 2.0 } }
					}
					modifier = {
						factor = 0.5
						check_variable = { which = "tournament_fighter" value = 8.0 }
					}
					set_character_flag = tournament_result_3 #Poor
				}
				10 = {
					modifier = {
						factor = 2
						NOT = { check_variable = { which = "tournament_fighter" value = 2.0 } }
					}
					modifier = {
						factor = 2
						NOT = { check_variable = { which = "tournament_fighter" value = 0 } }
					}
					modifier = {
						factor = 0.5
						check_variable = { which = "tournament_fighter" value = 5.0 }
					}
					modifier = {
						factor = 0.5
						check_variable = { which = "tournament_fighter" value = 8.0 }
					}
					set_character_flag = tournament_result_4 #Awful
				}
				10 = {
					modifier = {
						factor = 2
						check_variable = { which = "tournament_fighter" value = 5.0 }
					}
					set_character_flag = tournament_result_5 #Good
				}
				10 = {
					modifier = {
						factor = 2
						NOT = { check_variable = { which = "tournament_fighter" value = 2.0 } }
					}
					modifier = {
						factor = 0.5
						check_variable = { which = "tournament_fighter" value = 8.0 }
					}
					set_character_flag = tournament_result_6 #Poor
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_tournament_301
		trigger = { has_character_flag = emf_placed_in_tournament }
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		if = {
			limit = { trait = depressed }
			remove_trait = depressed
		}
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
		hidden_tooltip = {
			character_event = { id = emf_cta.10 } #Possible advance of swordsmanship trait
		}
	}
	option = {
		name = {
			text = EVTOPTA70003
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88253
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_1 }
		prestige = 50
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
		hidden_tooltip = {
			character_event = { id = emf_cta.10 } #Possible advance of swordsmanship trait
		}
	}
	option = {
		name = {
			text = EVTOPTA70004
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88254
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_2 }
		prestige = 100
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
		hidden_tooltip = {
			character_event = { id = emf_cta.10 } #Possible advance of swordsmanship trait
		}
	}
	option = {
		name = {
			text = EVTOPTA70005
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88255
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_3 }
		prestige = -50
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
	}
	option = {
		name = {
			text = EVTOPTA70006
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88256
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_4 }
		prestige = -100
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 25
				emf_notify_add_depressed_effect = yes
			}
		}
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
	}
	option = {
		name = {
			text = EVTOPTA70007
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88257
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_5 }
		change_martial = 1
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
		hidden_tooltip = {
			character_event = { id = emf_cta.10 } #Possible advance of swordsmanship trait
		}
	}
	option = {
		name = {
			text = EVTOPTA70008
			trigger = { emf_uses_regular_tournament = yes }
		}
		name = {
			text = EVTOPTA88258
			trigger = { emf_uses_regular_tournament = no }
		}
		trigger = { has_character_flag = tournament_result_6 }
		if = {
			limit = { has_warrior_skill_trigger = no }
			change_martial = -1
		}
		if = {
			limit = { trait = poor_warrior }
			remove_trait = poor_warrior
		}
		if = {
			limit = { trait = trained_warrior }
			remove_trait = trained_warrior
			add_trait = poor_warrior
		}
		if = {
			limit = { trait = skilled_warrior }
			remove_trait = skilled_warrior
			add_trait = trained_warrior
		}
		if = {
			limit = { trait = master_warrior }
			remove_trait = master_warrior
			add_trait = skilled_warrior
		}
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 25
				emf_notify_add_depressed_effect = yes
			}
		}
		tooltip = {
			opinion = { modifier = opinion_tournament_participant who = FROM years = 5 }
		}
	}
	after = {
		clr_character_flag = tournament_result_1
		clr_character_flag = tournament_result_2
		clr_character_flag = tournament_result_3
		clr_character_flag = tournament_result_4
		clr_character_flag = tournament_result_5
		clr_character_flag = tournament_result_6
	}
}
	
# Wrap-up event for spectators at the tournament
character_event = {
	id = emf_tournament.302
	picture = GFX_evt_joust
	
	title = {
		text = EVTNAME_emf_tournament_300
		trigger = { emf_uses_regular_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	title = {
		text = EVTNAME_emf_tournament_300_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_302
		trigger = { emf_uses_regular_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_302_nomad
		trigger = { emf_uses_nomad_tournament = yes }
	}
	desc = {
		text = EVTDESC_emf_tournament_302_muslim
		trigger = { emf_uses_muslim_tournament = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_tournament_302
		if = {
			limit = { trait = stressed }
			random = {
				chance = 25
				emf_notify_remove_stressed_effect = yes
			}
		}
		if = {
			limit = { trait = depressed }
			random = {
				chance = 25
				emf_notify_remove_depressed_effect = yes
			}
		}
		tooltip = {
			opinion = { modifier = opinion_tournament_spectator who = FROM years = 5 }
		}
	}
}

