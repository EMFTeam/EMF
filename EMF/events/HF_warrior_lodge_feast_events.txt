# -*- ck2.events -*-

# Written by Flavio

namespace = HF


#############################################ù

## Alone ##
#Dice throwing (hellenics and bon)

## 1v1 ## 
#Armwrestling
#Flyting (insult contest, only northern pagans)
#Drinking (no bon)

#############################################

#All chains are fired by on_by_yearly_action.

#############################################

			# Arm-wrestling. #

#############################################
#Warrior Lodge Member picks a challenger.
character_event = {
	id = HF.25200
	title = EVTTITLEHF25200
	desc = EVTDESCHF25200
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	hide_new = yes


	trigger = { 
		has_dlc = "Holy Fury"
		is_adult = yes
		in_command = no
		prisoner = no
		NOT = { is_inaccessible_trigger = yes }
		is_incapable = no
		NOT = { has_character_flag = do_not_disturb }
		NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
		is_member_of_any_warrior_lodge_trigger = yes
		any_society_member = { #Make sure there are enough contenders to pick.
			same_society_as = ROOT
			is_adult = yes
			in_command = no
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			is_incapable = no
			NOT = { has_character_flag = do_not_disturb }
			NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
			NOT = { character = ROOT }
			OR = { 
				is_strong_trigger = yes
				trait = duelist
				trait = skilled_tactician
				trait = brilliant_strategist
				combat_rating = 60
			}
			any_society_member = { 
				same_society_as = ROOT
				is_adult = yes
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
				is_incapable = no
				NOT = { has_character_flag = do_not_disturb }
				NOT = { character = ROOT }
				NOT = { character = PREV } # Do not check for the same character.
				NOR = { 
					is_strong_trigger = yes
					has_lifestyle_martial_trigger = yes
					combat_rating = 60
				}
				count = 2
			}
		}
	}
	immediate = {
	random_list = { 
		33 = { sound_effect = pagan_cheering_01 } 
		33 = { sound_effect = pagan_cheering_02 } 
		33 = { sound_effect = pagan_cheering_03 } 
		33 = { sound_effect = warrior_lodge_ambient_02 } 
	}
	hidden_tooltip = { #Pick potential contenders 
		clr_character_flag = arm_wrestling_strong #Safety cleanup
		clr_character_flag = arm_wrestling_medium
		clr_character_flag = arm_wrestling_weak
		save_event_target_as = arm_wrestling_fighter_1
		random_society_member = { #First pick a very strong guy.
			limit = {
				same_society_as = ROOT
				is_adult = yes
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				is_incapable = no
				NOT = { has_character_flag = do_not_disturb }
				NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
				NOT = { character = ROOT }
				OR = { 
					is_strong_trigger = yes
					trait = duelist
					trait = skilled_tactician
					trait = brilliant_strategist
					combat_rating = 60
				}
			}
			preferred_limit = {
				ai = no
				is_strong_trigger = yes
				is_ill = no
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = {
				ai = no
				is_strong_trigger = yes
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = {
				ai = no
				is_strong_trigger = yes
				OR = { 
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 60
			}
			preferred_limit = {
				ai = no
				OR = { 
					is_strong_trigger = yes
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 60
			}
			preferred_limit = {
				ai = no
				combat_rating = 60
			}
			preferred_limit = {
				is_strong_trigger = yes
				is_ill = no
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 20
			}
			preferred_limit = { 
				is_strong_trigger = yes
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 20
			}
			preferred_limit = { 
				is_strong_trigger = yes
				OR = { 
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 20
			}
			preferred_limit = { 
				OR = { 
					is_strong_trigger = yes
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 20
			}
			preferred_limit = { 
				ai = no
				is_strong_trigger = yes
				is_ill = no
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 20
			}
			preferred_limit = { 
				ai = no
				is_strong_trigger = yes
				has_education_martial_trigger = yes
				has_lifestyle_martial_trigger = yes
				combat_rating = 20
			}
			preferred_limit = { 
				ai = no
				is_strong_trigger = yes
				OR = { 
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 20
			}
			preferred_limit = { 
				ai = no
				OR = { 
					is_strong_trigger = yes
					has_education_martial_trigger = yes
					has_lifestyle_martial_trigger = yes
				}
				combat_rating = 20
			}
			preferred_limit = { 
				ai = no
				combat_rating = 20
			}
			preferred_limit = { 
				combat_rating = 90
			}
			preferred_limit = { 
				combat_rating = 60
			}
			preferred_limit = { 
				combat_rating = 20
			}
			preferred_limit = { 
				combat_rating = 10
			}
			preferred_limit = { 
				combat_rating = 0
			}
			preferred_limit = { 
				is_weak_trigger = no
			}
			preferred_limit = { 
				trait = brave
			}
			clr_character_flag = arm_wrestling_strong #Safety cleanup
			clr_character_flag = arm_wrestling_medium
			clr_character_flag = arm_wrestling_weak
			save_event_target_as = arm_wrestling_opponent_1
		}
		random_society_member = { #Second pick a weakling.
			limit = {
				same_society_as = ROOT
				is_adult = yes
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				is_incapable = no
				NOT = { has_character_flag = do_not_disturb }
				NOT = { character = ROOT }
				NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
				NOT = { event_target:arm_wrestling_opponent_1 = { character = PREV } }
				NOR = { 
					is_strong_trigger = yes
					has_lifestyle_martial_trigger = yes
					has_education_martial_trigger = yes
					combat_rating = 25
				}
			}
			preferred_limit = {
				ai = no 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				ai = no
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				ai = no
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				ai = no
				trait = craven
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				is_weak_trigger = yes
				NOT = { combat_rating = 0 }
			}
			preferred_limit = { 
				trait = craven
				NOT = { combat_rating = 0 }
			}
			preferred_limit = {
				ai = no 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				ai = no
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				ai = no
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				ai = no
				trait = craven
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				is_weak_trigger = yes
				NOT = { combat_rating = 20 }
			}
			preferred_limit = { 
				trait = craven
				NOT = { combat_rating = 20 }
			}
			preferred_limit = {
				ai = no 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				ai = no
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				ai = no
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				ai = no
				trait = craven
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				is_ill = yes
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				practical_age = 40
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				is_weak_trigger = yes
				NOT = { combat_rating = 40 }
			}
			preferred_limit = { 
				trait = craven
				NOT = { combat_rating = 40 }
			}
			clr_character_flag = arm_wrestling_strong #Safety cleanup
			clr_character_flag = arm_wrestling_medium
			clr_character_flag = arm_wrestling_weak
			save_event_target_as = arm_wrestling_opponent_3
		}
		random_society_member = { #Third pick an average guy.
			limit = {
				same_society_as = ROOT
				is_adult = yes
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				is_incapable = no
				NOT = { has_character_flag = do_not_disturb }
				NOT = { character = ROOT }
				NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }
				NOT = { event_target:arm_wrestling_opponent_1 = { character = PREV } }
				NOT = { event_target:arm_wrestling_opponent_3 = { character = PREV } }
				NOR = { 
					is_strong_trigger = yes
					has_lifestyle_martial_trigger = yes
					combat_rating = 80
				}
			}
			preferred_limit = { 
				ai = no
				is_ill = no
				has_education_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = {
				ai = no 
				has_education_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = {
				ai = no
				combat_rating = 60
			}
			preferred_limit = { 
				ai = no
				is_ill = no
				has_education_martial_trigger = yes
				combat_rating = 25
			}
			preferred_limit = { 
				ai = no
				has_education_martial_trigger = yes
				combat_rating = 25
			}
			preferred_limit = { 
				ai = no
				combat_rating = 25
			}
			preferred_limit = { 
				is_ill = no
				has_education_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = { 
				has_education_martial_trigger = yes
				combat_rating = 60
			}
			preferred_limit = { 
				combat_rating = 60
			}
			preferred_limit = { 
				is_ill = no
				has_education_martial_trigger = yes
				combat_rating = 25
			}
			preferred_limit = { 
				has_education_martial_trigger = yes
				combat_rating = 25
			}
			preferred_limit = { 
				combat_rating = 25
			}
			preferred_limit = { 
				is_ill = no
				has_education_martial_trigger = yes
				combat_rating = 0
			}
			preferred_limit = { 
				has_education_martial_trigger = yes
				combat_rating = 0
			}
			preferred_limit = { 
				combat_rating = 0
			}
			preferred_limit = { 
				is_weak_trigger = no
			}
			clr_character_flag = arm_wrestling_strong #Safety cleanup
			clr_character_flag = arm_wrestling_medium
			clr_character_flag = arm_wrestling_weak
			save_event_target_as = arm_wrestling_opponent_2
		}
		#Then assign flag to determine what kind of opponent you are.
		if = { 
			limit = { 
				OR = { 
					is_strong_trigger = yes
					combat_rating = 60
				}
			}
			set_character_flag = arm_wrestling_strong
		}
		else_if = { 
			limit = { 
				NOR = { 
					is_strong_trigger = yes
					is_weak_trigger = yes
					combat_rating = 60
				}
				combat_rating = 25

			}
			set_character_flag = arm_wrestling_medium
		}
		else_if = { 
			limit = { 
				OR = { 
					is_weak_trigger = yes
					NOT= { combat_rating = 25 }
				}
			}
			set_character_flag = arm_wrestling_weak
		}
		#Safety check
		if = { 
			limit = { 
				NOR = { 
					has_character_flag = arm_wrestling_strong
					has_character_flag = arm_wrestling_medium
					has_character_flag = arm_wrestling_weak
				}
			}
			set_character_flag = arm_wrestling_medium
		}
		set_character_flag = do_not_disturb
		hidden_tooltip = { 
			character_event = { id = HF.25301 days = 15 } #Clear flag.
		}
	}
	}

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHF25200
		custom_tooltip = { text = TT_EVTOPTAHF25200 }
		trigger = { event_target:arm_wrestling_opponent_1 = { is_alive = yes } }
		show_portrait = event_target:arm_wrestling_opponent_1
		hidden_tooltip = { 
			event_target:arm_wrestling_opponent_1 = { 
				save_event_target_as = arm_wrestling_fighter_2 
				set_character_flag = arm_wrestling_strong
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
				character_event = { id = HF.25201 }
			} 
			if = { 
				limit = { event_target:arm_wrestling_opponent_2 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_2 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:arm_wrestling_opponent_3 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_3 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
		}
		
		ai_chance = { factor = 10 }
	}
	option = { 
		name = EVTOPTBHF25200
		custom_tooltip = { text = TT_EVTOPTBHF25200 }
		trigger = { event_target:arm_wrestling_opponent_2 = { is_alive = yes } }
		show_portrait = event_target:arm_wrestling_opponent_2
		hidden_tooltip = { 
			event_target:arm_wrestling_opponent_2 = { 
				save_event_target_as = arm_wrestling_fighter_2 
				set_character_flag = arm_wrestling_medium
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
				character_event = { id = HF.25201 }
			} 
			if = { 
				limit = { event_target:arm_wrestling_opponent_1 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_1 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:arm_wrestling_opponent_3 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_3 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
		}
		ai_chance = { factor = 20 }
	}
	option = { 
		name = EVTOPTCHF25200
		custom_tooltip = { text = TT_EVTOPTCHF25200 }
		trigger = { event_target:arm_wrestling_opponent_3 = { is_alive = yes } }
		show_portrait = event_target:arm_wrestling_opponent_3
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_strong
			}
			tiered_prestige_negative_effect = yes
		}
		hidden_tooltip = { 
			event_target:arm_wrestling_opponent_3 = { 
				save_event_target_as = arm_wrestling_fighter_2 
				set_character_flag = arm_wrestling_weak
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
				character_event = { id = HF.25201 }
			} 
			if = { 
				limit = { event_target:arm_wrestling_opponent_1 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_1 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:arm_wrestling_opponent_2 = { is_alive = yes } } 
				 event_target:arm_wrestling_opponent_2 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb 
				}
			}
		}
		ai_chance = { 
			factor = 30 
			modifier = { 
				factor = 2
				trait = craven
			}
			modifier = { 
				factor = 0.5
				trait = brave
			}
		}
	}
	option = { #Not interested. -End of line.
		name = EVTOPTDHF25200
		tiered_prestige_negative_effect = yes
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_strong
			}
			detract_society_currency_medium_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_medium
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_weak
			}
			detract_society_currency_tiny_effect = yes
		}
		hidden_tooltip = { 
			if = { 
				limit = {
					event_target:arm_wrestling_opponent_1 = { is_alive = yes }
				}
				event_target:arm_wrestling_opponent_1 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb
				}
			}
			if = { 
				limit = {
					event_target:arm_wrestling_opponent_2 = { is_alive = yes }
				}
				event_target:arm_wrestling_opponent_2 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb
				}
			}
			if = { 
				limit = {
					event_target:arm_wrestling_opponent_3 = { is_alive = yes }
				}
				event_target:arm_wrestling_opponent_3 = { 
					clr_character_flag = arm_wrestling_strong
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					clr_character_flag = do_not_disturb
				}
			}
			warrior_lodge_arm_wrestling_cleanup_effect = yes
		}
		ai_chance = { factor = 0 }
	}
}

#Second warrior receives challenge.
character_event = {
	id = HF.25201
	title = EVTTITLEHF25200
	desc = EVTDESCHF25201
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Accept Challenge.
		name = EVTOPTAHF25201
		custom_tooltip = { text = TT_EVTOPTAHF25201 }
		show_portrait = FROM
		FROM = { character_event = { id = HF.25203 } }
		hidden_tooltip = { 
			add_character_modifier = { 
				name = arm_wrestling_challenge_cooldown 
				hidden = yes 
				years = 2 
			} 
			FROM = { 
				add_character_modifier = { 
					name = arm_wrestling_challenge_cooldown 
					hidden = yes 
					years = 2 
				} 
			} 
		}
		ai_chance = { factor = 95 }
	}

	option = { #Not interested. -End of line.
		name = EVTOPTBHF25201
		tiered_prestige_negative_effect = yes
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_strong
			}
			detract_society_currency_medium_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_medium
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = arm_wrestling_weak
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				trait = craven
			}
			custom_tooltip = { text = TT_EVTOPTBHF25201 }
			hidden_tooltip = { 
				any_society_member = { 
					limit = { 
						same_society_as = ROOT
						NOT = { character = ROOT } 
					}
					opinion = { 
						who = ROOT
						modifier = opinion_coward
						years = 5
					} 
				}
			}
		}
		if = { 
			limit = { 
				NOR = { 
					trait = brave 
					trait = craven
				}
			}
			random = { 
				chance = 5 
				add_trait = craven
				hidden_tooltip = { character_event = { id = 38257 } }
			}
		}
		if = { 
			limit = { 
				trait = brave
			}
			random = { 
				chance = 5 
				remove_trait = brave
				hidden_tooltip = { character_event = { id = 38320 } }
			}
		}
		hidden_tooltip = { 
			FROM = { character_event = { id = HF.25202 } } #Notify.
		}
		ai_chance = { 
			factor = 5 
			modifier = { 
				factor = 5
				trait = craven 
			}
		}
	}
}

#First character notified that the challenge is off.
character_event = {
	id = HF.25202
	title = EVTTITLEHF25200
	desc = EVTDESCHF25202
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { 
		name = EVTOPTAHF25202
		tiered_prestige_reward_effect = yes
		hidden_tooltip = { 
			warrior_lodge_arm_wrestling_cleanup_effect = yes
		}
		ai_chance = { factor = 100 }
	}
}

#First character: challenge begins.
character_event = {
	id = HF.25203
	title = EVTTITLEHF25200
	desc = EVTDESCHF25203
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	immediate = { 
		FROM = { character_event = { id = HF.25204 } } #Notify opponent.
	}

	option = { #Begin.
		name = EVTOPTAHF25203
		ai_chance = { factor = 100 }
	}
}

#Copy of above, opponent notified.
character_event = {
	id = HF.25204
	title = EVTTITLEHF25200
	desc = EVTDESCHF25203
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Begin.
		name = EVTOPTAHF25203
		hidden_tooltip = { 
			warrior_lodge_arm_wrestling_first_round_effect = yes
		}
		ai_chance = { factor = 100 }
	}
}

#Post-first round: Either character is losing.
character_event = {
	id = HF.25205
	title = EVTTITLEHF25200
	desc = {
		text = EVTDESCAHF25205
		trigger = { 
			event_target:arm_wrestling_fighter_1 = { character = ROOT } 
		}
	}
	desc = {
		text = EVTDESCBHF25205
		trigger = { 
			event_target:arm_wrestling_fighter_2 = { character = ROOT } 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Slide elbow.
		name = EVTOPTAHF25205
		trigger = { intrigue = 8 }
		tooltip_info = intrigue
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }
		hidden_tooltip = {  
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25206 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25206 } }
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Charm distraction. (male)
		name = {
			text = EVTOPTBHF25205_A
			trigger = {
				event_target:arm_wrestling_fighter_1 = { character = ROOT }
			}
		}
		name = {
			text = EVTOPTBHF25205_B
			trigger = {
				event_target:arm_wrestling_fighter_2 = { character = ROOT }
			}
		}
		trigger = { 
			FROM = { is_female = yes }
			prefers_men_trigger = no
			is_attractive_trigger = yes
			NOT = { trait = celibate }
		}
		tooltip_info_custom = available_because_pretty
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }
		hidden_tooltip = {  
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25209 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25209 } }
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Charm distraction. (female)
		name = EVTOPTCHF25205
		trigger = { 
			FROM = { is_female = no }
			prefers_men_trigger = yes
			is_attractive_trigger = yes
			NOT = { trait = celibate }
		}
		tooltip_info_custom = available_because_pretty
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }
		hidden_tooltip = {  
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25209 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25209 } }
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Cheap distraction.
		name = EVTOPTDHF25205
		detract_society_currency_trivial_effect = yes
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }
		hidden_tooltip = {  
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25212 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25212 } }
			}
		}
		ai_chance = { 
			factor = 10 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0
				trait = just
			}
			modifier = { 
				factor = 0
				trait = honest
			}
			modifier = { 
				factor = 1.5
				trait = deceitful
			}

		}
	}
	option = { #Just Resist.
		name = EVTOPTEHF25205
		add_society_currency_trivial_effect = yes
		hidden_tooltip = { 
			warrior_lodge_arm_wrestling_second_round_effect = yes #Decide who wins.
		}
		ai_chance = { 
			factor = 10 
			modifier = { 
				factor = 2
				trait = just
			}
			modifier = { 
				factor = 2
				trait = honest
			}
		}
	}
}

#Opponent is cheating sneakily.
character_event = {
	id = HF.25206
	title = EVTTITLEHF25200
	desc = EVTDESCHF25206
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Saw it!
		name = EVTOPTAHF25206
		trigger = { intrigue = 13 }
		tooltip_info = intrigue
		ai_chance = { factor = 100 }
	}
	option = { #Saw it!
		name = EVTOPTAHF25206
		trigger = { trait = genius 
			NOT = { intrigue = 13 }
		}
		tooltip_info = genius
		ai_chance = { factor = 100 }
	}
	option = { #Saw it!
		name = EVTOPTAHF25206
		trigger = { 
			trait = quick 
			NOR = { 
				trait = genius 
				intrigue = 13
			}
		}
		tooltip_info = quick
		ai_chance = { factor = 100 }
	}
	option = { #Saw it!
		name = EVTOPTAHF25206
		trigger = { 
			trait = shrewd 
			NOR = { 
				trait = quick
				trait = genius 
				intrigue = 13
			}
		}
		tooltip_info = quick
		ai_chance = { factor = 100 }
	}

	option = { #How could this be?!
		name = EVTOPTBHF25206
		trigger = { 
			is_dumb_trigger = no
		}
		set_character_flag = wl_arm_wrestling_being_tricked_1
		ai_chance = { factor = 100 }
	}

	option = { #What is happening?
		name = EVTOPTCHF25206
		trigger = { 
			is_dumb_trigger = yes
		}
		tooltip_info_custom = available_because_dumb
		set_character_flag = wl_arm_wrestling_being_tricked_2
		ai_chance = { factor = 100 }
	}
	after = { 
		warrior_lodge_arm_wrestling_second_round_effect = yes #Decide who wins.
	}
}

#Opponent tried to charm-trick.
character_event = {
	id = HF.25209
	title = EVTTITLEHF25200
	desc = {
		text = EVTDESCAHF25209
		trigger = { 
			FROM = { is_female = yes }
		}
	}
	desc = {
		text = EVTDESCBHF25209
		trigger = {
			FROM = { is_female = no }
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}
	option = { #Not interested.
		name = EVTOPTAHF25209
		trigger = { trait = celibate }
		tooltip_info = celibate
		ai_chance = { factor = 100 }
	}
	option = { #Not interested.
		name = EVTOPTBHF25209
		trigger = { 
			NOT = { trait = celibate } 
			trait = chaste
			OR = { 
				num_of_spouses = 1 
				num_of_lovers = 1
			} 
			FROM = { 
				NOR = { 
					is_married = ROOT 
					is_lover = ROOT 
				} 
			} 
		}
		tooltip_info = chaste
		ai_chance = { factor = 100 }
	}
	option = { #Wrong sex.
		name = EVTOPTCHF25209
		trigger = { 
			OR = {  
				AND = {  
					FROM = { is_female = yes }
					prefers_men_trigger = yes  
				}
				AND = {  
					FROM = { is_female = no }
					prefers_men_trigger = no  
				}
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Failed check.
		name = EVTOPTDHF25209
		trigger = { 
			NOT = { trait = lustful	} 
			OR = {  
				AND = {  
					FROM = { is_female = yes }
					prefers_men_trigger = no  
				}
				AND = {  
					FROM = { is_female = no }
					prefers_men_trigger = yes  
				}
			}
		}
		set_character_flag = wl_arm_wrestling_being_tricked_1
		ai_chance = { factor = 10 }
	}
	option = { #Critical Fail check.
		name = {
			text = EVTOPTEHF25209_A
			trigger = {
				FROM = {
					is_female = yes
				}
			}
		}
		name = {
			text = EVTOPTEHF25209_B
			trigger = {
				FROM = {
					is_female = no
				}
			}
		}
		trigger = { 
			trait = lustful
			OR = {  
				AND = {  
					FROM = { is_female = yes }
					prefers_men_trigger = no  
				}
				AND = {  
					FROM = { is_female = no }
					prefers_men_trigger = yes  
				}
			}
		}
		tooltip_info = lustful
		set_character_flag = wl_arm_wrestling_being_tricked_2
		ai_chance = { factor = 10 }
	}
	after = { 
		warrior_lodge_arm_wrestling_second_round_effect = yes #Decide who wins.
	}
}

#Opponent used cheap trick.
character_event = {
	id = HF.25212
	title = EVTTITLEHF25200
	desc = EVTDESCHF25212
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Do you think I am that stupid?
		name = EVTOPTAHF25212
		trigger = { 
			is_dumb_trigger = no
		}
		ai_chance = { factor = 100 }
	}

	option = { #Actually, I am.
		name = EVTOPTBHF25212
		trigger = { 
			is_dumb_trigger = yes
		}
		tooltip_info_custom = available_because_dumb
		set_character_flag = wl_arm_wrestling_being_tricked_1
		ai_chance = { factor = 100 }
	}
	after = { 
		warrior_lodge_arm_wrestling_second_round_effect = yes #Decide who wins.
	}
}

#Second round over: the winner is notified of victory.
character_event = {
	id = HF.25215
	title = EVTTITLEHF25200
	desc = EVTDESCHF25215
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}
	option = { #Mock loser.
		name = EVTOPTAHF25215
		custom_tooltip = { text = TT_EVTOPTAHF25215 }
		#Influence reward based on opponent's strength.
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_strong
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_strong
					} 
				} 
			}
			add_society_currency_minor_effect = yes
			hidden_tooltip = { #If defeated a strong guy, gain nickname.
				if = { 
					limit = { 
						NOR = { 
							this_has_average_nickname_trigger = yes
							this_has_cool_nickname_trigger = yes 
							this_has_super_cool_nickname_trigger = yes
						}
					}
					random_list = { 
						25 = { give_nickname = nick_the_strongarm } 
						25 = { give_nickname = nick_the_iron_grip } 
						25 = { give_nickname = nick_the_knuckle_slammer } 
						25 = { give_nickname = nick_the_gods_arm } 
						25 = { give_nickname = nick_the_bone_squeezer } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_bull 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_butch 
						} 
						15 = {}
					} 
				}
			} 
		}
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_medium
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_medium
					} 
				} 
			}
			add_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_weak
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_weak
					} 
				} 
			}
			add_society_currency_trivial_effect = yes
		}
		tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_lousy_winner
						years = 5
					} 
				}
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_lousy_winner
						years = 5
					} 
				}
			}
		}
		hidden_tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25216 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25216 } }
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				is_evil_trigger = yes 
			}
		}
	}
	option = { #Kind to loser.
		name = EVTOPTBHF25215
		#Influence reward based on opponent's strength.
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_strong
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_strong
					} 
				} 
			}
			add_society_currency_tiny_effect = yes
			hidden_tooltip = { #If defeated a strong guy, gain nickname.
				if = { 
					limit = { 
						NOR = { 
							this_has_average_nickname_trigger = yes
							this_has_cool_nickname_trigger = yes 
							this_has_super_cool_nickname_trigger = yes
						}
					}
					random_list = { 
						25 = { give_nickname = nick_the_strongarm } 
						25 = { give_nickname = nick_the_iron_grip } 
						25 = { give_nickname = nick_the_knuckle_slammer } 
						25 = { give_nickname = nick_the_gods_arm } 
						25 = { give_nickname = nick_the_bone_squeezer } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_bull 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_butch 
						} 
						15 = {}
					} 
				}
			}
		}
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_medium
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_medium
					} 
				} 
			}
			add_society_currency_trivial_effect = yes
		}
		if = { 
			limit = { 
				OR = {
					event_target:arm_wrestling_fighter_1 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_weak
					} 
					event_target:arm_wrestling_fighter_2 = {
						NOT = { character = ROOT } 
						has_character_flag = arm_wrestling_weak
					} 
				} 
			}
			prestige = 10
		}
		tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_kind_winner
						years = 5
					} 
				}
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_kind_winner
						years = 5
					} 
				}
			}
		}
		hidden_tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:arm_wrestling_fighter_1 = { character = ROOT } }
				event_target:arm_wrestling_fighter_2 = { character_event = { id = HF.25217 } }
			}
			if = { 
				limit = { event_target:arm_wrestling_fighter_2 = { character = ROOT } }
				event_target:arm_wrestling_fighter_1 = { character_event = { id = HF.25217 } }
			}
		}
		ai_chance = { 
			factor = 50
			modifier = { 
				factor = 1.5
				is_benevolent_trigger = yes 
			} 
		}
	}
	after = {
		add_legend_progress_trivial_effect = yes
		hidden_tooltip = { post_arm_wrestling_flavor_effect = yes }
	}
}

#You lost. Mocked by winner.
character_event = {
	id = HF.25216
	title = EVTTITLEHF25200
	desc = EVTDESCHF25216
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { #Special option. - character starts duel!
		name = EVTOPTYHF25216
		custom_tooltip = { text = tooltip_22022_Y }
		trigger = { 
			this_can_duel_with_from_trigger = yes
		}
		opinion = { 
			modifier = opinion_antagonized_3
			who = ROOT
			years = 15
		}
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	FROM = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    FROM = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }

	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        FROM = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 40
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = FROM value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = FROM value = 20 } }
			}
		}
	}

	option = { 
		name = EVTOPTAHF25216
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_feeble } 
						25 = { give_nickname = nick_the_milkdrinker } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_girls_arm 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_flower 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_lousy_winner
			years = 5
		} 
		custom_tooltip = { text = TT_EVTOPTAHF25216 } 
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_loser
					years = 2
				}
			}
			warrior_lodge_arm_wrestling_cleanup_effect = yes
		}
		ai_chance = { factor = 100 }
	}
}

#You lost, but the winner is polite.
character_event = {
	id = HF.25217
	title = EVTTITLEHF25200
	desc = EVTDESCHF25217
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}
	option = { 
		name = EVTOPTAHF25217
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = arm_wrestling_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_feeble } 
						25 = { give_nickname = nick_the_milkdrinker } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_girls_arm 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_flower 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_kind_winner
			years = 5
		} 
		hidden_tooltip = { 
			warrior_lodge_arm_wrestling_cleanup_effect = yes
		}
		ai_chance = { factor = 100 }
	}
}

#######################################################################
#Post-competition events.

#Random society member sees winner and falls in love.
character_event = {
	id = HF.25218
	desc = EVTDESCAHF25218
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { #Approach him.
		name = EVTOPTAHF25218
		custom_tooltip = { text = TT_EVTOPTAHF25218 }
		hidden_tooltip = { FROM = { character_event = { id = HF.25219 } } }
		ai_chance = { factor = 100 }
	}
	option = { #Do nothing.
		name = EVTOPTBHF25218
		ai_chance = { factor = 0 }
	}
}

#Winner is approached. Reciprocate?
character_event = {
	id = HF.25219
	desc = EVTDESCAHF25219
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { #Yes.
		name = EVTOPTAHF25219
		add_lover = FROM
		hidden_tooltip = { FROM = { character_event = { id = HF.25220 } } }
		ai_chance = { 
			factor = 70 
			modifier = { 
				factor = 0 #Incompatible
				FROM = { is_female = yes }
				prefers_men_trigger = yes
			}
			modifier = { 
				factor = 0 #Incompatible
				FROM = { is_female = no }
				prefers_men_trigger = no
			}
			modifier = { 
				factor = 0 #Uninterested
				trait = celibate
			}
			modifier = { 
				factor = 0 #Uninterested
				trait = chaste
				NOT = { is_married = FROM }
				is_married = yes
			}
			modifier = { 
				factor = 0.85
				NOT = { practical_age = 30 }
				FROM = { practical_age = 30 }
			}
			modifier = { 
				factor = 0.75
				NOT = { practical_age = 40 }
				FROM = { practical_age = 40 }
			}
			modifier = { 
				factor = 0.75
				NOT = { practical_age = 50 }
				FROM = { practical_age = 50 }
			}
			modifier = { 
				factor = 1.5
				FROM = { is_attractive_trigger = yes }
			}
			modifier = { 
				factor = 0.35
				FROM = { is_unattractive_trigger = yes }
			}
			modifier = { 
				factor = 1.5
				FROM = { has_fair_trait_trigger = yes }
			}
			modifier = { 
				factor = 1.5
				FROM = { trait = strong }
			}
			modifier = { 
				factor = 1.5
				FROM = { is_strong_trigger = yes }
			}
			modifier = { 
				factor = 0.5
				FROM = { is_weak_trigger = yes }
			}
		}
	}
	option = { #No.
		name = EVTOPTBHF25219
		hidden_tooltip = { FROM = { character_event = { id = HF.25221 } } }
		ai_chance = { 
			factor = 30 
			modifier = { 
				factor = 0
				trait = lustful
			}
		}
	}
}

#Reciprocated.
character_event = {
	id = HF.25220
	desc = EVTDESCAHF25220
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { 
		name = EVTOPTAHF25220
		add_lover = FROM
		unprotected_sex_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Rejected.
character_event = {
	id = HF.25221
	desc = EVTDESCAHF25221
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { #Special option. - character starts duel!
		name = EVTOPTYHF25221
		custom_tooltip = { text = tooltip_22022_Y }
		trigger = { 
			this_can_duel_with_from_trigger = yes
		}
		opinion = { 
			modifier = opinion_antagonized_3
			who = ROOT
			years = 15
		}
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	FROM = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    FROM = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }
	    
	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        FROM = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 40
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = FROM value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = FROM value = 20 } }
			}
		}
	}
	option = { 
		name = EVTOPTAHF25221
		if = { 
			limit = { is_evil_trigger = no }
			random = { 
				chance = 15
				add_trait = depressed
			}
		}
		ai_chance = { factor = 50 }
	}
}

#Friendship events
#Random society member sees winner and declares friendship.
character_event = {
	id = HF.25222
	desc = EVTDESCAHF25222
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { #Approach him.
		name = EVTOPTAHF25222
		custom_tooltip = { text = TT_EVTOPTAHF25222 }
		hidden_tooltip = { FROM = { character_event = { id = HF.25223 } } }
		ai_chance = { factor = 100 }
	}
	option = { #Do nothing.
		name = EVTOPTBHF25222
		ai_chance = { factor = 0 }
	}
}

#Winner is approached. Reciprocate?
character_event = {
	id = HF.25223
	desc = EVTDESCAHF25223
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { #Yes.
		name = EVTOPTAHF25223
		add_friend = FROM
		hidden_tooltip = { FROM = { character_event = { id = HF.25224 } } }
		ai_chance = { 
			factor = 70 
			modifier = { 
				factor = 0.85
				NOT = { practical_age = 30 }
				FROM = { practical_age = 30 }
			}
			modifier = { 
				factor = 0.75
				NOT = { practical_age = 40 }
				FROM = { practical_age = 40 }
			}
			modifier = { 
				factor = 0.75
				NOT = { practical_age = 50 }
				FROM = { practical_age = 50 }
			}
			modifier = { 
				factor = 1.5
				is_smart_trigger = yes
				FROM = { is_smart_trigger = yes }
			}
			modifier = { 
				factor = 1.5
				FROM = { is_strong_trigger = yes }
			}
			modifier = { 
				factor = 0.5
				FROM = { is_weak_trigger = yes }
			}
			modifier = { 
				factor = 0.5
				ROOT = { FROM = { has_at_least_3_traits_opposite_prev_trigger = yes } }
			}
		}
	}
	option = { #No.
		name = EVTOPTBHF25223
		hidden_tooltip = { FROM = { character_event = { id = HF.25225 } } }
		ai_chance = { 
			factor = 30 
			modifier = { 
				factor = 0
				trait = lustful
			}
		}
	}
}

#Reciprocated.
character_event = {
	id = HF.25224
	desc = EVTDESCAHF25224
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { 
		name = EVTOPTAHF25224
		add_friend = FROM
		ai_chance = { factor = 100 }
	}
}

#Rejected.
character_event = {
	id = HF.25225
	desc = EVTDESCAHF25225
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	trigger = {
		FROM = { is_alive = yes }
	}

	option = { 
		name = EVTOPTAHF25225
		if = { 
			limit = { is_evil_trigger = no }
			random = { 
				chance = 15
				add_trait = stressed
			}
		}
		ai_chance = { factor = 50 }
	}
}

#############################################

			# Dice-throwing #

#############################################
#Warrior Lodge Member is offered chance to start.
character_event = {
	id = HF.25226
	title = EVTTITLEHF25226
	desc = EVTDESCHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = {
		is_adult = yes
		in_command = no
		prisoner = no
		NOT = { is_inaccessible_trigger = yes }
		is_incapable = no
		NOT = { has_character_flag = do_not_disturb }
		is_member_of_any_warrior_lodge_trigger = yes
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
		wealth = 75
	}

	immediate = {
		random_list = { 
			33 = { sound_effect = pagan_cheering_01 } 
			33 = { sound_effect = pagan_cheering_02 } 
			33 = { sound_effect = pagan_cheering_03 } 
			33 = { sound_effect = warrior_lodge_ambient_02 } 
		}
		warrior_lodge_dice_game_cleanup_effect = yes
	}

	is_triggered_only = yes

	option = { #Start playing.
		name = EVTOPTAHF25226
		character_event = { id = HF.25228 }
	}
	option = { #Refuse to join.
		name = EVTOPTBHF25226
		detract_society_currency_minor_effect = yes
	}
}

#Decide how much to bet. - Integrated in event below.
#character_event = {
#	id = HF.25227
#	title = EVTTITLEHF25226
#	desc = EVTDESCHF25227
#	picture = GFX_evt_camaraderie
#	border = GFX_event_normal_frame_diplomacy
#
#	is_triggered_only = yes
#
#	trigger = { 
#		OR = { 
#			society_member_of = warrior_lodge_bon
##			society_member_of = warrior_lodge_hellenic
#		}
#	}
#
#	option = { #
#		name = EVTOPTAHF25227
#		trigger = { wealth = 500 }
#		custom_tooltip = { text = TT_EVTOPTAHF25227 }
#		set_character_flag = flag_betting_money_500
#	}
#	option = { #
#		name = EVTOPTBHF25227
#		trigger = { wealth = 250 }
#		custom_tooltip = { text = TT_EVTOPTBHF25227 }
#		set_character_flag = flag_betting_money_250
#	}
#	option = { #
#		name = EVTOPTCHF25227
#		custom_tooltip = { text = TT_EVTOPTCHF25227 }
#		set_character_flag = flag_betting_money_100
#	}
#	option = { #
#		name = EVTOPTDHF25227
#		custom_tooltip = { text = TT_EVTOPTDHF25227 }
#		set_character_flag = flag_betting_money_50
#	}
#	after = { 
#		hidden_tooltip = { character_event = { id = HF.25228 } }
#	}
#}

#Decide what side to bet on. (from highest to lowest stake).
character_event = {
	id = HF.25228
	title = EVTTITLEHF25226
	desc = EVTDESCHF25228
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { 
		name = {
			text = EVTOPTDHF25228
			trigger = {
				society_member_of = warrior_lodge_bon
			}
		}
		name = {
			text = EVTOPTDHF25228_HELLENIC #Dionysus
			trigger = {
				society_member_of = warrior_lodge_hellenic
			}
		}
		trigger = {  
			OR = {  
				wealth = 500
				AND = {  
					OR = { is_tribal = yes is_nomadic = yes }
					wealth = 100
				}
			}
		}
		custom_tooltip = { text = tooltip_betting_hardest_side }
		if = {  
			limit = {  
				NOR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_500_gold }
			set_character_flag = flag_betting_money_500
		}
		if = {  
			limit = {  
				OR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_100_gold }
			set_character_flag = flag_betting_money_100
		}
		set_character_flag = flag_betting_on_kali
	}
	option = { 
		name = {
			text = EVTOPTCHF25228
			trigger = {
				society_member_of = warrior_lodge_bon
			}
		}
		name = {
			text = EVTOPTCHF25228_HELLENIC #Hermes
			trigger = {
				society_member_of = warrior_lodge_hellenic
			}
		}
		trigger = {  
			OR = {  
				wealth = 250
				AND = {  
					OR = { is_tribal = yes is_nomadic = yes }
					wealth = 50
				}
			}
		}
		custom_tooltip = { text = tooltip_betting_hard_side }
		if = {  
			limit = {  
				NOR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_250_gold }
			set_character_flag = flag_betting_money_250
		}
		if = {  
			limit = {  
				OR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_50_gold }
			set_character_flag = flag_betting_money_50
		}
		set_character_flag = flag_betting_on_dwapara
	}
	option = { 
		name = {
			text = EVTOPTBHF25228
			trigger = {
				society_member_of = warrior_lodge_bon
			}
		}
		name = {
			text = EVTOPTBHF25228_HELLENIC #Athena
			trigger = {
				society_member_of = warrior_lodge_hellenic
			}
		}
		trigger = {  
			OR = {  
				wealth = 100
				AND = {  
					OR = { is_tribal = yes is_nomadic = yes }
					wealth = 25
				}
			}
		}
		custom_tooltip = { text = tooltip_betting_easy_side }
		if = {  
			limit = {  
				NOR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_100_gold }
			set_character_flag = flag_betting_money_100
		}
		if = {  
			limit = {  
				OR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_25_gold }
			set_character_flag = flag_betting_money_25
		}
		set_character_flag = flag_betting_on_treta
	}
	option = { 
		name = {
			text = EVTOPTAHF25228
			trigger = {
				society_member_of = warrior_lodge_bon
			}
		}
		name = {
			text = EVTOPTAHF25228_HELLENIC #Apollo
			trigger = {
				society_member_of = warrior_lodge_hellenic
			}
		}
		custom_tooltip = { text = tooltip_betting_easiest_side }
		if = {  
			limit = {  
				NOR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_50_gold }
			set_character_flag = flag_betting_money_50
		}
		if = {  
			limit = {  
				OR = { 
					is_tribal = yes
					is_nomadic = yes
				}
			}
			custom_tooltip = { text = tooltip_betting_10_gold }
			set_character_flag = flag_betting_money_10
		}
		set_character_flag = flag_betting_on_krita
	}
	after = { 
		hidden_tooltip = { character_event = { id = HF.25229 } }
	}
}

#Almost time to throw.
character_event = {
	id = HF.25229
	title = EVTTITLEHF25226
	desc = EVTDESCHF25229
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #Use weighted die.
		name = EVTOPTAHF25229
		trigger = { intrigue = 15 }
		tooltip_info = intrigue
		random_list = {
			30 = {
				#Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25230 } }
			}
			70 = {
				#Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				hidden_tooltip = { character_event = { id = HF.25231 } }
			}
		}
	}
	option = { #Use weighted die.
		name = EVTOPTAHF25229
		trigger = { trait = schemer NOT = { intrigue = 15 } }
		tooltip_info = schemer
		random_list = {
			30 = {
				#Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25230 } }
			}
			70 = {
				#Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				hidden_tooltip = { character_event = { id = HF.25231 } }
			}
		}
	}
	option = { #Bump under the table.
		name = EVTOPTBHF25229
		trigger = { intrigue = 8 }
		tooltip_info = intrigue
		random_list = {
			30 = {
				#Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25232 } }
			}
			10 = {
				#Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				hidden_tooltip = { character_event = { id = HF.25233 } }
			}
			60 = {
				#Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				hidden_tooltip = { character_event = { id = HF.25234 } }
			}
		}
	}
	option = { #Bump under the table.
		name = EVTOPTBHF25229
		trigger = { trait = deceitful NOT = { intrigue = 8 } }
		tooltip_info = deceitful
		random_list = {
			30 = {
				#Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25232 } }
			}
			10 = {
				#Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				hidden_tooltip = { character_event = { id = HF.25233 } }
			}
			60 = {
				#Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				hidden_tooltip = { character_event = { id = HF.25234 } }
			}
		}
	}
	option = { #Play fair.
		name = EVTOPTCHF25229
		custom_tooltip = { text = TT_EVTOPTCHF25229 }
		hidden_tooltip = {
			random_list = {
				60 = {
					#Krita.
					set_character_flag = flag_warrior_lodge_die_is_krita
					hidden_tooltip = { character_event = { id = HF.25235 } }
				}
				25 = {
					#Treta.
					set_character_flag = flag_warrior_lodge_die_is_treta
					hidden_tooltip = { character_event = { id = HF.25235 } }
				}
				10 = {
					#Dwapara.
					set_character_flag = flag_warrior_lodge_die_is_dwapara
					hidden_tooltip = { character_event = { id = HF.25235 } }
				}
				5 = {
					#Kali.
					set_character_flag = flag_warrior_lodge_die_is_kali
					hidden_tooltip = { character_event = { id = HF.25235 } }
				}
			}
		}
	}
}

#Discovered using fake die.
character_event = {
	id = HF.25230
	title = EVTTITLEHF25226
	desc = {
		text = EVTDESCHF25230
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
		}
	}
	desc = {
		text = EVTDESCHF25230_B
		trigger = { 
			event_target:random_society_winner = { is_alive = yes }
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	immediate = { 
		random_society_member = { 
			limit = { 
				is_adult = yes
				same_society_as = ROOT
				is_incapable = no
				NOT = { 
					character = ROOT
				}
			}
			save_event_target_as = random_society_winner
		}
	}

	option = { #Pay.
		name = EVTOPTAHF25230
		trigger = { event_target:random_society_winner = { is_alive = no } }	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #Special option. - Character starts duel!
		name = EVTOPTYHF25230
		custom_tooltip = { text = tooltip_EVTOPTYHF25230 }
		trigger = { 
			event_target:random_society_winner = { 
				ai = yes
				is_alive = yes
				this_can_duel_with_from_trigger = yes 
			}
		}
		tiered_prestige_negative_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	event_target:random_society_winner = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    event_target:random_society_winner = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes #checks a bunch of age and health statuses...
	    }
	    
	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        event_target:random_society_winner = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 20 } }
			}
		}
	}
	option = { #Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { event_target:random_society_winner = { is_alive = yes } }	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25239 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #Call in favor.
		name = EVTOPTCHF25230
		trigger = { 
			event_target:random_society_winner = { 
				is_alive = yes 
				owes_favor_to = ROOT
			} 
		}	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		event_target:random_society_winner = { 
			remove_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25240 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Zeus"
			event_target:random_society_winner = { 
				is_alive = yes 
				NOT = { owes_favor_to = ROOT }
			} 
			NOT = { owes_favor_to = event_target:random_society_winner }
		}	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		event_target:random_society_winner = { 
			add_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25241 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Won using fake die.
character_event = {
	id = HF.25231
	title = EVTTITLEHF25226
	desc = EVTDESCHF25231
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #Double or nothing.
		name = EVTOPTAHF25231
		if = { 
			limit = { has_character_flag = flag_betting_money_500 } 
			clr_character_flag = flag_betting_money_500
			set_character_flag = flag_betting_money_1000
			custom_tooltip = { text = tooltip_betting_1000_gold } 
		}
		else_if = { 
			limit = { has_character_flag = flag_betting_money_250 } 
			clr_character_flag = flag_betting_money_250
			set_character_flag = flag_betting_money_500
			custom_tooltip = { text = tooltip_betting_500_gold }
		}
		else_if = { 
			limit = { has_character_flag = flag_betting_money_100 } 
			clr_character_flag = flag_betting_money_100
			set_character_flag = flag_betting_money_200
			custom_tooltip = { text = tooltip_betting_200_gold }
		}
		else_if = { 
			limit = { has_character_flag = flag_betting_money_50 } 
			clr_character_flag = flag_betting_money_50
			set_character_flag = flag_betting_money_100
			custom_tooltip = { text = tooltip_betting_100_gold }
		}
		else_if = { 
			limit = { has_character_flag = flag_betting_money_25 } 
			clr_character_flag = flag_betting_money_25
			set_character_flag = flag_betting_money_50
			custom_tooltip = { text = tooltip_betting_50_gold }
		}
		else_if = { 
			limit = { has_character_flag = flag_betting_money_10 } 
			clr_character_flag = flag_betting_money_10
			set_character_flag = flag_betting_money_20
			custom_tooltip = { text = tooltip_betting_20_gold }
		}
		random_list = {
			50 = {
				#Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25230 } }
			}
			50 = {
				#Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				hidden_tooltip = { character_event = { id = HF.25237 } }
			}
		}
	}
	option = { #Leave while ahead.
		name = EVTOPTBHF25231
		warrior_lodge_get_dice_bet_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Discovered bumping the table.
character_event = {
	id = HF.25232
	title = EVTTITLEHF25226
	desc = {
		text = EVTDESCHF25232
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
		}
	}
	desc = {
		text = EVTDESCHF25232_B
		trigger = { 
			event_target:random_society_winner = { is_alive = yes }
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	immediate = { 
		random_society_member = { 
			limit = { 
				is_adult = yes
				same_society_as = ROOT
				is_incapable = no
				NOT = { 
					character = ROOT
				}
			}
			save_event_target_as = random_society_winner
		}
	}

	option = { #Special option. - Character starts duel!
		name = EVTOPTYHF25230
		custom_tooltip = { text = tooltip_EVTOPTYHF25230 }
		trigger = { 
			event_target:random_society_winner = { 
				ai = yes
				is_alive = yes
				this_can_duel_with_from_trigger = yes 
			}
		}
		tiered_prestige_negative_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	event_target:random_society_winner = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    event_target:random_society_winner = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }

	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        event_target:random_society_winner = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 20 } }
			}
		}
	}
	option = { #Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { event_target:random_society_winner = { is_alive = yes } }	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25239 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #Call in favor.
		name = EVTOPTCHF25230
		trigger = { 
			event_target:random_society_winner = { 
				is_alive = yes 
				owes_favor_to = ROOT
			} 
		}	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		event_target:random_society_winner = { 
			remove_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25240 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Zeus"
			event_target:random_society_winner = { 
				is_alive = yes 
				NOT = { owes_favor_to = ROOT }
			} 
			NOT = { owes_favor_to = event_target:random_society_winner }
		}	
		custom_tooltip = { text = TT_EVTOPTAHF25230 }		
		detract_society_currency_minor_effect = yes
		event_target:random_society_winner = { 
			add_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25241 } } #Notify other warrior.
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	option = { #
		name = EVTOPTAHF25232
		trigger = { event_target:random_society_winner = { is_alive = no } }	
		custom_tooltip = { text = TT_EVTOPTAHF25232 }
		detract_society_currency_tiny_effect = yes
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
		}
	}
	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Failed to cheat.
character_event = {
	id = HF.25233
	title = EVTTITLEHF25226
	desc = {
		text = EVTDESCHF25233
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
		}
	}
	desc = {
		text = EVTDESCHF25233_B
		trigger = { 
			event_target:random_society_winner = { is_alive = yes }
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	immediate = { 
		random_society_member = { 
			limit = { 
				is_adult = yes
				same_society_as = ROOT
				is_incapable = no
				NOT = { 
					character = ROOT
				}
			}
			save_event_target_as = random_society_winner
		}
	}

	option = { #Special option. - Character starts duel!
		name = EVTOPTYHF25230
		custom_tooltip = { text = tooltip_EVTOPTYHF25230 }
		trigger = { 
			event_target:random_society_winner = { 
				ai = yes
				is_alive = yes
				this_can_duel_with_from_trigger = yes 
			}
		}
		tiered_prestige_negative_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	event_target:random_society_winner = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    event_target:random_society_winner = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }
	    
	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        event_target:random_society_winner = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 20 } }
			}
		}
	}
	option = { #Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { event_target:random_society_winner = { is_alive = yes } }	
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25239 } } #Notify other warrior.
		}
	}
	option = { #Call in favor.
		name = EVTOPTCHF25230
		trigger = { 
			event_target:random_society_winner = { 
				is_alive = yes 
				owes_favor_to = ROOT
			} 
		}	
		event_target:random_society_winner = { 
			remove_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25240 } } #Notify other warrior.
		}
	}
	option = { #Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Zeus"
			event_target:random_society_winner = { 
				is_alive = yes 
				NOT = { owes_favor_to = ROOT }
			} 
			NOT = { owes_favor_to = event_target:random_society_winner }
		}	
		event_target:random_society_winner = { 
			add_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25241 } } #Notify other warrior.
		}
	}
	option = { #
		name = EVTOPTAHF25233
		trigger = { event_target:random_society_winner = { is_alive = no } }
		warrior_lodge_pay_dice_debt_effect = yes
	}
	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Won bumping the table.
character_event = {
	id = HF.25234
	title = EVTTITLEHF25226
	desc = EVTDESCHF25234
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #Double or nothing.
		name = EVTOPTAHF25234
		warrior_lodge_double_dice_bet_effect = yes
		random_list = {
			40 = {
				#Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				hidden_tooltip = { character_event = { id = HF.25232 } }
			}
			30 = {
				#Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				hidden_tooltip = { character_event = { id = HF.25233 } }
			}
			30 = {
				#Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				hidden_tooltip = { character_event = { id = HF.25238 } }
			}
		}
	}
	option = { #
		name = EVTOPTBHF25234
		warrior_lodge_get_dice_bet_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Die has been cast.
character_event = {
	id = HF.25235
	title = EVTTITLEHF25226
	desc = {
		text = EVTDESCHF25235 #You won.
		trigger = { 
			OR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	desc = {
		text = EVTDESCHF25235_B #You lost.
		trigger = { 
			event_target:random_society_winner = { is_alive = yes }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	desc = {
		text = EVTDESCHF25235 #You lost. - No winner.
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	immediate = { 
		if = { 
			limit = { 
				NOR = {
					AND = {
						has_character_flag = flag_warrior_lodge_die_is_krita
						has_character_flag = flag_betting_on_krita
					}
					AND = {
						has_character_flag = flag_warrior_lodge_die_is_treta
						has_character_flag = flag_betting_on_treta
					}
					AND = {
						has_character_flag = flag_warrior_lodge_die_is_dwapara
						has_character_flag = flag_betting_on_dwapara
					}
					AND = {
						has_character_flag = flag_warrior_lodge_die_is_kali
						has_character_flag = flag_betting_on_kali
					}
				}
			}
			random_society_member = { 
				limit = { 
					is_adult = yes
					same_society_as = ROOT
					is_incapable = no
					NOT = { 
						character = ROOT
					}
				}
				save_event_target_as = random_society_winner
			}
		}
	}

	option = { #You won. Double or nothing.
		name = EVTOPTAHF25235
		trigger = { 
			OR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		warrior_lodge_double_dice_bet_effect = yes
		add_legend_progress_trivial_effect = yes
		hidden_tooltip = {
			clr_character_flag = flag_warrior_lodge_die_is_krita
			clr_character_flag = flag_warrior_lodge_die_is_treta
			clr_character_flag = flag_warrior_lodge_die_is_dwapara
			clr_character_flag = flag_warrior_lodge_die_is_kali
			random_list = {
				60 = {
					#Krita.
					set_character_flag = flag_warrior_lodge_die_is_krita
					hidden_tooltip = { character_event = { id = HF.25236 } }
				}
				40 = {
					#Treta.
					set_character_flag = flag_warrior_lodge_die_is_treta
					hidden_tooltip = { character_event = { id = HF.25236 } }
				}
				20 = {
					#Dwapara.
					set_character_flag = flag_warrior_lodge_die_is_dwapara
					hidden_tooltip = { character_event = { id = HF.25236 } }
				}
				10 = {
					#Kali.
					set_character_flag = flag_warrior_lodge_die_is_kali
					hidden_tooltip = { character_event = { id = HF.25236 } }
				}
			}
		}
	}
	option = { #You won. Leave while ahead.
		name = EVTOPTBHF25235
		trigger = { 
			OR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		warrior_lodge_get_dice_bet_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
	option = { #You lost.
		name = EVTOPTCHF25235
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		warrior_lodge_pay_dice_debt_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
	option = { #Special option. - Sore loser starts duel!
		name = EVTOPTYHF25235
		custom_tooltip = { text = tooltip_EVTOPTYHF25235 }
		trigger = { 
			trait = arbitrary
			event_target:random_society_winner = { 
				ai = yes
				is_alive = yes
				this_can_duel_with_from_trigger = yes 
			}
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		tooltip_info = arbitrary
		tiered_prestige_negative_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	event_target:random_society_winner = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    event_target:random_society_winner = { 
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }

	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        event_target:random_society_winner = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 20 } }
			}
		}
	}
	option = { #You lost. Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { 
			event_target:random_society_winner = { is_alive = yes } 
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}	
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25239 } } #Notify other warrior.
		}
		warrior_lodge_dice_game_cleanup_effect = yes
	}
	option = { #You lost. Call in favor.
		name = EVTOPTCHF25230
		trigger = { 
			event_target:random_society_winner = { 
				is_alive = yes 
				owes_favor_to = ROOT
			} 
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		event_target:random_society_winner = { 
			remove_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25240 } } #Notify other warrior.
		}
		warrior_lodge_dice_game_cleanup_effect = yes
	}
	option = { #You lost. Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Zeus"
			event_target:random_society_winner = { 
				is_alive = yes 
				NOT = { owes_favor_to = ROOT }
			} 
			NOT = { owes_favor_to = event_target:random_society_winner }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		event_target:random_society_winner = { 
			add_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25241 } } #Notify other warrior.
		}
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Die has been cast. - Second row.
character_event = {
	id = HF.25236
	title = EVTTITLEHF25226
	desc = {
		text = EVTDESCHF25236 #You won.
		trigger = { 
			OR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	desc = {
		text = EVTDESCHF25236_B #You lost.
		trigger = { 
			event_target:random_society_winner = { is_alive = yes }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	desc = {
		text = EVTDESCHF25236_C #You lost. - No winner.
		trigger = { 
			event_target:random_society_winner = { is_alive = no }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25236
		trigger = { 
			OR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		warrior_lodge_get_dice_bet_effect = yes
	}
	option = { #Special option. - Sore loser starts duel!
		name = EVTOPTYHF25235
		custom_tooltip = { text = tooltip_EVTOPTYHF25235 }
		trigger = { 
			trait = arbitrary
			event_target:random_society_winner = { 
				ai = yes
				is_alive = yes
				this_can_duel_with_from_trigger = yes 
			}
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		tooltip_info = arbitrary
		tiered_prestige_negative_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	event_target:random_society_winner = { save_event_target_as = combatant_2 } #the target of the duel...
	    }	    
	    event_target:random_society_winner = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }

	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        event_target:random_society_winner = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = event_target:random_society_winner value = 20 } }
			}
		}
	}
	option = { #You lost.
		name = EVTOPTBHF25236
		trigger = { 
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}
		warrior_lodge_pay_dice_debt_effect = yes
	}
	option = { #You lost. Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { 
			event_target:random_society_winner = { is_alive = yes } 
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}	
		warrior_lodge_pay_dice_debt_effect = yes
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25239 } } #Notify other warrior.
		}
	}
	option = { #You lost. Call in favor.
		name = EVTOPTCHF25230
		trigger = { 
			event_target:random_society_winner = { 
				is_alive = yes 
				owes_favor_to = ROOT
			} 
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}	
		event_target:random_society_winner = { 
			remove_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25240 } } #Notify other warrior.
		}
	}
	option = { #You lost. Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Zeus"
			event_target:random_society_winner = { 
				is_alive = yes 
				NOT = { owes_favor_to = ROOT }
			} 
			NOT = { owes_favor_to = event_target:random_society_winner }
			NOR = {
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_krita
					has_character_flag = flag_betting_on_krita
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_treta
					has_character_flag = flag_betting_on_treta
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_dwapara
					has_character_flag = flag_betting_on_dwapara
				}
				AND = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
		}	
		event_target:random_society_winner = { 
			add_favor = ROOT
		}
		hidden_tooltip = { 
			event_target:random_society_winner = { character_event = { id = HF.25241 } } #Notify other warrior.
		}
	}
	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}
#Won with fake die again. - Second row.
character_event = {
	id = HF.25237
	title = EVTTITLEHF25226
	desc = EVTDESCHF25237
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25237
		warrior_lodge_get_dice_bet_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}
#Won with bumping table again. - Second row.
character_event = {
	id = HF.25238
	title = EVTTITLEHF25226
	desc = EVTDESCHF25238
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25238
		warrior_lodge_get_dice_bet_effect = yes
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

#Random Warrior informed that he has earned money from loser.
character_event = {
	id = HF.25239
	title = EVTTITLEHF25226
	desc = EVTDESCHF25239
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25239
		add_society_currency_trivial_effect = yes
	}
}

#Random Warrior informed that loser called in favor to not pay debt.
character_event = {
	id = HF.25240
	title = EVTTITLEHF25226
	desc = EVTDESCHF25240
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25240
		add_society_currency_trivial_effect = yes
	}
}
#Random Warrior informed that loser gave favor to not pay debt.
character_event = {
	id = HF.25241
	title = EVTTITLEHF25226
	desc = EVTDESCHF25241
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	trigger = { 
		OR = { 
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}
	is_triggered_only = yes

	option = { #You won.
		name = EVTOPTAHF25241
		add_society_currency_trivial_effect = yes
	}
}

#############################################

				# Flyting #

#############################################
#Warrior Lodge Member picks a challenger.
character_event = {
	id = HF.25250
	title = EVTTITLEHF25250
	desc = EVTDESCHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	hide_new = yes


	trigger = { 
		has_dlc = "Holy Fury"
		is_adult = yes
		in_command = no
		prisoner = no
		NOT = { is_inaccessible_trigger = yes }
		is_incapable = no
		NOT = { has_character_flag = do_not_disturb }
		NOT = { has_character_modifier = flyting_challenge_cooldown }
		OR = { #Only for northeners
			society_member_of = warrior_lodge_norse
			society_member_of = warrior_lodge_slavic
			society_member_of = warrior_lodge_baltic
			society_member_of = warrior_lodge_finnish
		}
		any_society_member = { #Make sure there are enough contenders to pick.
			same_society_as = ROOT
			is_adult = yes
			in_command = no
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			is_incapable = no
			NOT = { has_character_flag = do_not_disturb }
			NOT = { character = ROOT }
			NOT = { has_character_modifier = flyting_challenge_cooldown }
			OR = { 
				is_smart_trigger = yes
				trait = scholarly_theologian
				trait = grey_eminence
				trait = poet
				diplomacy = 15
			}
			any_society_member = { 
				same_society_as = ROOT
				is_adult = yes
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				is_incapable = no
				NOT = { has_character_flag = do_not_disturb }
				NOT = { character = ROOT }
				NOT = { character = PREV } #Make sure it doesn't check the same good candidate as above.v
				NOT = { has_character_modifier = flyting_challenge_cooldown }
				NOR = { 
					is_smart_trigger = yes
					has_education_diplomacy_trigger = yes
					has_lifestyle_diplomacy_trigger = yes
					diplomacy = 15
				}
				count = 2
			}
		}
	}
	immediate = {
		random_list = { 
			33 = { sound_effect = pagan_cheering_01 } 
			33 = { sound_effect = pagan_cheering_02 } 
			33 = { sound_effect = pagan_cheering_03 } 
			33 = { sound_effect = warrior_lodge_ambient_02 } 
		}
		hidden_tooltip = { #Pick potential contenders 
			clr_character_flag = flyting_strong #Safety cleanup
			clr_character_flag = flyting_medium
			clr_character_flag = flyting_weak
			save_event_target_as = flyting_contender_1
			random_society_member = { #First pick a very smart/talkative guy.
				limit = {
					same_society_as = ROOT
					is_adult = yes
					in_command = no
					NOT = { is_inaccessible_trigger = yes }
					is_incapable = no
					NOT = { has_character_flag = do_not_disturb }
					NOT = { character = ROOT }
					NOT = { has_character_modifier = flyting_challenge_cooldown }
					prisoner = no
					OR = { 
						is_smart_trigger = yes
						trait = scholarly_theologian
						trait = grey_eminence
						trait = poet
						diplomacy = 15
					}
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					is_ill = no
					is_smart_trigger = yes
					has_education_diplomacy_trigger = yes
					has_lifestyle_diplomacy_trigger = yes
					diplomacy = 20
				}

				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					is_smart_trigger = yes
					OR = { 
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
					}
					diplomacy = 20
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 20
				}
				preferred_limit = { 
					ai = no
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 20
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 20
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 15
				}
				preferred_limit = { 
					ai = no
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 15
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 15
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 10
				}
				preferred_limit = { 
					ai = no
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 10
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 10
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 5
				}
				preferred_limit = { 
					ai = no
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 5
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 5
				}
				preferred_limit = { 
					ai = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					is_ill = no
					is_smart_trigger = yes
					has_education_diplomacy_trigger = yes
					has_lifestyle_diplomacy_trigger = yes
					diplomacy = 20
				}

				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					is_smart_trigger = yes
					OR = { 
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
					}
					diplomacy = 20
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 20
				}
				preferred_limit = { 
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 20
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 20
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 15
				}
				preferred_limit = { 
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 15
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 15
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 10
				}
				preferred_limit = { 
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 10
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 10
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 5
				}
				preferred_limit = { 
					OR = { 
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						trait = gregarious
					}
					diplomacy = 5
				}
				preferred_limit = { 
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
					diplomacy = 5
					is_dumb_trigger = no
				}
				preferred_limit = { 
					is_dumb_trigger = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = { 
					is_dumb_trigger = no
				}
				clr_character_flag = flyting_strong
				clr_character_flag = flyting_medium
				clr_character_flag = flyting_weak
				save_event_target_as = flyting_potential_opponent_1
			}
			random_society_member = { #Second pick a weakling.
				limit = {
					same_society_as = ROOT
					is_adult = yes
					in_command = no
					prisoner = no
					NOT = { is_inaccessible_trigger = yes }
					is_incapable = no
					NOT = { has_character_flag = do_not_disturb }
					NOT = { character = ROOT }
					NOT = { event_target:flyting_potential_opponent_1 = { character = PREV } }
					NOT = { has_character_modifier = flyting_challenge_cooldown }
					NOR = { 
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy = 12
					}
				}
				preferred_limit = {
					ai = no 
					is_dumb_trigger = yes 
					NOT = { diplomacy = 5 }
					OR = {
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					ai = no 
					NOT = { diplomacy = 5 }
					OR = {
						is_dumb_trigger = yes 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					ai = no 
					is_dumb_trigger = yes 
					NOT = { diplomacy = 10 }
					OR = {
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					ai = no 
					NOT = { diplomacy = 10 }
					OR = {
						is_dumb_trigger = yes 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					is_dumb_trigger = yes 
					NOT = { diplomacy = 5 }
					OR = {
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					NOT = { diplomacy = 5 }
					OR = {
						is_dumb_trigger = yes 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					NOT = { diplomacy = 3 }
				}
				preferred_limit = {
					NOT = { diplomacy = 5 }
				}
				preferred_limit = {
					is_dumb_trigger = yes 
					NOT = { diplomacy = 10 }
					OR = {
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = {
					NOT = { diplomacy = 10 }
					OR = {
						is_dumb_trigger = yes 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				clr_character_flag = flyting_strong
				clr_character_flag = flyting_medium
				clr_character_flag = flyting_weak
				save_event_target_as = flyting_potential_opponent_3
			}
			random_society_member = { #Third pick an average guy.
				limit = {
					same_society_as = ROOT
					is_adult = yes
					in_command = no
					prisoner = no
					NOT = { is_inaccessible_trigger = yes }
					is_incapable = no
					NOT = { has_character_flag = do_not_disturb }
					NOT = { character = ROOT }
					NOT = { event_target:flyting_potential_opponent_1 = { character = PREV } }
					NOT = { event_target:flyting_potential_opponent_3 = { character = PREV } }
					NOT = { has_character_modifier = flyting_challenge_cooldown }
					NOR = { 
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy = 20
					}
				}
				preferred_limit = { 
					is_ill = no
					has_education_diplomacy_trigger = yes
					diplomacy = 5
					NOT = { diplomacy = 12 }
				}
				preferred_limit = {
					has_education_diplomacy_trigger = yes
					diplomacy = 5
					NOT = { diplomacy = 12 }
				}
				preferred_limit = {
					diplomacy = 5
					NOT = { diplomacy = 12 }
				}
				preferred_limit = {
					is_dumb_trigger = no
					NOR = { 
						trait = shy
						trait = stutter
						trait = lisp
						trait = harelip
					}
				}
				preferred_limit = { 
					is_dumb_trigger = no
				}
				clr_character_flag = flyting_strong
				clr_character_flag = flyting_medium
				clr_character_flag = flyting_weak
				save_event_target_as = flyting_potential_opponent_2
			}
			#Then assign flag to determine what kind of opponent you are.
			if = { 
				limit = { 
					OR = { 
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy = 15
					}
				}
				set_character_flag = flyting_strong
			}
			else_if = { 
				limit = { 
					NOR = { 
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy = 15
					}
					diplomacy = 8
				}
				set_character_flag = flyting_medium
			}
			else_if = { 
				limit = { 
					NOR = { 
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy = 8
						has_education_diplomacy_trigger = yes
					}
				}
				set_character_flag = flyting_weak
			}
			#Safety check
			if = { 
				limit = { 
					NOR = { 
						has_character_flag = flyting_strong
						has_character_flag = flyting_medium
						has_character_flag = flyting_weak
					}
				}
				set_character_flag = flyting_medium
			}
			set_character_flag = do_not_disturb
			hidden_tooltip = { 
				character_event = { id = HF.25301 days = 15 } #Clear flag.
			}
		}
	}

	is_triggered_only = yes

	option = { #Pick tough fight.
		name = EVTOPTAHF25250
		custom_tooltip = { text = TT_EVTOPTAHF25250 }
		trigger = { event_target:flyting_potential_opponent_1 = { is_alive = yes } }
		show_portrait = event_target:flyting_potential_opponent_1
		hidden_tooltip = { 
			event_target:flyting_potential_opponent_1 = { 
				save_event_target_as = flyting_contender_2 
				set_character_flag = flyting_strong
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
			} 
			if = { 
				limit = { event_target:flyting_potential_opponent_2 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_2 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:flyting_potential_opponent_3 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_3 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			set_flyting_patience_effect = yes
			event_target:flyting_contender_2 = { character_event = { id = HF.25253 } }
		}
		
		ai_chance = { factor = 10 }
	}
	option = { #Pick average opponent.
		name = EVTOPTBHF25250
		custom_tooltip = { text = TT_EVTOPTBHF25250 }
		trigger = { event_target:flyting_potential_opponent_2 = { is_alive = yes } }
		show_portrait = event_target:flyting_potential_opponent_2
		hidden_tooltip = { 
			event_target:flyting_potential_opponent_2 = { 
				save_event_target_as = flyting_contender_2 
				set_character_flag = flyting_medium
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
			} 
			if = { 
				limit = { event_target:flyting_potential_opponent_1 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_1 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:flyting_potential_opponent_3 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_3 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			set_flyting_patience_effect = yes
			event_target:flyting_contender_2 = { character_event = { id = HF.25253 } }
		}
		
		ai_chance = { factor = 20 }
	}
	option = { #Pick lousy opponent.
		name = EVTOPTCHF25250
		custom_tooltip = { text = TT_EVTOPTCHF25250 }
		trigger = { event_target:flyting_potential_opponent_3 = { is_alive = yes } }
		show_portrait = event_target:flyting_potential_opponent_3
		hidden_tooltip = { 
			event_target:flyting_potential_opponent_3 = { 
				save_event_target_as = flyting_contender_2 
				set_character_flag = flyting_weak
				set_character_flag = do_not_disturb
				hidden_tooltip = { 
					character_event = { id = HF.25301 days = 15 } #Clear flag.
				}
			} 
			if = { 
				limit = { event_target:flyting_potential_opponent_1 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_1 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = { event_target:flyting_potential_opponent_2 = { is_alive = yes } } 
				 event_target:flyting_potential_opponent_2 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			set_flyting_patience_effect = yes
			event_target:flyting_contender_2 = { character_event = { id = HF.25253 } }
		}
		
		ai_chance = { 
			factor = 30 
			modifier = { 
				factor = 2
				trait = craven
			}
			modifier = { 
				factor = 0.5
				trait = brave
			}
		}
	}
	option = { #Not interested. -End of line.
		name = EVTOPTDHF25250
		tiered_prestige_negative_effect = yes
		if = { 
			limit = { 
				has_character_flag = flyting_strong
			}
			detract_society_currency_medium_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = flyting_medium
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				has_character_flag = flyting_weak
			}
			detract_society_currency_tiny_effect = yes
		}
		hidden_tooltip = { 
			if = { 
				limit = {
					event_target:flyting_potential_opponent_1 = { is_alive = yes }
				}
				event_target:flyting_potential_opponent_1 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = {
					event_target:flyting_potential_opponent_2 = { is_alive = yes }
				}
				event_target:flyting_potential_opponent_2 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			if = { 
				limit = {
					event_target:flyting_potential_opponent_3 = { is_alive = yes }
				}
				event_target:flyting_potential_opponent_3 = { 
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					clr_character_flag = do_not_disturb 
				}
			}
			warrior_lodge_flyting_cleanup_effect = yes
		}
		ai_chance = { factor = 0 }
	}
}

#Second character: hidden ping.
character_event = {
	id = HF.25253
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = { 
		add_character_modifier = { name = flyting_challenge_cooldown duration = 1250 hidden = yes }
		FROM = {
			add_character_modifier = { name = flyting_challenge_cooldown duration = 1250 hidden = yes }
			character_event = { id = HF.25254 }
		}
	}
}

#First character: First round of Flything.
character_event = {
	id = HF.25254
	title = EVTTITLEHF25250
	desc = EVTDESCHF25254
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254
		trigger = { 
			NOR = {  
				is_lover = FROM
				is_close_relative = FROM
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		trigger = { 
			OR = {  
				is_close_relative = FROM
				is_lover = FROM
			}
		}
		tooltip_info_custom = available_because_relative
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } }
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 80 }
	}

	option = { #Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { 
			NOT = {  
				trait = poet
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 80 }
	}
	option = { #Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		trigger = { 
			trait = poet
		}
		tooltip_info = poet
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { 
			NOT = {  
				FROM = { vassal_of = ROOT }
			}
		}
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		trigger = { 
			FROM = { vassal_of = ROOT }
		}
		tooltip_info_custom = available_because_better
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments_liege
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 80 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = { 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		trigger = { 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
			}
			trait = cruel
		}
		tooltip_info = cruel
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family_cruel
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 80
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			} 
		}
	}
}

#Opponent: receive insults on prowess - Normal.
character_event = {
	id = HF.25255
	title = EVTTITLEHF25250
	desc = {
		text = EVTDESCBHF25255
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	desc = {
		text = EVTDESCAHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Character does not care much because celibate.
		name = EVTOPTBHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = celibate
		}
		tooltip_info = celibate
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = {
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character does not care much because master seducer.
		name = EVTOPTCHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			}  
			trait = seducer
		}
		tooltip_info = seducer
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character does not care much because master seductress.
		name = EVTOPTDHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = seductress
		}
		tooltip_info = seductress
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked.
		name = EVTOPTEHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = { 
				trait = celibate
				trait = seducer
				trait = seductress
				trait = lustful
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked a lot.
		name = EVTOPTFHF25255
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = { 
				trait = celibate
				trait = seducer
				trait = seductress
			}
			trait = lustful
		}
		tooltip_info = lustful
		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_lover = FROM
				is_close_relative = FROM
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			OR = {  
				is_close_relative = FROM
				is_lover = FROM
			}
		}
		tooltip_info_custom = available_because_relative
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } }
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 80 }
	}

	option = { #Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				trait = poet
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 80 }
	}
	option = { #Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = poet
		}
		tooltip_info = poet
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				FROM = { vassal_of = ROOT }
			}
		}
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			FROM = { vassal_of = ROOT }
		}
		tooltip_info_custom = available_because_better
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments_liege
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 80 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
			}
			trait = cruel
		}
		tooltip_info = cruel
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family_cruel
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 80
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			} 
		}
	}
}

#Opponent: receive insults on character.
character_event = {
	id = HF.25257
	title = EVTTITLEHF25250
	desc = {
		text = EVTDESCBHF25257
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	desc = {
		text = EVTDESCAHF25257
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Character does not care much because humble.
		name = EVTOPTBHF25257
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = humble
		}
		tooltip_info = humble
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = {  
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked.
		name = EVTOPTCHF25257
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = { 
				trait = humble
				trait = arbitrary
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked a lot.
		name = EVTOPTDHF25257
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = arbitrary
		}
		tooltip_info = arbitrary
		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_lover = FROM
				is_close_relative = FROM
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			OR = {  
				is_close_relative = FROM
				is_lover = FROM
			}
		}
		tooltip_info_custom = available_because_relative
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } }
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 80 }
	}

	option = { #Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				trait = poet
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 80 }
	}
	option = { #Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = poet
		}
		tooltip_info = poet
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				FROM = { vassal_of = ROOT }
			}
		}
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			FROM = { vassal_of = ROOT }
		}
		tooltip_info_custom = available_because_better
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments_liege
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 80 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
			}
			trait = cruel
		}
		tooltip_info = cruel
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family_cruel
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 80
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			} 
		}
	}
}

#Opponent: receive insults on accomplishments.
character_event = {
	id = HF.25259
	title = EVTTITLEHF25250
	desc = {
		text = EVTDESCBHF25259
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	desc = {
		text = EVTDESCAHF25259
		trigger = { 
			OR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Character does not care much.
		name = EVTOPTBHF25259
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = content
		}
		tooltip_info = content
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked.
		name = EVTOPTCHF25259
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = { 
				trait = content
				trait = ambitious
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked a lot.
		name = EVTOPTDHF25259
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = ambitious
		}
		tooltip_info = ambitious
		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_lover = FROM
				is_close_relative = FROM
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			OR = {  
				is_close_relative = FROM
				is_lover = FROM
			}
		}
		tooltip_info_custom = available_because_relative
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } }
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 80 }
	}

	option = { #Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				trait = poet
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 80 }
	}
	option = { #Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = poet
		}
		tooltip_info = poet
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				FROM = { vassal_of = ROOT }
			}
		}
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			FROM = { vassal_of = ROOT }
		}
		tooltip_info_custom = available_because_better
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments_liege
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 80 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
			}
			trait = cruel
		}
		tooltip_info = cruel
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family_cruel
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 80
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			} 
		}
	}
}

#Opponent: receive insults on family.
character_event = {
	id = HF.25261
	title = EVTTITLEHF25250
	desc = {
		text = EVTDESCBHF25261
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	desc = {
		text = EVTDESCAHF25261
		trigger = { 
			OR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Character does not care much.
		name = EVTOPTBHF25261
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = cruel
			NOR = { 
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}
		}
		tooltip_info = cruel
		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked.
		name = EVTOPTCHF25261
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = { 
				trait = cruel
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Character feels mocked a lot.
		name = EVTOPTDHF25261
		trigger = { 
			OR = { #Second round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = { trait = cruel }
			OR = { 
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}
		}
		tooltip_info_custom = available_because_loves_family
		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		hidden_tooltip = { 
			warrior_lodge_flyting_winner_selection_effect = yes
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_lover = FROM
				is_close_relative = FROM
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 50 }
	}
	option = { #Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			OR = {  
				is_close_relative = FROM
				is_lover = FROM
			}
		}
		tooltip_info_custom = available_because_relative
		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25255 } }
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25255 } } 
			}
		}
		ai_chance = { factor = 80 }
	}

	option = { #Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				trait = poet
			}
		}
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 80 }
	}
	option = { #Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			trait = poet
		}
		tooltip_info = poet
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25257 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25257 } } 
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOT = {  
				FROM = { vassal_of = ROOT }
			}
		}
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			FROM = { vassal_of = ROOT }
		}
		tooltip_info_custom = available_because_better
		prestige = -20
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		set_character_flag = insulting_accomplishments_liege
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25259 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25259 } } 
			}
		}
		ai_chance = { 
			factor = 80 
			modifier = { 
				factor = 1.5
				trait = arbitrary
			}
			modifier = { 
				factor = 0.5
				trait = just
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { prestige = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 50 
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			}
		}
	}
	option = { #Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		trigger = { 
			NOR = { #First round.
				has_character_flag = insulting_prowess
				has_character_flag = insulting_prowess_relative
				has_character_flag = insulting_character
				has_character_flag = insulting_character_poet
				has_character_flag = insulting_accomplishments
				has_character_flag = insulting_accomplishments_liege
				has_character_flag = insulting_family
				has_character_flag = insulting_family_cruel
			} 
			NOR = {  
				is_close_relative = FROM
				dynasty = FROM
			}
			trait = cruel
		}
		tooltip_info = cruel
		piety = -5
		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		set_character_flag = insulting_family_cruel
		hidden_tooltip = { 
			if = { #Receiver could be either.
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event =  { id = HF.25261 } } 
			}
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event =  { id = HF.25261 } } 
			}
		}
		ai_chance = { 
			factor = 80
			modifier = { 
				factor = 0.5
				has_focus = focus_family
			}
			modifier = { 
				factor = 0.5
				trait = kind
			}
			modifier = { 
				factor = 0.5
				NOT = { piety = 100 }
			} 
		}
	}
}

#Loser ping.
character_event = {
	id = HF.25262
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = { #Receiver could be either.
			limit = { event_target:flyting_contender_2 = { character = ROOT } }
			event_target:flyting_contender_1 = { character_event =  { id = HF.25263 } } 
		}
		if = { 
			limit = { event_target:flyting_contender_1 = { character = ROOT } }
			event_target:flyting_contender_2 = { character_event =  { id = HF.25263 } } 
		}
	}
}

#Opponent: notified previous character lost his temper and has thus lost the game.
character_event = {
	id = HF.25263
	title = EVTTITLEHF25250
	desc = EVTDESCAHF25263
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { #Mock loser.
		name = EVTOPTAHF25263
		custom_tooltip = { text = TT_EVTOPTAHF25263 }
		#Influence reward based on opponent's strength.
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_strong
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_strong
					} 
				} 
			}
			add_society_currency_minor_effect = yes
			hidden_tooltip = { #If defeated a strong guy, gain nickname.
				if = { 
					limit = { 
						NOR = { 
							this_has_average_nickname_trigger = yes
							this_has_cool_nickname_trigger = yes 
							this_has_super_cool_nickname_trigger = yes
						}
					}
					random_list = { 
						25 = { give_nickname = nick_the_sharp_tongue } 
						25 = { give_nickname = nick_the_trickster } 
						25 = { give_nickname = nick_the_merciless } 
						25 = { give_nickname = nick_the_word_slayer } 
						25 = { give_nickname = nick_the_grinner } 
						25 = { give_nickname = nick_the_poison_tooth } 
						25 = { give_nickname = nick_the_bellower } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_fox 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_vixen 
						} 
						25 = { 
							trigger = {
								society_member_of = warrior_lodge_west_african
							}
							give_nickname = nick_the_hyena 
						} 
						15 = {}
					} 
				}
			} 
		}
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_medium
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_medium
					} 
				} 
			}
			add_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_weak
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_weak
					} 
				} 
			}
			add_society_currency_trivial_effect = yes
		}
		tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_lousy_winner
						years = 5
					} 
				}
			}
			if = { 
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_lousy_winner
						years = 5
					} 
				}
			}
		}
		hidden_tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event = { id = HF.25268 } }
			}
			if = { 
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event = { id = HF.25268 } }
			}
		}
		ai_chance = { 
			factor = 30 
			modifier = { 
				factor = 1.5
				is_evil_trigger = yes 
			}
		}
	}
	option = { #Kind to loser.
		name = EVTOPTBHF25263
		#Influence reward based on opponent's strength.
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_strong
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_strong
					} 
				} 
			}
			add_society_currency_tiny_effect = yes
			hidden_tooltip = { #If defeated a strong guy, gain nickname.
				if = { 
					limit = { 
						NOR = { 
							this_has_average_nickname_trigger = yes
							this_has_cool_nickname_trigger = yes 
							this_has_super_cool_nickname_trigger = yes
						}
					}
					random_list = { 
						25 = { give_nickname = nick_the_sharp_tongue } 
						25 = { give_nickname = nick_the_trickster } 
						25 = { give_nickname = nick_the_merciless } 
						25 = { give_nickname = nick_the_word_slayer } 
						25 = { give_nickname = nick_the_grinner } 
						25 = { give_nickname = nick_the_poison_tooth } 
						25 = { give_nickname = nick_the_bellower } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_fox 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_vixen 
						} 
						25 = { 
							trigger = {
								society_member_of = warrior_lodge_west_african
							}
							give_nickname = nick_the_hyena 
						} 
						15 = {}
					} 
				}
			}
		}
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_medium
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_medium
					} 
				} 
			}
			add_society_currency_trivial_effect = yes
		}
		if = { 
			limit = { 
				OR = {
					event_target:flyting_contender_1 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_weak
					} 
					event_target:flyting_contender_2 = {
						NOT = { character = ROOT } 
						has_character_flag = flyting_weak
					} 
				} 
			}
			prestige = 10
		}
		tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_kind_winner
						years = 5
					} 
				}
			}
			if = { 
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { 
					show_scope_change = no
					opinion = { 
						who = ROOT
						modifier = opinion_kind_winner
						years = 5
					} 
				}
			}
		}
		hidden_tooltip = { 
			#Notify loser.
			if = { 
				limit = { event_target:flyting_contender_1 = { character = ROOT } }
				event_target:flyting_contender_2 = { character_event = { id = HF.25269 } }
			}
			if = { 
				limit = { event_target:flyting_contender_2 = { character = ROOT } }
				event_target:flyting_contender_1 = { character_event = { id = HF.25269 } }
			}
		}
		ai_chance = { 
			factor = 70
			modifier = { 
				factor = 1.5
				is_benevolent_trigger = yes 
			} 
		}
	}
	after = {
		add_legend_progress_trivial_effect = yes
	}
}

#You lost. Mocked by winner.
character_event = {
	id = HF.25268
	title = EVTTITLEHF25250
	desc = EVTDESCHF25268
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}
	option = { #Special option. - Character starts duel!
		name = EVTOPTYHF25268
		custom_tooltip = { text = tooltip_22022_Y }
		trigger = { 
			this_can_duel_with_from_trigger = yes
		}
		tiered_prestige_negative_effect = yes
		opinion = { 
			modifier = opinion_antagonized_3
			who = ROOT
			years = 15
		}
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_short_tempered } 
						25 = { give_nickname = nick_the_red_cheeks } 
						25 = { give_nickname = nick_the_whiner } 
						25 = { give_nickname = nick_the_moaner } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_blushing 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet 
						}
						25 = {}
					} 
				}
			}
		}
	    #REQUIRED event targets for setting up duel evaluation!
	    hidden_tooltip = { 
	    	save_event_target_as = combatant_1 #the person issuing the duel...
	    	FROM = { save_event_target_as = combatant_2 } #the target of the duel...
	    }
	    FROM = {
	    	show_scope_change = no
	    	apply_degree_of_dishonorable_duel_effect = yes  #checks a bunch of age and health statuses...
	    }
	    
	    pacifists_lose_piety_effect = yes
	    add_character_modifier = {
	        modifier = recent_duel_timer
	        duration = 365
	        hidden = yes
	    }
	    hidden_tooltip = {
	        FROM = { character_event = { id = HFP.10095 days = 1 } } #Duel evaluation (hidden) + result event as follow-up.
	    }
		ai_chance = { 
			factor = 40
			modifier = { 
				factor = 0.1
				trait = craven
			}
			modifier = { 
				factor = 1.5
				trait = brave
			}
			modifier = { 
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 5 } }
			}
			modifier = { 
				factor = 1.25
				ROOT = { combat_rating_diff = { character = FROM value = 10 } }
			}
			modifier = { 
				factor = 1.5
				ROOT = { combat_rating_diff = { character = FROM value = 15 } }
			}
			modifier = { 
				factor = 1.75
				ROOT = { combat_rating_diff = { character = FROM value = 20 } }
			}
		}
	}
	option = { #Become a rival.
		name = EVTOPTAHF25268
		trigger = { 
			NOT = { num_of_rivals = 3 }
			NOT = { FROM = { num_of_rivals = 3 } }
			NOR = { 
				is_rival = FROM 
				is_friend = FROM
				is_lover = FROM
			} 
		}
		add_rival = FROM
		hidden_tooltip = { FROM = { character_event = { id = HF.25270 } } } #Notify.
		tiered_prestige_negative_effect = yes
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_weak
				} 
			}
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_short_tempered } 
						25 = { give_nickname = nick_the_red_cheeks } 
						25 = { give_nickname = nick_the_whiner } 
						25 = { give_nickname = nick_the_moaner } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_blushing 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_lousy_winner
			years = 5
		} 
		custom_tooltip = { text = TT_EVTOPTAHF25268 } 
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_loser
					years = 2
				}
			}
			warrior_lodge_flyting_cleanup_effect = yes #Decide who wins.
		}
		ai_chance = { factor = 20 }
	}
	option = { 
		name = EVTOPTBHF25268
		#Influence penalty based on opponent's strength.
		tiered_prestige_negative_effect = yes
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_short_tempered } 
						25 = { give_nickname = nick_the_red_cheeks } 
						25 = { give_nickname = nick_the_whiner } 
						25 = { give_nickname = nick_the_moaner } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_blushing 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_lousy_winner
			years = 5
		} 
		custom_tooltip = { text = TT_EVTOPTAHF25268 } 
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_loser
					years = 2
				}
			}
			warrior_lodge_flyting_cleanup_effect = yes #Decide who wins.
		}
		ai_chance = { factor = 100 }
	}
}

#You lost, but the winner is polite.
character_event = {
	id = HF.25269
	title = EVTTITLEHF25250
	desc = EVTDESCHF25269
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}
	option = { #Become a rival. - Only envious when the winner is kind.
		name = EVTOPTAHF25269
		trigger = { 
			trait = envious
			NOT = { num_of_rivals = 3 }
			NOT = { FROM = { num_of_rivals = 3 } } 
			NOR = { 
				is_rival = FROM 
				is_friend = FROM
				is_lover = FROM
			} 
		}
		tooltip_info = envious
		add_rival = FROM
		tiered_prestige_negative_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HF.25271 } } } #Notify.
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_short_tempered } 
						25 = { give_nickname = nick_the_red_cheeks } 
						25 = { give_nickname = nick_the_whiner } 
						25 = { give_nickname = nick_the_moaner } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_blushing 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_lousy_winner
			years = 5
		} 
		custom_tooltip = { text = TT_EVTOPTAHF25269 } 
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_loser
					years = 2
				}
			}
			warrior_lodge_flyting_cleanup_effect = yes #Decide who wins.
		}
		ai_chance = { factor = 20 }
	}
	option = { 
		name = EVTOPTBHF25269
		tiered_prestige_negative_effect = yes
		#Influence penalty based on opponent's strength.
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_strong
				} 
			}
			detract_society_currency_minor_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_medium
				} 
			}
			detract_society_currency_tiny_effect = yes
		}
		if = { 
			limit = { 
				FROM = {
					has_character_flag = flyting_weak
				} 
			}
			detract_society_currency_trivial_effect = yes
			hidden_tooltip = { #If defeated by a weak guy, gain nickname.
				if = { 
					limit = { 
						has_nickname = no
					}
					random_list = { 
						25 = { give_nickname = nick_the_short_tempered } 
						25 = { give_nickname = nick_the_red_cheeks } 
						25 = { give_nickname = nick_the_whiner } 
						25 = { give_nickname = nick_the_moaner } 
						25 = { 
							trigger = { is_female = no }
							give_nickname = nick_the_blushing 
						} 
						25 = { 
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet 
						}
						25 = {}
					} 
				}
			}
		}
		opinion = { 
			who = FROM
			modifier = opinion_kind_winner
			years = 5
		} 
		hidden_tooltip = { 
			warrior_lodge_flyting_cleanup_effect = yes #Decide who wins.
		}
		ai_chance = { factor = 100 }
	}
}

#Loser declared rivalry because you mocked him.
character_event = {
	id = HF.25270
	title = EVTTITLEHF25250
	desc = EVTDESCHF25270
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}
	option = { #
		name = EVTOPTAHF25270
		add_rival = FROM
		warrior_lodge_flyting_cleanup_effect = yes
	}
}

#Loser declared rivalry despite your kindness..
character_event = {
	id = HF.25271
	title = EVTTITLEHF25250
	desc = EVTDESCHF25271
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}
	option = { #
		name = EVTOPTAHF25270
		add_rival = FROM
		warrior_lodge_flyting_cleanup_effect = yes
	}
}

#############################################

			# Drinking game #

#############################################
#Warrior Lodge Hero decides whether to start.
character_event = {
	id = HF.25280
	title = EVTTITLEHF25280
	desc = EVTDESCHF25280
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	hide_new = yes

	is_triggered_only = yes

	trigger = { 
		has_dlc = "Holy Fury"
		is_adult = yes
		in_command = no
		prisoner = no
		society_rank = 4
		NOT = { is_inaccessible_trigger = yes }
		is_incapable = no
		NOT = { has_character_flag = do_not_disturb }
		NOT = { society_member_of = warrior_lodge_bon }
		is_member_of_any_warrior_lodge_trigger = yes
		any_society_member = { #Make sure there are enough contenders to join in.
			same_society_as = ROOT
			is_adult = yes
			prisoner = no
			in_command = no
			NOT = { is_inaccessible_trigger = yes }
			is_incapable = no
			NOT = { has_character_flag = do_not_disturb }
			NOT = { character = ROOT }
			count = 4 #At least a few other members should be around.
		}
	}
	immediate = { 
		random_list = { 
			33 = { sound_effect = pagan_cheering_01 } 
			33 = { sound_effect = pagan_cheering_02 } 
			33 = { sound_effect = pagan_cheering_03 } 
			33 = { sound_effect = warrior_lodge_ambient_02 } 
		}
		set_character_flag = do_not_disturb
		hidden_tooltip = { 
			character_event = { id = HF.25301 days = 15 } #Clear flag.
		}
	}
	option = { #Start tournament
		name = EVTOPTAHF25280
		custom_tooltip = { text = TOOLTIP_EVTOPTAHF25280 }
		hidden_tooltip = { 
			any_society_member = { 
				limit = { 
					same_society_as = ROOT
					is_adult = yes
					in_command = no
					prisoner = no
					NOT = { is_inaccessible_trigger = yes }
					is_incapable = no
					NOT = { has_character_flag = do_not_disturb }
					NOT = { character = ROOT } 
				}
				character_event = { id = HF.25281 } #Call in contenders.
			}
			save_event_target_as = WL_host_drinking_game
			character_event = { id = HF.25283 days = 5 } #Actually start.
		}
		hidden_tooltip = { character_event = { id = HF.25282 days = 60 } } #Clear flags.
		ai_chance = { factor = 100 }
	}
	option = { #Do not. - End of line.
		name = EVTOPTBHF25280
		detract_society_currency_major_effect = yes
		clr_character_flag = do_not_disturb
		ai_chance = { factor = 0 }
	}
}

#Other Warrior Lodge Members join in.
character_event = {
	id = HF.25281
	title = EVTTITLEHF25280
	desc = EVTDESCHF25281
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
		NOT = { has_character_flag = do_not_disturb }
	}
	immediate = { 
		set_character_flag = do_not_disturb
		hidden_tooltip = { 
			character_event = { id = HF.25301 days = 15 } #Clear flag.
		}
	}

	option = { #
		name = EVTOPTAHF25281
		custom_tooltip = { text = TT_EVTOPTAHF25281 }
		set_character_flag = flag_WL_drinking_game_contender
		ai_chance = { factor = 100 }
		hidden_tooltip = { character_event = { id = HF.25282 days = 60 } } #Clear flags.
	}
	option = { #
		name = EVTOPTBHF25281
		detract_society_currency_medium_effect = yes
		tiered_prestige_negative_effect = yes
		clr_character_flag = do_not_disturb
		ai_chance = { factor = 0 }
	}
}

#Delayed cleanup for guests, just in case something happens.
character_event = {
	id = HF.25282
	hide_window = yes

	is_triggered_only = yes

	immediate = { 
		warrior_lodge_drinking_game_cleanup_effect = yes
	}
}

#Host: The game begins.
character_event = {
	id = HF.25283
	title = EVTTITLEHF25280
	desc = EVTDESCHF25283
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25283
		custom_tooltip = { text = TT_EVTOPTAHF25283 }
		hidden_tooltip = { 
			any_society_member = { #Notify all contenders.
				limit = { 
					same_society_as = ROOT
					has_character_flag = flag_WL_drinking_game_contender
				}
				character_event = { id = HF.25284 } 
			}
			character_event = { id = HF.25285 days = 5 } #Scope two finalists.
		}
		ai_chance = { factor = 100 }
	}
}

#Contenders notified.
character_event = { 
	id = HF.25284
	title = EVTTITLEHF25280
	desc = EVTDESCHF25284
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25284
		custom_tooltip = { text = TT_EVTOPTAHF25284 }
		ai_chance = { factor = 100 }
	}
}

#hidden event for the host, picking two finalists and sending event to underdog.
character_event = { 
	id = HF.25285
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		pick_potential_WL_drinking_finalists_effect = yes
	}
}

#Host Fallback: There was no winner for some reason.
character_event = { 
	id = HF.25286
	title = EVTTITLEHF25280
	desc = EVTDESCHF25286
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25286
		tiered_prestige_reward_effect = yes
		hidden_tooltip = { 
			warrior_lodge_drinking_game_cleanup_effect = yes
			any_society_member = { #Notify all contenders.
				limit = { 
					same_society_as = ROOT
					has_character_flag = flag_WL_drinking_game_contender
				}
				character_event = { id = HF.25287 } 
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Contenders informed no winner was found.
character_event = { 
	id = HF.25287
	title = EVTTITLEHF25280
	desc = EVTDESCHF25287
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25287
		add_society_currency_trivial_effect = yes
		if = { 
			limit = { NOT = { trait = drunkard } }
			random = { chance = 2 add_trait = drunkard } 
		}
		hidden_tooltip = { warrior_lodge_drinking_game_cleanup_effect = yes }
		ai_chance = { factor = 100 }
	}
}

#A finalist is losing: chance to use special action.
character_event = { 
	id = HF.25288
	title = EVTTITLEHF25280
	desc = {
		text = EVTDESCAHF25288
		trigger = {
			event_target:warrior_lodge_drinking_finalist_1 = { character = ROOT } 
		}
	}
	desc = {
		text = EVTDESCBHF25288
		trigger = {
			event_target:warrior_lodge_drinking_finalist_2 = { character = ROOT } 
		}
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	#Intrigue.
	#Strong/Robust power through.
	#Normal.

	option = { #
		name = EVTOPTAHF25288
		trigger = { intrigue = 10 }
		tooltip_info = intrigue
		custom_tooltip = { text = TT_EVTOPTAHF25288 }
		set_character_flag = flag_intrigue_cheating_WL_drinking_game
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 1.5
				trait = deceitful
			} 
			modifier = {
				factor = 0.5
				trait = honest
			} 
			modifier = {
				factor = 0.5
				trait = stubborn
			} 
			modifier = {
				factor = 0.5
				trait = just
			} 
		}
	}
	option = { #
		name = EVTOPTBHF25288
		trigger = { trait = strong }
		tooltip_info = strong
		custom_tooltip = { text = TT_EVTOPTBHF25288 }
		set_character_flag = flag_strong_boost_WL_drinking_game
		ai_chance = { factor = 100 }
	}
	option = { #
		name = EVTOPTBHF25288
		trigger = { trait = robust }
		tooltip_info = robust
		custom_tooltip = { text = TT_EVTOPTBHF25288 }
		set_character_flag = flag_strong_boost_WL_drinking_game
		ai_chance = { factor = 100 }
	}
	option = { #
		name = EVTOPTCHF25288
		ai_chance = { factor = 10 }
	}
	after = { #
		hidden_tooltip = { pick_potential_WL_drinking_winner_effect = yes }
	}
}

#Host discovers cheater.
character_event = { 
	id = HF.25289
	title = EVTTITLEHF25280
	desc = EVTDESCHF25289
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	portrait = FROM

	is_triggered_only = yes

	option = { #Let it slide.
		name = EVTOPTAHF25289
		custom_tooltip = { text = TT_EVTOPTAHF25289 }
		set_character_flag = flag_WL_drinking_host_approves_of_cheating
		hidden_tooltip = { pick_potential_WL_drinking_winner_effect = yes } #Once again.
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 1.5
				is_friend = FROM
			} 
			modifier = {
				factor = 1.5
				is_lover = FROM
			} 
			modifier = {
				factor = 1.25
				is_close_relative = FROM
			} 
			modifier = {
				factor = 0
				is_rival = FROM
			} 
			modifier = {
				factor = 1.5
				trait = deceitful
			} 
			modifier = {
				factor = 0.5
				trait = honest
			} 
			modifier = {
				factor = 0.5
				trait = stubborn
			} 
			modifier = {
				factor = 0.5
				trait = just
			} 
		}
	}
	option = { #
		name = EVTOPTBHF25289
		custom_tooltip = { text = TT_EVTOPTBHF25289 }
		tooltip = { 
			FROM =  { 
				tiered_prestige_negative_effect = yes 
				detract_society_currency_medium_effect = yes
			} 
		}
		hidden_tooltip = { 
			FROM =  { character_event = { id = HF.25290 } } #Inform the guy. 
		}
		ai_chance = { factor = 100 }
	}
}

#Cheater was discovered.
character_event = { 
	id = HF.25290
	title = EVTTITLEHF25280
	desc = EVTDESCHF25290
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHF25290
		custom_tooltip = { text = TT_EVTOPTAHF25290 }
		tiered_prestige_negative_effect = yes 
		detract_society_currency_medium_effect = yes
		random = { chance = 10 add_trait = wounded }
		hidden_tooltip = { 
			any_society_member = { 
				limit = {
					is_adult = yes
					prisoner = no
					same_society_as = ROOT
					NOT = {
						character = FROM
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_cheater
					years = 5
				}
			}
			if = { 
				limit = { 
					has_nickname = no
				}
				random_list = { 
					15 = { give_nickname = nick_the_cheater } 
					15 = { give_nickname = nick_the_liar } 
					15 = { give_nickname = nick_the_dry_throat } 
					70 = {}
				} 
			}
			if = { 
				limit = { 
					event_target:warrior_lodge_drinking_finalist_1 = { is_alive = yes NOT = { character = ROOT } } #If other guy still exists, he has won.
				} 
				event_target:warrior_lodge_drinking_finalist_1 = { character_event = { id = HF.25291 } }
			}
			else_if = { 
				limit = { 
					event_target:warrior_lodge_drinking_finalist_2 = { is_alive = yes NOT = { character = ROOT } } #If other guy still exists, he has won.
				} 
				event_target:warrior_lodge_drinking_finalist_2 = { character_event = { id = HF.25291 } }
			}
			else = { 
				event_target:WL_host_drinking_game = { character_event = { id = HF.25286 } } #Otherwise inform host that nobody won.
			}
			warrior_lodge_drinking_game_cleanup_effect = yes
		}
	}
}

#Other guy was cheating, you are the last one standing.
character_event = {
	id = HF.25291
	title = EVTTITLEHF25280
	desc = EVTDESCHF25291
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHF25291
		add_society_currency_tiny_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes
		hidden_tooltip = {
			if = { 
				limit = { 
					NOR = { 
						this_has_average_nickname_trigger = yes
						this_has_cool_nickname_trigger = yes 
						this_has_super_cool_nickname_trigger = yes
					}
				}
				random_list = { 
					10 = { give_nickname = nick_the_hundred_flagons } 
					10 = { give_nickname = nick_the_bottomless } 
					80 = {}
				} 
			}
		}
		hidden_tooltip = { 
			#Notify host.
			event_target:WL_host_drinking_game = { character_event = { id = HF.25293 } } 
		}
		ai_chance = { factor = 100 }
	}
}

#Winner receives event.
character_event = {
	id = HF.25292
	title = EVTTITLEHF25280
	desc = EVTDESCHF25292
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHF25292
		add_society_currency_tiny_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes
		add_legend_progress_trivial_effect = yes
		if = { 
			limit = { NOT = { trait = drunkard } }
			random = { chance = 10 add_trait = drunkard } 
		}
		hidden_tooltip = {
			if = { 
				limit = { 
					NOR = { 
						this_has_average_nickname_trigger = yes
						this_has_cool_nickname_trigger = yes 
						this_has_super_cool_nickname_trigger = yes
					}
				}
				random_list = { 
					10 = { give_nickname = nick_the_hundred_flagons } 
					10 = { give_nickname = nick_the_bottomless } 
					80 = {}
				} 
			}
		}
		hidden_tooltip = { 
			if = { #Notify the other finalist.
				limit = { 
					event_target:warrior_lodge_drinking_finalist_1 = { is_alive = yes NOT = { character = ROOT } } #If other guy still exists, he has won.
				} 
				event_target:warrior_lodge_drinking_finalist_1 = { character_event = { id = HF.25295 } }
			}
			else_if = { 
				limit = { 
					event_target:warrior_lodge_drinking_finalist_2 = { is_alive = yes NOT = { character = ROOT } } #If other guy still exists, he has won.
				} 
				event_target:warrior_lodge_drinking_finalist_2 = { character_event = { id = HF.25295 } }
			}
			#Notify host.
			event_target:WL_host_drinking_game = { character_event = { id = HF.25293 } } 
		}
		ai_chance = { factor = 100 }
	}
}

#Host: From has won.
character_event = {
	id = HF.25293
	title = EVTTITLEHF25280
	desc = EVTDESCHF25293
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	portrait = FROM

	is_triggered_only = yes

	#Make non-aggression pact. (Trusting only, rulers only)
	#Make friend.
	#Give gold for currency.
	#Nothing.

	option = { 
		name = EVTOPTAHF25293
		trigger = { 
			trait = trusting 
			higher_real_tier_than = BARON
			FROM = { 
				is_landed = yes
				higher_real_tier_than = BARON 
			}
			NOT = { vassal_of = FROM }
			NOT = { has_non_aggression_pact_with = FROM }
		}
		tooltip_info = trusting
		add_society_currency_minor_effect = yes
		tooltip = { 
			opinion = { 
				modifier = in_non_aggression_pact
				years = 50
				who = FROM
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HF.25296 } } } #Inform winner.
		ai_chance = { factor = 10 }
	}
	option = { 
		name = EVTOPTBHF25293
		trigger = { 
			NOR = { 
				num_of_friends = 3
				is_rival = FROM
				is_friend = FROM
				is_lover = FROM
				FROM = { num_of_friends = 3 }
			}
			NOT = { trait = paranoid }
		}
		add_society_currency_tiny_effect = yes
		tooltip = { 
			add_friend = FROM
		}
		hidden_tooltip = { FROM = { character_event = { id = HF.25298 } } } #Inform winner.
		ai_chance = { 
			factor = 10 
			modifier = { 
				factor = 2
				trait = gregarious
			}
			modifier = { 
				factor = 2
				trait = socializer
			}
			modifier = { 
				factor = 2
				trait = trusting
			}
		}
	}
	option = { 
		name = EVTOPTCHF25293
		add_society_currency_tiny_effect = yes
		tooltip = { 
			transfer_scaled_wealth = { to = FROM value = 0.5 min = 50 max = 100 } 
		}
		hidden_tooltip = { FROM = { character_event = { id = HF.25300 } } } #Inform winner.
		ai_chance = { 
			factor = 10 
			modifier = { 
				factor = 2
				trait = charitable
			}
			modifier = { 
				factor = 2
				trait = just
			}
			modifier = { 
				factor = 2
				trait = kind
			}
		}
	}
	option = { 
		name = EVTOPTDHF25293
		ai_chance = { 
			factor = 10 
		}
	}
	after = {
		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...
		hidden_tooltip = { 
			warrior_lodge_drinking_game_cleanup_effect = yes
			any_society_member = { #Notify all other contenders.
				limit = { 
					same_society_as = ROOT
					has_character_flag = flag_WL_drinking_game_contender
					NOT = { character = FROM } 
					NOT = { event_target:warrior_lodge_drinking_finalist_1 = { character = PREV } }
					NOT = { event_target:warrior_lodge_drinking_finalist_2 = { character = PREV } } 
				}
				character_event = { id = HF.25294 } 
			}
		}
	}
}

#All other contenders notified that they have lost.
character_event = {
	id = HF.25294
	title = EVTTITLEHF25280
	desc = EVTDESCHF25294
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	portrait = FROMFROM

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHF25294
		prestige = 25
		if = { 
			limit = { NOT = { trait = drunkard } }
			random = { chance = 1 add_trait = drunkard } 
		}
		warrior_lodge_drinking_game_cleanup_effect = yes
		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...
		ai_chance = { factor = 100 }
	}
}

#Second finalist notified of loss.
character_event = { 
	id = HF.25295
	title = EVTTITLEHF25280
	desc = EVTDESCHF25295
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25295
		add_society_currency_tiny_effect = yes
		if = { 
			limit = { NOT = { trait = drunkard } }
			random = { chance = 3 add_trait = drunkard } 
		}
		warrior_lodge_drinking_game_cleanup_effect = yes
		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...
		ai_chance = { factor = 100 }
	}
}

#Winner informed of non-aggression pact offer from Hero.
character_event = { 
	id = HF.25296
	title = EVTTITLEHF25280
	desc = EVTDESCHF25296
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25296
		opinion = { 
			modifier = in_non_aggression_pact
			years = 50
			who = FROM
		}
		hidden_tooltip = {
			FROM = { 
				show_scope_change = no
				opinion = { 
					modifier = in_non_aggression_pact
					years = 50
					who = ROOT
				}
			}
		}
		warrior_lodge_drinking_game_cleanup_effect = yes
		ai_chance = { factor = 100 }
	}
	option = { #
		name = EVTOPTBHF25296
		tiered_prestige_negative_effect = yes
		detract_society_currency_tiny_effect = yes
		tooltip = {
			FROM = { 
				show_scope_change = no
				opinion = { 
					modifier = opinion_antagonized_2
					years = 20
					who = ROOT
				}
			}
		}
		hidden_tooltip = { 
			warrior_lodge_drinking_game_cleanup_effect = yes
			character_event = { id = HF.25297 } 
		}
		ai_chance = { factor = 0 }
	}
}

#Hero informed that the winner scorned your offer.
character_event = { 
	id = HF.25297
	title = EVTTITLEHF25280
	desc = EVTDESCHF25297
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25297
		warrior_lodge_drinking_game_cleanup_effect = yes
		opinion = { 
			modifier = opinion_antagonized_2
			years = 20
			who = FROM
		}
		ai_chance = { factor = 100 }
	}
}
#Winner informed of friendship offer from Hero.
character_event = { 
	id = HF.25298
	title = EVTTITLEHF25280
	desc = EVTDESCHF25298
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25298
		add_friend = FROM
		warrior_lodge_drinking_game_cleanup_effect = yes
		ai_chance = { factor = 100 }
	}
	option = { #Refuse
		name = EVTOPTBHF25298
		tiered_prestige_negative_effect = yes
		tooltip = {
			FROM = { 
				show_scope_change = no
				opinion = { 
					modifier = opinion_antagonized_2
					years = 20
					who = ROOT
				}
			}
		}
		hidden_tooltip = { 
			character_event = { id = HF.25299 } 
		}
		ai_chance = { factor = 0 }
	}
}

#Hero informed that the winner scorned your offer.
character_event = { 
	id = HF.25299
	title = EVTTITLEHF25280
	desc = EVTDESCHF25299
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25299
		opinion = { 
			modifier = opinion_antagonized_2
			years = 20
			who = FROM
		}
		ai_chance = { factor = 100 }
	}
}

#Winner gets money.
character_event = { 
	id = HF.25300
	title = EVTTITLEHF25280
	desc = EVTDESCHF25300
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHF25300
		FROM = {
			show_scope_change = no
			transfer_scaled_wealth = { to = ROOT value = 0.5 min = 50 max = 100 } 
		}
		ai_chance = { factor = 100 }
	}
}

#Safety flag clearance, just in case anybody dies in the middle of a chain.
character_event = {
	id = HF.25301
	hide_window = yes

	is_triggered_only = yes

	immediate = { 
		clr_character_flag = do_not_disturb
	}
}
