# -*- ck2.events -*-
# Originally written by Crimson9 for the HIP version of Improved Genetics 2.0

namespace = emf_dna

# Original comments by Crimson9:
#################################### IMPROVED GENETICS EVENT CHAIN - HIP VERSION ###########################################
# How it works: After the on_birth on action event, this event chain fires, it gives every character in the game a flag.   #
# The flags assign each character with one of three allele pairs: AA, Aa, or aa. These flags both determine the likelihood #
# of the trait manifesting in the character, and the likelihood that they will pass on this 'gene.' Gene inheritance is    #
# roughly modeled based on a simplistic model of Mendelian inheritance. The child will inherit an allele pair from their   #
# parents based on a Punnett Square. Genes don't necessarily become traits, that is decided by a random genotype to pheno- #
# type chance. Some traits are 'Polygenic Inheritance.' These traits use 3 allele pairs,and the number of dominant alleles #
# capitals) determine the likelihood that the gene will be realized into a trait.Other genes are based on normal Mendelian #
# inheritance. These generally use two allele pairs, and if one of the pairs is recessive (two lower case) then there is a #
# chance for the character to get the negative trait.																	   #
############################################################################################################################


# emf_dna.0 -- Initialize randomly-generated start-of-game characters' traits. [Isis]
character_event = {
	id = emf_dna.0

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		any_character = {
			limit = { emf_dna_is_subject_to_startup_randomization = yes }
			character_event = { id = emf_dna.10 }
		}
		# And flag the approximately-complement set of characters as possibly historical characters (notably, characters
		# that we don't want to later think were a randomly-generated courtier after game start). Note that isolated
		# characters are allowed to be marked maybe-historical.
		any_character = {
			limit = { emf_dna_is_subject_to_startup_randomization = no }
			set_flag = emf_maybe_historical
		}
		# Initialize player gene flags (we also call this from our hook which catches Ruler Designer characters,
		# since they aren't dropped into the game until after the on_startup on_action):
		any_player = {
			character_event = { id = emf_dna.15 }
		}
	}
}


# emf_dna.1 -- MTTH event to find randomly-generated courtiers and initialize their genetic traits. [Character]
character_event = {
	id = emf_dna.1
	hide_window = yes

	trigger = {
		NOR = {
			has_flag = emf_dna_check
			has_flag = emf_maybe_historical
		}
	}

	mean_time_to_happen = {
		days = 0
	}

	immediate = {
		set_flag = emf_randomly_generated
		character_event = { id = emf_dna.10 }
	}
}

# emf_dna.10 -- Initialize a character's genetic traits. [Character]
#
# Called from the emf_new_character effect as well as from emf_dna.0 on campaign initialization and emf_dna.1 when
# discovering a new randomly-generated courtier (or a character that was spawned by script but for some reason lacked a call
# to the emf_new_character effect).
#
# NOTE: When generating new characters for which you want to assign your own congenital traits and/or disable any further
# random congenital trait assignment, set_flag = emf_dna_check before calling emf_new_character = yes (or any of its
# wrappers, e.g., emf_new_character_noble = yes). Likewise, if you want them to inherit from the traits of a spawned mother
# and father as if they'd been born the normal way unto them, ensure that the mother and father are alive and assigned as
# mother and father (set_mother, set_father/set_real_father) for the character before calling emf_new_character.
character_event = {
	id = emf_dna.10

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_flag = emf_dna_check }
	}

	immediate = {
		if = {
			limit = {
				mother = {
					character = yes
					is_alive = yes
				}
				trigger_if = {
					limit = { is_father_real_father = yes }
					father = {
						character = yes
						is_alive = yes
					}
				}
				trigger_else = {
					real_father = {
						character = yes
						is_alive = yes
					}
				}
			}
			# Since father and mother are alive already, then skip random DNA initialization and use on_birth DNA inheritance
			# and mutation instead:
			character_event = { id = emf_dna.1000 }
			break = yes
		}
		set_flag = emf_dna_check
		if = {
			limit = {
				NOR = {
					trait = bright
					trait = quick
					trait = genius
					trait = imbecile
					trait = slow
					trait = dim
				}
			}
			random_list = {
				50 = {
					add_trait = bright
				}
				12 = {
					add_trait = quick
				}
				3 = {
					add_trait = genius
				}
				3 = {
					add_trait = imbecile
				}
				10 = {
					add_trait = slow
				}
				40 = {
					add_trait = dim
				}
				870 = {
					## Nothing
				}
			}
		}
		if = {
			limit = {
				NOR = {
					trait = strong
					trait = burly
					trait = delicate
					trait = weak
				}
			}
			random_list = {
				50 = {
					add_trait = burly
				}
				15 = {
					add_trait = strong
				}
				15 = {
					add_trait = weak
				}
				50 = {
					add_trait = delicate
				}
				870 = {
					## Nothing
				}
			}
		}
		if = {
			limit = {
				NOR = {
					trait = fair
					trait = comely
					trait = homely
					trait = ugly
				}
			}
			random_list = {
				15 = {
					add_trait = fair
				}
				50 = {
					add_trait = comely
				}
				40 = {
					add_trait = homely
				}
				12 = {
					add_trait = ugly
				}
				870 = {
					## Nothing
				}
			}
		}
		if = {
			limit = {
				NOR = {
					trait = giant
					trait = tall
					trait = short
					trait = tiny
				}
			}
			random_list = {
				5 = {
					add_trait = giant
				}
				50 = {
					add_trait = tall
				}
				50 = {
					add_trait = short
				}
				5 = {
					add_trait = tiny
				}
				890 = {
					## Nothing
				}
			}
		}
		random_list = {
			3 = {
				add_trait = dwarf
			}
			1997 = {
			}
		}
		random_list = {
			4 = {
				add_trait = hunchback
			}
			1996 = {
			}
		}
		random_list = {
			5 = {
				add_trait = harelip
			}
			1995 = {
			}
		}
		random_list = {
			7 = {
				add_trait = stutter
			}
			1993 = {
			}
		}
		random_list = {
			7 = {
				add_trait = lisp
			}
			1993 = {
			}
		}
		random_list = {
			5 = {
				add_trait = clubfooted
			}
			1995 = {
			}
		}
		## HIP traits: Wrymouth, Deaf, Perceptive, Absentminded
		random_list = {
			4 = {
				add_trait = wrymouth
			}
			1996 = {
			}
		}
		random_list = {
			5 = {
				add_trait = deaf
			}
			1995 = {
			}
		}
		if = {
			limit = {
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				10 = {
					add_trait = perceptive
				}
				10 = {
					add_trait = absentminded
				}
				1980 = {
				}
			}
		}
	}
}

# emf_dna.15 -- set player genes on startup. unless a phenotype is already present, we give them average genes
# subject only to a slight amount of chance (tilted toward slightly less likelihood of negative Mendelian
# trait expression in offspring). this reduces un-fun surprises among other things.
character_event = {
	id = emf_dna.15

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_flag = emf_dna_check
		emf_dna_clear_flags_for_int = yes
		emf_dna_clear_flags_for_str = yes
		emf_dna_clear_flags_for_hgt = yes
		emf_dna_clear_flags_for_attr = yes
		emf_dna_clear_flags_for_dwarf = yes
		emf_dna_clear_flags_for_clubfooted = yes
		emf_dna_clear_flags_for_hunchback = yes
		emf_dna_clear_flags_for_harelip = yes
		emf_dna_clear_flags_for_lisp = yes
		emf_dna_clear_flags_for_stutter = yes
		emf_dna_clear_flags_for_deaf = yes
		emf_dna_clear_flags_for_wrymouth = yes
		# Intelligence
		if = {
			limit = { trait = genius }
			emf_dna_set_flags_for_genius = yes
		}
		else_if = {
			limit = { trait = quick }
			emf_dna_set_flags_for_quick = yes
		}
		else_if = {
			limit = { trait = bright }
			emf_dna_set_flags_for_bright = yes
		}
		else_if = {
			limit = { trait = dim }
			emf_dna_set_flags_for_dim = yes
		}
		else_if = {
			limit = { trait = slow }
			emf_dna_set_flags_for_slow = yes
		}
		else_if = {
			limit = { trait = imbecile }
			emf_dna_set_flags_for_imbecile = yes
		}
		else = {
			set_flag = int_Aa
			set_flag = int_Bb
			set_flag = int_Cc
		}
		# Strength
		if = {
			limit = { trait = strong }
			emf_dna_set_flags_for_strong = yes
		}
		else_if = {
			limit = { trait = burly }
			emf_dna_set_flags_for_burly = yes
		}
		else_if = {
			limit = { trait = delicate }
			emf_dna_set_flags_for_delicate = yes
		}
		else_if = {
			limit = { trait = weak }
			emf_dna_set_flags_for_weak = yes
		}
		else = {
			set_flag = str_Aa
			set_flag = str_Bb
			set_flag = str_Cc
		}
		# Height
		if = {
			limit = { trait = giant }
			emf_dna_set_flags_for_giant = yes
		}
		else_if = {
			limit = { trait = tall }
			emf_dna_set_flags_for_tall = yes
		}
		else_if = {
			limit = { trait = short }
			emf_dna_set_flags_for_short = yes
		}
		else_if = {
			limit = { trait = tiny }
			emf_dna_set_flags_for_tiny = yes
		}
		else = {
			set_flag = hgt_Aa
			set_flag = hgt_Bb
			set_flag = hgt_Cc
		}
		# Attractiveness
		if = {
			limit = { trait = fair }
			emf_dna_set_flags_for_fair = yes
		}
		else_if = {
			limit = { trait = comely }
			emf_dna_set_flags_for_comely = yes
		}
		else_if = {
			limit = { trait = homely }
			emf_dna_set_flags_for_homely = yes
		}
		else_if = {
			limit = { trait = ugly }
			emf_dna_set_flags_for_ugly = yes
		}
		else = {
			set_flag = attr_Aa
			set_flag = attr_Bb
			set_flag = attr_Cc
		}
		# Perceptiveness
		if = {
			limit = { trait = perceptive }
			emf_dna_set_flags_for_perceptive = yes
		}
		else_if = {
			limit = { trait = absentminded }
			emf_dna_set_flags_for_absentminded = yes
		}
		else = {
			set_flag = perc_Aa
			set_flag = perc_Bb
			set_flag = perc_Cc
		}
		# Mendelian traits
		if = {
			limit = { trait = dwarf }
			emf_dna_set_flags_for_dwarf = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = dwarf_Aa
					set_flag = dwarf_Bb
					set_flag = dwarf_Cc
				}
				1 = {
					set_flag = dwarf_AA
					set_flag = dwarf_Bb
					set_flag = dwarf_Cc
				}
				1 = {
					set_flag = dwarf_Aa
					set_flag = dwarf_BB
					set_flag = dwarf_Cc
				}
				1 = {
					set_flag = dwarf_Aa
					set_flag = dwarf_Bb
					set_flag = dwarf_CC
				}
			}
		}
		if = {
			limit = { trait = clubfooted }
			emf_dna_set_flags_for_clubfooted = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = clubfooted_Aa
					set_flag = clubfooted_Bb
					set_flag = clubfooted_Cc
				}
				1 = {
					set_flag = clubfooted_AA
					set_flag = clubfooted_Bb
					set_flag = clubfooted_Cc
				}
				1 = {
					set_flag = clubfooted_Aa
					set_flag = clubfooted_BB
					set_flag = clubfooted_Cc
				}
				1 = {
					set_flag = clubfooted_Aa
					set_flag = clubfooted_Bb
					set_flag = clubfooted_CC
				}
			}
		}
		if = {
			limit = { trait = hunchback }
			emf_dna_set_flags_for_hunchback = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = hunchback_Aa
					set_flag = hunchback_Bb
					set_flag = hunchback_Cc
				}
				1 = {
					set_flag = hunchback_AA
					set_flag = hunchback_Bb
					set_flag = hunchback_Cc
				}
				1 = {
					set_flag = hunchback_Aa
					set_flag = hunchback_BB
					set_flag = hunchback_Cc
				}
				1 = {
					set_flag = hunchback_Aa
					set_flag = hunchback_Bb
					set_flag = hunchback_CC
				}
			}
		}
		if = {
			limit = { trait = harelip }
			emf_dna_set_flags_for_harelip = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = harelip_Aa
					set_flag = harelip_Bb
					set_flag = harelip_Cc
				}
				1 = {
					set_flag = harelip_AA
					set_flag = harelip_Bb
					set_flag = harelip_Cc
				}
				1 = {
					set_flag = harelip_Aa
					set_flag = harelip_BB
					set_flag = harelip_Cc
				}
				1 = {
					set_flag = harelip_Aa
					set_flag = harelip_Bb
					set_flag = harelip_CC
				}
			}
		}
		if = {
			limit = { trait = lisp }
			emf_dna_set_flags_for_lisp = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = lisp_Aa
					set_flag = lisp_Bb
					set_flag = lisp_Cc
				}
				1 = {
					set_flag = lisp_AA
					set_flag = lisp_Bb
					set_flag = lisp_Cc
				}
				1 = {
					set_flag = lisp_Aa
					set_flag = lisp_BB
					set_flag = lisp_Cc
				}
				1 = {
					set_flag = lisp_Aa
					set_flag = lisp_Bb
					set_flag = lisp_CC
				}
			}
		}
		if = {
			limit = { trait = stutter }
			emf_dna_set_flags_for_stutter = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = stutter_Aa
					set_flag = stutter_Bb
					set_flag = stutter_Cc
				}
				1 = {
					set_flag = stutter_AA
					set_flag = stutter_Bb
					set_flag = stutter_Cc
				}
				1 = {
					set_flag = stutter_Aa
					set_flag = stutter_BB
					set_flag = stutter_Cc
				}
				1 = {
					set_flag = stutter_Aa
					set_flag = stutter_Bb
					set_flag = stutter_CC
				}
			}
		}
		if = {
			limit = { trait = deaf }
			emf_dna_set_flags_for_deaf = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = deaf_Aa
					set_flag = deaf_Bb
					set_flag = deaf_Cc
				}
				1 = {
					set_flag = deaf_AA
					set_flag = deaf_Bb
					set_flag = deaf_Cc
				}
				1 = {
					set_flag = deaf_Aa
					set_flag = deaf_BB
					set_flag = deaf_Cc
				}
				1 = {
					set_flag = deaf_Aa
					set_flag = deaf_Bb
					set_flag = deaf_CC
				}
			}
		}
		if = {
			limit = { trait = wrymouth }
			emf_dna_set_flags_for_wrymouth = yes
		}
		else = {
			random_list = {
				3 = {
					set_flag = wrymouth_Aa
					set_flag = wrymouth_Bb
					set_flag = wrymouth_Cc
				}
				1 = {
					set_flag = wrymouth_AA
					set_flag = wrymouth_Bb
					set_flag = wrymouth_Cc
				}
				1 = {
					set_flag = wrymouth_Aa
					set_flag = wrymouth_BB
					set_flag = wrymouth_Cc
				}
				1 = {
					set_flag = wrymouth_Aa
					set_flag = wrymouth_Bb
					set_flag = wrymouth_CC
				}
			}
		}
	}
}

#############################
#### GENETIC INHERITANCE ####
#############################

## Intelligence [Start of on_birth chain]
## Polygenic Inheritance
character_event = {
	id = emf_dna.1000

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_flag = emf_dna_check }
		mother = {
			character = yes
			is_alive = yes
		}
		trigger_if = {
			limit = { is_father_real_father = yes }
			father = {
				character = yes
				is_alive = yes
			}
		}
		trigger_else = {
			real_father = {
				character = yes
				is_alive = yes
			}
		}
	}

	immediate = {
		# Mark this character as having received a DNA check so that they're not later mistaken for a randomly-generated courtier:
		set_flag = emf_dna_check
		# Save the correct father scope to event_target:emf_dna_dad. All other inheritance events are chained from here, so we never need
		# to do this again (the event target will remain valid until the chain fully completes). Why not use the true_father scope
		# added in patch 2.8, allegedly? Because, despite the vanilla changelog indicating how and that it works, using it
		# throughout this module initially caused millions of lines of script asserts to be written to the error log re: triggers
		# and effects inside the true_father scope. Thus, we'll just use a tried and true event target.
		if = {
			limit = { is_father_real_father = yes }
			father = {
				save_event_target_as = emf_dna_dad
			}
		}
		else = {
			real_father = {
				save_event_target_as = emf_dna_dad
			}
		}
		## 1. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = int_AA
						has_flag = int_Aa
						has_flag = int_aa
						has_flag = int_BB
						has_flag = int_Bb
						has_flag = int_bb
						has_flag = int_CC
						has_flag = int_Cc
						has_flag = int_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = genius
					}
					emf_dna_set_flags_for_genius = yes
				}
				else_if = {
					limit = {
						trait = quick
					}
					emf_dna_set_flags_for_quick = yes
				}
				else_if = {
					limit = {
						trait = bright
					}
					emf_dna_set_flags_for_bright = yes
				}
				else_if = {
					limit = {
						trait = dim
					}
					emf_dna_set_flags_for_dim = yes
				}
				else_if = {
					limit = {
						trait = slow
					}
					emf_dna_set_flags_for_slow = yes
				}
				else_if = {
					limit = {
						trait = imbecile
					}
					emf_dna_set_flags_for_imbecile = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = int_AA
						}
						4 = {
							set_flag = int_Aa
						}
						1 = {
							set_flag = int_aa
						}
					}
					random_list = {
						1 = {
							set_flag = int_BB
						}
						4 = {
							set_flag = int_Bb
						}
						1 = {
							set_flag = int_bb
						}
					}
					random_list = {
						1 = {
							set_flag = int_CC
						}
						4 = {
							set_flag = int_Cc
						}
						1 = {
							set_flag = int_cc
						}
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = int_AA
						has_flag = int_Aa
						has_flag = int_aa
						has_flag = int_BB
						has_flag = int_Bb
						has_flag = int_bb
						has_flag = int_CC
						has_flag = int_Cc
						has_flag = int_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = genius
					}
					emf_dna_set_flags_for_genius = yes
				}
				else_if = {
					limit = {
						trait = quick
					}
					emf_dna_set_flags_for_quick = yes
				}
				else_if = {
					limit = {
						trait = bright
					}
					emf_dna_set_flags_for_bright = yes
				}
				else_if = {
					limit = {
						trait = dim
					}
					emf_dna_set_flags_for_dim = yes
				}
				else_if = {
					limit = {
						trait = slow
					}
					emf_dna_set_flags_for_slow = yes
				}
				else_if = {
					limit = {
						trait = imbecile
					}
					emf_dna_set_flags_for_imbecile = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = int_AA
						}
						4 = {
							set_flag = int_Aa
						}
						1 = {
							set_flag = int_aa
						}
					}
					random_list = {
						1 = {
							set_flag = int_BB
						}
						4 = {
							set_flag = int_Bb
						}
						1 = {
							set_flag = int_bb
						}
					}
					random_list = {
						1 = {
							set_flag = int_CC
						}
						4 = {
							set_flag = int_Cc
						}
						1 = {
							set_flag = int_cc
						}
					}
				}
			}
		}
		## 2. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_AA
				}
				mother = {
					has_flag = int_AA
				}
			}
			set_flag = int_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_AA
				}
				mother = {
					has_flag = int_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = int_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Aa
				}
				mother = {
					has_flag = int_AA
				}
			}
			random_list = {
				50 = {
					set_flag = int_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Aa
				}
				mother = {
					has_flag = int_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = int_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = int_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_AA
				}
				mother = {
					has_flag = int_aa
				}
			}
			set_flag = int_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_aa
				}
				mother = {
					has_flag = int_AA
				}
			}
			set_flag = int_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Aa
				}
				mother = {
					has_flag = int_aa
				}
			}
			random_list = {
				50 = {
					set_flag = int_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_aa
				}
				mother = {
					has_flag = int_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = int_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_aa
				}
				mother = {
					has_flag = int_aa
				}
			}
			set_flag = int_aa
		}
		else = {
			set_flag = int_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_BB
				}
				mother = {
					has_flag = int_BB
				}
			}
			set_flag = int_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_BB
				}
				mother = {
					has_flag = int_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = int_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Bb
				}
				mother = {
					has_flag = int_BB
				}
			}
			random_list = {
				50 = {
					set_flag = int_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Bb
				}
				mother = {
					has_flag = int_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = int_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = int_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_BB
				}
				mother = {
					has_flag = int_bb
				}
			}
			set_flag = int_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_bb
				}
				mother = {
					has_flag = int_BB
				}
			}
			set_flag = int_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Bb
				}
				mother = {
					has_flag = int_bb
				}
			}
			random_list = {
				50 = {
					set_flag = int_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_bb
				}
				mother = {
					has_flag = int_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = int_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_bb
				}
				mother = {
					has_flag = int_bb
				}
			}
			set_flag = int_bb
		}
		else = {
			set_flag = int_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_CC
				}
				mother = {
					has_flag = int_CC
				}
			}
			set_flag = int_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_CC
				}
				mother = {
					has_flag = int_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = int_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Cc
				}
				mother = {
					has_flag = int_CC
				}
			}
			random_list = {
				50 = {
					set_flag = int_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Cc
				}
				mother = {
					has_flag = int_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = int_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = int_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = int_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_CC
				}
				mother = {
					has_flag = int_cc
				}
			}
			set_flag = int_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_cc
				}
				mother = {
					has_flag = int_CC
				}
			}
			set_flag = int_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_Cc
				}
				mother = {
					has_flag = int_cc
				}
			}
			random_list = {
				50 = {
					set_flag = int_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_cc
				}
				mother = {
					has_flag = int_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = int_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = int_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = int_cc
				}
				mother = {
					has_flag = int_cc
				}
			}
			set_flag = int_cc
		}
		else = {
			set_flag = int_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		#### 3. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				30 = {
					add_trait = genius
				}
				50 = {
					add_trait = quick
				}
				20 = {
					add_trait = bright
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				5 = {
					add_trait = genius
				}
				20 = {
					add_trait = quick
				}
				50 = {
					add_trait = bright
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				2 = {
					add_trait = quick
				}
				8 = {
					add_trait = bright
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				2 = {
					add_trait = slow
				}
				8 = {
					add_trait = dim
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				5 = {
					add_trait = imbecile
				}
				20 = {
					add_trait = slow
				}
				50 = {
					add_trait = dim
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
				NOR = {
					trait = genius
					trait = quick
					trait = imbecile
					trait = slow
					trait = bright
					trait = dim
				}
			}
			random_list = {
				30 = {
					add_trait = imbecile
				}
				50 = {
					add_trait = slow
				}
				20 = {
					add_trait = dim
				}
			}
		}
		character_event = { id = emf_dna.1010 }
	}
}

## Attractiveness
## Polygenic Inheritance
character_event = {
	id = emf_dna.1010

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		## 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = attr_AA
						has_flag = attr_Aa
						has_flag = attr_aa
						has_flag = attr_BB
						has_flag = attr_Bb
						has_flag = attr_bb
						has_flag = attr_CC
						has_flag = attr_Cc
						has_flag = attr_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = fair
					}
					emf_dna_set_flags_for_fair = yes
				}
				else_if = {
					limit = {
						trait = comely
					}
					emf_dna_set_flags_for_comely = yes
				}
				else_if = {
					limit = {
						trait = homely
					}
					emf_dna_set_flags_for_homely = yes
				}
				else_if = {
					limit = {
						trait = ugly
					}
					emf_dna_set_flags_for_ugly = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = attr_AA
						}
						4 = {
							set_flag = attr_Aa
						}
						1 = {
							set_flag = attr_aa
						}
					}
					random_list = {
						1 = {
							set_flag = attr_BB
						}
						4 = {
							set_flag = attr_Bb
						}
						1 = {
							set_flag = attr_bb
						}
					}
					random_list = {
						1 = {
							set_flag = attr_CC
						}
						4 = {
							set_flag = attr_Cc
						}
						1 = {
							set_flag = attr_cc
						}
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = attr_AA
						has_flag = attr_Aa
						has_flag = attr_aa
						has_flag = attr_BB
						has_flag = attr_Bb
						has_flag = attr_bb
						has_flag = attr_CC
						has_flag = attr_Cc
						has_flag = attr_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = fair
					}
					emf_dna_set_flags_for_fair = yes
				}
				else_if = {
					limit = {
						trait = comely
					}
					emf_dna_set_flags_for_comely = yes
				}
				else_if = {
					limit = {
						trait = homely
					}
					emf_dna_set_flags_for_homely = yes
				}
				else_if = {
					limit = {
						trait = ugly
					}
					emf_dna_set_flags_for_ugly = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = attr_AA
						}
						4 = {
							set_flag = attr_Aa
						}
						1 = {
							set_flag = attr_aa
						}
					}
					random_list = {
						1 = {
							set_flag = attr_BB
						}
						4 = {
							set_flag = attr_Bb
						}
						1 = {
							set_flag = attr_bb
						}
					}
					random_list = {
						1 = {
							set_flag = attr_CC
						}
						4 = {
							set_flag = attr_Cc
						}
						1 = {
							set_flag = attr_cc
						}
					}
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_AA
				}
				mother = {
					has_flag = attr_AA
				}
			}
			set_flag = attr_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_AA
				}
				mother = {
					has_flag = attr_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = attr_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Aa
				}
				mother = {
					has_flag = attr_AA
				}
			}
			random_list = {
				50 = {
					set_flag = attr_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Aa
				}
				mother = {
					has_flag = attr_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = attr_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = attr_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_AA
				}
				mother = {
					has_flag = attr_aa
				}
			}
			set_flag = attr_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_aa
				}
				mother = {
					has_flag = attr_AA
				}
			}
			set_flag = attr_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Aa
				}
				mother = {
					has_flag = attr_aa
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_aa
				}
				mother = {
					has_flag = attr_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_aa
				}
				mother = {
					has_flag = attr_aa
				}
			}
			set_flag = attr_aa
		}
		else = {
			set_flag = attr_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_BB
				}
				mother = {
					has_flag = attr_BB
				}
			}
			set_flag = attr_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_BB
				}
				mother = {
					has_flag = attr_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = attr_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Bb
				}
				mother = {
					has_flag = attr_BB
				}
			}
			random_list = {
				50 = {
					set_flag = attr_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_BB
				}
				mother = {
					has_flag = attr_bb
				}
			}
			set_flag = attr_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_bb
				}
				mother = {
					has_flag = attr_BB
				}
			}
			set_flag = attr_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Bb
				}
				mother = {
					has_flag = attr_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = attr_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = attr_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Bb
				}
				mother = {
					has_flag = attr_bb
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_bb
				}
				mother = {
					has_flag = attr_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_bb
				}
				mother = {
					has_flag = attr_bb
				}
			}
			set_flag = attr_bb
		}
		else = {
			set_flag = attr_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_CC
				}
				mother = {
					has_flag = attr_CC
				}
			}
			set_flag = attr_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_CC
				}
				mother = {
					has_flag = attr_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = attr_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Cc
				}
				mother = {
					has_flag = attr_CC
				}
			}
			random_list = {
				50 = {
					set_flag = attr_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Cc
				}
				mother = {
					has_flag = attr_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = attr_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = attr_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = attr_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_CC
				}
				mother = {
					has_flag = attr_cc
				}
			}
			set_flag = attr_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_cc
				}
				mother = {
					has_flag = attr_CC
				}
			}
			set_flag = attr_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_Cc
				}
				mother = {
					has_flag = attr_cc
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_cc
				}
				mother = {
					has_flag = attr_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = attr_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = attr_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = attr_cc
				}
				mother = {
					has_flag = attr_cc
				}
			}
			set_flag = attr_cc
		}
		else = {
			set_flag = attr_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		#### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				80 = {
					add_trait = fair
				}
				20 = {
					add_trait = comely
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				25 = {
					add_trait = fair
				}
				50 = {
					add_trait = comely
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				2 = {
					add_trait = fair
				}
				8 = {
					add_trait = comely
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				2 = {
					add_trait = ugly
				}
				8 = {
					add_trait = homely
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				25 = {
					add_trait = ugly
				}
				50 = {
					add_trait = homely
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
				NOR = {
					trait = fair
					trait = ugly
					trait = comely
					trait = homely
				}
			}
			random_list = {
				80 = {
					add_trait = ugly
				}
				20 = {
					add_trait = homely
				}
			}
		}
		character_event = { id = emf_dna.1020 }
	}
}

## Strength
## Polygenic Inheritance
character_event = {
	id = emf_dna.1020

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		## 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = str_AA
						has_flag = str_Aa
						has_flag = str_aa
						has_flag = str_BB
						has_flag = str_Bb
						has_flag = str_bb
						has_flag = str_CC
						has_flag = str_Cc
						has_flag = str_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = strong
					}
					emf_dna_set_flags_for_strong = yes
				}
				else_if = {
					limit = {
						trait = burly
					}
					emf_dna_set_flags_for_burly = yes
				}
				else_if = {
					limit = {
						trait = delicate
					}
					emf_dna_set_flags_for_delicate = yes
				}
				else_if = {
					limit = {
						trait = weak
					}
					emf_dna_set_flags_for_weak = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = str_AA
						}
						4 = {
							set_flag = str_Aa
						}
						1 = {
							set_flag = str_aa
						}
					}
					random_list = {
						1 = {
							set_flag = str_BB
						}
						4 = {
							set_flag = str_Bb
						}
						1 = {
							set_flag = str_bb
						}
					}
					random_list = {
						1 = {
							set_flag = str_CC
						}
						4 = {
							set_flag = str_Cc
						}
						1 = {
							set_flag = str_cc
						}
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = str_AA
						has_flag = str_Aa
						has_flag = str_aa
						has_flag = str_BB
						has_flag = str_Bb
						has_flag = str_bb
						has_flag = str_CC
						has_flag = str_Cc
						has_flag = str_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = strong
					}
					emf_dna_set_flags_for_strong = yes
				}
				else_if = {
					limit = {
						trait = burly
					}
					emf_dna_set_flags_for_burly = yes
				}
				else_if = {
					limit = {
						trait = delicate
					}
					emf_dna_set_flags_for_delicate = yes
				}
				else_if = {
					limit = {
						trait = weak
					}
					emf_dna_set_flags_for_weak = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = str_AA
						}
						4 = {
							set_flag = str_Aa
						}
						1 = {
							set_flag = str_aa
						}
					}
					random_list = {
						1 = {
							set_flag = str_BB
						}
						4 = {
							set_flag = str_Bb
						}
						1 = {
							set_flag = str_bb
						}
					}
					random_list = {
						1 = {
							set_flag = str_CC
						}
						4 = {
							set_flag = str_Cc
						}
						1 = {
							set_flag = str_cc
						}
					}
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_AA
				}
				mother = {
					has_flag = str_AA
				}
			}
			set_flag = str_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_AA
				}
				mother = {
					has_flag = str_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = str_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Aa
				}
				mother = {
					has_flag = str_AA
				}
			}
			random_list = {
				50 = {
					set_flag = str_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Aa
				}
				mother = {
					has_flag = str_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = str_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = str_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_AA
				}
				mother = {
					has_flag = str_aa
				}
			}
			set_flag = str_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_aa
				}
				mother = {
					has_flag = str_AA
				}
			}
			set_flag = str_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Aa
				}
				mother = {
					has_flag = str_aa
				}
			}
			random_list = {
				50 = {
					set_flag = str_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_aa
				}
				mother = {
					has_flag = str_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = str_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_aa
				}
				mother = {
					has_flag = str_aa
				}
			}
			set_flag = str_aa
		}
		else = {
			set_flag = str_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_BB
				}
				mother = {
					has_flag = str_BB
				}
			}
			set_flag = str_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_BB
				}
				mother = {
					has_flag = str_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = str_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Bb
				}
				mother = {
					has_flag = str_BB
				}
			}
			random_list = {
				50 = {
					set_flag = str_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_BB
				}
				mother = {
					has_flag = str_bb
				}
			}
			set_flag = str_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_bb
				}
				mother = {
					has_flag = str_BB
				}
			}
			set_flag = str_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Bb
				}
				mother = {
					has_flag = str_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = str_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = str_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Bb
				}
				mother = {
					has_flag = str_bb
				}
			}
			random_list = {
				50 = {
					set_flag = str_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_bb
				}
				mother = {
					has_flag = str_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = str_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_bb
				}
				mother = {
					has_flag = str_bb
				}
			}
			set_flag = str_bb
		}
		else = {
			set_flag = str_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_CC
				}
				mother = {
					has_flag = str_CC
				}
			}
			set_flag = str_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_CC
				}
				mother = {
					has_flag = str_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = str_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Cc
				}
				mother = {
					has_flag = str_CC
				}
			}
			random_list = {
				50 = {
					set_flag = str_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Cc
				}
				mother = {
					has_flag = str_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = str_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = str_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = str_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_CC
				}
				mother = {
					has_flag = str_cc
				}
			}
			set_flag = str_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_cc
				}
				mother = {
					has_flag = str_CC
				}
			}
			set_flag = str_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_Cc
				}
				mother = {
					has_flag = str_cc
				}
			}
			random_list = {
				50 = {
					set_flag = str_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_cc
				}
				mother = {
					has_flag = str_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = str_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = str_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = str_cc
				}
				mother = {
					has_flag = str_cc
				}
			}
			set_flag = str_cc
		}
		else = {
			set_flag = str_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		#### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				80 = {
					add_trait = strong
				}
				20 = {
					add_trait = burly
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				25 = {
					add_trait = strong
				}
				50 = {
					add_trait = burly
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				2 = {
					add_trait = strong
				}
				8 = {
					add_trait = burly
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				4 = {
					add_trait = weak
				}
				16 = {
					add_trait = delicate
				}
				195 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				25 = {
					add_trait = weak
				}
				50 = {
					add_trait = delicate
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
				NOR = {
					trait = strong
					trait = weak
					trait = burly
					trait = delicate
				}
			}
			random_list = {
				80 = {
					add_trait = weak
				}
				20 = {
					add_trait = delicate
				}
			}
		}
		character_event = { id = emf_dna.1030 }
	}
}

## Height
## Polygenic Inheritance
character_event = {
	id = emf_dna.1030

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		## 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = hgt_AA
						has_flag = hgt_Aa
						has_flag = hgt_aa
						has_flag = hgt_BB
						has_flag = hgt_Bb
						has_flag = hgt_bb
						has_flag = hgt_CC
						has_flag = hgt_Cc
						has_flag = hgt_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = giant
					}
					emf_dna_set_flags_for_giant = yes
				}
				else_if = {
					limit = {
						trait = tall
					}
					emf_dna_set_flags_for_tall = yes
				}
				else_if = {
					limit = {
						trait = short
					}
					emf_dna_set_flags_for_short = yes
				}
				else_if = {
					limit = {
						trait = tiny
					}
					emf_dna_set_flags_for_tiny = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = hgt_AA
						}
						4 = {
							set_flag = hgt_Aa
						}
						1 = {
							set_flag = hgt_aa
						}
					}
					random_list = {
						1 = {
							set_flag = hgt_BB
						}
						4 = {
							set_flag = hgt_Bb
						}
						1 = {
							set_flag = hgt_bb
						}
					}
					random_list = {
						1 = {
							set_flag = hgt_CC
						}
						4 = {
							set_flag = hgt_Cc
						}
						1 = {
							set_flag = hgt_cc
						}
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = hgt_AA
						has_flag = hgt_Aa
						has_flag = hgt_aa
						has_flag = hgt_BB
						has_flag = hgt_Bb
						has_flag = hgt_bb
						has_flag = hgt_CC
						has_flag = hgt_Cc
						has_flag = hgt_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = giant
					}
					emf_dna_set_flags_for_giant = yes
				}
				else_if = {
					limit = {
						trait = tall
					}
					emf_dna_set_flags_for_tall = yes
				}
				else_if = {
					limit = {
						trait = short
					}
					emf_dna_set_flags_for_short = yes
				}
				else_if = {
					limit = {
						trait = tiny
					}
					emf_dna_set_flags_for_tiny = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = hgt_AA
						}
						4 = {
							set_flag = hgt_Aa
						}
						1 = {
							set_flag = hgt_aa
						}
					}
					random_list = {
						1 = {
							set_flag = hgt_BB
						}
						4 = {
							set_flag = hgt_Bb
						}
						1 = {
							set_flag = hgt_bb
						}
					}
					random_list = {
						1 = {
							set_flag = hgt_CC
						}
						4 = {
							set_flag = hgt_Cc
						}
						1 = {
							set_flag = hgt_cc
						}
					}
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_AA
				}
				mother = {
					has_flag = hgt_AA
				}
			}
			set_flag = hgt_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_AA }
						mother = { has_flag = hgt_Aa }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Aa }
						mother = { has_flag = hgt_AA }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_Aa
				}
				mother = {
					has_flag = hgt_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = hgt_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = hgt_aa
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_AA }
						mother = { has_flag = hgt_aa }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_aa }
						mother = { has_flag = hgt_AA }
					}
				}
			}
			set_flag = hgt_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Aa }
						mother = { has_flag = hgt_aa }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_aa }
						mother = { has_flag = hgt_Aa }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = hgt_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_aa
				}
				mother = {
					has_flag = hgt_aa
				}
			}
			set_flag = hgt_aa
		}
		else = {
			set_flag = hgt_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_BB
				}
				mother = {
					has_flag = hgt_BB
				}
			}
			set_flag = hgt_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_BB }
						mother = { has_flag = hgt_Bb }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Bb }
						mother = { has_flag = hgt_BB }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_Bb
				}
				mother = {
					has_flag = hgt_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = hgt_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = hgt_bb
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_BB }
						mother = { has_flag = hgt_bb }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_bb }
						mother = { has_flag = hgt_BB }
					}
				}
			}
			set_flag = hgt_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Bb }
						mother = { has_flag = hgt_bb }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_bb }
						mother = { has_flag = hgt_Bb }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = hgt_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_bb
				}
				mother = {
					has_flag = hgt_bb
				}
			}
			set_flag = hgt_bb
		}
		else = {
			set_flag = hgt_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_CC
				}
				mother = {
					has_flag = hgt_CC
				}
			}
			set_flag = hgt_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_CC }
						mother = { has_flag = hgt_Cc }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Cc }
						mother = { has_flag = hgt_CC }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_CC }
						mother = { has_flag = hgt_cc }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_cc }
						mother = { has_flag = hgt_CC }
					}
				}
			}
			set_flag = hgt_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_Cc
				}
				mother = {
					has_flag = hgt_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = hgt_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = hgt_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = hgt_cc
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_Cc }
						mother = { has_flag = hgt_cc }
					}
					AND = {
						event_target:emf_dna_dad = { has_flag = hgt_cc }
						mother = { has_flag = hgt_Cc }
					}
				}
			}
			random_list = {
				50 = {
					set_flag = hgt_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = hgt_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hgt_cc
				}
				mother = {
					has_flag = hgt_cc
				}
			}
			set_flag = hgt_cc
		}
		else = {
			set_flag = hgt_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		#### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				60 = {
					add_trait = giant
				}
				40 = {
					add_trait = tall
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				12 = {
					add_trait = giant
				}
				50 = {
					add_trait = tall
				}
				40 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				8 = {
					add_trait = tall
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				8 = {
					add_trait = short
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				10 = {
					add_trait = tiny
				}
				50 = {
					add_trait = short
				}
				40 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
				NOR = {
					trait = tall
					trait = short
					trait = giant
					trait = tiny
				}
			}
			random_list = {
				60 = {
					add_trait = tiny
				}
				40 = {
					add_trait = short
				}
			}
		}
		character_event = { id = emf_dna.1040 }
	}
}

## Dwarf
## Mendelian Inheritance
character_event = {
	id = emf_dna.1040

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = dwarf
					NOR = {
						has_flag = dwarf_aa
						has_flag = dwarf_bb
						has_flag = dwarf_cc
					}
				}
				emf_dna_clear_flags_for_dwarf = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = dwarf
					NOR = {
						has_flag = dwarf_aa
						has_flag = dwarf_bb
						has_flag = dwarf_cc
					}
				}
				emf_dna_clear_flags_for_dwarf = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = dwarf_AA
						has_flag = dwarf_Aa
						has_flag = dwarf_aa
						has_flag = dwarf_BB
						has_flag = dwarf_Bb
						has_flag = dwarf_bb
						has_flag = dwarf_CC
						has_flag = dwarf_Cc
						has_flag = dwarf_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = dwarf
					}
					emf_dna_set_flags_for_dwarf = yes
				}
				else = {
					emf_dna_set_flags_for_dwarf_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = dwarf_AA
						has_flag = dwarf_Aa
						has_flag = dwarf_aa
						has_flag = dwarf_BB
						has_flag = dwarf_Bb
						has_flag = dwarf_bb
						has_flag = dwarf_CC
						has_flag = dwarf_Cc
						has_flag = dwarf_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = dwarf
					}
					emf_dna_set_flags_for_dwarf = yes
				}
				else = {
					emf_dna_set_flags_for_dwarf_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_AA
				}
				mother = {
					has_flag = dwarf_AA
				}
			}
			set_flag = dwarf_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_AA
				}
				mother = {
					has_flag = dwarf_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_AA
				}
				50 = {
					set_flag = dwarf_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Aa
				}
				mother = {
					has_flag = dwarf_AA
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_AA
				}
				50 = {
					set_flag = dwarf_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Aa
				}
				mother = {
					has_flag = dwarf_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = dwarf_AA
				}
				50 = {
					set_flag = dwarf_Aa
				}
				25 = {
					set_flag = dwarf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_AA
				}
				mother = {
					has_flag = dwarf_aa
				}
			}
			set_flag = dwarf_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_aa
				}
				mother = {
					has_flag = dwarf_AA
				}
			}
			set_flag = dwarf_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Aa
				}
				mother = {
					has_flag = dwarf_aa
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Aa
				}
				50 = {
					set_flag = dwarf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_aa
				}
				mother = {
					has_flag = dwarf_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Aa
				}
				50 = {
					set_flag = dwarf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_aa
				}
				mother = {
					has_flag = dwarf_aa
				}
			}
			set_flag = dwarf_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = dwarf_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_BB
				}
				mother = {
					has_flag = dwarf_BB
				}
			}
			set_flag = dwarf_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_BB
				}
				mother = {
					has_flag = dwarf_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_BB
				}
				50 = {
					set_flag = dwarf_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Bb
				}
				mother = {
					has_flag = dwarf_BB
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_BB
				}
				50 = {
					set_flag = dwarf_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Bb
				}
				mother = {
					has_flag = dwarf_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = dwarf_BB
				}
				50 = {
					set_flag = dwarf_Bb
				}
				25 = {
					set_flag = dwarf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_BB
				}
				mother = {
					has_flag = dwarf_bb
				}
			}
			set_flag = dwarf_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_bb
				}
				mother = {
					has_flag = dwarf_BB
				}
			}
			set_flag = dwarf_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Bb
				}
				mother = {
					has_flag = dwarf_bb
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Bb
				}
				50 = {
					set_flag = dwarf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_bb
				}
				mother = {
					has_flag = dwarf_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Bb
				}
				50 = {
					set_flag = dwarf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_bb
				}
				mother = {
					has_flag = dwarf_bb
				}
			}
			set_flag = dwarf_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = dwarf_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_CC
				}
				mother = {
					has_flag = dwarf_CC
				}
			}
			set_flag = dwarf_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_CC
				}
				mother = {
					has_flag = dwarf_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_CC
				}
				50 = {
					set_flag = dwarf_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Cc
				}
				mother = {
					has_flag = dwarf_CC
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_CC
				}
				50 = {
					set_flag = dwarf_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Cc
				}
				mother = {
					has_flag = dwarf_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = dwarf_CC
				}
				50 = {
					set_flag = dwarf_Cc
				}
				25 = {
					set_flag = dwarf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_CC
				}
				mother = {
					has_flag = dwarf_cc
				}
			}
			set_flag = dwarf_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_cc
				}
				mother = {
					has_flag = dwarf_CC
				}
			}
			set_flag = dwarf_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_Cc
				}
				mother = {
					has_flag = dwarf_cc
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Cc
				}
				50 = {
					set_flag = dwarf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_cc
				}
				mother = {
					has_flag = dwarf_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = dwarf_Cc
				}
				50 = {
					set_flag = dwarf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = dwarf_cc
				}
				mother = {
					has_flag = dwarf_cc
				}
			}
			set_flag = dwarf_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = dwarf_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = dwarf }
			}
			add_trait = dwarf
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = dwarf }
			}
			random_list = {
				10 = {
					add_trait = dwarf
				}
				90 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = dwarf }
			}
			random_list = {
				1 = {
					add_trait = dwarf
				}
				99 = {
				}
			}
		}
		character_event = { id = emf_dna.1050 }
	}
}

## Clubfooted
## Mendelian Inheritance
character_event = {
	id = emf_dna.1050

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = clubfooted
					NOR = {
						has_flag = clubfooted_aa
						has_flag = clubfooted_bb
						has_flag = clubfooted_cc
					}
				}
				emf_dna_clear_flags_for_clubfooted = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = clubfooted
					NOR = {
						has_flag = clubfooted_aa
						has_flag = clubfooted_bb
						has_flag = clubfooted_cc
					}
				}
				emf_dna_clear_flags_for_clubfooted = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = clubfooted_AA
						has_flag = clubfooted_Aa
						has_flag = clubfooted_aa
						has_flag = clubfooted_BB
						has_flag = clubfooted_Bb
						has_flag = clubfooted_bb
						has_flag = clubfooted_CC
						has_flag = clubfooted_Cc
						has_flag = clubfooted_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = clubfooted
					}
					emf_dna_set_flags_for_clubfooted = yes
				}
				else = {
					emf_dna_set_flags_for_clubfooted_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = clubfooted_AA
						has_flag = clubfooted_Aa
						has_flag = clubfooted_aa
						has_flag = clubfooted_BB
						has_flag = clubfooted_Bb
						has_flag = clubfooted_bb
						has_flag = clubfooted_CC
						has_flag = clubfooted_Cc
						has_flag = clubfooted_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = clubfooted
					}
					emf_dna_set_flags_for_clubfooted = yes
				}
				else = {
					emf_dna_set_flags_for_clubfooted_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_AA
				}
				mother = {
					has_flag = clubfooted_AA
				}
			}
			set_flag = clubfooted_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_AA
				}
				mother = {
					has_flag = clubfooted_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_AA
				}
				50 = {
					set_flag = clubfooted_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Aa
				}
				mother = {
					has_flag = clubfooted_AA
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_AA
				}
				50 = {
					set_flag = clubfooted_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Aa
				}
				mother = {
					has_flag = clubfooted_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = clubfooted_AA
				}
				50 = {
					set_flag = clubfooted_Aa
				}
				25 = {
					set_flag = clubfooted_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_AA
				}
				mother = {
					has_flag = clubfooted_aa
				}
			}
			set_flag = clubfooted_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_aa
				}
				mother = {
					has_flag = clubfooted_AA
				}
			}
			set_flag = clubfooted_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Aa
				}
				mother = {
					has_flag = clubfooted_aa
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Aa
				}
				50 = {
					set_flag = clubfooted_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_aa
				}
				mother = {
					has_flag = clubfooted_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Aa
				}
				50 = {
					set_flag = clubfooted_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_aa
				}
				mother = {
					has_flag = clubfooted_aa
				}
			}
			set_flag = clubfooted_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = clubfooted_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_BB
				}
				mother = {
					has_flag = clubfooted_BB
				}
			}
			set_flag = clubfooted_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_BB
				}
				mother = {
					has_flag = clubfooted_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_BB
				}
				50 = {
					set_flag = clubfooted_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Bb
				}
				mother = {
					has_flag = clubfooted_BB
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_BB
				}
				50 = {
					set_flag = clubfooted_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Bb
				}
				mother = {
					has_flag = clubfooted_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = clubfooted_BB
				}
				50 = {
					set_flag = clubfooted_Bb
				}
				25 = {
					set_flag = clubfooted_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_BB
				}
				mother = {
					has_flag = clubfooted_bb
				}
			}
			set_flag = clubfooted_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_bb
				}
				mother = {
					has_flag = clubfooted_BB
				}
			}
			set_flag = clubfooted_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Bb
				}
				mother = {
					has_flag = clubfooted_bb
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Bb
				}
				50 = {
					set_flag = clubfooted_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_bb
				}
				mother = {
					has_flag = clubfooted_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Bb
				}
				50 = {
					set_flag = clubfooted_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_bb
				}
				mother = {
					has_flag = clubfooted_bb
				}
			}
			set_flag = clubfooted_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = clubfooted_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_CC
				}
				mother = {
					has_flag = clubfooted_CC
				}
			}
			set_flag = clubfooted_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_CC
				}
				mother = {
					has_flag = clubfooted_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_CC
				}
				50 = {
					set_flag = clubfooted_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Cc
				}
				mother = {
					has_flag = clubfooted_CC
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_CC
				}
				50 = {
					set_flag = clubfooted_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Cc
				}
				mother = {
					has_flag = clubfooted_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = clubfooted_CC
				}
				50 = {
					set_flag = clubfooted_Cc
				}
				25 = {
					set_flag = clubfooted_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_CC
				}
				mother = {
					has_flag = clubfooted_cc
				}
			}
			set_flag = clubfooted_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_cc
				}
				mother = {
					has_flag = clubfooted_CC
				}
			}
			set_flag = clubfooted_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_Cc
				}
				mother = {
					has_flag = clubfooted_cc
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Cc
				}
				50 = {
					set_flag = clubfooted_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_cc
				}
				mother = {
					has_flag = clubfooted_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = clubfooted_Cc
				}
				50 = {
					set_flag = clubfooted_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = clubfooted_cc
				}
				mother = {
					has_flag = clubfooted_cc
				}
			}
			set_flag = clubfooted_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = clubfooted_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = clubfooted }
			}
			random_list = {
				75 = {
					add_trait = clubfooted
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = clubfooted }
			}
			random_list = {
				15 = {
					add_trait = clubfooted
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = clubfooted }
			}
			random_list = {
				1 = {
					add_trait = clubfooted
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1100 }
	}
}

## Hunchback
## Mendelian Inheritance
character_event = {
	id = emf_dna.1100

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = hunchback
					NOR = {
						has_flag = hunchback_aa
						has_flag = hunchback_bb
						has_flag = hunchback_cc
					}
				}
				emf_dna_clear_flags_for_hunchback = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = hunchback
					NOR = {
						has_flag = hunchback_aa
						has_flag = hunchback_bb
						has_flag = hunchback_cc
					}
				}
				emf_dna_clear_flags_for_hunchback = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = hunchback_AA
						has_flag = hunchback_Aa
						has_flag = hunchback_aa
						has_flag = hunchback_BB
						has_flag = hunchback_Bb
						has_flag = hunchback_bb
						has_flag = hunchback_CC
						has_flag = hunchback_Cc
						has_flag = hunchback_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = hunchback
					}
					emf_dna_set_flags_for_hunchback = yes
				}
				else = {
					emf_dna_set_flags_for_hunchback_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = hunchback_AA
						has_flag = hunchback_Aa
						has_flag = hunchback_aa
						has_flag = hunchback_BB
						has_flag = hunchback_Bb
						has_flag = hunchback_bb
						has_flag = hunchback_CC
						has_flag = hunchback_Cc
						has_flag = hunchback_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = hunchback
					}
					emf_dna_set_flags_for_hunchback = yes
				}
				else = {
					emf_dna_set_flags_for_hunchback_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_AA
				}
				mother = {
					has_flag = hunchback_AA
				}
			}
			set_flag = hunchback_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_AA
				}
				mother = {
					has_flag = hunchback_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_AA
				}
				50 = {
					set_flag = hunchback_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Aa
				}
				mother = {
					has_flag = hunchback_AA
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_AA
				}
				50 = {
					set_flag = hunchback_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Aa
				}
				mother = {
					has_flag = hunchback_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = hunchback_AA
				}
				50 = {
					set_flag = hunchback_Aa
				}
				25 = {
					set_flag = hunchback_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_AA
				}
				mother = {
					has_flag = hunchback_aa
				}
			}
			set_flag = hunchback_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_aa
				}
				mother = {
					has_flag = hunchback_AA
				}
			}
			set_flag = hunchback_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Aa
				}
				mother = {
					has_flag = hunchback_aa
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Aa
				}
				50 = {
					set_flag = hunchback_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_aa
				}
				mother = {
					has_flag = hunchback_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Aa
				}
				50 = {
					set_flag = hunchback_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_aa
				}
				mother = {
					has_flag = hunchback_aa
				}
			}
			set_flag = hunchback_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = hunchback_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_BB
				}
				mother = {
					has_flag = hunchback_BB
				}
			}
			set_flag = hunchback_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_BB
				}
				mother = {
					has_flag = hunchback_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_BB
				}
				50 = {
					set_flag = hunchback_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Bb
				}
				mother = {
					has_flag = hunchback_BB
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_BB
				}
				50 = {
					set_flag = hunchback_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Bb
				}
				mother = {
					has_flag = hunchback_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = hunchback_BB
				}
				50 = {
					set_flag = hunchback_Bb
				}
				25 = {
					set_flag = hunchback_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_BB
				}
				mother = {
					has_flag = hunchback_bb
				}
			}
			set_flag = hunchback_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_bb
				}
				mother = {
					has_flag = hunchback_BB
				}
			}
			set_flag = hunchback_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Bb
				}
				mother = {
					has_flag = hunchback_bb
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Bb
				}
				50 = {
					set_flag = hunchback_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_bb
				}
				mother = {
					has_flag = hunchback_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Bb
				}
				50 = {
					set_flag = hunchback_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_bb
				}
				mother = {
					has_flag = hunchback_bb
				}
			}
			set_flag = hunchback_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = hunchback_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_CC
				}
				mother = {
					has_flag = hunchback_CC
				}
			}
			set_flag = hunchback_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_CC
				}
				mother = {
					has_flag = hunchback_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_CC
				}
				50 = {
					set_flag = hunchback_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Cc
				}
				mother = {
					has_flag = hunchback_CC
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_CC
				}
				50 = {
					set_flag = hunchback_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Cc
				}
				mother = {
					has_flag = hunchback_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = hunchback_CC
				}
				50 = {
					set_flag = hunchback_Cc
				}
				25 = {
					set_flag = hunchback_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_CC
				}
				mother = {
					has_flag = hunchback_cc
				}
			}
			set_flag = hunchback_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_cc
				}
				mother = {
					has_flag = hunchback_CC
				}
			}
			set_flag = hunchback_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_Cc
				}
				mother = {
					has_flag = hunchback_cc
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Cc
				}
				50 = {
					set_flag = hunchback_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_cc
				}
				mother = {
					has_flag = hunchback_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = hunchback_Cc
				}
				50 = {
					set_flag = hunchback_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = hunchback_cc
				}
				mother = {
					has_flag = hunchback_cc
				}
			}
			set_flag = hunchback_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = hunchback_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = hunchback }
			}
			random_list = {
				75 = {
					add_trait = hunchback
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = hunchback }
			}
			random_list = {
				15 = {
					add_trait = hunchback
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = hunchback }
			}
			random_list = {
				1 = {
					add_trait = hunchback
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1110 }
	}
}

## Harelip
## Mendelian Inheritance
character_event = {
	id = emf_dna.1110

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = harelip
					NOR = {
						has_flag = harelip_aa
						has_flag = harelip_bb
						has_flag = harelip_cc
					}
				}
				emf_dna_clear_flags_for_harelip = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = harelip
					NOR = {
						has_flag = harelip_aa
						has_flag = harelip_bb
						has_flag = harelip_cc
					}
				}
				emf_dna_clear_flags_for_harelip = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = harelip_AA
						has_flag = harelip_Aa
						has_flag = harelip_aa
						has_flag = harelip_BB
						has_flag = harelip_Bb
						has_flag = harelip_bb
						has_flag = harelip_CC
						has_flag = harelip_Cc
						has_flag = harelip_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = harelip
					}
					emf_dna_set_flags_for_harelip = yes
				}
				else = {
					emf_dna_set_flags_for_harelip_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = harelip_AA
						has_flag = harelip_Aa
						has_flag = harelip_aa
						has_flag = harelip_BB
						has_flag = harelip_Bb
						has_flag = harelip_bb
						has_flag = harelip_CC
						has_flag = harelip_Cc
						has_flag = harelip_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = harelip
					}
					emf_dna_set_flags_for_harelip = yes
				}
				else = {
					emf_dna_set_flags_for_harelip_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_AA
				}
				mother = {
					has_flag = harelip_AA
				}
			}
			set_flag = harelip_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_AA
				}
				mother = {
					has_flag = harelip_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_AA
				}
				50 = {
					set_flag = harelip_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Aa
				}
				mother = {
					has_flag = harelip_AA
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_AA
				}
				50 = {
					set_flag = harelip_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Aa
				}
				mother = {
					has_flag = harelip_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = harelip_AA
				}
				50 = {
					set_flag = harelip_Aa
				}
				25 = {
					set_flag = harelip_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_AA
				}
				mother = {
					has_flag = harelip_aa
				}
			}
			set_flag = harelip_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_aa
				}
				mother = {
					has_flag = harelip_AA
				}
			}
			set_flag = harelip_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Aa
				}
				mother = {
					has_flag = harelip_aa
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Aa
				}
				50 = {
					set_flag = harelip_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_aa
				}
				mother = {
					has_flag = harelip_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Aa
				}
				50 = {
					set_flag = harelip_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_aa
				}
				mother = {
					has_flag = harelip_aa
				}
			}
			set_flag = harelip_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = harelip_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_BB
				}
				mother = {
					has_flag = harelip_BB
				}
			}
			set_flag = harelip_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_BB
				}
				mother = {
					has_flag = harelip_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_BB
				}
				50 = {
					set_flag = harelip_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Bb
				}
				mother = {
					has_flag = harelip_BB
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_BB
				}
				50 = {
					set_flag = harelip_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Bb
				}
				mother = {
					has_flag = harelip_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = harelip_BB
				}
				50 = {
					set_flag = harelip_Bb
				}
				25 = {
					set_flag = harelip_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_BB
				}
				mother = {
					has_flag = harelip_bb
				}
			}
			set_flag = harelip_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_bb
				}
				mother = {
					has_flag = harelip_BB
				}
			}
			set_flag = harelip_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Bb
				}
				mother = {
					has_flag = harelip_bb
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Bb
				}
				50 = {
					set_flag = harelip_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_bb
				}
				mother = {
					has_flag = harelip_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Bb
				}
				50 = {
					set_flag = harelip_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_bb
				}
				mother = {
					has_flag = harelip_bb
				}
			}
			set_flag = harelip_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = harelip_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_CC
				}
				mother = {
					has_flag = harelip_CC
				}
			}
			set_flag = harelip_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_CC
				}
				mother = {
					has_flag = harelip_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_CC
				}
				50 = {
					set_flag = harelip_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Cc
				}
				mother = {
					has_flag = harelip_CC
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_CC
				}
				50 = {
					set_flag = harelip_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Cc
				}
				mother = {
					has_flag = harelip_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = harelip_CC
				}
				50 = {
					set_flag = harelip_Cc
				}
				25 = {
					set_flag = harelip_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_CC
				}
				mother = {
					has_flag = harelip_cc
				}
			}
			set_flag = harelip_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_cc
				}
				mother = {
					has_flag = harelip_CC
				}
			}
			set_flag = harelip_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_Cc
				}
				mother = {
					has_flag = harelip_cc
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Cc
				}
				50 = {
					set_flag = harelip_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_cc
				}
				mother = {
					has_flag = harelip_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = harelip_Cc
				}
				50 = {
					set_flag = harelip_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = harelip_cc
				}
				mother = {
					has_flag = harelip_cc
				}
			}
			set_flag = harelip_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = harelip_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = harelip }
			}
			random_list = {
				75 = {
					add_trait = harelip
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = harelip }
			}
			random_list = {
				15 = {
					add_trait = harelip
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = harelip }
			}
			random_list = {
				1 = {
					add_trait = harelip
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1120 }
	}
}

## Lisp
## Mendelian Inheritance
character_event = {
	id = emf_dna.1120

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = lisp
					NOR = {
						has_flag = lisp_aa
						has_flag = lisp_bb
						has_flag = lisp_cc
					}
				}
				emf_dna_clear_flags_for_lisp = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = lisp
					NOR = {
						has_flag = lisp_aa
						has_flag = lisp_bb
						has_flag = lisp_cc
					}
				}
				emf_dna_clear_flags_for_lisp = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = lisp_AA
						has_flag = lisp_Aa
						has_flag = lisp_aa
						has_flag = lisp_BB
						has_flag = lisp_Bb
						has_flag = lisp_bb
						has_flag = lisp_CC
						has_flag = lisp_Cc
						has_flag = lisp_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = lisp
					}
					emf_dna_set_flags_for_lisp = yes
				}
				else = {
					emf_dna_set_flags_for_lisp_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = lisp_AA
						has_flag = lisp_Aa
						has_flag = lisp_aa
						has_flag = lisp_BB
						has_flag = lisp_Bb
						has_flag = lisp_bb
						has_flag = lisp_CC
						has_flag = lisp_Cc
						has_flag = lisp_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = lisp
					}
					emf_dna_set_flags_for_lisp = yes
				}
				else = {
					emf_dna_set_flags_for_lisp_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_AA
				}
				mother = {
					has_flag = lisp_AA
				}
			}
			set_flag = lisp_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_AA
				}
				mother = {
					has_flag = lisp_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_AA
				}
				50 = {
					set_flag = lisp_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Aa
				}
				mother = {
					has_flag = lisp_AA
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_AA
				}
				50 = {
					set_flag = lisp_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Aa
				}
				mother = {
					has_flag = lisp_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = lisp_AA
				}
				50 = {
					set_flag = lisp_Aa
				}
				25 = {
					set_flag = lisp_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_AA
				}
				mother = {
					has_flag = lisp_aa
				}
			}
			set_flag = lisp_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_aa
				}
				mother = {
					has_flag = lisp_AA
				}
			}
			set_flag = lisp_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Aa
				}
				mother = {
					has_flag = lisp_aa
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Aa
				}
				50 = {
					set_flag = lisp_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_aa
				}
				mother = {
					has_flag = lisp_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Aa
				}
				50 = {
					set_flag = lisp_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_aa
				}
				mother = {
					has_flag = lisp_aa
				}
			}
			set_flag = lisp_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = lisp_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_BB
				}
				mother = {
					has_flag = lisp_BB
				}
			}
			set_flag = lisp_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_BB
				}
				mother = {
					has_flag = lisp_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_BB
				}
				50 = {
					set_flag = lisp_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Bb
				}
				mother = {
					has_flag = lisp_BB
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_BB
				}
				50 = {
					set_flag = lisp_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Bb
				}
				mother = {
					has_flag = lisp_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = lisp_BB
				}
				50 = {
					set_flag = lisp_Bb
				}
				25 = {
					set_flag = lisp_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_BB
				}
				mother = {
					has_flag = lisp_bb
				}
			}
			set_flag = lisp_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_bb
				}
				mother = {
					has_flag = lisp_BB
				}
			}
			set_flag = lisp_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Bb
				}
				mother = {
					has_flag = lisp_bb
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Bb
				}
				50 = {
					set_flag = lisp_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_bb
				}
				mother = {
					has_flag = lisp_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Bb
				}
				50 = {
					set_flag = lisp_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_bb
				}
				mother = {
					has_flag = lisp_bb
				}
			}
			set_flag = lisp_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = lisp_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_CC
				}
				mother = {
					has_flag = lisp_CC
				}
			}
			set_flag = lisp_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_CC
				}
				mother = {
					has_flag = lisp_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_CC
				}
				50 = {
					set_flag = lisp_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Cc
				}
				mother = {
					has_flag = lisp_CC
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_CC
				}
				50 = {
					set_flag = lisp_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Cc
				}
				mother = {
					has_flag = lisp_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = lisp_CC
				}
				50 = {
					set_flag = lisp_Cc
				}
				25 = {
					set_flag = lisp_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_CC
				}
				mother = {
					has_flag = lisp_cc
				}
			}
			set_flag = lisp_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_cc
				}
				mother = {
					has_flag = lisp_CC
				}
			}
			set_flag = lisp_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_Cc
				}
				mother = {
					has_flag = lisp_cc
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Cc
				}
				50 = {
					set_flag = lisp_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_cc
				}
				mother = {
					has_flag = lisp_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = lisp_Cc
				}
				50 = {
					set_flag = lisp_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = lisp_cc
				}
				mother = {
					has_flag = lisp_cc
				}
			}
			set_flag = lisp_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = lisp_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = lisp }
			}
			random_list = {
				75 = {
					add_trait = lisp
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = lisp }
			}
			random_list = {
				15 = {
					add_trait = lisp
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = lisp }
			}
			random_list = {
				1 = {
					add_trait = lisp
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1130 }
	}
}

## Stutter
## Mendelian Inheritance
character_event = {
	id = emf_dna.1130

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = stutter
					NOR = {
						has_flag = stutter_aa
						has_flag = stutter_bb
						has_flag = stutter_cc
					}
				}
				emf_dna_clear_flags_for_stutter = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = stutter
					NOR = {
						has_flag = stutter_aa
						has_flag = stutter_bb
						has_flag = stutter_cc
					}
				}
				emf_dna_clear_flags_for_stutter = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = stutter_AA
						has_flag = stutter_Aa
						has_flag = stutter_aa
						has_flag = stutter_BB
						has_flag = stutter_Bb
						has_flag = stutter_bb
						has_flag = stutter_CC
						has_flag = stutter_Cc
						has_flag = stutter_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = stutter
					}
					emf_dna_set_flags_for_stutter = yes
				}
				else = {
					emf_dna_set_flags_for_stutter_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = stutter_AA
						has_flag = stutter_Aa
						has_flag = stutter_aa
						has_flag = stutter_BB
						has_flag = stutter_Bb
						has_flag = stutter_bb
						has_flag = stutter_CC
						has_flag = stutter_Cc
						has_flag = stutter_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = stutter
					}
					emf_dna_set_flags_for_stutter = yes
				}
				else = {
					emf_dna_set_flags_for_stutter_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_AA
				}
				mother = {
					has_flag = stutter_AA
				}
			}
			set_flag = stutter_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_AA
				}
				mother = {
					has_flag = stutter_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_AA
				}
				50 = {
					set_flag = stutter_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Aa
				}
				mother = {
					has_flag = stutter_AA
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_AA
				}
				50 = {
					set_flag = stutter_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Aa
				}
				mother = {
					has_flag = stutter_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = stutter_AA
				}
				50 = {
					set_flag = stutter_Aa
				}
				25 = {
					set_flag = stutter_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_AA
				}
				mother = {
					has_flag = stutter_aa
				}
			}
			set_flag = stutter_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_aa
				}
				mother = {
					has_flag = stutter_AA
				}
			}
			set_flag = stutter_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Aa
				}
				mother = {
					has_flag = stutter_aa
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Aa
				}
				50 = {
					set_flag = stutter_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_aa
				}
				mother = {
					has_flag = stutter_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Aa
				}
				50 = {
					set_flag = stutter_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_aa
				}
				mother = {
					has_flag = stutter_aa
				}
			}
			set_flag = stutter_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = stutter_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_BB
				}
				mother = {
					has_flag = stutter_BB
				}
			}
			set_flag = stutter_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_BB
				}
				mother = {
					has_flag = stutter_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_BB
				}
				50 = {
					set_flag = stutter_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Bb
				}
				mother = {
					has_flag = stutter_BB
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_BB
				}
				50 = {
					set_flag = stutter_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Bb
				}
				mother = {
					has_flag = stutter_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = stutter_BB
				}
				50 = {
					set_flag = stutter_Bb
				}
				25 = {
					set_flag = stutter_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_BB
				}
				mother = {
					has_flag = stutter_bb
				}
			}
			set_flag = stutter_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_bb
				}
				mother = {
					has_flag = stutter_BB
				}
			}
			set_flag = stutter_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Bb
				}
				mother = {
					has_flag = stutter_bb
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Bb
				}
				50 = {
					set_flag = stutter_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_bb
				}
				mother = {
					has_flag = stutter_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Bb
				}
				50 = {
					set_flag = stutter_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_bb
				}
				mother = {
					has_flag = stutter_bb
				}
			}
			set_flag = stutter_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = stutter_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_CC
				}
				mother = {
					has_flag = stutter_CC
				}
			}
			set_flag = stutter_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_CC
				}
				mother = {
					has_flag = stutter_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_CC
				}
				50 = {
					set_flag = stutter_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Cc
				}
				mother = {
					has_flag = stutter_CC
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_CC
				}
				50 = {
					set_flag = stutter_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Cc
				}
				mother = {
					has_flag = stutter_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = stutter_CC
				}
				50 = {
					set_flag = stutter_Cc
				}
				25 = {
					set_flag = stutter_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_CC
				}
				mother = {
					has_flag = stutter_cc
				}
			}
			set_flag = stutter_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_cc
				}
				mother = {
					has_flag = stutter_CC
				}
			}
			set_flag = stutter_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_Cc
				}
				mother = {
					has_flag = stutter_cc
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Cc
				}
				50 = {
					set_flag = stutter_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_cc
				}
				mother = {
					has_flag = stutter_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = stutter_Cc
				}
				50 = {
					set_flag = stutter_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = stutter_cc
				}
				mother = {
					has_flag = stutter_cc
				}
			}
			set_flag = stutter_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = stutter_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = stutter }
			}
			random_list = {
				75 = {
					add_trait = stutter
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = stutter }
			}
			random_list = {
				15 = {
					add_trait = stutter
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = stutter }
			}
			random_list = {
				1 = {
					add_trait = stutter
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1210 }
	}
}

## Deaf
## Mendelian Inheritance
character_event = {
	id = emf_dna.1210

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = deaf
					NOR = {
						has_flag = deaf_aa
						has_flag = deaf_bb
						has_flag = deaf_cc
					}
				}
				emf_dna_clear_flags_for_deaf = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = deaf
					NOR = {
						has_flag = deaf_aa
						has_flag = deaf_bb
						has_flag = deaf_cc
					}
				}
				emf_dna_clear_flags_for_deaf = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = deaf_AA
						has_flag = deaf_Aa
						has_flag = deaf_aa
						has_flag = deaf_BB
						has_flag = deaf_Bb
						has_flag = deaf_bb
						has_flag = deaf_CC
						has_flag = deaf_Cc
						has_flag = deaf_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = deaf
					}
					emf_dna_set_flags_for_deaf = yes
				}
				else = {
					emf_dna_set_flags_for_deaf_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = deaf_AA
						has_flag = deaf_Aa
						has_flag = deaf_aa
						has_flag = deaf_BB
						has_flag = deaf_Bb
						has_flag = deaf_bb
						has_flag = deaf_CC
						has_flag = deaf_Cc
						has_flag = deaf_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = deaf
					}
					emf_dna_set_flags_for_deaf = yes
				}
				else = {
					emf_dna_set_flags_for_deaf_if_no_trait = yes
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_AA
				}
				mother = {
					has_flag = deaf_AA
				}
			}
			set_flag = deaf_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_AA
				}
				mother = {
					has_flag = deaf_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_AA
				}
				50 = {
					set_flag = deaf_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Aa
				}
				mother = {
					has_flag = deaf_AA
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_AA
				}
				50 = {
					set_flag = deaf_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Aa
				}
				mother = {
					has_flag = deaf_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = deaf_AA
				}
				50 = {
					set_flag = deaf_Aa
				}
				25 = {
					set_flag = deaf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_AA
				}
				mother = {
					has_flag = deaf_aa
				}
			}
			set_flag = deaf_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_aa
				}
				mother = {
					has_flag = deaf_AA
				}
			}
			set_flag = deaf_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Aa
				}
				mother = {
					has_flag = deaf_aa
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Aa
				}
				50 = {
					set_flag = deaf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_aa
				}
				mother = {
					has_flag = deaf_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Aa
				}
				50 = {
					set_flag = deaf_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_aa
				}
				mother = {
					has_flag = deaf_aa
				}
			}
			set_flag = deaf_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = deaf_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_BB
				}
				mother = {
					has_flag = deaf_BB
				}
			}
			set_flag = deaf_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_BB
				}
				mother = {
					has_flag = deaf_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_BB
				}
				50 = {
					set_flag = deaf_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Bb
				}
				mother = {
					has_flag = deaf_BB
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_BB
				}
				50 = {
					set_flag = deaf_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Bb
				}
				mother = {
					has_flag = deaf_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = deaf_BB
				}
				50 = {
					set_flag = deaf_Bb
				}
				25 = {
					set_flag = deaf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_BB
				}
				mother = {
					has_flag = deaf_bb
				}
			}
			set_flag = deaf_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_bb
				}
				mother = {
					has_flag = deaf_BB
				}
			}
			set_flag = deaf_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Bb
				}
				mother = {
					has_flag = deaf_bb
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Bb
				}
				50 = {
					set_flag = deaf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_bb
				}
				mother = {
					has_flag = deaf_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Bb
				}
				50 = {
					set_flag = deaf_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_bb
				}
				mother = {
					has_flag = deaf_bb
				}
			}
			set_flag = deaf_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = deaf_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_CC
				}
				mother = {
					has_flag = deaf_CC
				}
			}
			set_flag = deaf_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_CC
				}
				mother = {
					has_flag = deaf_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_CC
				}
				50 = {
					set_flag = deaf_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Cc
				}
				mother = {
					has_flag = deaf_CC
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_CC
				}
				50 = {
					set_flag = deaf_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Cc
				}
				mother = {
					has_flag = deaf_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = deaf_CC
				}
				50 = {
					set_flag = deaf_Cc
				}
				25 = {
					set_flag = deaf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_CC
				}
				mother = {
					has_flag = deaf_cc
				}
			}
			set_flag = deaf_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_cc
				}
				mother = {
					has_flag = deaf_CC
				}
			}
			set_flag = deaf_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_Cc
				}
				mother = {
					has_flag = deaf_cc
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Cc
				}
				50 = {
					set_flag = deaf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_cc
				}
				mother = {
					has_flag = deaf_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = deaf_Cc
				}
				50 = {
					set_flag = deaf_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = deaf_cc
				}
				mother = {
					has_flag = deaf_cc
				}
			}
			set_flag = deaf_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = deaf_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = deaf }
			}
			random_list = {
				75 = {
					add_trait = deaf
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = deaf }
			}
			random_list = {
				15 = {
					add_trait = deaf
				}
				185 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = deaf }
			}
			random_list = {
				1 = {
					add_trait = deaf
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1220 }
	}
}

## Wrymouth
## Mendelian Inheritance
character_event = {
	id = emf_dna.1220

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 1. Before we check flags for parents, check if they potentially have the wrong flag
		event_target:emf_dna_dad = {
			if = {
				limit = {
					trait = wrymouth
					NOR = {
						has_flag = wrymouth_aa
						has_flag = wrymouth_bb
						has_flag = wrymouth_cc
					}
				}
				emf_dna_clear_flags_for_wrymouth = yes
			}
		}
		mother = {
			if = {
				limit = {
					trait = wrymouth
					NOR = {
						has_flag = wrymouth_aa
						has_flag = wrymouth_bb
						has_flag = wrymouth_cc
					}
				}
				emf_dna_clear_flags_for_wrymouth = yes
			}
		}
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = wrymouth_AA
						has_flag = wrymouth_Aa
						has_flag = wrymouth_aa
						has_flag = wrymouth_BB
						has_flag = wrymouth_Bb
						has_flag = wrymouth_bb
						has_flag = wrymouth_CC
						has_flag = wrymouth_Cc
						has_flag = wrymouth_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = wrymouth
					}
					emf_dna_set_flags_for_wrymouth = yes
				}
				else = {
					emf_dna_set_flags_for_wrymouth_if_no_trait = yes
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = wrymouth_AA
						has_flag = wrymouth_Aa
						has_flag = wrymouth_aa
						has_flag = wrymouth_BB
						has_flag = wrymouth_Bb
						has_flag = wrymouth_bb
						has_flag = wrymouth_CC
						has_flag = wrymouth_Cc
						has_flag = wrymouth_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = wrymouth
					}
					emf_dna_set_flags_for_wrymouth = yes
				}
				else = {
					emf_dna_set_flags_for_wrymouth_if_no_trait = yes
				}
			}
		}
	#### 3. Genetic Inheritance
		set_variable = { which = local_r_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_AA
				}
				mother = {
					has_flag = wrymouth_AA
				}
			}
			set_flag = wrymouth_AA
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_AA
				}
				mother = {
					has_flag = wrymouth_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_AA
				}
				50 = {
					set_flag = wrymouth_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Aa
				}
				mother = {
					has_flag = wrymouth_AA
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_AA
				}
				50 = {
					set_flag = wrymouth_Aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Aa
				}
				mother = {
					has_flag = wrymouth_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = wrymouth_AA
				}
				50 = {
					set_flag = wrymouth_Aa
				}
				25 = {
					set_flag = wrymouth_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_AA
				}
				mother = {
					has_flag = wrymouth_aa
				}
			}
			set_flag = wrymouth_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_aa
				}
				mother = {
					has_flag = wrymouth_AA
				}
			}
			set_flag = wrymouth_Aa
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Aa
				}
				mother = {
					has_flag = wrymouth_aa
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Aa
				}
				50 = {
					set_flag = wrymouth_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_aa
				}
				mother = {
					has_flag = wrymouth_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Aa
				}
				50 = {
					set_flag = wrymouth_aa
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_aa
				}
				mother = {
					has_flag = wrymouth_aa
				}
			}
			set_flag = wrymouth_aa
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = wrymouth_Aa
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_BB
				}
				mother = {
					has_flag = wrymouth_BB
				}
			}
			set_flag = wrymouth_BB
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_BB
				}
				mother = {
					has_flag = wrymouth_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_BB
				}
				50 = {
					set_flag = wrymouth_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Bb
				}
				mother = {
					has_flag = wrymouth_BB
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_BB
				}
				50 = {
					set_flag = wrymouth_Bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Bb
				}
				mother = {
					has_flag = wrymouth_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = wrymouth_BB
				}
				50 = {
					set_flag = wrymouth_Bb
				}
				25 = {
					set_flag = wrymouth_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_BB
				}
				mother = {
					has_flag = wrymouth_bb
				}
			}
			set_flag = wrymouth_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_bb
				}
				mother = {
					has_flag = wrymouth_BB
				}
			}
			set_flag = wrymouth_Bb
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Bb
				}
				mother = {
					has_flag = wrymouth_bb
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Bb
				}
				50 = {
					set_flag = wrymouth_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_bb
				}
				mother = {
					has_flag = wrymouth_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Bb
				}
				50 = {
					set_flag = wrymouth_bb
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_bb
				}
				mother = {
					has_flag = wrymouth_bb
				}
			}
			set_flag = wrymouth_bb
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = wrymouth_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_CC
				}
				mother = {
					has_flag = wrymouth_CC
				}
			}
			set_flag = wrymouth_CC
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_CC
				}
				mother = {
					has_flag = wrymouth_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_CC
				}
				50 = {
					set_flag = wrymouth_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Cc
				}
				mother = {
					has_flag = wrymouth_CC
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_CC
				}
				50 = {
					set_flag = wrymouth_Cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Cc
				}
				mother = {
					has_flag = wrymouth_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = wrymouth_CC
				}
				50 = {
					set_flag = wrymouth_Cc
				}
				25 = {
					set_flag = wrymouth_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_CC
				}
				mother = {
					has_flag = wrymouth_cc
				}
			}
			set_flag = wrymouth_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_cc
				}
				mother = {
					has_flag = wrymouth_CC
				}
			}
			set_flag = wrymouth_Cc
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_Cc
				}
				mother = {
					has_flag = wrymouth_cc
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Cc
				}
				50 = {
					set_flag = wrymouth_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_cc
				}
				mother = {
					has_flag = wrymouth_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = wrymouth_Cc
				}
				50 = {
					set_flag = wrymouth_cc
					change_variable = { which = local_r_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = wrymouth_cc
				}
				mother = {
					has_flag = wrymouth_cc
				}
			}
			set_flag = wrymouth_cc
			change_variable = { which = local_r_alleles value = 1 }
		}
		else = {
			set_flag = wrymouth_Cc
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_r_alleles value = 3 }
				NOT = { trait = wrymouth }
			}
			random_list = {
				75 = {
					add_trait = wrymouth
				}
				25 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 2 }
				NOT = { trait = wrymouth }
			}
			random_list = {
				15 = { # 7.5
					add_trait = wrymouth
				}
				185 = { # 92.5
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_r_alleles value = 1 }
				NOT = { trait = wrymouth }
			}
			random_list = {
				1 = {
					add_trait = wrymouth
				}
				199 = {
				}
			}
		}
		character_event = { id = emf_dna.1230 }
	}
}

## For Perceptiveness
## Polygenic Inheritance
character_event = {
	id = emf_dna.1230

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = perc_AA
						has_flag = perc_Aa
						has_flag = perc_aa
						has_flag = perc_BB
						has_flag = perc_Bb
						has_flag = perc_bb
						has_flag = perc_CC
						has_flag = perc_Cc
						has_flag = perc_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				if = {
					limit = {
						trait = perceptive
					}
					emf_dna_set_flags_for_perceptive = yes
				}
				else_if = {
					limit = {
						trait = absentminded
					}
					emf_dna_set_flags_for_absentminded = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = perc_AA
						}
						4 = {
							set_flag = perc_Aa
						}
						1 = {
							set_flag = perc_aa
						}
					}
					random_list = {
						1 = {
							set_flag = perc_BB
						}
						4 = {
							set_flag = perc_Bb
						}
						1 = {
							set_flag = perc_bb
						}
					}
					random_list = {
						1 = {
							set_flag = perc_CC
						}
						4 = {
							set_flag = perc_Cc
						}
						1 = {
							set_flag = perc_cc
						}
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = perc_AA
						has_flag = perc_Aa
						has_flag = perc_aa
						has_flag = perc_BB
						has_flag = perc_Bb
						has_flag = perc_bb
						has_flag = perc_CC
						has_flag = perc_Cc
						has_flag = perc_cc
					}
				}
			}
			mother = {
				if = {
					limit = {
						trait = perceptive
					}
					emf_dna_set_flags_for_perceptive = yes
				}
				else_if = {
					limit = {
						trait = absentminded
					}
					emf_dna_set_flags_for_absentminded = yes
				}
				else = {
					random_list = {
						1 = {
							set_flag = perc_AA
						}
						4 = {
							set_flag = perc_Aa
						}
						1 = {
							set_flag = perc_aa
						}
					}
					random_list = {
						1 = {
							set_flag = perc_BB
						}
						4 = {
							set_flag = perc_Bb
						}
						1 = {
							set_flag = perc_bb
						}
					}
					random_list = {
						1 = {
							set_flag = perc_CC
						}
						4 = {
							set_flag = perc_Cc
						}
						1 = {
							set_flag = perc_cc
						}
					}
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_AA
				}
				mother = {
					has_flag = perc_AA
				}
			}
			set_flag = perc_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_AA
				}
				mother = {
					has_flag = perc_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = perc_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Aa
				}
				mother = {
					has_flag = perc_AA
				}
			}
			random_list = {
				50 = {
					set_flag = perc_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Aa
				}
				mother = {
					has_flag = perc_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = perc_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = perc_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_AA
				}
				mother = {
					has_flag = perc_aa
				}
			}
			set_flag = perc_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_aa
				}
				mother = {
					has_flag = perc_AA
				}
			}
			set_flag = perc_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Aa
				}
				mother = {
					has_flag = perc_aa
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_aa
				}
				mother = {
					has_flag = perc_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_aa
				}
				mother = {
					has_flag = perc_aa
				}
			}
			set_flag = perc_aa
		}
		else = {
			set_flag = perc_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_BB
				}
				mother = {
					has_flag = perc_BB
				}
			}
			set_flag = perc_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_BB
				}
				mother = {
					has_flag = perc_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = perc_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Bb
				}
				mother = {
					has_flag = perc_BB
				}
			}
			random_list = {
				50 = {
					set_flag = perc_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_BB
				}
				mother = {
					has_flag = perc_bb
				}
			}
			set_flag = perc_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_bb
				}
				mother = {
					has_flag = perc_BB
				}
			}
			set_flag = perc_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Bb
				}
				mother = {
					has_flag = perc_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = perc_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = perc_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Bb
				}
				mother = {
					has_flag = perc_bb
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_bb
				}
				mother = {
					has_flag = perc_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_bb
				}
				mother = {
					has_flag = perc_bb
				}
			}
			set_flag = perc_bb
		}
		else = {
			set_flag = perc_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_CC
				}
				mother = {
					has_flag = perc_CC
				}
			}
			set_flag = perc_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_CC
				}
				mother = {
					has_flag = perc_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = perc_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Cc
				}
				mother = {
					has_flag = perc_CC
				}
			}
			random_list = {
				50 = {
					set_flag = perc_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Cc
				}
				mother = {
					has_flag = perc_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = perc_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = perc_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = perc_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_CC
				}
				mother = {
					has_flag = perc_cc
				}
			}
			set_flag = perc_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_cc
				}
				mother = {
					has_flag = perc_CC
				}
			}
			set_flag = perc_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_Cc
				}
				mother = {
					has_flag = perc_cc
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_cc
				}
				mother = {
					has_flag = perc_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = perc_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = perc_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = perc_cc
				}
				mother = {
					has_flag = perc_cc
				}
			}
			set_flag = perc_cc
		}
		else = {
			set_flag = perc_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		#### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				80 = {
					add_trait = perceptive
				}
				20 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				25 = {
					add_trait = perceptive
				}
				75 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				2 = {
					add_trait = perceptive
				}
				98 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				2 = {
					add_trait = absentminded
				}
				98 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				25 = {
					add_trait = absentminded
				}
				75 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
				NOR = {
					trait = perceptive
					trait = absentminded
				}
			}
			random_list = {
				80 = {
					add_trait = absentminded
				}
				20 = {
				}
			}
		}
		character_event = { id = emf_dna.1240 }
	}
}

## Health
## Mendelian Inheritance
character_event = {
	id = emf_dna.1240

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#### 2. Initialization. Only executes for characters without flags
		if = {
			limit = {
				event_target:emf_dna_dad = {
					NOR = {
						has_flag = health_AA
						has_flag = health_Aa
						has_flag = health_aa
						has_flag = health_BB
						has_flag = health_Bb
						has_flag = health_bb
						has_flag = health_CC
						has_flag = health_Cc
						has_flag = health_cc
					}
				}
			}
			event_target:emf_dna_dad = {
				random_list = {
					9 = {
						set_flag = health_AA
					}
					9 = {
						set_flag = health_Aa
					}
					2 = {
						set_flag = health_aa
					}
				}
				random_list = {
					9 = {
						set_flag = health_BB
					}
					9 = {
						set_flag = health_Bb
					}
					2 = {
						set_flag = health_bb
					}
				}
				random_list = {
					9 = {
						set_flag = health_CC
					}
					9 = {
						set_flag = health_Cc
					}
					2 = {
						set_flag = health_cc
					}
				}
			}
		}
		if = {
			limit = {
				mother = {
					NOR = {
						has_flag = health_AA
						has_flag = health_Aa
						has_flag = health_aa
						has_flag = health_BB
						has_flag = health_Bb
						has_flag = health_bb
						has_flag = health_CC
						has_flag = health_Cc
						has_flag = health_cc
					}
				}
			}
			mother = {
				random_list = {
					9 = {
						set_flag = health_AA
					}
					9 = {
						set_flag = health_Aa
					}
					2 = {
						set_flag = health_aa
					}
				}
				random_list = {
					9 = {
						set_flag = health_BB
					}
					9 = {
						set_flag = health_Bb
					}
					2 = {
						set_flag = health_bb
					}
				}
				random_list = {
					9 = {
						set_flag = health_CC
					}
					9 = {
						set_flag = health_Cc
					}
					2 = {
						set_flag = health_cc
					}
				}
			}
		}
		#### 3. Genetic Inheritance
		set_variable = { which = local_alleles value = 0 }
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_AA
				}
				mother = {
					has_flag = health_AA
				}
			}
			set_flag = health_AA
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_AA
				}
				mother = {
					has_flag = health_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = health_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Aa
				}
				mother = {
					has_flag = health_AA
				}
			}
			random_list = {
				50 = {
					set_flag = health_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Aa
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Aa
				}
				mother = {
					has_flag = health_Aa
				}
			}
			random_list = {
				25 = {
					set_flag = health_AA
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = health_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_AA
				}
				mother = {
					has_flag = health_aa
				}
			}
			set_flag = health_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_aa
				}
				mother = {
					has_flag = health_AA
				}
			}
			set_flag = health_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Aa
				}
				mother = {
					has_flag = health_aa
				}
			}
			random_list = {
				50 = {
					set_flag = health_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_aa
				}
				mother = {
					has_flag = health_Aa
				}
			}
			random_list = {
				50 = {
					set_flag = health_Aa
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_aa
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_aa
				}
				mother = {
					has_flag = health_aa
				}
			}
			set_flag = health_aa
		}
		else = {
			set_flag = health_Aa
			change_variable = { which = local_alleles value = 1 }
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_BB
				}
				mother = {
					has_flag = health_BB
				}
			}
			set_flag = health_BB
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_BB
				}
				mother = {
					has_flag = health_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = health_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Bb
				}
				mother = {
					has_flag = health_BB
				}
			}
			random_list = {
				50 = {
					set_flag = health_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Bb
				}
				mother = {
					has_flag = health_Bb
				}
			}
			random_list = {
				25 = {
					set_flag = health_BB
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = health_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_BB
				}
				mother = {
					has_flag = health_bb
				}
			}
			set_flag = health_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_bb
				}
				mother = {
					has_flag = health_BB
				}
			}
			set_flag = health_Bb
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Bb
				}
				mother = {
					has_flag = health_bb
				}
			}
			random_list = {
				50 = {
					set_flag = health_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_bb
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_bb
				}
				mother = {
					has_flag = health_Bb
				}
			}
			random_list = {
				50 = {
					set_flag = health_Bb
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_bb
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_bb
				}
				mother = {
					has_flag = health_bb
				}
			}
			set_flag = health_bb
		}
		else = {
			set_flag = health_Bb
		}
		if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_CC
				}
				mother = {
					has_flag = health_CC
				}
			}
			set_flag = health_CC
			change_variable = { which = local_alleles value = 2 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_CC
				}
				mother = {
					has_flag = health_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = health_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Cc
				}
				mother = {
					has_flag = health_CC
				}
			}
			random_list = {
				50 = {
					set_flag = health_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Cc
					change_variable = { which = local_alleles value = 1 }
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_CC
				}
				mother = {
					has_flag = health_cc
				}
			}
			set_flag = health_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_cc
				}
				mother = {
					has_flag = health_CC
				}
			}
			set_flag = health_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Cc
				}
				mother = {
					has_flag = health_Cc
				}
			}
			random_list = {
				25 = {
					set_flag = health_CC
					change_variable = { which = local_alleles value = 2 }
				}
				50 = {
					set_flag = health_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				25 = {
					set_flag = health_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_Cc
				}
				mother = {
					has_flag = health_cc
				}
			}
			random_list = {
				50 = {
					set_flag = health_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_cc
				}
				mother = {
					has_flag = health_Cc
				}
			}
			random_list = {
				50 = {
					set_flag = health_Cc
					change_variable = { which = local_alleles value = 1 }
				}
				50 = {
					set_flag = health_cc
				}
			}
		}
		else_if = {
			limit = {
				event_target:emf_dna_dad = {
					has_flag = health_cc
				}
				mother = {
					has_flag = health_cc
				}
			}
			set_flag = health_cc
		}
		else = {
			set_flag = health_Cc
			change_variable = { which = local_alleles value = 1 }
		}
		### 4. Trait Assignment
		if = {
			limit = {
				check_variable = { which = local_alleles value = 6 }
			}
			random_list = {
				2 = {
					health = 1.2
				}
				2 = {
					health = 0.8
				}
				2 = {
					health = 0.4
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 5 }
			}
			random_list = {
				2 = {
					health = 0.8
				}
				2 = {
					health = 0.4
				}
				2 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 4 }
			}
			random_list = {
				2 = {
					health = 0.4
				}
				4 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 3 }
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 2 }
			}
			random_list = {
				2 = {
					health = -0.4
				}
				4 = {
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = local_alleles value = 1 }
			}
			random_list = {
				2 = {
					health = -0.8
				}
				2 = {
					health = -0.4
				}
				2 = {
				}
			}
		}
		else_if = {
			limit = {
				is_variable_equal = { which = local_alleles value = 0 }
			}
			random_list = {
				2 = {
					health = -1.2
				}
				2 = {
					health = -0.8
				}
				2 = {
					health = -0.4
				}
			}
		}
		# We're done with genetic inheritance. Now, proceed to random genetic mutations which take precedence over
		# inheritance:
		character_event = { id = emf_dna.2000 }
	}
}


#################################
#### RANDOM GENETIC MUTATION ####
#################################

# These events follow the genetic inheritance events, in the same chain, in order to let random genetic mutations take
# precedence over inherited genetics. Further, they proceed in the reverse order of inheritance (e.g., intelligence is the
# first inheritance event and the last mutation event) to help reduce any possible bias that may be caused by any of these
# phenotypes being opposite traits of each other and thus potentially removing a previously expressed trait when they
# themselves express as a trait.
#
# NOTE: The base health phenotype is currently excluded from random genetic mutation.


# emf_dna.2000 -- Perceptiveness
character_event = {
	id = emf_dna.2000

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_flag = emf_dna_check
		random_list = {
			50 = {
				emf_dna_clear_flags_for_perc = yes
				add_trait = perceptive
				emf_dna_set_flags_for_perceptive = yes
			}
			50 = {
				emf_dna_clear_flags_for_perc = yes
				add_trait = absentminded
				emf_dna_set_flags_for_absentminded = yes
			}
			9900 = {
			}
		}
		character_event = { id = emf_dna.2010 }
	}
}


# emf_dna.2010 -- Wrymouth
character_event = {
	id = emf_dna.2010

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			15 = {
				emf_dna_clear_flags_for_wrymouth = yes
				emf_dna_set_flags_for_wrymouth = yes
				add_trait = wrymouth
			}
			9985 = {
			}
		}
		character_event = { id = emf_dna.2020 }
	}
}


# emf_dna.2020 -- Deafness
character_event = {
	id = emf_dna.2020

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			15 = {
				emf_dna_clear_flags_for_deaf = yes
				emf_dna_set_flags_for_deaf = yes
				add_trait = deaf
			}
			9985 = {
			}
		}
		character_event = { id = emf_dna.2030 }
	}
}


# emf_dna.2030 -- Stutter
character_event = {
	id = emf_dna.2030

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			20 = {
				emf_dna_clear_flags_for_stutter = yes
				emf_dna_set_flags_for_stutter = yes
				add_trait = stutter
			}
			9980 = {
			}
		}
		character_event = { id = emf_dna.2040 }
	}
}


# emf_dna.2040 -- Lisp
character_event = {
	id = emf_dna.2040

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			20 = {
				emf_dna_clear_flags_for_lisp = yes
				emf_dna_set_flags_for_lisp = yes
				add_trait = lisp
			}
			9980 = {
			}
		}
		character_event = { id = emf_dna.2050 }
	}
}


# emf_dna.2050 -- Harelip
character_event = {
	id = emf_dna.2050

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			20 = {
				emf_dna_clear_flags_for_harelip = yes
				emf_dna_set_flags_for_harelip = yes
				add_trait = harelip
			}
			9980 = {
			}
		}
		character_event = { id = emf_dna.2060 }
	}
}


# emf_dna.2060 -- Hunchback
character_event = {
	id = emf_dna.2060

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			20 = {
				emf_dna_clear_flags_for_hunchback = yes
				emf_dna_set_flags_for_hunchback = yes
				add_trait = hunchback
			}
			9980 = {
			}
		}
		character_event = { id = emf_dna.2070 }
	}
}


# emf_dna.2070 -- Clubfooted
character_event = {
	id = emf_dna.2070

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			20 = {
				emf_dna_clear_flags_for_clubfooted = yes
				emf_dna_set_flags_for_clubfooted = yes
				add_trait = clubfooted
			}
			9980 = {
			}
		}
		character_event = { id = emf_dna.2080 }
	}
}


# emf_dna.2080 -- Dwarfism
character_event = {
	id = emf_dna.2080

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			10 = {
				emf_dna_clear_flags_for_dwarf = yes
				emf_dna_set_flags_for_dwarf = yes
				add_trait = dwarf
			}
			9990 = {
			}
		}
		character_event = { id = emf_dna.2090 }
	}
}


# emf_dna.2090 -- Height
character_event = {
	id = emf_dna.2090

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Birth rates (per 10000):
		# Giant: 15
		# Tall:  80
		# Short: 80
		# Tiny:  15
		random_list = {
			15 = {
				emf_dna_clear_flags_for_hgt = yes
				add_trait = giant
				emf_dna_set_flags_for_giant = yes
			}
			80 = {
				emf_dna_clear_flags_for_hgt = yes
				add_trait = tall
				emf_dna_set_flags_for_tall = yes
			}
			80 = {
				emf_dna_clear_flags_for_hgt = yes
				add_trait = short
				emf_dna_set_flags_for_short = yes
			}
			15 = {
				emf_dna_clear_flags_for_hgt = yes
				add_trait = tiny
				emf_dna_set_flags_for_tiny = yes
			}
			9810 = {
			}
		}
		character_event = { id = emf_dna.2100 }
	}
}


# emf_dna.2100 -- Strength
character_event = {
	id = emf_dna.2100

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Birth rates (per 10000):
		# Strong:   40
		# Burly:    100
		# Delicate: 100
		# Weak:     40
		random_list = {
			40 = {
				emf_dna_clear_flags_for_str = yes
				add_trait = strong
				emf_dna_set_flags_for_strong = yes
			}
			100 = {
				emf_dna_clear_flags_for_str = yes
				add_trait = burly
				emf_dna_set_flags_for_burly = yes
			}
			100 = {
				emf_dna_clear_flags_for_str = yes
				add_trait = delicate
				emf_dna_set_flags_for_delicate = yes
			}
			40 = {
				emf_dna_clear_flags_for_str = yes
				add_trait = weak
				emf_dna_set_flags_for_weak = yes
			}
			9720 = {
			}
		}
		character_event = { id = emf_dna.2110 }
	}
}


# emf_dna.2110 -- Attractiveness
character_event = {
	id = emf_dna.2110

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Birth rates (per 10000):
		# Fair:   40
		# Comely: 100
		# Homely: 100
		# Ugly:   40
		random_list = {
			40 = {
				emf_dna_clear_flags_for_attr = yes
				add_trait = fair
				emf_dna_set_flags_for_fair = yes
			}
			100 = {
				emf_dna_clear_flags_for_attr = yes
				add_trait = comely
				emf_dna_set_flags_for_comely = yes
			}
			100 = {
				emf_dna_clear_flags_for_attr = yes
				add_trait = homely
				emf_dna_set_flags_for_homely = yes
			}
			40 = {
				emf_dna_clear_flags_for_attr = yes
				add_trait = ugly
				emf_dna_set_flags_for_ugly = yes
			}
			9720 = {
			}
		}
		character_event = { id = emf_dna.2120 }
	}
}


# emf_dna.2120 -- Intelligence
character_event = {
	id = emf_dna.2120

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Birth rates (per 10000):
		# Genius:   20
		# Quick:    40
		# Bright:   100
		# Dim:      100
		# Slow:     40
		# Imbecile: 20
		random_list = {
			20 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = genius
				emf_dna_set_flags_for_genius = yes
			}
			40 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = quick
				emf_dna_set_flags_for_quick = yes
			}
			100 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = bright
				emf_dna_set_flags_for_bright = yes
			}
			100 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = dim
				emf_dna_set_flags_for_dim = yes
			}
			40 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = slow
				emf_dna_set_flags_for_slow = yes
			}
			20 = {
				emf_dna_clear_flags_for_int = yes
				add_trait = imbecile
				emf_dna_set_flags_for_imbecile = yes
			}
			9680 = {
			}
		}
		# Done! End of event chain.
	}
}
