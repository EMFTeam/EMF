# -*- ck2.events -*-

namespace = emf_intrigue

#######################################
# NEW PLOT EVENTS
# Written by Rylock
#######################################

### DISCREDIT COUNCILLOR
character_event = {
	id = emf_intrigue.155
	desc = EVTDESC_emf_intrigue_155
	picture = GFX_evt_spymaster
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		has_plot = plot_discredit_councillor
		NOT = { has_character_modifier = plot_in_action_timer }
	}

	mean_time_to_happen = {
		months = 150
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 1
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 2
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 3
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 4
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 5
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 6
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 7
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 8
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 9
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 10
		}
		modifier = {
			factor = 0.66
			plot_power = 0.5
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
	}

	immediate = {
		plot_target_char = { save_event_target_as = plot_victim }
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_155 #That position will be mine!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = craven
			}
			modifier = {
				factor = 100
				trait = lunatic
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 2.5
				plot_power = 0.5
				NOT = { plot_power = 1.0 }
			}
			modifier = {
				factor = 10
				plot_power = 1.0
				NOT = { plot_power = 1.5 }
			}
			modifier = {
				factor = 40
				plot_power = 1.5
				NOT = { plot_power = 2.0 }
			}
			modifier = {
				factor = 100
				plot_power = 2.0
			}
		}
		if = {
			limit = { trait = charitable }
			remove_trait = charitable
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		event_target:plot_victim = {
			random_list = {
				20 = {
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 0.5 }
						ROOT = { NOT = { plot_power = 1.0 } }
					}
					modifier = {
						factor = 2.5
						ROOT = { plot_power = 1.0 }
						ROOT = { NOT = { plot_power = 1.5 } }
					}
					modifier = {
						factor = 3.0
						ROOT = { plot_power = 1.5 }
						ROOT = { NOT = { plot_power = 2.0 } }
					}
					modifier = {
						factor = 4.0
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.156 tooltip = "PLOT_SUCCEEDS" days = 3 } #succeeds
				}
				20 = {
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 0.5 }
						ROOT = { NOT = { plot_power = 1.0 } }
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 1.0 }
						ROOT = { NOT = { plot_power = 2.0 } }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.159 tooltip = "PLOT_FAILS_NO_DISCOVER" days = 3 } #fails, not discovered
				}
				60 = {
					modifier = {
						factor = 0.65
						ROOT = { plot_power = 0.5 }
						ROOT = { NOT = { plot_power = 1.0 } }
					}
					modifier = {
						factor = 0.42
						ROOT = { plot_power = 1.0 }
						ROOT = { NOT = { plot_power = 1.5 } }
					}
					modifier = {
						factor = 0.25
						ROOT = { plot_power = 1.5 }
						ROOT = { NOT = { plot_power = 2.0 } }
					}
					modifier = {
						factor = 0.08
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.162 tooltip = "PLOT_FAILS_DISCOVERED" days = 3 } #fails, discovered
				}
			}
		}
		hidden_tooltip = { activate_plot = yes }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 3
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 #Wait for a better opportunity...
		ai_chance = { factor = 100 }
	}
}

# Success - notify victim
character_event = {
	id = emf_intrigue.156
	desc = EVTDESC_emf_intrigue_156
	picture = GFX_evt_spymaster

	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_discredit_councillor
			plot_target_char = { character = ROOT }
		}
	}

	immediate = {
		hidden_tooltip = {
			FROM = { set_character_flag = plot_success }
		}
		if = {
			limit = { has_job_title = job_chancellor }
			set_character_flag = job_chancellor
		}
		if = {
			limit = { has_job_title = job_treasurer }
			set_character_flag = job_treasurer
		}
		if = {
			limit = { has_job_title = job_marshal }
			set_character_flag = job_marshal
		}
		if = {
			limit = { has_job_title = job_spymaster }
			set_character_flag = job_spymaster
		}
		if = {
			limit = { has_job_title = job_spiritual }
			set_character_flag = job_spiritual
		}
		liege = {
			reverse_opinion = {
				modifier = opinion_fired_from_council
				who = ROOT
				years = 10
			}
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_156 #I am ruined!
		if = {
			limit = { has_character_flag = job_chancellor }
			change_diplomacy = -2
			remove_title = job_chancellor
			clr_character_flag = job_chancellor
		}
		if = {
			limit = { has_character_flag = job_treasurer }
			change_stewardship = -2
			remove_title = job_treasurer
			clr_character_flag = job_treasurer
		}
		if = {
			limit = { has_character_flag = job_marshal }
			change_martial = -2
			remove_title = job_marshal
			clr_character_flag = job_marshal
		}
		if = {
			limit = { has_character_flag = job_spymaster }
			change_intrigue = -2
			remove_title = job_spymaster
			clr_character_flag = job_spymaster
		}
		if = {
			limit = { has_character_flag = job_spiritual }
			change_learning = -2
			remove_title = job_spiritual
			clr_character_flag = job_spiritual
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.157 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.158 } }
			}
		}
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.157
	desc = EVTDESC_emf_intrigue_157
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_157 #Excellent!
	}
}

# Success - notify liege
character_event = {
	id = emf_intrigue.158
	desc = EVTDESC_emf_intrigue_158
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_158 #It had to be done!
	}
}

# Failure (not discovered) - notify victim
character_event = {
	id = emf_intrigue.159
	desc = EVTDESC_emf_intrigue_159
	picture = GFX_evt_spymaster
	
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_discredit_councillor
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_159 #Who could have instigated such an underhanded scheme?
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.160 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.161 } }
			}
		}
	}
}

# Failure (not discovered) - notify plotter
character_event = {
	id = emf_intrigue.160
	desc = EVTDESC_emf_intrigue_160
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_160 #It could have been worse...
		set_character_flag = abort_plot
	}
}

# Failure (not discovered) - notify liege
character_event = {
	id = emf_intrigue.161
	desc = EVTDESC_emf_intrigue_161
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_159 #Who could have instigated such an underhanded scheme?
	}
}

# Failure (discovered) - notify victim
character_event = {
	id = emf_intrigue.162
	desc = EVTDESC_emf_intrigue_162
	picture = GFX_evt_spymaster

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_discredit_councillor
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_162 #He will pay for this!
		opinion = {
			who = FROM
			modifier = devious_plotter
			years = 10
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.163 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.164 } }
			}
		}
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.163
	desc = EVTDESC_emf_intrigue_163
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_163 #My liege is not pleased...
		prestige = -100
		set_character_flag = abort_plot
	}
}

# Failure (discovered) - notify liege
character_event = {
	id = emf_intrigue.164
	desc = EVTDESC_emf_intrigue_164
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_164 #He will pay for this!
		opinion = { who = FROMFROM modifier = devious_plotter years = 5 }
	}
}

### EMBEZZLE FROM LIEGE
character_event = {
	id = emf_intrigue.170
	desc = EVTDESC_emf_intrigue_170
	picture = GFX_evt_spymaster
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		has_plot = plot_embezzle_from_liege
		NOT = { has_character_modifier = plot_in_action_timer }
	}

	mean_time_to_happen = {
		months = 150
		modifier = {
			factor = 0.5
			has_minor_title = title_regent
		}
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 1
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 2
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 3
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 4
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 5
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 6
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 7
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 8
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 9
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 10
		}
		modifier = {
			factor = 0.66
			plot_power = 0.5
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
	}

	immediate = {
		plot_target_char = { save_event_target_as = plot_victim }
	}	
	
	option = {
		name = EVTOPTA_emf_intrigue_170 #We'll all be rich!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = craven
			}
			modifier = {
				factor = 100
				trait = lunatic
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 2.5
				plot_power = 0.5
				NOT = { plot_power = 1.0 }
			}
			modifier = {
				factor = 10
				plot_power = 1.0
				NOT = { plot_power = 1.5 }
			}
			modifier = {
				factor = 40
				plot_power = 1.5
				NOT = { plot_power = 2.0 }
			}
			modifier = {
				factor = 100
				plot_power = 2.0
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = charitable }
			remove_trait = charitable
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		event_target:plot_victim = {
			random_list = {
				40 = {
					modifier = {
						factor = 1.5
						ROOT = {
							OR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.171 tooltip = "PLOT_SUCCEEDS" days = 3 } #succeeds
				}
				60 = {
					modifier = {
						factor = 0.66
						ROOT = {
							OR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.174 tooltip = "PLOT_FAILS_DISCOVERED" days = 3 } #fails, discovered
				}
			}
		}
		hidden_tooltip = { activate_plot = yes }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 3
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 #Wait for a better opportunity...
		ai_chance = { factor = 100 }
	}
}

# Success - notify victim
character_event = {
	id = emf_intrigue.171
	desc = EVTDESC_emf_intrigue_171
	picture = GFX_evt_spymaster

	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_embezzle_from_liege
			plot_target_char = { character = ROOT }
		}
	}

	immediate = {
		if = {
			limit = {
				tier = count
			}
			wealth = -50
		}
		if = {
			limit = {
				tier = duke
			}
			wealth = -75
		}
		if = {
			limit = {
				higher_tier_than = duke
			}
			wealth = -100
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_171 #I've been robbed
		tooltip = {
			if = {
				limit = { tier = count }
				wealth = -50
			}
			if = {
				limit = { tier = duke }
				wealth = -75
			}
			if = {
				limit = { higher_tier_than = duke }
				wealth = -100
			}
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.172 } }
		}
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.172
	desc = EVTDESC_emf_intrigue_172
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_172 #Everything went as planned!
		set_character_flag = plot_success
		if = {
			limit = {
				FROM = { tier = count }
			}
			wealth = 50
		}
		if = {
			limit = {
				FROM = { tier = duke }
			}
			wealth = 75
		}
		if = {
			limit = {
				FROM = { higher_tier_than = duke }
			}
			wealth = 100
		}
		hidden_tooltip = {
			# Notify backers
			any_plot_backer = {
				character_event = { id = emf_intrigue.173 }
			}
		}
	}
}

# Success - notify plot backers
character_event = {
	id = emf_intrigue.173
	desc = EVTDESC_emf_intrigue_173
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_157 #Excellent!
		wealth = 10
	}
}

# Failure (discovered) - notify victim
character_event = {
	id = emf_intrigue.174
	desc = EVTDESC_emf_intrigue_174
	picture = GFX_evt_spymaster

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_embezzle_from_liege
			plot_target_char = { character = ROOT }
		}
	}

	immediate = {
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.175 } }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_174
		opinion = { who = FROM modifier = devious_plotter years = 10 }
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.175
	desc = EVTDESC_emf_intrigue_175
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_175 #Retribution is sure to come...
		prestige = -100
		set_character_flag = abort_plot
	}
}

### FABRICATE EVIDENCE OF TREASON (IF NOT LIEGE)
character_event = {
	id = emf_intrigue.180
	desc = EVTDESC_emf_intrigue_180
	picture = GFX_evt_spymaster
	
	min_age = 16
	prisoner = no
	capable_only = yes
	is_part_of_plot = yes
	
	trigger = {
		OR = {
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
		}
		NOT = { has_character_modifier = plot_in_action_timer }
		plot_target_char = {
			liege = {
				NOT = { character = ROOT }
			}
		}
	}
	
	immediate = {
		plot_target_char = { save_event_target_as = plot_victim }
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 1
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 2
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 3
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 4
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 5
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 6
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 7
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 8
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 9
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 10
		}
		modifier = {
			factor = 0.66
			plot_power = 0.5
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_180 #I will see him disgraced!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = craven
			}
			modifier = {
				factor = 100
				trait = lunatic
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 2.5
				plot_power = 0.5
				NOT = { plot_power = 1.0 }
			}
			modifier = {
				factor = 10
				plot_power = 1.0
				NOT = { plot_power = 1.5 }
			}
			modifier = {
				factor = 40
				plot_power = 1.5
				NOT = { plot_power = 2.0 }
			}
			modifier = {
				factor = 100
				plot_power = 2.0
			}
		}
		if = {
			limit = { trait = just }
			remove_trait = just
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		event_target:plot_victim = {
			random_list = {
				25 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.181 tooltip = "PLOT_SUCCEEDS" days = 3 } #succeeds
				}
				25 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.184 tooltip = "PLOT_FAILS_NO_DISCOVER" days = 3 } #fails, not discovered
				}
				50 = {
					modifier = {
						factor = 1.4
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.187 tooltip = "PLOT_FAILS_DISCOVERED" days = 3 } #fails, discovered
				}
			}
		}
		hidden_tooltip = { activate_plot = yes }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 3
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 #Wait for a better opportunity
		ai_chance = { factor = 100 }
	}
}

# Success - notify victim
character_event = {
	id = emf_intrigue.181
	desc = EVTDESC_emf_intrigue_181
	picture = GFX_evt_spymaster

	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_181 #This must be a scheme to see me arrested!
		liege = {
			opinion = {
				who = ROOT
				modifier = opinion_traitor
				years = 10
			}
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.182 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.183 } }
			}
		}
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.182
	desc = EVTDESC_emf_intrigue_182
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_157 #Excellent!
		set_character_flag = plot_success
	}
}

# Success - notify liege
character_event = {
	id = emf_intrigue.183
	desc = EVTDESC_emf_intrigue_183
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_183 #I must have him arrested!
		opinion = {
			who = FROM
			modifier = opinion_traitor
			years = 10
		}
	}
}

# Failure (not discovered) - notify victim
character_event = {
	id = emf_intrigue.184
	desc = EVTDESC_emf_intrigue_184
	picture = GFX_evt_spymaster
	
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_184 #I wonder who sent it...
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.185 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.186 } }
			}
		}
	}
}

# Failure (not discovered) - notify plotter
character_event = {
	id = emf_intrigue.185
	desc = EVTDESC_emf_intrigue_185
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_160 #It could have been worse
		set_character_flag = abort_plot
	}
}

# Failure (not discovered) - notify liege
character_event = {
	id = emf_intrigue.186
	desc = EVTDESC_emf_intrigue_186
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_186 #Nothing but lies and slander...
	}
}

# Failure (discovered) - notify victim
character_event = {
	id = emf_intrigue.187
	desc = EVTDESC_emf_intrigue_187
	picture = GFX_evt_spymaster

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_187 #How dare he!
		opinion = {
			who = FROM
			modifier = devious_plotter
			years = 10
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.188 } }
			# Notify liege
			if = {
				limit = {
					liege = {
						NOT = { character = ROOT }
						NOT = { character = FROM }
					}
				}
				liege = { character_event = { id = emf_intrigue.189 } }
			}
		}
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.188
	desc = EVTDESC_emf_intrigue_188
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_188 #This is bad!
		prestige = -100
		set_character_flag = abort_plot
	}
}

# Failure (discovered) - notify liege
character_event = {
	id = emf_intrigue.189
	desc = EVTDESC_emf_intrigue_189
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_189 #He is the true traitor!
		opinion = { who = FROMFROM modifier = devious_plotter years = 5 }
	}
}

### FABRICATE EVIDENCE OF HERESY
character_event = {
	id = emf_intrigue.195
	desc = EVTDESC_emf_intrigue_195
	picture = GFX_evt_spymaster
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		has_plot = plot_fabricate_heresy
		NOT = { has_character_modifier = plot_in_action_timer }
	}
	
	immediate = {
		plot_target_char = { save_event_target_as = plot_victim }
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 1
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 2
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 3
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 4
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 5
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 6
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 7
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 8
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 9
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 10
		}
		modifier = {
			factor = 0.66
			plot_power = 0.5
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_195 #God will be my judge!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = craven
			}
			modifier = {
				factor = 100
				trait = lunatic
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 2.5
				plot_power = 0.5
				NOT = { plot_power = 1.0 }
			}
			modifier = {
				factor = 10
				plot_power = 1.0
				NOT = { plot_power = 1.5 }
			}
			modifier = {
				factor = 40
				plot_power = 1.5
				NOT = { plot_power = 2.0 }
			}
			modifier = {
				factor = 100
				plot_power = 2.0
			}
		}
		if = {
			limit = { trait = just }
			remove_trait = just
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		event_target:plot_victim = {
			random_list = {
				25 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.196 tooltip = "PLOT_SUCCEEDS" days = 3 } #succeeds
				}
				25 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.198 tooltip = "PLOT_FAILS_NO_DISCOVER" days = 3 } #fails, not discovered
				}
				50 = {
					modifier = {
						factor = 1.4
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.200 tooltip = "PLOT_FAILS_DISCOVERED" days = 3 } #fails, discovered
				}
			}
		}
		hidden_tooltip = { activate_plot = yes }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 3
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 #Wait for a better opportunity
		ai_chance = { factor = 100 }
	}
}

# Success - notify victim
character_event = {
	id = emf_intrigue.196
	desc = EVTDESC_emf_intrigue_196
	picture = GFX_evt_spymaster

	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_fabricate_heresy
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_196 #God preserve me from these lies!
		add_trait = excommunicated
		piety = -100
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.197 } }
		}
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.197
	desc = EVTDESC_emf_intrigue_197
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_197 #It was the will of God!
		set_character_flag = plot_success
	}
}

# Failure (not discovered) - notify victim
character_event = {
	id = emf_intrigue.198
	desc = EVTDESC_emf_intrigue_198
	picture = GFX_evt_spymaster
	
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_fabricate_heresy
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_198 #God looks after the faithful
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.199 } }
		}
	}
}

# Failure (not discovered) - notify plotter
character_event = {
	id = emf_intrigue.199
	desc = EVTDESC_emf_intrigue_199
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = OK
		set_character_flag = abort_plot
	}
}

# Failure (discovered) - notify victim
character_event = {
	id = emf_intrigue.200
	desc = EVTDESC_emf_intrigue_200
	picture = GFX_evt_spymaster

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_plot = plot_fabricate_heresy
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_200 #I know who sent it!
		opinion = {
			who = FROM
			modifier = devious_plotter
			years = 10
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.201 } }
		}
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.201
	desc = EVTDESC_emf_intrigue_201
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_201 #This will not help my reputation...
		rightful_religious_head_scope = {
			opinion = {
				who = ROOT
				modifier = devious_plotter
				years = 10
			}
		}
		piety = -250
		set_character_flag = abort_plot
	}
}

### FABRICATE EVIDENCE OF TREASON (IF LIEGE)
character_event = {
	id = emf_intrigue.205
	desc = EVTDESC_emf_intrigue_205
	picture = GFX_evt_spymaster
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		OR = {
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
		}
		NOT = { has_character_modifier = plot_in_action_timer }
		plot_target_char = {
			liege = {
				character = ROOT
			}
		}
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 1
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 2
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 3
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 4
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 5
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 6
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 7
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 8
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 9
		}
		modifier = {
			factor = 0.95
			num_of_plot_backers = 10
		}
		modifier = {
			factor = 0.66
			plot_power = 0.5
		}
		modifier = {
			factor = 0.66
			plot_power = 1.0
		}
		modifier = {
			factor = 0.66
			plot_power = 1.5
		}
		modifier = {
			factor = 0.66
			plot_power = 2.0
		}
		modifier = {
			factor = 0.66
			plot_power = 3.0
		}
		modifier = {
			factor = 0.66
			plot_power = 4.0
		}
		modifier = {
			factor = 0.66
			plot_power = 6.0
		}
		modifier = {
			factor = 0.66
			plot_power = 8.0
		}
		modifier = {
			factor = 0.66
			plot_power = 10.0
		}
	}

	immediate = {
		plot_target_char = { save_event_target_as = plot_victim }
	}	
	
	option = {
		name = EVTOPTA_emf_intrigue_180 #I will see him disgraced!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.75
				trait = craven
			}
			modifier = {
				factor = 100
				trait = lunatic
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 2.5
				plot_power = 0.5
				NOT = { plot_power = 1.0 }
			}
			modifier = {
				factor = 10
				plot_power = 1.0
				NOT = { plot_power = 1.5 }
			}
			modifier = {
				factor = 40
				plot_power = 1.5
				NOT = { plot_power = 2.0 }
			}
			modifier = {
				factor = 100
				plot_power = 2.0
			}
		}
		if = {
			limit = { trait = just }
			remove_trait = just
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		event_target:plot_victim = {
			random_list = {
				20 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 1.25
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 1.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.206 tooltip = "PLOT_SUCCEEDS" days = 3 } #succeeds
				}
				20 = {
					modifier = {
						factor = 0.6
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								has_minor_title = title_regent
								any_plot_backer = { has_job_title = job_spymaster }
								any_plot_backer = { has_minor_title = title_regent }
							}
						}
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.9
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.75
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.208 tooltip = "PLOT_FAILS_NO_DISCOVER" days = 3 } #fails, not discovered
				}
				60 = {
					modifier = {
						factor = 1.4
						ROOT = {
							NOR = {
								has_job_title = job_spymaster
								any_plot_backer = { has_job_title = job_spymaster }
							}
						}
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 0.5 }
					}
					modifier = {
						factor = 0.8
						ROOT = { plot_power = 1.0 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 1.5 }
					}
					modifier = {
						factor = 0.5
						ROOT = { plot_power = 2.0 }
					}
					character_event = { id = emf_intrigue.210 tooltip = "PLOT_FAILS_DISCOVERED" days = 3 } #fails, discovered
				}
			}
		}
		hidden_tooltip = { activate_plot = yes }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 3
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 #Wait for a better opportunity
		ai_chance = { factor = 100 }
	}
}

# Success - notify victim
character_event = {
	id = emf_intrigue.206
	desc = EVTDESC_emf_intrigue_206
	picture = GFX_evt_spymaster

	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_206 #Who could have done such a thing?
		liege = {
			opinion = {
				who = ROOT
				modifier = opinion_traitor
				years = 10
			}
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.207 } }
		}
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.207
	desc = EVTDESC_emf_intrigue_207
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_157 #Excellent!
		set_character_flag = plot_success
	}
}

# Failure (not discovered) - notify victim
character_event = {
	id = emf_intrigue.208
	desc = EVTDESC_emf_intrigue_208
	picture = GFX_evt_spymaster
	
	hide_from = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_208 #I wonder who was behind it...
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.209 } }
		}
	}
}

# Failure (not discovered) - notify plotter
character_event = {
	id = emf_intrigue.209
	desc = EVTDESC_emf_intrigue_209
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_160 #It could have been worse...
		set_character_flag = abort_plot
	}
}

# Failure (discovered) - notify victim
character_event = {
	id = emf_intrigue.210
	desc = EVTDESC_emf_intrigue_210
	picture = GFX_evt_spymaster

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				has_plot = plot_fabricate_treason
				has_plot = plot_fabricate_treason_liege
			}
			plot_target_char = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_187 #How dare he!
		opinion = {
			who = FROM
			modifier = devious_plotter
			years = 10
		}
		hidden_tooltip = {
			# Notify plotter
			FROM = { character_event = { id = emf_intrigue.211 } }
		}
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.211
	desc = EVTDESC_emf_intrigue_211
	picture = GFX_evt_spymaster

	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_211 #My reputation is ruined!
		prestige = -100
		set_character_flag = abort_plot
	}
}

### KIDNAPPING

# Chance to kidnap victim arises
character_event = {
	id = emf_intrigue.150
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue	
	
	desc = {
		text = EVTDESC_emf_intrigue_150_transit
		trigger = { has_character_flag = kidnap_in_transit }
	}
	desc = {
		text = EVTDESC_emf_intrigue_150_bed
		trigger = { has_character_flag = kidnap_in_bed }
	}
	desc = {
		text = EVTDESC_emf_intrigue_150_hunting
		trigger = { has_character_flag = kidnap_while_hunting }
	}
	desc = {
		text = EVTDESC_emf_intrigue_150_carouse
		trigger = { has_character_flag = kidnap_while_carousing }
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	immediate = {
		random_list = {
			10 = {
				modifier = {
					factor = 0
					plot_target_char = {
						OR = {
							is_adult = no
							is_ill = yes
							trait = incapable
						}
					}
				}
				set_character_flag = kidnap_in_transit
			}
			10 = {
				modifier = {
					factor = 5
					plot_target_char = {
						OR = {
							trait = infirm
							age = 50
						}
					}
				}
				set_character_flag = kidnap_in_bed
			}
			10 = {
				modifier = {
					factor = 3
					plot_target_char = { martial = 10 }
				}
				modifier = {
					factor = 5
					plot_target_char = {
						OR = {
							trait = hunter
							has_focus = focus_hunting
						}
					}
				}
				modifier = {
					factor = 0
					plot_target_char = {
						OR = {
							is_adult = no
							is_ill = yes
							is_female = no
							trait = incapable
						}
					}
				}
				set_character_flag = kidnap_while_hunting
			}
			10 = {
				modifier = {
					factor = 5
					plot_target_char = {
						OR = {
							trait = hedonist
							trait = lustful
							has_focus = focus_seduction
						}
					}
				}
				modifier = {
					factor = 0
					plot_target_char = {
						OR = {
							is_adult = no
							is_ill = yes
							is_female = no
							trait = incapable
							trait = chaste
						}
					}
				}
				set_character_flag = kidnap_while_carousing
			}
		}
		plot_target_char = { save_event_target_as = kidnap_victim }
	}
	
	trigger = {
		OR = {
			has_plot = plot_kidnap_liege
			has_plot = plot_kidnapping
		}
		plot_power = 0.5
		plot_target_char = {
			in_command = no
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
		}
		NOT = { has_character_modifier = plot_in_action_timer }
		OR = {
			is_ruler = yes
			plot_target_char = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 200
		modifier = {
			factor = 0.75
			has_character_modifier = plot_assisted_spying
		}
		modifier = {
			factor = 0.60
			has_character_modifier = plot_assisted_spying2
		}
		modifier = {
			factor = 0.45
			has_character_modifier = plot_assisted_spying3
		}
		modifier = {
			factor = 0.30
			has_character_modifier = plot_assisted_spying4
		}
		modifier = {
			factor = 0.15
			has_character_modifier = plot_assisted_spying5
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
		}
		modifier = {
			factor = 1.1
			plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
		}
		modifier = {
			factor = 0.5
			trait = genius
		}
		modifier = {
			factor = 0.75
			OR = {
				trait = quick
				trait = shrewd
			}
		}
		modifier = {
			factor = 0.75
			plot_target_char = { trait = trusting }
		}
		modifier = {
			factor = 1.25
			plot_target_char = { trait = paranoid }
		}
		modifier = {
			factor = 0.75
			plot_target_char = {
				OR = {
					is_ill = yes
					trait = infirm
					is_dumb_trigger = yes
				}
			}
		}
		modifier = {
			factor = 0.65
			plot_power = 0.75
		}
		modifier = {
			factor = 0.65
			plot_power = 1.0
		}
		modifier = {
			factor = 0.65
			plot_power = 1.25
		}
		modifier = {
			factor = 0.65
			plot_power = 1.50
		}
		modifier = {
			factor = 0.65
			plot_power = 1.75
		}
		modifier = {
			factor = 0.65
			plot_power = 2.0
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_150 # Proceed
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.1
				NOR = {
					plot_power = 0.75
					trait = lunatic
					trait = possessed
				}
			}
		}
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 14
		}
		random_list = {
			20 = {
				modifier = {
					factor = 1.65
					plot_power = 1.0
					NOT = { plot_power = 1.5 }
				}
				modifier = {
					factor = 2.5
					plot_power = 1.5
					NOT = { plot_power = 2.0 }
				}
				modifier = {
					factor = 3.0
					plot_power = 2.0
					NOT = { plot_power = 2.5 }
				}
				modifier = {
					factor = 3.75
					plot_power = 2.5
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 2 } }
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 4 } }
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 6 } }
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 8 } }
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 10 } }
				}
				modifier = {
					factor = 0.5
					event_target:kidnap_victim = { trait = genius }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { trait = paranoid }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { is_strong_trigger = yes }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { trait = quick }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { trait = shrewd }
				}
				modifier = {
					factor = 1.2
					event_target:kidnap_victim = { trait = trusting }
				}
				modifier = {
					factor = 1.2
					event_target:kidnap_victim = { trait = lunatic }
				}
				modifier = {
					factor = 1.2
					event_target:kidnap_victim = { trait = drunkard }
				}
				modifier = {
					factor = 1.2
					event_target:kidnap_victim = { is_weak_trigger = yes }
				}
				modifier = {
					factor = 1.2
					event_target:kidnap_victim = {
						OR = {
							trait = infirm
							trait = incapable
							is_ill = yes
							is_adult = no
						}
					}
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { martial = 12 }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { martial = 18 }
				}
				modifier = {
					factor = 0.8
					event_target:kidnap_victim = { war = yes }
				}
				modifier = {
					factor = 0.75
					event_target:kidnap_victim = { higher_tier_than = DUKE }
				}
				modifier = {
					factor = 0.75
					event_target:kidnap_victim = { higher_tier_than = KING }
				}
				character_event = { id = emf_intrigue.215 tooltip = "CUSTOMTOOLTIP_KIDNAP1" days = 14 } #succeeds
			}
			30 = {
				modifier = {
					factor = 1.1
					plot_power = 1.0
					NOT = { plot_power = 1.5 }
				}
				modifier = {
					factor = 0.8
					plot_power = 1.5
					NOT = { plot_power = 2.0 }
				}
				modifier = {
					factor = 0.65
					plot_power = 2.0
					NOT = { plot_power = 2.5 }
				}
				modifier = {
					factor = 0.5
					plot_power = 2.5
				}
				modifier = {
					factor = 1.1
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 2 } }
				}
				modifier = {
					factor = 1.1
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 4 } }
				}
				modifier = {
					factor = 1.1
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 6 } }
				}
				modifier = {
					factor = 1.1
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 8 } }
				}
				modifier = {
					factor = 1.1
					event_target:kidnap_victim = { attribute_diff = { character = ROOT attribute = intrigue value = 10 } }
				}
				character_event = { id = emf_intrigue.229 tooltip = "CUSTOMTOOLTIP_KIDNAP2" days = 14 } #fails, not discovered
			}
			50 = {
				modifier = {
					factor = 0.68
					plot_power = 1.0
					NOT = { plot_power = 1.5 }
				}
				modifier = {
					factor = 0.5
					plot_power = 1.5
					NOT = { plot_power = 2.0 }
				}
				modifier = {
					factor = 0.4
					plot_power = 2.0
					NOT = { plot_power = 2.5 }
				}
				modifier = {
					factor = 0.2
					plot_power = 2.5
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = {
						ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 2 } }
					}
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = {
						ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 4 } }
					}
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = {
						ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 6 } }
					}
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = {
						ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 8 } }
					}
				}
				modifier = {
					factor = 0.9
					event_target:kidnap_victim = {
						ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 10 } }
					}
				}
				character_event = { id = emf_intrigue.231 tooltip = "CUSTOMTOOLTIP_KIDNAP3" days = 14 } #fails, discovered
			}
		}
		hidden_tooltip = {
			any_plot_backer = { letter_event = { id = emf_intrigue.152 days = 4 } } #notify backers
		}	
	}
	option = {
		name = EVTOPTB_emf_intrigue_150 # Wait for a better opportunity
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				plot_power = 1.25
			}
		}
		clr_character_flag = kidnap_in_transit
		clr_character_flag = kidnap_in_bed
		clr_character_flag = kidnap_while_hunting
		clr_character_flag = kidnap_while_carousing
	}
}

# A plot backer sees the opportunity to kidnap victim
character_event = {
	id = emf_intrigue.151
	desc = EVTDESC_emf_intrigue_151
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		any_backed_character = {
			OR = {
				has_plot = plot_kidnapping
				has_plot = plot_kidnap_liege
			}
			plot_power = 0.5
			plot_target_char = {
				at_location = ROOT
				in_command = no
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
			}
			NOT = { has_character_modifier = plot_in_action_timer }
			ROOT = { plot_power_contribution = { plotter = PREV power = 0.04 } }
			OR = {
				is_ruler = yes
				plot_target_char = {
					any_demesne_title = {
						can_be_given_away = yes
						tier = COUNT
						location = { is_capital = no }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 750
		modifier = {
			factor = 0.75
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				has_character_modifier = plot_assisted_spying
			}
		}
		modifier = {
			factor = 0.65
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				has_character_modifier = plot_assisted_spying2
			}
		}
		modifier = {
			factor = 0.55
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				has_character_modifier = plot_assisted_spying3
			}
		}
		modifier = {
			factor = 0.45
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				has_character_modifier = plot_assisted_spying4
			}
		}
		modifier = {
			factor = 0.35
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				has_character_modifier = plot_assisted_spying5
			}
		}
		modifier = {
			factor = 1.1
			any_backed_character = {
				plot_target_char = { check_variable = { which = "personal_spy_network" value = 10 } }
			}
		}
		modifier = {
			factor = 1.1
			any_backed_character = {
				plot_target_char = { check_variable = { which = "personal_spy_network" value = 20 } }
			}
		}
		modifier = {
			factor = 1.1
			any_backed_character = {
				plot_target_char = { check_variable = { which = "personal_spy_network" value = 30 } }
			}
		}
		modifier = {
			factor = 1.1
			any_backed_character = {
				plot_target_char = { check_variable = { which = "personal_spy_network" value = 40 } }
			}
		}
		modifier = {
			factor = 1.1
			any_backed_character = {
				plot_target_char = { check_variable = { which = "personal_spy_network" value = 50 } }
			}
		}
		modifier = {
			factor = 0.8
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.1 } }
			}
		}
		modifier = {
			factor = 0.8
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.2 } }
			}
		}
		modifier = {
			factor = 0.8
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.3 } }
			}
		}
		modifier = {
			factor = 0.8
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.4 } }
			}
		}
		modifier = {
			factor = 0.8
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.5 } }
			}
		}
		modifier = {
			factor = 0.66
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 1.0
			}
		}
		modifier = {
			factor = 0.66
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 1.5
			}
		}
		modifier = {
			factor = 0.66
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 2.0
			}
		}
		modifier = {
			factor = 0.66
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 2.5
			}
		}
		modifier = {
			factor = 0.66
			any_backed_character = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 3
			}
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_151 # Tell Plotter
		random_backed_character = {
			limit = {
				OR = {
					has_plot = plot_kidnapping
					has_plot = plot_kidnap_liege
				}
				plot_power = 0.5
				plot_target_char = {
					at_location = ROOT
					in_command = no
					prisoner = no
					NOT = { is_inaccessible_trigger = yes }
				}
				NOT = { has_character_modifier = plot_in_action_timer }
				ROOT = { plot_power_contribution = { plotter = PREV power = 0.04 } }
			}
			character_event = { id = emf_intrigue.150 }
		}
	}
}

# Notify plot backers of kidnap attempt
letter_event = {
	id = emf_intrigue.152
	desc = EVTDESC_emf_intrigue_152
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}

# Success - notify plotter
character_event = {
	id = emf_intrigue.215
	desc = EVTDESC_emf_intrigue_215
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		OR = {
			has_plot = plot_kidnap_liege
			has_plot = plot_kidnapping
		}
		event_target:kidnap_victim = {
			prisoner = no
			is_alive = yes
			is_plot_target_of = ROOT
		}
	}
	
	immediate = {
		plot_succeeds = yes
		if = {
			limit = { is_ruler = no }
			event_target:kidnap_victim = {
				random_demesne_title = {
					limit = {
						can_be_given_away = yes
						tier = COUNT
						location = { is_capital = no }
						ROOT = { has_strong_claim = PREV }
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						can_be_given_away = yes
						tier = COUNT
						location = { is_capital = no }
						claimed_by = ROOT
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						can_be_given_away = yes
						tier = COUNT
						location = { is_capital = no }
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = { is_capital = no }
					}
					save_event_target_as = demanded_title
					break = yes
				}
			}
		}
		if = {
			limit = {
				is_ruler = yes
				independent = no
				event_target:kidnap_victim = { same_liege = ROOT }
			}
			event_target:kidnap_victim = {
				random_vassal = {
					limit = {
						lower_tier_than = ROOT
						higher_tier_than = BARON
						de_jure_liege = ROOT
						is_patrician = no
					}
					save_event_target_as = demanded_vassal
				}
				if = {
					limit = {
						NOT = {
							any_vassal = {
								lower_tier_than = ROOT
								higher_tier_than = BARON
								de_jure_liege = ROOT
								is_patrician = no
							}
						}
					}
					random_vassal = {
						limit = {
							lower_tier_than = ROOT
							higher_tier_than = BARON
							dejure_liege_title = { claimed_by = ROOT }
							is_patrician = no
						}
						save_event_target_as = demanded_vassal
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						ROOT = { has_strong_claim = PREV }
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						claimed_by = ROOT
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						de_jure_liege_or_above = ROOT
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						dejure_liege_title = { claimed_by = ROOT }
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = BARON
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						ROOT = { has_strong_claim = PREV }
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = BARON
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						claimed_by = ROOT
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = BARON
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						de_jure_liege_or_above = ROOT
					}
					save_event_target_as = demanded_title
					break = yes
				}
				random_demesne_title = {
					limit = {
						tier = BARON
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						dejure_liege_title = { claimed_by = ROOT }
					}
					save_event_target_as = demanded_title
					break = yes
				}
			}
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_215 # Demand he turn over title, or else
		trigger = {
			event_target:demanded_title = { always = yes }
		}
		ai_chance = { factor = 100 }
		event_target:kidnap_victim = {
			character_event = { id = emf_intrigue.218 tooltip = KIDNAP_DEMAND_TITLE }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_215 # Demand he turn over a vassal, or else
		trigger = {
			is_ruler = yes
			event_target:demanded_vassal = { always = yes }
		}
		ai_chance = { factor = 25 }
		event_target:kidnap_victim = {
			character_event = { id = emf_intrigue.225 tooltip = KIDNAP_DEMAND_VASSAL }
		}
	}
	option = {
		name = EVTOPTD_emf_intrigue_215 # Kill him--quietly
		trigger = { ai = no }
		tooltip = { event_target:kidnap_victim = { death = { death_reason = death_murder_unknown } } }
		if = {
			limit = {
				NOT = { trait = honest }
				NOT = { trait = deceitful }
			}
			add_trait = deceitful
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = {
				NOT = { trait = kind }
				NOT = { trait = cruel }
			}
			add_trait = cruel
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		ROOT = {
			random_list = {
				50 = {
					modifier = {
						factor = 0
						event_target:kidnap_victim = { job_spymaster = { character = ROOT } }
					}
					modifier = {
						factor = 0
						event_target:kidnap_victim = {
							OR = {
								is_ruler = no
								NOT = { any_courtier = { has_job_title = job_spymaster } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 1 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 3 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 5 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 7 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 9 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 11 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 13 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 15 } }
							}
						}
					}
					character_event = { id = emf_intrigue.223 tooltip = KIDNAP_MURDER_DISCOVERED }
					hidden_tooltip = {
						event_target:kidnap_victim = { save_event_target_as = target_victim }
						character_event = { id = 10 }
						event_target:kidnap_victim = { death = { death_reason = death_murder killer = ROOT } }
					}
				}
				50 = {
					modifier = {
						factor = 0
						event_target:kidnap_victim = {
							OR = {
								liege = { job_spymaster = { character = ROOT } }
								liege = { character = ROOT }
							}
						}
					}
					modifier = {
						factor = 0
						event_target:kidnap_victim = { is_ruler = yes }
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 1 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 3 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 5 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 7 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 9 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 11 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 13 } }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								job_spymaster = {
									ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 15 } }
								}
							}
						}
					}
					character_event = { id = emf_intrigue.223 tooltip = KIDNAP_MURDER_DISCOVERED2 }
					hidden_tooltip = {
						event_target:kidnap_victim = { save_event_target_as = target_victim }
						character_event = { id = 10 }
						event_target:kidnap_victim = { death = { death_reason = death_murder killer = ROOT } }
					}
				}
				50 = {
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 1 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 3 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 5 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 7 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 9 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 11 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 13 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 15 }
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								NOT = { character = ROOT }
								job_spymaster = {
									attribute_diff = { character = ROOT attribute = intrigue value = 1 }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								NOT = { character = ROOT }
								job_spymaster = {
									attribute_diff = { character = ROOT attribute = intrigue value = 3 }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								NOT = { character = ROOT }
								job_spymaster = {
									attribute_diff = { character = ROOT attribute = intrigue value = 5 }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								NOT = { character = ROOT }
								job_spymaster = {
									attribute_diff = { character = ROOT attribute = intrigue value = 7 }
								}
							}
						}
					}
					modifier = {
						factor = 0.8
						event_target:kidnap_victim = {
							liege = {
								NOT = { character = ROOT }
								job_spymaster = {
									attribute_diff = { character = ROOT attribute = intrigue value = 9 }
								}
							}
						}
					}
					custom_tooltip = { text = KIDNAP_MURDER_NOT_DISCOVERED }
					hidden_tooltip = {
						event_target:kidnap_victim = { death = { death_reason = death_murder_unknown } }
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_215 # I'll decide later
		trigger = { is_ruler = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					event_target:demanded_title = { always = yes }
					event_target:demanded_vassal = { always = yes }
				}
			}
		}
		event_target:kidnap_victim = {
			tooltip = { imprison = ROOT }
			hidden_tooltip = { character_event = { id = emf_intrigue.216 } }
		}
	}
}

# Target informed he has been kidnapped
character_event = {
	id = emf_intrigue.216
	desc = EVTDESC_emf_intrigue_216
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_216 # He will pay for this!
		imprison = FROM
		hidden_tooltip = {
			opinion = { who = FROM modifier = opinion_kidnapper months = 1200 }
			any_character = {
				limit = { is_close_relative = ROOT }
				opinion = { who = FROM modifier = opinion_kidnapped_kin months = 600 }
			}
			any_character = {
				limit = {
					NOT = { character = ROOT }
					OR = {
						dynasty = ROOT
						is_close_relative = ROOT
						is_liege_or_above = ROOT
						is_vassal_or_below = ROOT
					}
				}
				character_event = { id = emf_intrigue.217 days = 1 } # Notify
			}
		}
	}
}

# Realm learns of kidnapping
character_event = {
	id = emf_intrigue.217
	desc = EVTDESC_emf_intrigue_217
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = { ai = no }
	
	option = {
		name = I_SEE
	}
}
	
# Target informed of kidnapping - title demanded
character_event = {
	id = emf_intrigue.218
	desc = EVTDESC_emf_intrigue_218
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes	
	
	option = {
		name = EVTOPTA_emf_intrigue_218 # Take the title, just release me!
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.1
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				NOT = { age = 30 }
				health = 3
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 3
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 4
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 5
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 6
			}
		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
			}
			random = {
				chance = 33
				add_trait = craven
			}
		}
		if = {
			limit = { trait = brave }
			remove_trait = brave
		}
		if = {
			limit = { FROM = { is_ruler = no } }
			FROM = { set_character_flag = needs_liege }
		}	
		event_target:demanded_title = {
			grant_title_no_opinion = FROM
			add_weak_pressed_claim = ROOT
		}
		if = {
			limit = {
				independent = no
				lower_real_tier_than = DUKE
				FROM = { has_character_flag = needs_liege }
			}
			liege = {
				FROM = {
					clr_character_flag = needs_liege
					set_defacto_liege = PREV
					emf_liege_change_effect = yes
				}
			}
		}
		custom_tooltip = { text = KIDNAP_IS_SET_FREE }
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.219 } }
			top_liege = {
				character_event = { id = emf_intrigue.220 days = 1 } #notify
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						is_ruler = yes
					}
					character_event = { id = emf_intrigue.220 days = 1 } #notify
				}
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_218 # You'll get nothing from me!
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.5
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_denied_title }
			}
			modifier = {
				factor = 0.25
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise }
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				NOT = { health = 3 }
			}
		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
			}
			random = {
				chance = 33
				add_trait = brave
			}
		}
		if = {
			limit = { trait = craven }
			remove_trait = craven
		}
		FROM = { character_event = { id = emf_intrigue.221 tooltip = KIDNAP_DECIDE } }
	}
}

# Kidnapper is granted the demanded title
character_event = {
	id = emf_intrigue.219
	desc = EVTDESC_emf_intrigue_219
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes	

	option = {
		name = EXCELLENT
		FROM = { opinion = { who = ROOT modifier = kidnapped_me months = 120 } }
		hidden_tooltip = {
			remove_opinion = { who = FROM modifier = opinion_denied_title }
			remove_opinion = { who = FROM modifier = opinion_broken_title_promise }
		}
	}
}

# Realm is told of granted title
character_event = {
	id = emf_intrigue.220
	desc = EVTDESC_emf_intrigue_220
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	show_from_from = yes
	
	trigger = { ai = no }
	
	option = {
		name = I_SEE
	}
}

# Kidnapper told his demand is refused
character_event = {
	id = emf_intrigue.221
	desc = EVTDESC_emf_intrigue_221
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_221 # Then he stays in the dungeon
		trigger = { is_ruler = yes }
		ai_chance = {
			factor = 50
		}
		FROM = {
			tooltip = { imprison = ROOT }
			hidden_tooltip = { character_event = { id = emf_intrigue.222 } }
		}		
	}
	option = {
		name = EVTOPTB_emf_intrigue_221 # Kill him--quietly
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				is_close_relative = FROM
				NOR = {
					trait = cruel
					trait = wroth
				}
			}
			modifier = {
				factor = 0.1
				NOR = {
					trait = cruel
					trait = arbitrary
					trait = wroth
					trait = proud
					trait = impaler
				}
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = wroth
			}
		}
		tooltip = { FROM = { death = { death_reason = death_murder_unknown } } }
		if = {
			limit = {
				NOT = { trait = honest }
				NOT = { trait = deceitful }
			}
			random = {
				chance = 50
				add_trait = deceitful
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		if = {
			limit = {
				NOT = { trait = kind }
				NOT = { trait = cruel }
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		ROOT = {
			random_list = {
				70 = {
					modifier = {
						factor = 0
						FROM = { job_spymaster = { character = ROOT } }
					}
					modifier = {
						factor = 0
						FROM = {
							OR = {
								is_ruler = no
								NOT = { any_courtier = { has_job_title = job_spymaster } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 1 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 3 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 5 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 7 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 9 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 11 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 13 } }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								ROOT = { attribute_diff = { character = PREV attribute = intrigue value = 15 } }
							}
						}
					}
					character_event = { id = emf_intrigue.223 tooltip = KIDNAP_MURDER_DISCOVERED }
					hidden_tooltip = {
						FROM = { save_event_target_as = target_victim }
						character_event = { id = 10 }
						FROM = { death = { death_reason = death_murder killer = ROOT } }
					}
				}
				30 = {
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 1 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 3 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 5 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 7 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 9 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 11 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 13 }
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM = {
							job_spymaster = {
								attribute_diff = { character = ROOT attribute = intrigue value = 15 }
							}
						}
					}
					custom_tooltip = { text = KIDNAP_MURDER_NOT_DISCOVERED }
					hidden_tooltip = {
						FROM = { death = { death_reason = death_murder_unknown } }
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_221 # Just let him go, dammit
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				is_ruler = yes
			}
			modifier = {
				factor = 0.5
				FROM = {
					job_spymaster = {
						NOT = { attribute_diff = { character = ROOT attribute = intrigue value = 1 } }
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					job_spymaster = {
						ROOT = {
							attribute_diff = { character = PREV attribute = intrigue value = 5 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				is_ruler = no
				is_liege_or_above = FROM
			}
			banish = yes
		}
		FROM = {
			character_event = { id = emf_intrigue.224 tooltip = KIDNAP_RELEASED }
		}
	}
}
	
# Kidnapper keeps target in the dungeon after refusal
character_event = {
	id = emf_intrigue.222
	desc = EVTDESC_emf_intrigue_222
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_216 # He will pay for this!
		imprison = FROM
		hidden_tooltip = {
			opinion = { who = FROM modifier = opinion_kidnapper months = 1200 }
			any_character = {
				limit = { is_close_relative = ROOT }
				opinion = { who = FROM modifier = opinion_kidnapped_kin months = 600 }
			}
			any_character = {
				limit = {
					NOT = { character = ROOT }
					OR = {
						dynasty = ROOT
						is_close_relative = ROOT
						is_liege_or_above = ROOT
						is_vassal_or_below = ROOT
					}
				}
				character_event = { id = emf_intrigue.217 days = 1 } # Notify
			}
		}
	}
}

# Kidnapper's murder of target is discovered
character_event = {
	id = emf_intrigue.223
	desc = EVTDESC_emf_intrigue_223
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = FROM
			is_close_relative = FROMFROM
			dynasty = FROMFROM
			same_realm = FROMFROM
			same_realm = FROM
		}
	}
	
	option = {
		trigger = { character = FROM }
		name = CURSES
	}
	option = {
		trigger = { NOT = { character = FROM } }
		name = I_SEE
	}
}

# Kidnapper releases target
character_event = {
	id = emf_intrigue.224
	desc = EVTDESC_emf_intrigue_224
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_224
		hidden_tooltip = {
			opinion = { who = FROM modifier = attempted_kidnapping months = 600 }
			opinion = { who = FROM modifier = opinion_relieved multiplier = 2 months = 600 }
			any_character = {
				limit = { is_close_relative = ROOT }
				opinion = { who = FROM modifier = attempted_kidnapping_of_kin months = 300 }
			}
		}
	}
}

# Target informed of kidnapping - vassal demanded
character_event = {
	id = emf_intrigue.225
	desc = EVTDESC_emf_intrigue_225
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes	
	
	option = {
		name = EVTOPTA_emf_intrigue_225 # Take the vassal, just release me!
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.1
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				NOT = { age = 30 }
				health = 3
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 3
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 4
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 5
			}
			modifier = {
				factor = 0.75
				num_of_count_titles = 6
			}
		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
			}
			random = {
				chance = 33
				add_trait = craven
			}
		}
		if = {
			limit = { trait = brave }
			remove_trait = brave
		}
		event_target:demanded_vassal = {
			set_defacto_liege = FROM
			emf_liege_change_effect = yes
			hidden_tooltip = { letter_event = { id = emf_intrigue.226 days = 1 } }
		}
		custom_tooltip = { text = KIDNAP_IS_SET_FREE }
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.227 } }
			top_liege = {
				character_event = { id = emf_intrigue.228 days = 1 } #notify
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						NOT = { character = event_target:demanded_vassal }
						is_ruler = yes
					}
					character_event = { id = emf_intrigue.228 days = 1 } #notify
				}
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_218 # You'll get nothing from me!
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				NOT = { health = 3 }
			}
		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
			}
			random = {
				chance = 33
				add_trait = brave
			}
		}
		if = {
			limit = { trait = craven }
			remove_trait = craven
		}
		FROM = { character_event = { id = emf_intrigue.221 tooltip = KIDNAP_DECIDE } }
	}
}	

# Vassal informed they have been transferred to the kidnapper
letter_event = {
	id = emf_intrigue.226
	desc = EVTDESC_emf_intrigue_226
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes		
	
	option = {
		name = I_SEE
	}
}

# Kidnapper is granted the demanded title
character_event = {
	id = emf_intrigue.227
	desc = EVTDESC_emf_intrigue_227
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes	

	option = {
		name = EXCELLENT
		FROM = { opinion = { who = ROOT modifier = kidnapped_me months = 120 } }
	}
}

# Realm is told of granted vassal
character_event = {
	id = emf_intrigue.228
	desc = EVTDESC_emf_intrigue_228
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = { ai = no }
	
	option = {
		name = I_SEE
	}
}

# Failure (not discovered) - notify plotter
character_event = {
	id = emf_intrigue.229
	desc = EVTDESC_emf_intrigue_229
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		OR = {
			has_plot = plot_kidnap_liege
			has_plot = plot_kidnapping
		}
		event_target:kidnap_victim = {
			prisoner = no
			is_alive = yes
			is_plot_target_of = ROOT
		}
	}
	
	option = {
		name = CURSES
		hidden_tooltip = {
			event_target:kidnap_victim = { character_event = { id = emf_intrigue.230 } }
		}
		set_character_flag = abort_plot
	}
}

# Failure (not discovered) - notify target
character_event = {
	id = emf_intrigue.230
	desc = EVTDESC_emf_intrigue_230
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_230
	}
}

# Failure (discovered) - notify plotter
character_event = {
	id = emf_intrigue.231
	desc = EVTDESC_emf_intrigue_231
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		OR = {
			has_plot = plot_kidnap_liege
			has_plot = plot_kidnapping
		}
		event_target:kidnap_victim = {
			prisoner = no
			is_alive = yes
			is_plot_target_of = ROOT
		}
	}
	
	option = {
		name = CURSES
		piety = -50
		if = {
			limit = {
				event_target:kidnap_victim = {
					any_courtier = { has_job_title = job_spymaster }
				}
			}
			reveal_plot_w_message = yes
		}
		if = {
			limit = {
				event_target:kidnap_victim = {
					NOT = {
						any_courtier = { has_job_title = job_spymaster }
					}
				}
			}
			reveal_plot = yes
		}
		event_target:kidnap_victim = {
			hidden_tooltip = { character_event = { id = emf_intrigue.232 } }
			if = {
				limit = {
					independent = no
					liege = { is_close_relative = FROM }
					liege = { NOT = { character = ROOT } }
				}
				liege = {
					opinion = {
						who = ROOT
						modifier = attempted_kidnapping_of_kin
						months = 60
					}
				}
			}
			if = {
				limit = {
					independent = no
					is_ruler = yes
					liege = { NOT = { is_close_relative = FROM } }
					liege = { NOT = { character = ROOT } }
				}
				liege = {
					opinion = {
						who = ROOT
						modifier = attempted_kidnapping_of_vassal
						months = 60
					}
				}
			}
		}
		set_character_flag = abort_plot
	}
}

# Failure (discovered) - notify target
character_event = {
	id = emf_intrigue.232
	desc = EVTDESC_emf_intrigue_232
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_216
		hidden_tooltip = {
			opinion = { who = FROM modifier = attempted_kidnapping months = 1200 }
			any_character = {
				limit = { is_close_relative = ROOT }
				opinion = { who = FROM modifier = attempted_kidnapping_of_kin months = 600 }
			}
		}
	}
}

### REPLACE REGENT

# Should I abandon my current plot to become regent?
character_event = {
	id = emf_intrigue.260
	desc = AI_EVENT
	picture = GFX_evt_council
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	
	trigger = {
		ai = yes
		independent = no
		liege = {
			has_regent = yes
			any_courtier = { character = ROOT }
			OR = {
				is_adult = no
				trait = incapable
			}
			OR = {
				is_married = ROOT
				is_lover = ROOT
				is_close_relative = ROOT
				current_heir = { character = ROOT }
				ROOT = { is_councillor = yes }
			}
			OR = {
				ROOT = { is_female = no }
				is_married = ROOT
				is_child_of = ROOT
				current_heir = { character = ROOT }
				ROOT = { is_councillor = yes }
				primary_title = {
					NOR = {
						has_law = agnatic_succession
						has_law = cognatic_succession
					}
				}
			}
			NOR = {
				regent = { ROOT = { plot_target_char = { character = PREVPREV } } }
				ROOT = { plot_target_char = { character = PREVPREV } }
			}
		}
		NOR = {
			trait = content
			trait = humble
			is_dumb_trigger = yes
			is_inaccessible_trigger = yes
			has_minor_title = title_regent
			has_character_modifier = replace_regent_timer
		}
		OR = {
			NOT = { has_character_flag = replace_regent_check }
			had_character_flag = { flag = replace_regent_check days = 1825 }
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		set_character_flag = replace_regent_check
	}
	
	option = {
		name = AI_EVENT # Do it
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.5
				OR = {
					has_plot = plot_kill_character
					has_plot = plot_kill_spouse
					has_plot = plot_take_revenge
				}
			}
			modifier = {
				factor = 0.5
				NOT = { intrigue = 8 }
			}
			modifier = {
				factor = 0.5
				NOT = { intrigue = 4 }
			}
		}
		set_character_flag = abort_plot
	}
	option = {
		name = AI_EVENT # Never mind
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOT = { num_of_plot_backers = 1 }
			}
			modifier = {
				factor = 0
				intrigue = 12
			}
		}
	}
}

# Someone starts to become aware of my plot to replace the regent
character_event = {
	id = emf_intrigue.261
	
	hide_window = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes

	trigger = {
		has_plot = plot_replace_regent
		liege = {
			NOT = { any_known_plotter = { character = ROOT } }
			OR = {
				regent = {
					NOT = { any_known_plotter = { character = ROOT } }
				}
				any_courtier = {
					has_plot = plot_replace_regent
					NOT = { character = ROOT }
					NOT = { any_known_plotter = { character = ROOT } }
				}
			}
		}
		OR = {
			NOT = { has_character_flag = replace_regent_plot_discovery }
			had_character_flag = { flag = replace_regent_plot_discovery days = 90 }
		}
	}
	
	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 1.5
			OR = {
				trait = quick
				trait = shrewd
			}
		}
		modifier = {
			factor = 2
			trait = genius
		}
		modifier = {
			factor = 1.5
			liege = { is_close_relative = ROOT }
		}
		modifier = {
			factor = 0.75
			liege = { NOT = { is_close_relative = ROOT } }
		}
		modifier = {
			factor = 1.5
			NOT = {
				liege = {
					any_courtier = {
						has_plot = plot_replace_regent
						count = 2
					}
				}
			}
		}
		modifier = {
			factor = 0.8
			liege = {
				any_courtier = {
					has_plot = plot_replace_regent
					count = 2
				}
			}
		}
		modifier = {
			factor = 0.8
			liege = {
				any_courtier = {
					has_plot = plot_replace_regent
					count = 3
				}
			}
		}
		modifier = {
			factor = 0.8
			liege = {
				any_courtier = {
					has_plot = plot_replace_regent
					count = 4
				}
			}
		}
		modifier = {
			factor = 0.8
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 0.8
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.8
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 1.2
			intrigue = 12
		}
		modifier = {
			factor = 1.2
			intrigue = 14
		}
		modifier = {
			factor = 1.2
			intrigue = 16
		}
		modifier = {
			factor = 1.2
			intrigue = 18
		}
		modifier = {
			factor = 1.2
			intrigue = 20
		}
	}
	
	immediate = {
		set_character_flag = replace_regent_plot_discovery
		if = {
			limit = {
				liege = {
					any_courtier = {
						NOT = { character = ROOT }
						NOT = { any_known_plotter = { character = ROOT } }
						has_plot = plot_replace_regent
					}
				}
			}
			if = {
				limit = {
					liege = {
						regent = { any_known_plotter = { character = ROOT } }
					}
				}
				liege = {
					random_courtier = {
						limit = {
							NOT = { character = ROOT }
							NOT = { any_known_plotter = { character = ROOT } }
							has_plot = plot_replace_regent
						}
						character_event = { id = emf_intrigue.262 }
					}
				}
				break = yes
			}
			random = {
				chance = 50
				liege = {
					random_courtier = {
						limit = {
							NOT = { character = ROOT }
							NOT = { any_known_plotter = { character = ROOT } }
							has_plot = plot_replace_regent
						}
						character_event = { id = emf_intrigue.262 }
					}
				}
				break = yes
			}
		}
		liege = {
			regent = {
				character_event = { id = emf_intrigue.262 }
			}
		}
	}
}
	
# Do we try to block the plotter?
character_event = {
	id = emf_intrigue.262
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESC_emf_intrigue_262A
		trigger = { has_minor_title = title_regent }
	}
	desc = {
		text = EVTDESC_emf_intrigue_262B
		trigger = { NOT = { has_minor_title = title_regent } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_262 # We have to stop them
		ai_chance = { factor = 100 }
		random_list = {
			50 = {
				modifier = {
					factor = 1.5
					has_minor_title = title_regent
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = quick
						trait = shrewd
					}
				}
				modifier = {
					factor = 2.0
					trait = genius
				}
				modifier = {
					factor = 1.2
					attribute_diff = { attribute = intrigue character = FROM value = 2 }
				}
				modifier = {
					factor = 1.2
					attribute_diff = { attribute = intrigue character = FROM value = 4 }
				}
				modifier = {
					factor = 1.2
					attribute_diff = { attribute = intrigue character = FROM value = 6 }
				}
				modifier = {
					factor = 1.2
					attribute_diff = { attribute = intrigue character = FROM value = 8 }
				}
				modifier = {
					factor = 1.2
					attribute_diff = { attribute = intrigue character = FROM value = 10 }
				}
				modifier = {
					factor = 0.9
					FROM = { plot_power = 1.0 }
				}
				modifier = {
					factor = 0.9
					FROM = { plot_power = 1.25 }
				}
				modifier = {
					factor = 0.9
					FROM = { plot_power = 1.5 }
				}
				modifier = {
					factor = 0.9
					FROM = { plot_power = 1.75 }
				}
				modifier = {
					factor = 0.9
					FROM = { plot_power = 2.0 }
				}
				FROM = { character_event = { id = emf_intrigue.263 tooltip = REGENT_PLOT_BLOCKED } }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.264 }
					liege = { character_event = { id = emf_intrigue.268 } }
				}
			}
			50 = {
				modifier = {
					factor = 0.5
					liege = {
						OR = {
							is_close_relative = FROM
							is_close_relative = ROOT
						}
					}
				}
				FROM = { custom_tooltip = { text = REGENT_PLOT_NOTHING } }
				hidden_tooltip = { character_event = { id = emf_intrigue.265 } }
			}
			30 = {
				modifier = {
					factor = 1.5
					OR = {
						FROM = { trait = quick }
						FROM = { trait = shrewd }
						trait = slow
						trait = dull
					}
				}
				modifier = {
					factor = 2.0
					OR = {
						FROM = { trait = genius }
						trait = imbecile
					}
				}
				modifier = {
					factor = 1.5
					is_ill = yes
				}
				modifier = {
					factor = 1.2
					FROM = { attribute_diff = { attribute = intrigue character = ROOT value = 2 } }
				}
				modifier = {
					factor = 1.2
					FROM = { attribute_diff = { attribute = intrigue character = ROOT value = 4 } }
				}
				modifier = {
					factor = 1.2
					FROM = { attribute_diff = { attribute = intrigue character = ROOT value = 6 } }
				}
				modifier = {
					factor = 1.2
					FROM = { attribute_diff = { attribute = intrigue character = ROOT value = 8 } }
				}
				modifier = {
					factor = 1.2
					FROM = { attribute_diff = { attribute = intrigue character = ROOT value = 10 } }
				}
				FROM = { character_event = { id = emf_intrigue.266 tooltip = REGENT_PLOT_WORSE } }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.267 }
					liege = { character_event = { id = emf_intrigue.269 } }
				}
			}
		}
	}
	option = {
		ai_chance = { factor = 0 }
		name = EVTOPTB_emf_intrigue_262 # I don't want to make things worse
	}
}

# Plot to replace the regent has been blocked
character_event = {
	id = emf_intrigue.263
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESC_emf_intrigue_263A
		trigger = { FROM = { has_minor_title = title_regent } }
	}
	desc = {
		text = EVTDESC_emf_intrigue_263B
		trigger = { FROM = { NOT = { has_minor_title = title_regent } } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		set_character_flag = abort_plot
	}
}

# Informed that their plan to block the plotter was successful
character_event = {
	id = emf_intrigue.264
	desc = EVTDESC_emf_intrigue_264
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	show_from_from = yes
	
	trigger = { ai = no }
	
	option = {
		name = EXCELLENT
	}
}

# Informed that their plan to block the plotter did nothing
character_event = {
	id = emf_intrigue.265
	desc = EVTDESC_emf_intrigue_265
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	show_from_from = yes
	
	trigger = { ai = no }
	
	option = {
		name = CURSES
	}
}

# Plot to replace the regent has been made more successful
character_event = {
	id = emf_intrigue.266
	desc = EVTDESC_emf_intrigue_266
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		set_character_flag = speed_up_replace_regent
		liege = {
			random_courtier = {
				limit = {
					opinion = { who = ROOT value = 0 }
					is_adult = yes
					prisoner = no
					NOR = {
						trait = incapable
						has_plot = plot_replace_regent
						ROOT = { any_plot_backer = { character = PREVPREV } }
					}
				}
				opinion = { who = ROOT modifier = opinion_grateful years = 1 }
				liege = {
					regent = {
						reverse_opinion = { who = PREVPREV modifier = opinion_irritated multiplier = 2 years = 1 }
					}
				}
			}
		}
	}
}

# Informed that their plan to block the plotter made things worse
character_event = {
	id = emf_intrigue.267
	desc = EVTDESC_emf_intrigue_267
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	show_from_from = yes
	
	trigger = { ai = no }
	
	option = {
		name = CURSES
	}
}

# Liege informed of plot being blocked
character_event = {
	id = emf_intrigue.268
	desc = EVTDESC_emf_intrigue_268
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		prisoner = no
	}
	
	option = {
		name = OK
	}
}

# Liege informed of plot being made worse
character_event = {
	id = emf_intrigue.269
	desc = EVTDESC_emf_intrigue_269
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	show_from_from = yes
	
	trigger = {
		ai = no
		prisoner = no
	}
	
	option = {
		name = OK
	}
}

### USURP INCAPABLE LIEGE

# Opportunity to seize the throne arises
character_event = {
	id = emf_intrigue.270
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESC_emf_intrigue_270A
		trigger = {
			liege = {
				current_heir = { character = ROOT }
			}
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_270B
		trigger = {
			liege = {
				NOT = { current_heir = { character = ROOT } }
				OR = {
					is_married = ROOT
					is_child_of = ROOT
					sibling = ROOT
				}
			}
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_270C
		trigger = {
			liege = {
				NOR = {
					current_heir = { character = ROOT }
					is_married = ROOT
					is_child_of = ROOT
					sibling = ROOT
				}
			}
		}
	}

	min_age = 16
	capable_only = yes
	prisoner = no
	is_part_of_plot = yes
	war = no
	
	trigger = {
		has_plot = plot_incapable_usurp
		plot_power = 2.0
		num_of_plot_backers = 3
		in_command = no
		is_ill = no
		plot_target_char = {
			war = no
			is_liege_of = ROOT
			trait = incapable
			regent = { character = ROOT }
		}
		NOR = {
			is_inaccessible_trigger = yes
			has_character_modifier = plot_in_action_timer
		}
	}
	
	mean_time_to_happen = {
		months = 60
		modifier = {
			factor = 0.1
			liege = { current_heir = { character = ROOT } }
		}
		modifier = {
			factor = 0.5
			liege = {
				NOT = { current_heir = { character = ROOT } }
				OR = {
					is_married = ROOT
					is_child_of = ROOT
					sibling = ROOT
				}
			}
		}
		modifier = {
			factor = 1.5
			liege = {
				NOR = {
					current_heir = { character = ROOT }
					is_married = ROOT
					is_child_of = ROOT
					sibling = ROOT
					dynasty = ROOT
				}
			}
		}
		modifier = {
			factor = 0.9
			intrigue = 12
		}
		modifier = {
			factor = 0.9
			intrigue = 14
		}
		modifier = {
			factor = 0.9
			intrigue = 16
		}
		modifier = {
			factor = 0.9
			intrigue = 18
		}
		modifier = {
			factor = 0.9
			intrigue = 20
		}
		modifier = {
			factor = 1.2
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 1.2
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 1.2
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 1.2
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 0.9
			plot_power = 2.25
		}
		modifier = {
			factor = 0.9
			plot_power = 2.5
		}
		modifier = {
			factor = 0.9
			plot_power = 2.75
		}
		modifier = {
			factor = 0.9
			plot_power = 3.0
		}
		modifier = {
			factor = 0.9
			plot_power = 3.25
		}
		modifier = {
			factor = 0.9
			plot_power = 3.5
		}
		modifier = {
			factor = 0.9
			plot_power = 3.75
		}
		modifier = {
			factor = 0.9
			plot_power = 4.0
		}
	}

	option = {
		name = EVTOPTA_emf_intrigue_270 # Do it
		ai_chance = { factor = 100 }
		add_character_modifier = {
			name = plot_in_action_timer
			hidden = yes
			duration = 7
		}
		random_list = {
			50 = {
				modifier = {
					factor = 1.5
					trait = genius
				}
				modifier = {
					factor = 1.25
					OR = {
						trait = quick
						trait = shrewd
					}
				}
				modifier = {
					factor = 0.75
					OR = {
						trait = slow
						trait = dull
					}
				}
				modifier = {
					factor = 1.5
					liege = {
						prisoner = yes
						host = { character = ROOT }
					}
				}
				modifier = {
					factor = 1.5
					liege = { prisoner = yes }
				}
				modifier = {
					factor = 0.5
					liege = {
						current_heir = {
							NOR = {
								character = ROOT
								trait = incapable
								trait = lunatic
							}
							is_adult = yes
							prisoner = no
						}
					}
				}
				modifier = {
					factor = 1.1
					plot_power = 2.25
				}
				modifier = {
					factor = 1.1
					plot_power = 2.5
				}
				modifier = {
					factor = 1.1
					plot_power = 2.75
				}
				modifier = {
					factor = 1.1
					plot_power = 3.0
				}
				modifier = {
					factor = 1.1
					plot_power = 3.25
				}
				modifier = {
					factor = 1.1
					plot_power = 3.5
				}
				modifier = {
					factor = 1.1
					plot_power = 3.75
				}
				modifier = {
					factor = 1.1
					plot_power = 4.0
				}				
				character_event = { id = emf_intrigue.275 days = 7 tooltip = USURP_SUCCESSFUL }
			}
			50 = {
				modifier = {
					factor = 0.9
					intrigue = 12
				}
				modifier = {
					factor = 0.9
					intrigue = 14
				}
				modifier = {
					factor = 0.9
					intrigue = 16
				}
				modifier = {
					factor = 0.9
					intrigue = 18
				}
				modifier = {
					factor = 0.9
					intrigue = 20
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 8 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 6 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 4 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 2 }
				}
				character_event = { id = emf_intrigue.271 days = 7 tooltip = USURP_FAILED }
			}
			50 = {
				modifier = {
					factor = 0
					liege = { current_heir = { character = ROOT } }
				}
				modifier = {
					factor = 0.25
					liege = {
						NOT = { current_heir = { character = ROOT } }
						OR = {
							is_married = ROOT
							is_child_of = ROOT
							sibling = ROOT
						}
					}
				}
				modifier = {
					factor = 0.9
					intrigue = 12
				}
				modifier = {
					factor = 0.9
					intrigue = 14
				}
				modifier = {
					factor = 0.9
					intrigue = 16
				}
				modifier = {
					factor = 0.9
					intrigue = 18
				}
				modifier = {
					factor = 0.9
					intrigue = 20
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 8 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 6 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 4 }
				}
				modifier = {
					factor = 1.2
					NOT = { intrigue = 2 }
				}
				character_event = { id = emf_intrigue.272 days = 7 tooltip = USURP_REVEALED }
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_270 # Forget it
		ai_chance = { factor = 0 }
	}
}

# Attempt to usurp failed
character_event = {
	id = emf_intrigue.271
	desc = EVTDESC_emf_intrigue_271
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	trigger = {
		has_plot = plot_incapable_usurp
		plot_target_char = {
			is_liege_of = ROOT
			trait = incapable
			regent = { character = ROOT }
		}
	}
	
	option = {
		name = CURSES
		set_character_flag = abort_plot
		prestige = -50
	}
}

# Attempt to usurp revealed
character_event = {
	id = emf_intrigue.272
	desc = EVTDESC_emf_intrigue_272
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	trigger = {
		has_plot = plot_incapable_usurp
		plot_target_char = {
			is_liege_of = ROOT
			trait = incapable
			regent = { character = ROOT }
		}
	}
	
	option = {
		name = CURSES
		set_character_flag = abort_plot
		prestige = -100
		tooltip = { imprison = yes }
		hidden_tooltip = {
			liege = {
				if = {
					limit = { is_friend = ROOT }
					remove_friend = ROOT
				}
				character_event = { id = emf_intrigue.273 }
				any_vassal = {
					limit = { NOT = { character = ROOT } }
					character_event = { id = emf_intrigue.274 }
				}
			}
		}	
	}	
}

# Liege informed about revealed usurpation
character_event = {
	id = emf_intrigue.273
	desc = EVTDESC_emf_intrigue_273
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_273
		opinion = {
			who = FROM
			modifier = opinion_charge_traitor
			years = 100
		}
		FROM = {
			remove_title = title_regent
			imprison = ROOT
		}
	}
}

# Vassals informed about revealed usurpation
character_event = {
	id = emf_intrigue.274
	desc = EVTDESC_emf_intrigue_274
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Attempt to usurp successful
character_event = {
	id = emf_intrigue.275
	desc = EVTDESC_emf_intrigue_275
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		has_plot = plot_incapable_usurp
		plot_target_char = {
			is_liege_of = ROOT
			trait = incapable
			regent = { character = ROOT }
		}
	}
	
	option = {
		name = EXCELLENT
		set_character_flag = regent_usurp_titles
		prestige = 100
		if = {
			limit = {
				has_nickname = no
				liege = {
					NOR = {
						current_heir = { character = ROOT }
						AND = {
							OR = {
								is_married = ROOT
								is_child_of = ROOT
								sibling = ROOT
							}
							current_heir = {
								OR = {
									trait = lunatic
									trait = incapable
									NOT = { dynasty = PREV }
								}
							}
						}
					}
				}
			}
			give_nickname = nick_the_usurper
		}
		tooltip = { liege = { abdicate_to = ROOT } }
		hidden_tooltip = {
			liege = {
				if = {
					limit = { current_heir = { character = ROOT } }
					ROOT = { set_character_flag = was_current_heir }
				}
				if = {
					limit = {
						NOT = { current_heir = { character = ROOT } }
						OR = {
							is_married = ROOT
							is_child_of = ROOT
							sibling = ROOT
						}
					}
					ROOT = { set_character_flag = was_close_relative }
				}
				if = {
					limit = {
						NOR = {
							current_heir = { character = ROOT }
							is_married = ROOT
							is_child_of = ROOT
							sibling = ROOT
						}
					}
					ROOT = { set_character_flag = was_not_close_relative }
				}
				character_event = { id = emf_intrigue.276 }
				any_vassal = {
					limit = { NOT = { character = ROOT } }
					character_event = { id = emf_intrigue.277 }
				}
				if = {
					limit = {
						current_heir = { NOT = { character = ROOT } }
					}
					current_heir = {
						opinion = { who = ROOT modifier = succ_law_disinherit months = 240 }
						set_character_flag = justified_claimant
					}
					any_dynasty_member = {
						limit = {
							NOT = { character = ROOT }
							NOT = { vassal_of = PREV }
						}
						character_event = { id = emf_intrigue.277 }
					}
				}
			}
			clr_character_flag = was_current_heir
			clr_character_flag = was_close_relative
			clr_character_flag = was_not_close_relative
		}
	}
}

# Liege informed about usurpation
character_event = {
	id = emf_intrigue.276
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESC_emf_intrigue_276A
		trigger = {
			FROM = { has_character_flag = was_current_heir }
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_276B
		trigger = {
			FROM = { has_character_flag = was_close_relative }
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_276C
		trigger = {
			FROM = { has_character_flag = was_not_close_relative }
		}
	}	
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_276
		transfer_scaled_wealth = { to = FROM value = all }
		if = {
			limit = { current_heir = { character = FROM } }
			abdicate = yes
		}
		if = {
			limit = { current_heir = { NOT = { character = FROM } } }
			abdicate_to = FROM
		}
	}
}

# Vassals informed about usurpation
character_event = {
	id = emf_intrigue.277
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESC_emf_intrigue_277A
		trigger = {
			FROM = { has_character_flag = was_current_heir }
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_277B
		trigger = {
			FROM = { has_character_flag = was_close_relative }
		}
	}
	desc = {
		text = EVTDESC_emf_intrigue_277C
		trigger = {
			FROM = { has_character_flag = was_not_close_relative }
		}
	}	
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Should I rescue a close relative?
character_event = {
	id = emf_intrigue.300
	
	hide_window = yes
	
	ai = yes
	only_playable = yes
	capable_only = yes
	min_age = 16
	prisoner = no
	has_dlc = "Way of Life"
	
	trigger = {
		higher_tier_than = COUNT
		intrigue = 8
		any_dynasty_member = {
			is_close_relative = ROOT
			reverse_opinion = { who = ROOT value = 50 }
			NOT = { trait = decadent }
			OR = {
				AND = {
					prisoner = yes
					liege = { character = ROOT }
					host = { NOT = { character = ROOT } }
				}
				AND = {
					prisoner = no
					is_female = yes
					is_consort = yes
					consort = {
						NOT = { character = ROOT }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort }
					}
				}
			}
		}
		NOR = {
			has_focus = focus_intrigue
			has_character_modifier = messalian_prayer
			has_character_flag = rescued_relative_once
			trait = slothful
			trait = content
			trait = patient
			trait = decadent
		}
	}
	
	mean_time_to_happen = {
		months = 3
	}
	
	immediate = {
		set_character_flag = rescued_relative_once
		set_focus = focus_intrigue
	}
}


#######################################
# BASTARD EVENTS
# Written by Rylock
#######################################

### BASTARD ASKS TO BE LEGITIMIZED

# Bastard has ambition to be legitimized
character_event = {
	id = emf_intrigue.1350
	desc = EVTDESC_emf_intrigue_1350
	picture = GFX_evt_son_asking_father
	
	min_age = 16
	max_age = 30
	capable_only = yes
	prisoner = no
	
	trigger = {
		trait = bastard
		has_ambition = obj_be_legitimized
		OR = {
			AND = {
				is_father_real_father = yes
				father_even_if_dead = {
					is_alive = yes
					is_ruler = yes
					same_realm = ROOT
					religion = ROOT
					NOR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = denounced_child }
						has_opinion_modifier = { who = ROOT modifier = actually_my_child }
						is_inaccessible_trigger = yes
						has_regent = yes
						is_ill = yes
						war = yes
						liege = { war = yes }
					}
				}
			}
			AND = {
				is_father_real_father = no
				real_father_even_if_dead = {
					is_alive = yes
					is_ruler = yes
					same_realm = ROOT
					religion = ROOT
					NOR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = denounced_child }
						has_opinion_modifier = { who = ROOT modifier = actually_my_child }
						is_inaccessible_trigger = yes
						has_regent = yes
						is_ill = yes
						war = yes
						liege = { war = yes }
					}
				}
			}
		}
		NOR = {
			is_ill = yes
			is_inaccessible_trigger = yes
			has_character_flag = do_not_disturb
			has_character_flag = refused_legitimacy_attempt
		}
	}
	
	mean_time_to_happen = {
		months = 60
		modifier = {
			factor = 2
			is_ruler = yes
		}
		modifier = {
			factor = 2
			is_female = yes
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 0.75
			trait = proud
		}
		modifier = {
			factor = 0.75
			trait = envious
		}
		modifier = {
			factor = 1.5
			trait = patient
		}
		modifier = {
			factor = 1.5
			trait = trusting
		}
		modifier = {
			factor = 1.5
			trait = shy
		}
	}
	
	immediate = {
		if = {
			limit = { is_father_real_father = yes }
			father_even_if_dead = { save_event_target_as = true_father }
			break = yes
		}
		real_father_even_if_dead = { save_event_target_as = true_father }
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1350 #It's now or never...
		event_target:true_father = {
			character_event = { id = emf_intrigue.1351 days = 3 }
		}		
	}
}

# Bastard approaches father to ask to be legitimized
character_event = {
	id = emf_intrigue.1351
	desc = EVTDESC_emf_intrigue_1351
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1351 # It is not going to happen
		trigger = {
			NOT = { diplomacy = 14 }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 2
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				is_married = no
				NOT = { num_of_children = 1 }
			}
			modifier = {
				factor = 1.5
				num_of_children = 3
			}
			modifier = {
				factor = 1.5
				num_of_children = 4
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 5
				current_heir = {
					is_child_of = ROOT
					NOT = { is_older_than = FROM }
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				set_character_flag = refused_legitimacy_attempt
				character_event = { id = emf_intrigue.1352 }
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1351 # Convince him that this is for the best
		trigger = {
			diplomacy = 14
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 2
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				is_married = no
				NOT = { num_of_children = 1 }
			}
			modifier = {
				factor = 1.5
				num_of_children = 3
			}
			modifier = {
				factor = 1.5
				num_of_children = 4
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 5
				current_heir = {
					is_child_of = ROOT
					NOT = { is_older_than = FROM }
				}
			}
		}
		tooltip_info = diplomacy
		hidden_tooltip = {
			FROM = {
				set_character_flag = refused_legitimacy_attempt
				character_event = { id = emf_intrigue.1353 }
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1351 # Buy him an estate
		trigger = {
			scaled_wealth = 0.5
			wealth = 50
			FROM = {
				is_ruler = no
				spouse = { is_ruler = no }
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 0 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0
				trait = greedy
			}
			modifier = {
				factor = 1.5
				wealth = 200
			}
			modifier = {
				factor = 1.5
				wealth = 400
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
		}
		tooltip = { scaled_wealth = { value = -0.5 min = -50 } }
		FROM = {
			set_character_flag = refused_legitimacy_attempt
			character_event = { id = emf_intrigue.1354 tooltip = buy_off_with_estate }
		}
	}
	option = {
		name = EVTOPTE_emf_intrigue_1351 # Acknowledge him
		trigger = {
			FROM = {
				is_father_real_father = no
				NOT = { dynasty = ROOT }
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.5
				FROM = {
					OR = {
						trait = lunatic
						trait = possessed
						trait = drunkard
						trait = inbred
						is_weak_trigger = yes
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						is_smart_trigger = yes
						diplomacy = 12
						martial = 12
						stewardship = 12
						intrigue = 12
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 0.5
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
		FROM = {
			tooltip = {
				dynasty = ROOT
				add_trait = bastard
			}
			character_event = { id = emf_intrigue.1356 tooltip = acknowledge_him }
		}
	}
	option = {
		name = EVTOPTD_emf_intrigue_1351 # Legitimize him
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.5
				FROM = {
					is_father_real_father = no
					NOT = { dynasty = ROOT }
				}
			}
			modifier = {
				factor = 0.75
				NOT = { age = 50 }
			}
			modifier = {
				factor = 0.5
				FROM = {
					OR = {
						trait = lunatic
						trait = possessed
						trait = drunkard
						trait = inbred
						is_weak_trigger = yes
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						is_smart_trigger = yes
						diplomacy = 12
						martial = 12
						stewardship = 12
						intrigue = 12
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 0.5
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0
				NOT = { reverse_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0
				NOT = { piety = 50 }
			}
			modifier = {
				factor = 4
				primary_title = {
					OR = {
						has_law = succ_gavelkind
						has_law = succ_primogeniture
						has_law = succ_seniority
					}
					NOT = { has_law = enatic_succession }
				}
				FROM = { is_female = no }
				spouse = { is_pregnant = no }
				current_heir = {
					NOT = { is_child_of = ROOT }
				}
			}
			modifier = {
				factor = 4
				primary_title = {
					OR = {
						has_law = succ_gavelkind
						has_law = succ_primogeniture
						has_law = succ_seniority
					}
					NOT = { has_law = agnatic_succession }
				}
				FROM = { is_female = yes }
				spouse = { is_pregnant = no }
				current_heir = {
					NOT = { is_child_of = ROOT }
				}
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
			modifier = {
				factor = 0
				num_of_children = 5
			}
		}
		piety = -50
		FROM = {
			tooltip = { add_trait = legit_bastard }
			character_event = { id = emf_intrigue.1355 tooltip = legitimize_him }
		}
		hidden_tooltip = {
			FROM = {
				mother = {
					opinion = {
						who = ROOT
						modifier = legitimized_child
						years = 10
					}
				}
			}
			spouse = {
				if = {
					limit = {
						NOT = {
							any_child = { character = FROM }	
						}
					}
					opinion = {
						who = ROOT
						modifier = legitimized_bastard
						years = 20
					}
				}
			}
			any_child = {
				limit = {
					NOT = { character = FROM }
					dynasty = ROOT
					NOT = { trait = bastard }
				}
				opinion = {
					who = ROOT
					modifier = legitimized_bastard
					months = 12
				}
			}
		}
	}
}

# Father outright refuses to legitimize the bastard
character_event = {
	id = emf_intrigue.1352
	desc = EVTDESC_emf_intrigue_1352
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1352 # So be it
		ai_chance = {
			factor = 30
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 0
				OR = {
					trait = lunatic
					trait = possessed
					trait = wroth
					trait = ambitious
				}
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_very_disappointed
			years = 5
		}
		if = {
			limit = {
				NOT = { trait = content }
				NOT = { trait = ambitious }
			}
			random = {
				chance = 50
				add_trait = content
			}
		}
		if = {
			limit = { trait = ambitious }
			remove_trait = ambitious
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1352 # This isn't right!
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = just
			}
		}
		set_character_flag = potential_trouble_bastard
		opinion = {
			who = FROM
			modifier = denounced_child
			years = 20
		}
		if = {
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 20
				add_trait = wroth
			}
		}
		if = {
			limit = { NOT = { trait = ambitious } }
			random = {
				chance = 50
				add_trait = ambitious
			}
		}
	}
}

# Father diplomatically refuses to legitimize the bastard
character_event = {
	id = emf_intrigue.1353
	desc = EVTDESC_emf_intrigue_1353
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1352 # So be it
		opinion = {
			who = FROM
			modifier = opinion_very_disappointed
			years = 5
		}
		if = {
			limit = {
				NOT = { trait = content }
				NOT = { trait = ambitious }
			}
			random = {
				chance = 25
				add_trait = content
			}
		}
		if = {
			limit = { trait = ambitious }
			random = {
				chance = 50
				remove_trait = ambitious
			}
		}
	}
}

# Father buys off the bastard with an estate
character_event = {
	id = emf_intrigue.1354
	desc = EVTDESC_emf_intrigue_1354
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1352 # So be it
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 0
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = wroth
					trait = ambitious
				}
			}
		}
		FROM = {
			transfer_scaled_wealth = {
				to = ROOT
				value = 0.50
				min = 50
			}
		}
		random = {
			chance = 50
			add_trait = content
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1354 # That's not enough!
		ai_chance = {
			factor = 30
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = just
			}
		}
		set_character_flag = potential_trouble_bastard
		FROM = {
			transfer_scaled_wealth = {
				to = ROOT
				value = 0.50
				min = 50
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_very_disappointed
			years = 5
		}
		if = {
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 20
				add_trait = wroth
			}
		}
		if = {
			limit = { NOT = { trait = ambitious } }
			random = {
				chance = 50
				add_trait = ambitious
			}
		}
	}
}

# Father legitimizes the bastard
character_event = {
	id = emf_intrigue.1355
	desc = EVTDESC_emf_intrigue_1355
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			character = FROM
			is_close_relative = FROM
			dynasty = FROM
			is_vassal_or_below = FROM
			is_liege_or_above = FROM
			is_close_relative = ROOT
		}
	}
	
	option = {
		name = EXCELLENT
		trigger = { character = ROOT }
		opinion = {
			who = FROM
			modifier = legitimized_me
			years = 20
		}
		if = {
			limit = { is_father_real_father = no }
			set_real_father = 0
			set_father = FROM
			any_child = {
				limit = { dynasty = ROOT }
				dynasty = FROM
				any_child = {
					limit = { dynasty = ROOT }
					dynasty = FROM
				}
			}
			dynasty = FROM
		}
		remove_trait = bastard
		add_trait = legit_bastard
		recalc_succession = yes
		FROM = { recalc_succession = yes }
		if = {
			limit = { ai = no }
			chronicle = {
				entry = CHRONICLE_LEGITIMIZED_BY_FATHER
				portrait = [Root.GetID]
			}
		}
	}
	option = {
		name = OK
		trigger = { NOT = { character = ROOT } }
		tooltip = {
			ROOT = { add_trait = legit_bastard }
		}
		if = {
			limit = { ai = no }
			chronicle = {
				entry = CHRONICLE_LEGITIMIZED_BY_FATHER
				portrait = [Root.GetID]
			}
		}
	}
}

# Father acknowledges the bastard
character_event = {
	id = emf_intrigue.1356
	desc = EVTDESC_emf_intrigue_1356
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			character = FROM
			is_close_relative = FROM
			dynasty = FROM
			is_vassal_or_below = FROM
			is_close_relative = ROOT
		}
	}
	
	option = {
		name = EXCELLENT
		trigger = { character = ROOT }
		opinion = {
			who = FROM
			modifier = opinion_grateful
			years = 10
		}
		add_trait = bastard
		set_real_father = 0
		set_father = FROM
		any_child = {
			limit = { dynasty = ROOT }
			dynasty = FROM
			any_child = {
				limit = { dynasty = ROOT }
				dynasty = FROM
			}
		}
		dynasty = FROM
		recalc_succession = yes
		FROM = { recalc_succession = yes }
	}
	option = {
		name = OK
		trigger = { NOT = { character = ROOT } }
		tooltip = {
			ROOT = { add_trait = bastard }
		}
	}
}

### BASTARD MAKES A CLAIM AGAINST A YOUNGER SIBLING

# Ruler inherits who has a bastard sibling
character_event = {
	id = emf_intrigue.1360
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { religion_group = muslim }
		FROM = {
			higher_tier_than = COUNT
			is_primary_holder_title = yes
			OR = {
				has_law = succ_gavelkind
				has_law = succ_primogeniture
				has_law = succ_seniority
			}
		}
		any_sibling = {
			trait = bastard
			is_older_than = ROOT
		}
	}
	
	immediate = {
		any_sibling = {
			limit = {
				trait = bastard
				is_older_than = ROOT
				NOR = {
					is_ascetic_trigger = yes
					trait = eunuch
					trait = horse
					AND = { # TODO: verify that this covers all cultures in SWMH which disinherit_from_blinding = yes
						culture_group = byzantine
						trait = blinded
					}
					is_consort = yes # Concubines cannot inherit
					holy_order = yes
					any_liege = { holy_order = yes }
					AND = {
						NOR = {
							religion_group = pagan_group
							religion_group = muslim
						}
						OR = {
							is_theocracy = yes
							AND = { # Nominees
								is_ruler = no
								any_heir_title = { is_theocracy = yes }
							}
						}
					}
				}
			}
			character_event = { id = emf_intrigue.1361 days = 10 }
		}
	}
}

# Bastard sibling considers making a claim against the inheritance
character_event = {
	id = emf_intrigue.1361
	desc = EVTDESC_emf_intrigue_1361
	picture = GFX_evt_knight_kneeling
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			is_ruler = no
			is_theocracy = no
		}
		NOT = { has_strong_claim = FROMFROM }
		FROMFROM = {
			OR = {
				ROOT = { is_female = no }
				AND = {
					ROOT = { is_female = yes }
					succ_law_title = {
						NOT = { has_law = agnatic_succession }
						NOT = { has_law = cognatic_succession }
					}
				}
				AND = {
					ROOT = { is_female = yes }
					succ_law_title = { has_law = cognatic_succession }
					holder_scope = { is_female = yes }
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1361 # The inheritance is rightfully mine!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					trait = content
					trait = humble
					trait = craven
				}
			}
			modifier = {
				factor = 0.25
				NOT = { trait = ambitious }
			}
			modifier = {
				factor = 0.5
				is_ruler = yes
				any_liege = { character = FROM }
				NOT = { trait = ambitious }
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.75
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0.75
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.75
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 0.5
				NOT = { martial = 6 }
			}
			modifier = {
				factor = 1.25
				martial = 12
			}
			modifier = {
				factor = 1.25
				martial = 14
			}
			modifier = {
				factor = 1.25
				martial = 16
			}
		}
		if = {
			limit = {
				has_nickname = no
				is_female = no
			}
			give_nickname = nick_the_bastard
		}
		set_character_flag = flag_denied_title
		FROMFROM = {
			add_claim = ROOT
			ROOT = { set_character_flag = emf_justified_claimant_@PREV }
		}
		if = {
			limit = { NOT = { trait = ambitious } }
			add_trait = ambitious
		}
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.1362 } }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1361 # Let him have it
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_character_flag = potential_trouble_bastard
				NOR = {
					trait = content
					trait = humble
					trait = craven
				}
			}
		}
		piety = 10
		if = {
			limit = { trait = ambitious }
			remove_trait = ambitious
		}
	}
}

# The ruler hears that their ambitious sibling has made a claim
character_event = {
	id = emf_intrigue.1362
	desc = EVTDESC_emf_intrigue_1362
	picture = GFX_evt_whispers
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1362 # Damn him!
		ai_chance = {
			factor = 70
		}
		opinion = {
			who = FROM
			modifier = scheming_bastard
			years = 5
		}
		hidden_tooltip = {
			any_vassal = {
				character_event = { id = emf_intrigue.1363 }
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1362 # Arrest him at once!
		trigger = {
			NOT = { trait = incapable }
			prisoner = no
			is_adult = yes
			is_liege_of = FROM
			FROM = { is_ruler = no }
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = brave
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		custom_tooltip = {
			text = tyrant_custom_tooltip
			hidden_tooltip = {
				any_realm_character = {
					opinion = {
						who = PREV
						modifier = opinion_tyrant
						months = 120
					}
				}
			}
		}
		opinion = {
			who = FROM
			modifier = scheming_bastard
			years = 5
		}
		random_list = {
			50 = {
				FROM = { imprison = ROOT }
			}
			50 = {
				FROM = { banish = yes }
			}
		}
	}
}

# Vassals of the ruler consider whether to support the bastard
character_event = {
	id = emf_intrigue.1363
	desc = EVTDESC_emf_intrigue_1363
	picture = GFX_evt_whispers
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1363 # Perhaps he should rule instead
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				religion = FROMFROM
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 2
				culture = FROMFROM
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 0.5
				NOT = {
					opinion_diff = {
						first = FROMFROM
						second = FROM
						value = 0
						as_if_liege = yes
					}
				}
			}
			modifier = {
				factor = 2
				opinion_diff = {
					first = FROMFROM
					second = FROM
					value = 20
					as_if_liege = yes
				}
			}
			modifier = {
				factor = 2
				opinion_diff = {
					first = FROMFROM
					second = FROM
					value = 40
					as_if_liege = yes
				}
			}
			modifier = {
				factor = 0.5
				is_close_relative = FROM
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = bastard
					trait = legit_bastard
				}
			}
			modifier = {
				factor = 0
				any_heir_title = {
					holder = FROM
				}
			}
		}
		opinion = {
			who = FROMFROM
			modifier = sympathetic_to_cause
			multiplier = 2
			years = 5
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1363 # No, I support my liege
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				religion = FROM
				NOT = { religion = FROMFROM }
			}
			modifier = {
				factor = 2
				culture = FROM
				NOT = { culture = FROMFROM }
			}
			modifier = {
				factor = 2
				likes_better_than = { who = FROM than = FROMFROM }
			}
			modifier = {
				factor = 2
				dynasty = FROM
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
		opinion = {
			who = FROMFROM
			modifier = scheming_bastard
			years = 5
		}		
	}
}

### UNKNOWN BASTARD LEARNS WHO THEIR FATHER IS

# Unknown bastard decides whether to approach their true father
character_event = {
	id = emf_intrigue.1370
	desc = EVTDESC_emf_intrigue_1370
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	min_age = 16
	max_age = 30
	capable_only = yes
	prisoner = no

	trigger = {
		is_father_real_father = no
		real_father_even_if_dead = {
			is_alive = yes
			is_ruler = yes
			same_realm = ROOT
			religion = ROOT
			has_opinion_modifier = { who = ROOT modifier = actually_my_child }
			NOR = {
				reverse_has_opinion_modifier = { who = ROOT modifier = denounced_child }
				is_inaccessible_trigger = yes
				has_regent = yes
				is_ill = yes
				war = yes
				liege = { war = yes }
			}
		}
		
		#father who raised them is dead or disliked
		father_even_if_dead = {
			OR = {
				is_alive = no
				NOT = { reverse_opinion = { who = ROOT value = 0 } }
			}
		}		
		#not a member of the clergy
		OR = {
			is_ruler = no
			is_theocracy = no
		}
		#either they're smart or mother is alive
		OR = {
			mother_even_if_dead = { is_alive = yes }
			is_smart_trigger = yes
			learning = 8
			intrigue = 8
		}
		
		OR = {
			is_female = no
			is_married = no
		}
		emf_can_inherit = yes
		NOR = {
			any_heir_title =  { always = yes }
			any_child = { dynasty = ROOT }
			trait = legit_bastard
			is_dumb_trigger = yes
			trait = proud
			trait = humble
			trait = content
			is_inaccessible_trigger = yes
			has_character_flag = knows_real_father
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 20
			real_father_even_if_dead = { ai = no }
			NOT = { has_global_flag = player_real_father_check }
		}
		modifier = {
			factor = 0.5
			is_female = yes
		}
		modifier = {
			factor = 10
			trait = ambitious
		}
		modifier = {
			factor = 5
			OR = {
				trait = quick
				trait = shrewd
			}
		}
		modifier = {
			factor = 10
			trait = genius
		}
		modifier = {
			factor = 0.25
			mother_even_if_dead = { is_alive = no }
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 2
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = trusting
		}
		modifier = {
			factor = 0.5
			trait = shy
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
	}
	
	immediate = {
		set_character_flag = knows_real_father
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1370 # I need to know the truth
		real_father_even_if_dead = {
			if = {
				limit = { ai = no }
				set_global_flag = player_real_father_check
			}
			character_event = { id = emf_intrigue.1371 tooltip = ask_him_the_truth }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1370 # No, I already have a family
		if = {
			limit = { NOT = { trait = proud } }
			random = {
				chance = 30
				add_trait = proud
			}
		}
		if = {
			limit = {
				NOT = { trait = proud }
				NOT = { trait = content }
			}
			random = {
				chance = 30
				add_trait = content
			}
		}
	}
}

# Unknown bastard approaches their true father and asks for the truth
character_event = {
	id = emf_intrigue.1371
	desc = EVTDESC_emf_intrigue_1371
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			father = { save_event_target_as = bastard_father }
			mother = { save_event_target_as = bastard_mother }
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1371 # Tell him the truth
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				trait = deceitful
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
		}
		if = {
			limit = {
				NOR = {
					trait = honest
					trait = deceitful
				}
			}
			random = {
				chance = 30
				add_trait = honest
			}
		}
		if = {
			limit = { trait = deceitful }
			remove_trait = deceitful
		}
		hidden_tooltip = {
			event_target:bastard_father = {
				opinion = { who = ROOT modifier = opinion_cuckolded years = 5 }
				opinion = { who = event_target:bastard_mother modifier = opinion_unfaithful_wife years = 5 }
			}
			event_target:bastard_mother = {
				opinion = { who = ROOT modifier = acknowledged_child years = 10 }
			}
		}
		FROM = {
			tooltip = {
				add_trait = bastard
				set_father = ROOT
				dynasty = ROOT
			}
			hidden_tooltip = {
				character_event = { id = emf_intrigue.1372 days = 1 }
				reverse_remove_opinion = { who = ROOT modifier = actually_my_child }
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1371 # Deny it
		trigger = {
			NOT = { intrigue = 12 }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				trait = honest
			}
		}
		if = {
			limit = {
				NOR = {
					trait = honest
					trait = deceitful
				}
			}
			random = {
				chance = 30
				add_trait = deceitful
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.1373 } }
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1371 # Convince him it's not true
		trigger = {
			intrigue = 12
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				trait = honest
			}
		}
		tooltip_info = intrigue
		if = {
			limit = {
				NOR = {
					trait = honest
					trait = deceitful
				}
			}
			random = {
				chance = 30
				add_trait = deceitful
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.1374 } }
		}
	}
}

# Father admits the truth
character_event = {
	id = emf_intrigue.1372
	desc = EVTDESC_emf_intrigue_1372
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1372 # Ask to be recognized
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					trait = craven
					trait = humble
					trait = content
				}
			}
			modifier = {
				factor = 0
				is_female = yes
				is_married = yes
				spouse = { is_ruler = yes }
			}
			modifier = {
				factor = 0.1
				is_female = yes
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
		FROM = { character_event = { id = emf_intrigue.1376 tooltip = ask_to_be_recognized } }
	}
	option = {
		name = EVTOPTB_emf_intrigue_1372 # I only wanted to know the truth
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				trait = ambitious
			}
		}
		set_character_flag = refused_legitimacy_attempt
		hidden_tooltip = {
			FROM = { character_event = { id = emf_intrigue.1375 } }
		}
	}
}

# Father denies it poorly
character_event = {
	id = emf_intrigue.1373
	desc = EVTDESC_emf_intrigue_1373
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_1373 # So be it
		if = {
			limit = { trait = ambitious }
			FROM = {
				primary_title = { add_weak_pressed_claim = ROOT }
			}
		}
		opinion = {
			who = FROM
			modifier = denounced_child
			years = 20
		}
	}
}

# Father denies it well
character_event = {
	id = emf_intrigue.1374
	desc = EVTDESC_emf_intrigue_1374
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_1374 # Guess I was wrong
	}
}

# Bastard doesn't ask to be recognized
character_event = {
	id = emf_intrigue.1375
	desc = EVTDESC_emf_intrigue_1375
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes

	option = {
		name = OK
		hidden_tooltip = {
			FROM = {
				character_event = { id = emf_intrigue.1356 days = 1 }
			}
		}
	}
}

# Bastard asks to be recognized
character_event = {
	id = emf_intrigue.1376
	desc = EVTDESC_emf_intrigue_1376
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_1351 # It is not going to happen
		trigger = {
			NOT = { diplomacy = 14 }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 2
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				is_married = no
				NOT = { num_of_children = 1 }
			}
			modifier = {
				factor = 1.5
				num_of_children = 3
			}
			modifier = {
				factor = 1.5
				num_of_children = 4
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 5
				current_heir = {
					is_child_of = ROOT
					NOT = { is_older_than = FROM }
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				set_character_flag = refused_legitimacy_attempt
				character_event = { id = emf_intrigue.1352 }
				character_event = { id = emf_intrigue.1356 days = 1 }
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1351 # Convince him that this is for the best
		trigger = {
			diplomacy = 14
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 2
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				is_married = no
				NOT = { num_of_children = 1 }
			}
			modifier = {
				factor = 1.5
				num_of_children = 3
			}
			modifier = {
				factor = 1.5
				num_of_children = 4
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 5
				current_heir = {
					is_child_of = ROOT
					NOT = { is_older_than = FROM }
				}
			}
		}
		tooltip_info = diplomacy
		hidden_tooltip = {
			FROM = {
				set_character_flag = refused_legitimacy_attempt
				character_event = { id = emf_intrigue.1353 }
				character_event = { id = emf_intrigue.1356 days = 1 }
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1351 # Buy him an estate
		trigger = {
			scaled_wealth = 0.5
			wealth = 50
			FROM = {
				is_ruler = no
				spouse = { is_ruler = no }
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 0 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0
				trait = greedy
			}
			modifier = {
				factor = 1.5
				wealth = 200
			}
			modifier = {
				factor = 1.5
				wealth = 400
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
		}
		tooltip = { scaled_wealth = { value = -0.5 min = -50 } }
		FROM = {
			set_character_flag = refused_legitimacy_attempt
			character_event = { id = emf_intrigue.1354 tooltip = buy_off_with_estate }
			hidden_tooltip = {
				character_event = { id = emf_intrigue.1356 days = 1 }
			}
		}
	}
	option = {
		name = EVTOPTD_emf_intrigue_1351 # Legitimize him
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.75
				NOT = { age = 50 }
			}
			modifier = {
				factor = 0.5
				FROM = {
					OR = {
						trait = lunatic
						trait = possessed
						trait = drunkard
						trait = inbred
						is_weak_trigger = yes
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						is_smart_trigger = yes
						diplomacy = 12
						martial = 12
						stewardship = 12
						intrigue = 12
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = { religion = FROM }
			}
			modifier = {
				factor = 0.5
				NOT = { culture = FROM }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0
				NOT = { reverse_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0
				NOT = { piety = 50 }
			}
			modifier = {
				factor = 4
				primary_title = {
					OR = {
						has_law = succ_gavelkind
						has_law = succ_primogeniture
						has_law = succ_seniority
					}
					NOT = { has_law = enatic_succession }
				}
				FROM = { is_female = no }
				spouse = { is_pregnant = no }
				current_heir = {
					NOT = { is_child_of = ROOT }
				}
			}
			modifier = {
				factor = 4
				primary_title = {
					OR = {
						has_law = succ_gavelkind
						has_law = succ_primogeniture
						has_law = succ_seniority
					}
					NOT = { has_law = agnatic_succession }
				}
				FROM = { is_female = yes }
				spouse = { is_pregnant = no }
				current_heir = {
					NOT = { is_child_of = ROOT }
				}
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
			modifier = {
				factor = 0
				num_of_children = 5
			}
		}
		piety = -50
		FROM = {
			tooltip = {
				remove_trait = bastard
				add_trait = legit_bastard
			}
			character_event = { id = emf_intrigue.1355 tooltip = legitimize_him }
		}
		hidden_tooltip = {
			FROM = {
				mother = {
					opinion = {
						who = ROOT
						modifier = legitimized_child
						years = 10
					}
				}
			}
			spouse = {
				if = {
					limit = {
						NOT = {
							any_child = { character = FROM }	
						}
					}
					opinion = {
						who = ROOT
						modifier = legitimized_bastard
						years = 20
					}
				}
			}
			any_child = {
				limit = {
					NOT = { character = FROM }
					dynasty = ROOT
					NOT = { trait = bastard }
				}
				opinion = {
					who = ROOT
					modifier = legitimized_bastard
					months = 12
				}
			}
		}
	}
}


#######################################
# SPYING EVENTS
# Written by Rylock
#######################################

### PLOT ASSISTED

# Spying assists the plot
character_event = {
	id = emf_intrigue.1500
	
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		trigger = {
			has_plot = yes
			plot_target_char = { character = FROMFROMFROM }
		}
		text = EVTDESC_emf_intrigue_1500_A
	}
	desc = {
		trigger = {
			OR = {
				has_plot = no
				NOT = { plot_target_char = { character = FROMFROMFROM } }
			}
			any_backed_character = { plot_target_char = { character = FROMFROMFROM } }
		}
		text = EVTDESC_emf_intrigue_1500_B
	}
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		if = {
			limit = {
				has_plot = yes
				plot_target_char = { character = FROMFROMFROM }
				NOR = {
					has_character_modifier = plot_assisted_spying
					has_character_modifier = plot_assisted_spying2
					has_character_modifier = plot_assisted_spying3
					has_character_modifier = plot_assisted_spying4
					has_character_modifier = plot_assisted_spying5
				}
			}
			add_character_modifier = {
				name = plot_assisted_spying
				duration = 365
			}
		}
		if = {
			limit = {
				any_backed_character = {
					plot_target_char = { character = FROMFROMFROM }
					NOR = {
						has_character_modifier = plot_assisted_spying
						has_character_modifier = plot_assisted_spying2
						has_character_modifier = plot_assisted_spying3
						has_character_modifier = plot_assisted_spying4
						has_character_modifier = plot_assisted_spying5
					}
				}
			}
			random_backed_character = {
				limit = { plot_target_char = { character = FROMFROMFROM } }
				letter_event = { id = emf_intrigue.1501 tooltip = "EVTTOOLTIP_INFORM_PLOTTER" }
			}
		}
	}
}

# Letter sent to plotter to inform of assistance
letter_event = {
	id = emf_intrigue.1501
	desc = EVTDESC_emf_intrigue_1501
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
		add_character_modifier = {
			name = plot_assisted_spying
			duration = 365
		}
	}
}

### DISCOVERS REAL FATHER

# Mark newborn with unknown real_father
character_event = {
	id = emf_intrigue.1502
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		real_father = {
			is_alive = yes
			ROOT = {
				father = {
					NOT = { character = PREVPREV }
				}
			}
		}
	}
	
	immediate = {
		real_father = {
			opinion = { who = ROOT modifier = actually_my_child years = 40 }
		}
	}
}

# Initial discovery that target has unknown bastards
character_event = {
	id = emf_intrigue.1503
	desc = EVTDESC_emf_intrigue_1503
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	immediate = {
		event_target:target_spy_on = {
			reverse_opinion = { who = ROOT modifier = opinion_spy_discovered_father months = 600 }
			save_event_target_as = hidden_bastard_true_father
			random_opinion_modifier_target = {
				limit = { reverse_has_opinion_modifier = { who = PREV modifier = actually_my_child } }
				save_event_target_as = hidden_bastard
				mother_even_if_dead = { save_event_target_as = hidden_bastard_mother }
				father_even_if_dead = { save_event_target_as = hidden_bastard_father }
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1505 # Blackmail the father
		trigger = {
			event_target:hidden_bastard_true_father = {
				is_alive = yes
				is_ruler = yes
				NOT = { trait = incapable }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
				}
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { is_liege_of = ROOT }
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard_true_father = { is_married = no }
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { NOT = { wealth = 100 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = honest }
				NOT = { trait = deceitful }
			}
			random = {
				chance = 50
				add_trait = deceitful
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		event_target:hidden_bastard_true_father = {
			letter_event = { id = emf_intrigue.1506 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_FATHER" }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1505 # Reveal the truth
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				OR = {
					trait = zealous
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
					trait = kind
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 50 } }
			}
		}
		custom_tooltip = {
			text = "EVTTOOLTIP_BLACKMAIL_REVEAL"
			hidden_tooltip = {
				event_target:hidden_bastard = {
					character_event = { id = emf_intrigue.1509 days = 1 }
					mother_even_if_dead = { save_event_target_as = target_adulterer }
					FROM = {
						prestige = -100
						character_event = { id = 20 }
					}
				}
				any_character = {
					limit = {
						NOT = { character = event_target:hidden_bastard }
						OR = {
							is_close_relative = event_target:hidden_bastard
							is_close_relative = event_target:hidden_bastard_father
							is_close_relative = event_target:hidden_bastard_mother
							is_close_relative = event_target:hidden_bastard_true_father
							same_realm = event_target:hidden_bastard
							same_realm = event_target:hidden_bastard_true_father
						}
					}
					character_event = { id = emf_intrigue.1510 }
				}
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1505 # I don't care about this
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 5
				OR = {
					trait = bastard
					trait = legit_bastard
				}
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
			modifier = {
				factor = 2
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 0 } }
			}
			modifier = {
				factor = 2
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
	}
}

# Initial discovery of true father's identity
character_event = {
	id = emf_intrigue.1505
	desc = EVTDESC_emf_intrigue_1505
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	immediate = {
		event_target:target_spy_on = {
			save_event_target_as = hidden_bastard
			mother_even_if_dead = { save_event_target_as = hidden_bastard_mother }
			father_even_if_dead = { save_event_target_as = hidden_bastard_father }
			real_father_even_if_dead = { save_event_target_as = hidden_bastard_true_father }
			reverse_opinion = { who = ROOT modifier = opinion_spy_discovered_father months = 600 }
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1505 # Blackmail the father
		trigger = {
			event_target:hidden_bastard_true_father = {
				is_alive = yes
				is_ruler = yes
				NOT = { trait = incapable }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
				}
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { is_liege_of = ROOT }
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard_true_father = { is_married = no }
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { NOT = { wealth = 100 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = honest }
				NOT = { trait = deceitful }
			}
			random = {
				chance = 50
				add_trait = deceitful
			}
		}
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		event_target:hidden_bastard_true_father = {
			letter_event = { id = emf_intrigue.1506 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_FATHER" }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1505 # Reveal the truth
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				OR = {
					trait = zealous
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
					trait = kind
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 50 } }
			}
		}
		custom_tooltip = {
			text = "EVTTOOLTIP_BLACKMAIL_REVEAL"
			hidden_tooltip = {
				event_target:hidden_bastard = {
					character_event = { id = emf_intrigue.1509 days = 1 }
					mother_even_if_dead = { save_event_target_as = target_adulterer }
					FROM = {
						prestige = -100
						character_event = { id = 20 }
					}
				}
				any_character = {
					limit = {
						NOT = { character = event_target:hidden_bastard }
						OR = {
							is_close_relative = event_target:hidden_bastard
							is_close_relative = event_target:hidden_bastard_father
							is_close_relative = event_target:hidden_bastard_mother
							is_close_relative = event_target:hidden_bastard_true_father
							same_realm = event_target:hidden_bastard
							same_realm = event_target:hidden_bastard_true_father
						}
					}
					character_event = { id = emf_intrigue.1510 }
				}
			}
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1505 # I don't care about this
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 5
				OR = {
					trait = bastard
					trait = legit_bastard
				}
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 0.5
				event_target:hidden_bastard = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
			modifier = {
				factor = 2
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 0 } }
			}
			modifier = {
				factor = 2
				event_target:hidden_bastard_true_father = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
	}
}

# Real father receives blackmail demand
letter_event = {
	id = emf_intrigue.1506
	desc = EVTDESC_emf_intrigue_1506
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA7260 #Give in
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.25
				is_married = no
			}
			modifier = {
				factor = 0.1
				NOT = { wealth = 100 }
			}
			modifier = {
				factor = 2
				wealth = 250
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = deceitful
			}
		}
		wealth = -100
		FROM = {
			letter_event = { id = emf_intrigue.1507 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_AGREED" }
		}
	}
	option = {
		name = EVTOPTB7260 #I won't tolerate blackmail!
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				has_any_opinion_modifier = opinion_blackmailed
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
		}
		FROM = {
			letter_event = { id = emf_intrigue.1508 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_REFUSED" }
		}
	}
}

# Real father agrees to the blackmail
letter_event = {
	id = emf_intrigue.1507
	desc = EVTDESC_emf_intrigue_1507
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		wealth = 100
		reverse_opinion = {
			who = FROM
			modifier = opinion_blackmailed
			years = 10
		}
	}
}

# Real father refuses the blackmail demand
letter_event = {
	id = emf_intrigue.1508
	desc = EVTDESC_emf_intrigue_1508
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_1508 # Tell everyone
		reverse_opinion = {
			who = FROM
			modifier = opinion_failed_blackmail
			multiplier = 2
			years = 20
		}
		custom_tooltip = {
			text = "EVTTOOLTIP_BLACKMAIL_REVEAL"
			hidden_tooltip = {
				event_target:hidden_bastard = {
					character_event = { id = emf_intrigue.1509 days = 1 }
					mother_even_if_dead = { save_event_target_as = target_adulterer }
					FROM = {
						prestige = -100
						character_event = { id = 20 }
					}
				}
				any_character = {
					limit = {
						NOT = { character = event_target:hidden_bastard }
						OR = {
							is_close_relative = event_target:hidden_bastard
							is_close_relative = event_target:hidden_bastard_father
							is_close_relative = event_target:hidden_bastard_mother
							is_close_relative = event_target:hidden_bastard_true_father
							same_realm = event_target:hidden_bastard
							same_realm = event_target:hidden_bastard_true_father
						}
					}
					character_event = { id = emf_intrigue.1510 }
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1508 # Let the matter drop
		trigger = { ai = no }
		reverse_opinion = {
			who = FROM
			modifier = opinion_failed_blackmail
			years = 10
		}
	}
}

# Target is informed he is a bastard
character_event = {
	id = emf_intrigue.1509
	desc = EVTDESC_emf_intrigue_1509
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1509
		prestige = -100
		add_trait = bastard
		hidden_tooltip = {
			set_real_father = 0
			set_father = event_target:hidden_bastard_true_father
			event_target:hidden_bastard_true_father = {
				remove_opinion = { who = ROOT modifier = actually_my_child }
			}
		}
	}
}

# Others are informed about the bastard
character_event = {
	id = emf_intrigue.1510
	desc = EVTDESC_emf_intrigue_1510
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1510
		if = {
			limit = { NOT = { character = event_target:hidden_bastard_true_father } }
			event_target:target_spy_on = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_scandal
					months = 60
				}
			}
		}
	}
}

### DISCOVERS LOVER

# Initial discovery of lover
character_event = {
	id = emf_intrigue.1515
	desc = EVTDESC_emf_intrigue_1515
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	immediate = {
		event_target:target_spy_on = {
			random_lover = {
				limit = {
					NOR = {
						any_spouse = { character = event_target:target_spy_on }
						any_consort = { character = event_target:target_spy_on }
					}
				}
				save_event_target_as = target_revealed_lover
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_spy_discovered_lover
				months = 120
			}
		}
		if = {
			limit = {
				OR = {
					any_spouse = { character = event_target:target_spy_on }
					any_consort = { character = event_target:target_spy_on }
				}
			}
			if = {
				limit = { is_female = no }
				opinion = {
					who = event_target:target_spy_on
					modifier = opinion_unfaithful_wife
				}
				if = {
					limit = { event_target:target_revealed_lover = { is_female = no } }
					opinion = {
						who = event_target:target_revealed_lover
						modifier = opinion_cuckolded
					}
				}
			}
			if = {
				limit = { is_female = yes }
				opinion = {
					who = event_target:target_spy_on
					modifier = opinion_unfaithful_husband
				}
				if = {
					limit = { event_target:target_revealed_lover = { is_female = yes } }
					add_rival = event_target:target_revealed_lover
					opinion = {
						who = event_target:target_revealed_lover
						modifier = slut_seductress
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					any_spouse = { character = event_target:target_revealed_lover }
					any_consort = { character = event_target:target_revealed_lover }
				}
			}
			if = {
				limit = { is_female = no }
				opinion = {
					who = event_target:target_revealed_lover
					modifier = opinion_unfaithful_wife
				}
				if = {
					limit = { event_target:target_spy_on = { is_female = no } }
					opinion = {
						who = event_target:target_spy_on
						modifier = opinion_cuckolded
					}
				}
			}
			if = {
				limit = { is_female = yes }
				opinion = {
					who = event_target:target_revealed_lover
					modifier = opinion_unfaithful_husband
				}
				if = {
					limit = { event_target:target_spy_on = { is_female = yes } }
					add_rival = event_target:target_spy_on
					opinion = {
						who = event_target:target_spy_on
						modifier = slut_seductress
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1515 # Blackmail him
		trigger = {
			event_target:target_spy_on = { wealth = 50 }
			NOT = { is_father = event_target:target_spy_on }
			NOT = { is_mother = event_target:target_spy_on }
			NOT = { is_consort = event_target:target_spy_on }
			NOT = { is_consort = event_target:target_revealed_lover }
			NOT = {
				any_spouse = {
					OR = {
						character = event_target:target_spy_on
						character = event_target:target_revealed_lover
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
				}
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { wealth = 50 }
				event_target:target_spy_on = { wealth = 50 }
				likes_better_than = {
					who = event_target:target_spy_on
					than = event_target:target_revealed_lover
				}
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { is_liege_of = ROOT }
			}
			modifier = {
				factor = 0
				event_target:target_spy_on = { NOT = { wealth = 100 } }
			}
		}
		if = {
			limit = { is_lover = event_target:target_spy_on }
			remove_lover = event_target:target_spy_on
		}
		if = {
			limit = { is_lover = event_target:target_revealed_lover }
			remove_lover = event_target:target_revealed_lover
		}
		event_target:target_spy_on = {
			letter_event = { id = emf_intrigue.1516 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_LOVER" }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1515 # Blackmail the lover
		trigger = {
			event_target:target_revealed_lover = { wealth = 50 }
			NOT = { is_father = event_target:target_spy_on }
			NOT = { is_mother = event_target:target_spy_on }
			NOT = { is_consort = event_target:target_spy_on }
			NOT = { is_consort = event_target:target_revealed_lover }
			NOT = {
				any_spouse = {
					OR = {
						character = event_target:target_spy_on
						character = event_target:target_revealed_lover
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
				}
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { wealth = 50 }
				event_target:target_spy_on = { wealth = 50 }
				likes_better_than = {
					who = event_target:target_revealed_lover
					than = event_target:target_spy_on
				}
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { is_liege_of = ROOT }
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { NOT = { wealth = 100 } }
			}
		}
		if = {
			limit = { is_lover = event_target:target_spy_on }
			remove_lover = event_target:target_spy_on
		}
		if = {
			limit = { is_lover = event_target:target_revealed_lover }
			remove_lover = event_target:target_revealed_lover
		}
		event_target:target_revealed_lover = {
			letter_event = { id = emf_intrigue.1516 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_LOVER" }
		}
	}
	option = {
		name = EVTOPTC_emf_intrigue_1515 # Reveal it
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				OR = {
					trait = zealous
					trait = honest
					trait = just
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = greedy
					trait = deceitful
					trait = cruel
					trait = kind
					trait = arbitrary
				}
			}
			modifier = {
				factor = 0
				event_target:target_revealed_lover = { reverse_opinion = { who = ROOT value = 50 } }
			}
		}
		if = {
			limit = { is_lover = event_target:target_spy_on }
			remove_lover = event_target:target_spy_on
		}
		if = {
			limit = { is_lover = event_target:target_revealed_lover }
			remove_lover = event_target:target_revealed_lover
		}
		event_target:target_spy_on = { custom_tooltip = { text = EVTTOOLTIP_WoL_60 } }
		hidden_tooltip = {
			event_target:target_revealed_lover = {
				set_character_flag = second_ping_needed
				character_event = { id = emf_intrigue.1518 }
			}
		}
	}
	option = {
		name = EVTOPTD_emf_intrigue_1515 # I am not interested in this
		if = {
			limit = { is_lover = event_target:target_spy_on }
			remove_lover = event_target:target_spy_on
		}
		if = {
			limit = { is_lover = event_target:target_revealed_lover }
			remove_lover = event_target:target_revealed_lover
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 0.5
				event_target:target_spy_on = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 0.5
				event_target:target_spy_on = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
			modifier = {
				factor = 2
				event_target:target_revealed_lover = { reverse_opinion = { who = ROOT value = 0 } }
			}
			modifier = {
				factor = 2
				event_target:target_revealed_lover = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
	}
}

# Blackmailed character receives demand
letter_event = {
	id = emf_intrigue.1516
	border = GFX_event_letter_frame_intrigue

	desc = {
		trigger = { event_target:target_spy_on = { character = ROOT } }
		text = EVTDESC_emf_intrigue_1516
	}
	desc = {
		trigger = { event_target:target_revealed_lover = { character = ROOT } }
		text = EVTDESC_emf_intrigue_1516_B
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_emf_intrigue_1516 # Give in
		ai_chance = {
			factor = 100
			modifier = {
				factor = 5
				religion_group = christian
				NOT = { has_character_modifier = adulterous_priest }
				OR = {
					trait = monk
					trait = nun
					AND = { is_ruler = yes is_theocracy = yes }
				}
			}
			modifier = {
				factor = 5
				event_target:target_revealed_lover = {
					same_sex = ROOT
					NOT = { character = ROOT }
				}
				NOR = {
					has_character_modifier = known_sodomite
					has_character_modifier = known_sodomite_pagan
				}
			}
			modifier = {
				factor = 5
				event_target:target_spy_on = {
					same_sex = ROOT
					NOT = { character = ROOT }
				}
				NOR = {
					has_character_modifier = known_sodomite
					has_character_modifier = known_sodomite_pagan
				}
			}
			modifier = {
				factor = 5
				event_target:target_revealed_lover = {
					is_close_relative = ROOT
					NOT = { is_married = ROOT }
					NOT = { character = ROOT }
				}
				NOR = {
					has_character_modifier = incestuous_adulteress
					has_character_modifier = incestuous_adulterer
				}
			}
			modifier = {
				factor = 5
				event_target:target_spy_on = {
					is_close_relative = ROOT
					NOT = { is_married = ROOT }
					NOT = { character = ROOT }
				}
				NOR = {
					has_character_modifier = incestuous_adulteress
					has_character_modifier = incestuous_adulterer
				}
			}
			modifier = {
				factor = 2
				is_married = yes
				NOR = {
					has_character_modifier = adulteress
					has_character_modifier = adulterer
				}
			}
			modifier = {
				factor = 0.1
				religion_group = christian
				has_character_modifier = adulterous_priest
				OR = {
					trait = monk
					trait = nun
					AND = { is_ruler = yes is_theocracy = yes }
				}
			}
			modifier = {
				factor = 0.1
				event_target:target_revealed_lover = {
					same_sex = ROOT
					NOT = { character = ROOT }
				}
				OR = {
					has_character_modifier = known_sodomite
					has_character_modifier = known_sodomite_pagan
				}
			}
			modifier = {
				factor = 0.1
				event_target:target_spy_on = {
					same_sex = ROOT
					NOT = { character = ROOT }
				}
				OR = {
					has_character_modifier = known_sodomite
					has_character_modifier = known_sodomite_pagan
				}
			}
			modifier = {
				factor = 0.1
				event_target:target_revealed_lover = {
					is_close_relative = ROOT
					NOT = { is_married = ROOT }
					NOT = { character = ROOT }
				}
				OR = {
					has_character_modifier = incestuous_adulteress
					has_character_modifier = incestuous_adulterer
				}
			}
			modifier = {
				factor = 0.1
				event_target:target_spy_on = {
					is_close_relative = ROOT
					NOT = { is_married = ROOT }
					NOT = { character = ROOT }
				}
				OR = {
					has_character_modifier = incestuous_adulteress
					has_character_modifier = incestuous_adulterer
				}
			}
			modifier = {
				factor = 0.1
				is_married = yes
				OR = {
					has_character_modifier = adulteress
					has_character_modifier = adulterer
				}
			}
			modifier = {
				factor = 0.25
				is_married = no
			}
			modifier = {
				factor = 0.1
				NOT = { wealth = 100 }
			}
			modifier = {
				factor = 2
				wealth = 250
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = deceitful
			}
		}
		wealth = -100
		FROM = {
			letter_event = { id = emf_intrigue.1517 days = 1 tooltip = "EVTTOOLTIP_BLACKMAIL_AGREED" }
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1516 # Refuse
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				has_any_opinion_modifier = opinion_blackmailed
			}
			modifier = {
				factor = 0.1
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
		}
		FROM = {
			custom_tooltip = { text = "EVTTOOLTIP_BLACKMAIL_REFUSED" }
		}
		hidden_tooltip = {
			if = {
				limit = { event_target:target_spy_on = { character = ROOT } }
				event_target:target_revealed_lover = { character_event = { id = emf_intrigue.1518 } }
			}
			if = {
				limit = { event_target:target_revealed_lover = { character = ROOT } }
				event_target:target_spy_on = { character_event = { id = emf_intrigue.1518 } }
			}
		}
	}
}

# Blackmailed character agrees to the demand
letter_event = {
	id = emf_intrigue.1517
	desc = EVTDESC_emf_intrigue_1517
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		wealth = 100
		reverse_opinion = {
			who = FROM
			modifier = opinion_blackmailed
			years = 10
		}
	}
}

# Ping event for the lover
character_event = {
	id = emf_intrigue.1518
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { NOT = { has_character_flag = second_ping_needed } }
			FROMFROM = { letter_event = { id = emf_intrigue.1519 days = 3 } }
		}
		if = {
			limit = { has_character_flag = second_ping_needed }
			clr_character_flag = second_ping_needed
			FROM = { character_event = { id = emf_intrigue.1520 } }
		}
	}
}

# Blackmailed character refuses the demand
letter_event = {
	id = emf_intrigue.1519
	desc = EVTDESC_emf_intrigue_1519
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_emf_intrigue_1519 # Reveal them
		ai_chance = { factor = 100 }
		reverse_opinion = {
			who = FROMFROM
			modifier = opinion_failed_blackmail
			multiplier = 2
			years = 20
		}
		FROMFROM = { character_event = { id = WoL.60 tooltip = EVTTOOLTIP_WoL_60 } }
	}
	option = {
		name = EVTOPTB_emf_intrigue_1519 # Then forget about it
		ai_chance = { factor = 0 }
		reverse_opinion = {
			who = FROMFROM
			modifier = opinion_failed_blackmail
			years = 10
		}
	}
}

# Second ping for immediate reveal
character_event = {
	id = emf_intrigue.1520
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		event_target:target_spy_on = { character_event = { id = WoL.60 } }
	}
}

### ENFLAME RIVALRY

# Discovers chance to enflame rivalry between two rulers
character_event = {
	id = emf_intrigue.1525
	desc = EVTDESC_emf_intrigue_1525
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		event_target:target_spy_on = {
			top_liege = {
				random_realm_character = {
					limit = {
						is_ruler = yes
						has_regent = no
						OR = {
							tier = PREVPREV
							vassal_of = PREVPREV
						}
						NOR = {
							character = ROOT
							character = PREVPREV
							is_rival = PREVPREV
							reverse_opinion = { who = PREVPREV value = 0 }
							opinion = { who = PREVPREV value = 0 }
						}
					}
					save_event_target_as = target_new_rival
				}
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_spy_enflamed_rivalry
				months = 120
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1525 # Make the attempt
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = humble
				}
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.5
				NOT = {
					attribute_diff = {
						character = event_target:target_spy_on
						attribute = intrigue
						value = 1
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					attribute_diff = {
						character = event_target:target_new_rival
						attribute = intrigue
						value = 1
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = deceitful
					trait = cruel
					trait = envious
				}
			}
			modifier = {
				factor = 0.5
				opinion = { who = event_target:target_new_rival value = 25 }
			}
			modifier = {
				factor = 0.5
				opinion = { who = event_target:target_new_rival value = 50 }
			}
		}
		random_list = {
			40 = { # Attempt Succeeds
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 1.1
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 0.9
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 0.9
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 0.9
				}
				custom_tooltip = { text = "EVTTOOLTIP_ENFLAME_SUCCEED" }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1526 days = 7 }
				}
			}
			30 = { # Attempt Fails
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 0.9
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 1.1
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 1.1
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.1
				}
				custom_tooltip = { text = "EVTTOOLTIP_ENFLAME_FAIL" }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1529 days = 7 }
				}
			}
			30 = { # Attempt Fails & Is Revealed
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 0.8
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 1.2
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 1.2
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.2
				}
				custom_tooltip = { text = "EVTTOOLTIP_ENFLAME_REVEAL" }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1532 days = 7 }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1525 # It's not worth the effort
		ai_chance = {
			factor = 100
		}
	}
}

# Attempt to enflame rivary succeeds
character_event = {
	id = emf_intrigue.1526
	desc = EVTDESC_emf_intrigue_1526
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		event_target:target_spy_on = { add_rival = event_target:target_new_rival }
		hidden_tooltip = {
			event_target:target_spy_on = { character_event = { id = emf_intrigue.1527 } }
			event_target:target_new_rival = { character_event = { id = emf_intrigue.1528 } }
		}
	}
}

# Inform the spy target
character_event = {
	id = emf_intrigue.1527
	desc = EVTDESC_emf_intrigue_1527
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTDESC_emf_intrigue_1527
		tooltip = { add_rival = event_target:target_new_rival }
	}
}

# Inform the new rival
character_event = {
	id = emf_intrigue.1528
	desc = EVTDESC_emf_intrigue_1528
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTDESC_emf_intrigue_1528
		tooltip = { add_rival = event_target:target_spy_on }
	}
}
	
# Attempt to enflame rivary fails
character_event = {
	id = emf_intrigue.1529
	desc = EVTDESC_emf_intrigue_1529
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		prestige = -25
		hidden_tooltip = {
			event_target:target_spy_on = { character_event = { id = emf_intrigue.1530 } }
			event_target:target_new_rival = { character_event = { id = emf_intrigue.1531 } }
		}
	}
}

# Inform the spy target
character_event = {
	id = emf_intrigue.1530
	desc = EVTDESC_emf_intrigue_1530
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTDESC_emf_intrigue_1530
		opinion = {
			who = event_target:target_new_rival
			modifier = opinion_irritated
			years = 5
		}
	}
}

# Inform the new rival
character_event = {
	id = emf_intrigue.1531
	desc = EVTDESC_emf_intrigue_1531
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTDESC_emf_intrigue_1530
		opinion = {
			who = event_target:target_spy_on
			modifier = opinion_irritated
			years = 5
		}
	}
}

# Attempt to enflame rivary fails & is perhaps revealed
character_event = {
	id = emf_intrigue.1532
	desc = EVTDESC_emf_intrigue_1532
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		prestige = -50
		random = {
			chance = 50
			modifier = {
				attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
				factor = 0.5
			}
			modifier = {
				event_target:target_spy_on = {
					attribute_diff = { character = ROOT attribute = intrigue value = 3 }
				}
				factor = 1.5
			}
			event_target:target_spy_on = { character_event = { id = emf_intrigue.1533 tooltip = EVTTOOLTIP_ENFLAME_DISCOVER } }
		}
		random = {
			chance = 50
			modifier = {
				attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
				factor = 0.5
			}
			modifier = {
				event_target:target_new_rival = {
					attribute_diff = { character = ROOT attribute = intrigue value = 3 }
				}
				factor = 1.5
			}
			event_target:target_new_rival = { character_event = { id = emf_intrigue.1534 tooltip = EVTTOOLTIP_ENFLAME_DISCOVER } }
		}
		custom_tooltip = { text = EVTTOOLTIP_STOP_SPYING }
		hidden_tooltip = {
			character_event = { id = WoL.2069 } # Clear out flags and end spying
		}
	}
}

# Inform the spy target
character_event = {
	id = emf_intrigue.1533
	desc = EVTDESC_emf_intrigue_1533
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = FROM value = -25 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTDESC_emf_intrigue_1533
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = FROM
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = FROM modifier = opinion_outraged years = 10 }
		}
	}
}

# Inform the new rival
character_event = {
	id = emf_intrigue.1534
	desc = EVTDESC_emf_intrigue_1534
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = FROM value = -25 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTDESC_emf_intrigue_1533
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = FROM
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = FROM modifier = opinion_outraged years = 10 }
		}
	}
}

### REDUCE RELATIONS WITH LIEGE

# Discovers chance to reduce relations with liege
character_event = {
	id = emf_intrigue.1540
	desc = EVTDESC_emf_intrigue_1540
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		event_target:target_spy_on = {
			liege = { save_event_target_as = target_new_rival }
			reverse_opinion = {
				who = ROOT
				modifier = opinion_spy_enflamed_rivalry
				months = 120
			}
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1525 # Make the attempt
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honest
					trait = humble
				}
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.5
				NOT = {
					attribute_diff = {
						character = event_target:target_spy_on
						attribute = intrigue
						value = 1
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					attribute_diff = {
						character = event_target:target_new_rival
						attribute = intrigue
						value = 1
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					trait = deceitful
					trait = cruel
					trait = envious
				}
			}
			modifier = {
				factor = 0.5
				opinion = { who = event_target:target_new_rival value = 25 }
			}
			modifier = {
				factor = 0.5
				opinion = { who = event_target:target_new_rival value = 50 }
			}
		}
		random_list = {
			40 = { # Attempt Succeeds
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 1.1
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 1.1
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 0.9
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 0.9
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 0.9
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 0.9
				}
				event_target:target_spy_on = { custom_tooltip = { text = "EVTTOOLTIP_REDUCE_SUCCEED" } }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1541 days = 7 }
				}
			}
			30 = { # Attempt Fails
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 0.9
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 0.9
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 1.1
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 1.1
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.1
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.1
				}
				event_target:target_spy_on = { custom_tooltip = { text = "EVTTOOLTIP_REDUCE_FAIL" } }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1544 days = 7 }
				}
			}
			30 = { # Attempt Fails & Is Revealed
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 6 }
					factor = 0.8
				}
				modifier = {
					attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 6 }
					factor = 0.8
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 1 } }
					factor = 1.2
				}
				modifier = {
					NOT = { attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 1 } }
					factor = 1.2
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 3 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_spy_on = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.2
				}
				modifier = {
					event_target:target_new_rival = {
						attribute_diff = { character = ROOT attribute = intrigue value = 6 }
					}
					factor = 1.2
				}
				event_target:target_spy_on = { custom_tooltip = { text = "EVTTOOLTIP_REDUCE_REVEAL" } }
				hidden_tooltip = {
					character_event = { id = emf_intrigue.1545 days = 7 }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_emf_intrigue_1525 # It's not worth the effort
		ai_chance = {
			factor = 100
		}
	}
}

# Attempt to reduce relations succeeds
character_event = {
	id = emf_intrigue.1541
	desc = EVTDESC_emf_intrigue_1541
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		prestige = 50
		hidden_tooltip = {
			event_target:target_spy_on = { character_event = { id = emf_intrigue.1542 } }
			event_target:target_new_rival = { character_event = { id = emf_intrigue.1543 } }
		}
	}
}

# Inform the spy target
character_event = {
	id = emf_intrigue.1542
	desc = EVTDESC_emf_intrigue_1542
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = event_target:target_new_rival value = -50 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTDESC_emf_intrigue_1542
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = event_target:target_new_rival
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = event_target:target_new_rival modifier = opinion_outraged years = 10 }
		}
	}
}

# Inform the liege
character_event = {
	id = emf_intrigue.1543
	desc = EVTDESC_emf_intrigue_1543
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = event_target:target_spy_on value = -50 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTOPTA_emf_intrigue_1542
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = event_target:target_spy_on
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = event_target:target_spy_on modifier = opinion_outraged years = 10 }
		}
	}
}

# Attempt to reduce relations fails
character_event = {
	id = emf_intrigue.1544
	desc = EVTDESC_emf_intrigue_1544
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		prestige = -25
	}
}

# Attempt to reduce relations fails & is perhaps revealed
character_event = {
	id = emf_intrigue.1545
	desc = EVTDESC_emf_intrigue_1545
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		prestige = -50
		random = {
			chance = 50
			modifier = {
				attribute_diff = { character = event_target:target_spy_on attribute = intrigue value = 3 }
				factor = 0.5
			}
			modifier = {
				event_target:target_spy_on = {
					attribute_diff = { character = ROOT attribute = intrigue value = 3 }
				}
				factor = 1.5
			}
			event_target:target_spy_on = { character_event = { id = emf_intrigue.1546 tooltip = EVTTOOLTIP_ENFLAME_DISCOVER } }
		}
		random = {
			chance = 50
			modifier = {
				attribute_diff = { character = event_target:target_new_rival attribute = intrigue value = 3 }
				factor = 0.5
			}
			modifier = {
				event_target:target_new_rival = {
					attribute_diff = { character = ROOT attribute = intrigue value = 3 }
				}
				factor = 1.5
			}
			event_target:target_new_rival = { character_event = { id = emf_intrigue.1547 tooltip = EVTTOOLTIP_ENFLAME_DISCOVER } }
		}
		custom_tooltip = { text = EVTTOOLTIP_STOP_SPYING }
		hidden_tooltip = {
			character_event = { id = WoL.2069 } # Clear out flags and end spying
		}
	}
}

# Inform the spy target
character_event = {
	id = emf_intrigue.1546
	desc = EVTDESC_emf_intrigue_1546
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = FROM value = -25 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTDESC_emf_intrigue_1546
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = FROM
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = FROM modifier = opinion_outraged years = 10 }
		}
	}
}

# Inform the liege
character_event = {
	id = emf_intrigue.1547
	desc = EVTDESC_emf_intrigue_1547
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { opinion = { who = FROM value = -25 } }
			}
			set_character_flag = needs_rivalry
		}
	}
	
	option = {
		name = EVTDESC_emf_intrigue_1546
		if = {
			limit = { has_character_flag = needs_rivalry }
			clr_character_flag = needs_rivalry
			add_rival = FROM
		}
		if = {
			limit = { NOT = { has_character_flag = needs_rivalry } }
			opinion = { who = FROM modifier = opinion_outraged years = 10 }
		}
	}
}

