# -*- ck2.events -*-

# Written by Flavio

namespace=HFP

###################################################
###################################################

#Physical state is affected by physique_variable.
#Threshold to become fat is 15. Any score above causes increasingly bad health issues.
#Threshold to become malnourished is -15. Any score below causes increasingly bad health issues.

#If you apply one of the two traits by event without checking the variable, any event that does check the variable will automatically remove it whenever it fires.
#All variable checks are saved in 00_scripted_effects, these are the most commonly used:

# gain_weight_small_effect 		(+5 physique_variable)
# gain_weight_medium_effect 		(+10 physique_variable)
# gain_weight_large_effect 		(+15 physique_variable)

# balance_weight_small_effect 	(+/-2 physique_variable)
# balance_weight_medium_effect 	(+/-5 physique_variable)
# balance_weight_large_effect 	(+/-10 physique_variable)

# lose_weight_small_effect 		(-5 physique_variable)
# lose_weight_medium_effect 		(-10 physique_variable)
# lose_weight_large_effect 		(-15 physique_variable)

## Balance_Weight_Effects are used for training and healthy habits events.
## They reduce physique_variable of fat characters and increase physique_variable of malnourished characters, attempting to bring it back to 0.

# weight_trait_check_effect		Checks and applies the correct trait the character deserves without affecting the physique_variable.

# Note that you need to use weight_trait_check after using one of the other effects, otherwise the traits will not be applied automatically, even if
# the character has surpassed the variable threshold.

# Example:


#	option = { #I will fast for a week
#		name = EVTOPTAHFP20600
#		lose_weight_medium_effect = yes  	#Reduces the variable's score
#		weight_trait_check_effect = yes 	#Checks what is the variable's score after reduction and either removes is_fat, adds is_malnourished, or both, depending on the circumstance.
#	}

# The check is handled by a separate effect in the event of the scripter wishing to have it fire in a later event, or in case the trait is added in some other manner.

###################################################
###################################################

#Notification: is_fat
character_event = {
	id = HFP.20600
	desc = EVTDESCHFP20600
	picture = GFX_evt_fancy_feast

	notification = yes

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20600
	}
}
#Notification: no longer is_fat
character_event = {
	id = HFP.20601
	desc = EVTDESCHFP20601
	picture = GFX_evt_recovery

	notification = yes

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20601
	}
}

#Notification: is_malnourished
character_event = {
	id = HFP.20602
	desc = EVTDESCHFP20602
	picture = GFX_evt_bad_news

	notification = yes

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20602
	}
}

#Notification: no longer is_malnourished
character_event = {
	id = HFP.20603
	desc = EVTDESCHFP20603
	picture = GFX_evt_recovery

	notification = yes

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20603
	}
}

#On_action: on_five_years pulse. Hidden event to check all of a character's traits/modifiers/etc. and determine if he gains or lose a small amount of physique_variable.
##The event may then decide if the character receives a random event tied to his current score or not.
 character_event = {
	id = HFP.20604
	hide_window = yes

	min_age = 11

	is_triggered_only = yes
	
	trigger = {
		NOT = { practical_age = 55 }
	}

	immediate = {
		#Traits
		if = {
			limit = { trait = indulgent_wastrel
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = tough_soldier
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = haughty }
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = { trait = timid }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = rowdy
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = indolent
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}
			 }
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = playful
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = fussy }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = stressed
				trait = gluttonous
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = stressed
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = stressed
				NOR = {
					trait = temperate
					trait = gluttonous
				}
			}
			random_list = {
				50 = { change_variable = { which = physique_variable value = -1 } }
				50 = { change_variable = { which = physique_variable value = 1 } }
				10 = {  }
			}
		}
		if = {
			limit = {
				trait = depressed
				trait = gluttonous
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = depressed
				trait = temperate
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = depressed
				NOR = {
					trait = temperate
					trait = gluttonous
				}
			}
			random_list = {
				50 = { change_variable = { which = physique_variable value = -2 } }
				50 = { change_variable = { which = physique_variable value = 2 } }
				10 = {  }
			}
		}
		if = {
			limit = {
				trait = wroth
				NOR = {
					trait = temperate
					trait = gluttonous
				}
			}
			random_list = {
				50 = { change_variable = { which = physique_variable value = -1 } }
				50 = { change_variable = { which = physique_variable value = 1 } }
				10 = {  }
			}
		}
		if = {
			limit = { trait = maimed }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = infirm }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { is_incapable = yes }
			change_variable = { which = physique_variable value = -4 }
		}
		if = {
			limit = { trait = drunkard }
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = physician
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = physician
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = { trait = ill }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = pneumonic }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = syphilitic }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = leper }
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = { trait = has_tuberculosis }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = has_typhoid_fever }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = has_typhus }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = has_bubonic_plague }
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = { trait = has_measles }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = has_small_pox }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = has_aztec_disease }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = sickly }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = flu }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = dysentery }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = gout }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = food_poisoning }
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = { trait = cancer }
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = { trait = dancing_plague }
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = { trait = scurvy }
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = { trait = mangled }
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = { trait = pregnant }
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = strong
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = harelip
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = inbred
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = weak
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = robust
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = feeble
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = sturdy
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = hedonist
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = scholar
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = mystic
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = duelist
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = duelist
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = hunter
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = hunter
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = falconer
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = falconer
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = gluttonous
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = slothful
				trait = gluttonous
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = slothful
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = slothful
				NOR = {
					trait = temperate
					trait = gluttonous
				}
			}
			random_list = {
				50 = { change_variable = { which = physique_variable value = -1 } }
				50 = { change_variable = { which = physique_variable value = 1 } }
			}
		}
		if = {
			limit = {
				trait = wroth
				trait = gluttonous
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = wroth
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = diligent
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = diligent
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = shy
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = gregarious
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = paranoid
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = on_pilgrimage
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = on_indian_pilgrimage
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = travelling
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = decadent
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				trait = monk
				trait = diligent
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = nun
				trait = diligent
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = eunuch
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = peasant_leader
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = heresiarch
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = adventurer
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = adventurer
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = varangian
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = varangian
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = berserker
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = berserker
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = viking
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = viking
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = pirate
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = pirate
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = ravager
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = ravager
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = shieldmaiden
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = shieldmaiden
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				is_member_of_any_warrior_lodge_trigger = yes
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				is_member_of_any_warrior_lodge_trigger = yes
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				OR = {
					trait = crusader
					trait = mujahid
					trait = valhalla_bound
					trait = eagle_warrior
					trait = sun_warrior
					trait = ukkos_shield
					trait = nyames_shield
					trait = peruns_chosen
					trait = romuvas_own
					trait = ares_own
					trait = tengri_warrior
					trait = shaddai
					trait = gondi_shahansha

				}
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				OR = { trait = crusader
				}
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = in_hiding
				trait = gluttonous
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = in_hiding
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = cannibal_trait
				prisoner = no
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = kow_tow_travels
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = on_hajj
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = vomiting
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				trait = diarrhea
			}
			change_variable = { which = physique_variable value = -2 }
		}

		#Modifiers
		if = {
			limit = {
				has_character_modifier = well_fed
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = apathetic
			}
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = {
				has_character_modifier = mother_vow_temperance
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = mother_exposed_to_elements
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = the_dungeon
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = the_oubliette
			}
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = {
				has_character_modifier = holding_large_feast
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = in_seclusion
				trait = gluttonous
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = in_seclusion
				trait = temperate
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = in_meditation
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = doing_penance
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = out_traveling
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = wine_meat
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				trait = diligent
				has_character_modifier = the_bookaddict
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = diligent
				has_character_modifier = tortured
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				trait = diligent
				has_character_modifier = the_bibliophage
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = tortured_prisoner
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = master_hunter
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = master_hunter
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = wild_hunter
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = wild_hunter
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {  #Works for balance agaisnt both extremes.
				has_character_modifier = hard_diet
				NOR = {
					trait = diligent
					trait = slothful
				}
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -10 }
		}
		if = {
			limit = {
				has_character_modifier = hard_diet
				NOR = {
					trait = diligent
					trait = slothful
				}
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 10 }
		}
		if = {
			limit = {  #Works for balance agaisnt both extremes.
				has_character_modifier = hard_diet
				trait = diligent
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -12 }
		}
		if = {
			limit = {
				has_character_modifier = hard_diet
				trait = diligent
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 12 }
		}
		if = {
			limit = {  #Works for balance agaisnt both extremes.
				has_character_modifier = hard_diet
				trait = slothful
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -8 }
		}
		if = {
			limit = {
				has_character_modifier = hard_diet
				trait = slothful
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 8 }
		}
		if = {
			limit = {
				has_character_modifier = hunters_physique
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = hunters_physique
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_character_modifier = one_year_fasting
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = the_flagellant
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = fabulous_feast
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = muslim_hedonist
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_character_modifier = broken_spirit
			}
			change_variable = { which = physique_variable value = -4 }
		}
		if = {
			limit = {
				has_character_modifier = sleep_deprivation
			}
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = {
				has_character_modifier = normal_food_shortage
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = starving_food_shortage
			}
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = {
				has_character_modifier = greedy_food_shortage
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_character_modifier = mild_illness
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = severe_illness
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = bedridden_illness
			}
			change_variable = { which = physique_variable value = -3 }
		}
		if = {
			limit = {
				has_character_modifier = hashish_addict
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_character_modifier = withdrawal_symptoms
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = focused_on_training
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				has_character_modifier = focused_on_training
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_character_modifier = apathetic
			}
			change_variable = { which = physique_variable value = -4 }
		}
		if = {
			limit = {
				has_character_modifier = bad_nights_sleep
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_character_modifier = nocturnal_studies
			}
			change_variable = { which = physique_variable value = -1 }
		}

		#Status
		if = {
			limit = {
				religion = buddhist
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				prisoner = yes
				NOT = { has_character_modifier = house_arrest }
			}
			change_variable = { which = physique_variable value = -5 }
		}
		if = {
			limit = {
				prisoner = yes
				has_character_modifier = house_arrest
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				war = yes
				in_command = yes
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				war = yes
				in_command = yes
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				is_merchant_republic = yes
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				is_republic = yes
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				is_feudal = yes
			}
			random = { chance = 20 change_variable = { which = physique_variable value = 1 } }
		}
		if = {
			limit = {
				is_tribal = yes
			}
			random = { chance = 30 change_variable = { which = physique_variable value = -2 } }
		}
		if = {
			limit = {
				is_nomadic = yes
			}
			random = { chance = 30 change_variable = { which = physique_variable value = -2 } }
		}
		if = {
			limit = {
				is_married = yes
				num_of_children = 1
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				is_married = yes
				num_of_children = 1
				any_child = { NOT = { is_adult = yes } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = { #Lazy prince
				has_minor_title = title_prince
				NOT = { trait = diligent }
				is_female = no
				NOT = { has_minor_title = title_commander }
				is_ruler = no
				OR = {
					father = { tier = KING }
					mother = { tier = KING }
				}
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = { #Lazy princess
				has_minor_title = title_prince
				NOR = {
					has_law = status_of_women_3
					has_law = status_of_women_4
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
				NOT = { has_minor_title = title_commander }
				is_ruler = no
				OR = {
					father = { tier = KING }
					mother = { tier = KING }
				}
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = { #Lazy Imperial prince
				has_minor_title = title_prince
				NOT = { trait = diligent }
				is_female = no
				NOT = { has_minor_title = title_commander }
				is_ruler = no
				OR = {
					father = { tier = EMPEROR }
					mother = { tier = EMPEROR }
				}
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = { #Lazy Imperial princess
				has_minor_title = title_prince
				NOR = {
					has_law = status_of_women_3
					has_law = status_of_women_4
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
				NOT = { has_minor_title = title_commander }
				is_ruler = no
				OR = {
					father = { tier = EMPEROR }
					mother = { tier = EMPEROR }
				}
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 3 }
		}

		#Focus
		if = {
			limit = {
				has_focus = focus_family
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_focus = focus_carousing
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 3 }
		}
		if = {
			limit = {
				has_focus = focus_scholarship
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_focus = focus_theology
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_focus = focus_war
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_focus = focus_war
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_focus = focus_hunting
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 2 }
		}
		if = {
			limit = {
				has_focus = focus_hunting
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -2 }
		}
		#Teen Focus
		if = {
			limit = {
				has_focus = focus_ed_diplomacy
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_focus = focus_ed_learning
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				has_focus = focus_ed_martial
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 1 }
		}
		if = {
			limit = {
				has_focus = focus_ed_martial
				OR = {
					prisoner = no
					has_character_modifier = house_arrest
				}

				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -1 }
		}


		#Societies
		if = {
			limit = {
				is_monastic_member_trigger = yes
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				society_member_of = hermetics
				NOT = { check_variable = { which = physique_variable value = -1 } }
			}
			change_variable = { which = physique_variable value = 3 }
		}
		if = {
			limit = {
				society_member_of = hermetics
				check_variable = { which = physique_variable value = 1 }
			}
			change_variable = { which = physique_variable value = -3 }
		}

		#Prosperity
		if = {
			limit = {
				location = {
					has_province_modifier = prosperity_modifier_1
				}
			}
			random = { chance = 5 change_variable = { which = physique_variable value = 1 } }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = prosperity_modifier_2
				}
			}
			random = { chance = 25 change_variable = { which = physique_variable value = 1 } }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = prosperity_modifier_3
				}
			}
			random = { chance = 50 change_variable = { which = physique_variable value = 1 } }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = depopulated_1
				}
			}
			random = { chance = 50 change_variable = { which = physique_variable value = -1 } }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = depopulated_2
				}
			}
			change_variable = { which = physique_variable value = -1 }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = depopulated_3
				}
			}
			change_variable = { which = physique_variable value = -2 }
		}

		# Africa: Drought
		if = {
			limit = {
				location = {
					has_province_modifier = africa_drought_risk
				}
			}
			change_variable = { which = physique_variable value = -2 }
		}
		if = {
			limit = {
				location = {
					has_province_modifier = africa_drought
				}
			}
			change_variable = { which = physique_variable value = -3 }
		}

		#Health complications
		if = {
			limit = {
				practical_age = 35
				check_variable = { which = physique_variable value = 30 }
			}
			health = -0.75
		}

		if = {
			limit = {
				practical_age = 35
				NOT = { check_variable = { which = physique_variable value = -30 } }
			}
			health = -0.75
		}

		#Special modifiers
		if = {
			limit = {
				trait = is_fat
				NOT = { has_character_modifier = hard_diet }
				OR = {
					has_character_modifier = coping_glutton
					has_character_modifier = stress_relief
					has_character_modifier = anti_depression
					has_character_modifier = munificent_modifier
					has_character_modifier = jolly_matron_modifier
					has_character_modifier = jolly_patriarch_modifier
				}
			}
			random_list = {
				30 = {
					modifier = {
						factor = 0.8
						trait = slothful
					}
					modifier = {
						factor = 0.8
						trait = gluttonous
					}
					# Nothing
				}
				50 = { change_variable = { which = physique_variable value = 1 } }
				20 = {
					modifier = {
						factor = 0.8
						trait = diligent
					}
					modifier = {
						factor = 0.8
						trait = temperate
					}
					change_variable = { which = physique_variable value = 2 }
				}
			}
		}
		if = {
			limit = {
				trait = is_malnourished
				NOT = { has_character_modifier = hard_diet }
				OR = {
					has_character_modifier = coping_glutton
					has_character_modifier = stress_relief
					has_character_modifier = anti_depression
					has_character_modifier = extremely_temperate
					has_character_modifier = restless_study
					has_character_modifier = restless_prayer
					has_character_modifier = malnourished_paranoia
					has_character_modifier = tireless_worker
				}
			}
			random_list = {
				30 = {
					modifier = {
						factor = 0.8
						trait = slothful
					}
					modifier = {
						factor = 0.8
						trait = gluttonous
					}
					# Nothing
				}
				50 = { change_variable = { which = physique_variable value = -1 } }
				20 = {
					modifier = {
						factor = 0.8
						trait = diligent
					}
					modifier = {
						factor = 0.8
						trait = temperate
					}
					change_variable = { which = physique_variable value = -2 }
				}
			}
		}

		weight_flavor_conditions_effect = yes #Fire flavor event if trigger has been met.
		#####################################################
		if = {
			limit = { NOT = { has_character_flag = flag_primed_physique } }
			weight_trait_check_effect = yes #Apply or remove either of the traits, depending on resulting score, if no random flavor is about to fire.
		}
	}
}

# Random growing fat event.
##		Checks for spouse's/close relatives' response.

# Random starving event.
##		Checks for spouse's/close relatives' response.


#Growing fat - hidden event to determine reason.
character_event = {
	id = HFP.20605
	hide_window = yes

	min_age = 20
	only_capable = yes
	prisoner = no

	trigger = {
		NOT = { trait = is_fat }
		#NOT = { trait = temperate }
		is_inaccessible_trigger = no
		check_variable = { which = physique_variable value = 6 }

		NOT = { #Can happen only once
			has_fat_for_flag_trigger = yes
		}
		OR = { 				#Possible reasons
			trait = gluttonous
			trait = stressed
			trait = depressed
			trait = slothful
			trait = hedonist
			trait = wroth
			trait = drunkard
			has_focus = focus_carousing
			AND = { #Happy mom
				OR = {
					trait = kind
					trait = content
					has_focus = focus_family
					trait = patient
				}
				NOR = {
					trait = cruel
					trait = envious
				}
				is_female = yes
				any_child = {
					is_alive = yes
					is_adult = no
				}
			}
			AND = { #Content husband
				OR = {
					trait = kind
					trait = content
					has_focus = focus_family
					trait = patient
				}
				NOR = {
					trait = cruel
					trait = envious
				}
				is_female = no
				is_married = yes
				OR = {
					num_of_consorts = 2
					num_of_children = 2
					num_of_spouses = 2
				}
			}
			AND = { #Frustrated lustful survivor mom
				has_character_flag = survivor_mom
				trait = celibate
				trait = lustful
			}
			AND = { #Frustrated eunuch
				trait = eunuch
				trait = lustful
			}
			AND = { #Generic fallback
				NOT = { trait = temperate }
				check_variable = { which = physique_variable value = 10 }
			}
		}
	}

	is_triggered_only = yes

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.75
			war = yes
			in_command = yes
		}
		modifier = {
			factor = 0.75
			trait = temperate
		}
		modifier = {
			factor = 1.85
			trait = hedonist
		}
		modifier = {
			factor = 1.25
			trait = one_legged
		}
		modifier = {
			factor = 0.75
			trait = mangled
		}
		modifier = {
			factor = 0.75
			trait = weak
		}
		modifier = {
			factor = 1.15
			trait = strong
		}
		modifier = {
			factor = 0.75
			trait = feeble
		}
		modifier = {
			factor = 1.25
			trait = robust
		}
		modifier = {
			factor = 1.5
			trait = sturdy
		}
		modifier = {
			factor = 1.5
			trait = gluttonous
		}
		modifier = {
			factor = 0.75
			has_focus = focus_war
		}
		modifier = {
			factor = 0.5
			has_focus = focus_hunting
		}
		modifier = {
			factor = 0.9
			has_focus = focus_scholarship
		}
		modifier = {
			factor = 0.9
			has_focus = focus_theology
		}
		modifier = {
			factor = 1.75
			has_focus = focus_family
		}
		modifier = {
			factor = 1.75
			has_focus = focus_carousing
		}
		modifier = {
			factor = 0.75
			NOT = { practical_age = 25 }
		}
		modifier = {
			factor = 0.9
			NOT = { practical_age = 35 }
		}
		modifier = {
			factor = 0.65
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 1.25
			trait = depressed
		}
		modifier = {
			factor = 0.5
			is_tribal = yes
		}
		modifier = {
			factor = 0.35
			is_nomadic = yes
		}
		modifier = {
			factor = 1.35
			practical_age = 40
			is_tribal = no
			is_nomadic = no
		}
		modifier = {
			factor = 1.75
			is_female = yes 	#Settled mother
			num_of_children = 1
			is_married = yes
			OR = {
				has_lover = no
				any_lover = { is_married = ROOT }
			}
			NOR = {
				trait = shieldmaiden
				trait = sea_queen
				has_character_flag = special_marshal
			}
			gender_equality_trigger = no
			trigger_if = {
				limit = { is_landed = yes }
				higher_real_tier_than = COUNT
			}
			trigger_else = {
				liege = { higher_real_tier_than = COUNT }
			}
		}
		modifier = {
			factor = 0.5
			# Trophy spouse more likely to watch their weight
			emf_is_trophy_spouse = yes
		}
		modifier = {
			factor = 1.75
			# Bored consort
			is_ruler = no
			OR = {
				AND = {
					is_married = yes
					NOT = {
						any_spouse = {
							is_ruler = no
							at_location = ROOT
						}
					}
				}
				AND = {
					is_consort = yes
					NOT = {
						consort = {
							is_ruler = no
							at_location = ROOT
						}
					}
				}
			}
			NOR = {
				any_lover = {
					at_location = ROOT
					prisoner = no
				}
				any_friend = {
					at_location = ROOT
					prisoner = no
				}
				any_child = {
					is_adult = no
					at_location = ROOT
					prisoner = no
				}
			}
			has_any_lifestyle_trait = no
			is_in_society = no
			NOR = {
				trait = poet
				trait = falconer
			}
			OR = {
				is_dumb_trigger = no
				is_smart_trigger = yes
			}
			block_general_event_trigger = no
			has_minor_title = no
		}
		modifier = {
			factor = 1.5
			trait = eunuch
		}
		modifier = {
			factor = 1.25
			tier = KING
		}
		modifier = {
			factor = 1.35
			tier = EMPEROR
		}
		modifier = {
			factor = 1.35
			has_character_modifier = well_fed
		}
		modifier = {
			factor = 0.85
			NOT = { check_variable = { which = physique_variable value = 8 } }
		}
		modifier = {
			factor = 0.85
			NOT = { check_variable = { which = physique_variable value = 10 } }
		}
		modifier = {
			factor = 1.25
			check_variable = { which = physique_variable value = 11 }
		}
		modifier = {
			factor = 1.25
			check_variable = { which = physique_variable value = 12 }
		}
		modifier = {
			factor = 1.5
			check_variable = { which = physique_variable value = 13 }
		}
		modifier = {
			factor = 1.5
			check_variable = { which = physique_variable value = 14 }
		}
		modifier = {
			factor = 1.5		#Should already have it by this point, but just in case...
			check_variable = { which = physique_variable value = 15 }
		}
		modifier = {
			factor = 2
			check_variable = { which = physique_variable value = 20 }
		}
		modifier = {
			factor = 3
			check_variable = { which = physique_variable value = 25 }
		}
	}

	immediate = {
		random_list = { #First pick a reason.
			1 = {
				modifier = {
					factor = 0
					NOT = { trait = gluttonous }
				}
				set_character_flag = flag_fat_for_gluttony
			}
			8 = {
				modifier = {
					factor = 0
					NOT = { trait = stressed }
				}
				set_character_flag = flag_fat_for_stress
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { trait = depressed }
				}
				set_character_flag = flag_fat_for_depression
			}
			3 = {
				modifier = {
					factor = 0
					NOT = { trait = slothful }
				}
				set_character_flag = flag_fat_for_sloth
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { trait = hedonist }
				}
				set_character_flag = flag_fat_for_hedonism
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { has_focus = focus_family }
					NOT = { trait = kind }
					NOT = { trait = content }
				}
				modifier = {
					factor = 0
					is_female = no
				}
				modifier = {
					factor = 0
					NOT = {
						any_child = {
							is_alive = yes
							is_adult = no
						}
					}
				}
				set_character_flag = flag_fat_for_family
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { has_focus = focus_carousing }
				}
				set_character_flag = flag_fat_for_carousing
			}
			20 = {
				modifier = {
					factor = 0
					NOT = { has_focus = focus_family }
					NOT = { trait = kind }
					NOT = { trait = content }
				}
				modifier = {
					factor = 0
					is_female = yes
				}
				modifier = {
					factor = 0
					NOT = { num_of_consorts = 2 }
					NOT = { num_of_spouses = 1 }
					NOT = { num_of_children = 2 }
				}
				set_character_flag = flag_fat_for_content
			}
			30 = {
				modifier = {
					factor = 0
					NOR = {
						trait = eunuch
						trait = celibate
					}
				}
				modifier = {
					factor = 0
					NOR = { trait = lustful }
				}
				set_character_flag = flag_fat_for_lust
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { trait = wroth }
				}
				set_character_flag = flag_fat_for_wroth
			}
			5 = {
				modifier = {
					factor = 0
					NOT = { trait = drunkard }
				}
				set_character_flag = flag_fat_for_drunkard
			}
		}
		if = {
			limit = {
				has_fat_for_flag_trigger = no #Fallback
			}
			set_character_flag = flag_fat_for_boredom
		}
		character_event = { id = HFP.20606 } #Then fire actual event.
	}
}

character_event = {
	id = HFP.20606
	desc = {
		text = EVTDESCAHFP20606
			picture = GFX_evt_fancy_feast
		trigger = {
			has_character_flag = flag_fat_for_gluttony
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20606
			picture = GFX_evt_fancy_feast
		trigger = {
			has_character_flag = flag_fat_for_gluttony
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCCHFP20606
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_fat_for_stress
			is_female = no
		}
	}
	desc = {
		text = EVTDESCDHFP20606
			picture = GFX_evt_bad_news_female
		trigger = {
			has_character_flag = flag_fat_for_stress
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCEHFP20606
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_fat_for_depression
			is_female = no
		}
	}
	desc = {
		text = EVTDESCEHFP20606		#EVTDESCFHFP20606 Unneeded
			picture = GFX_evt_bad_news_female
		trigger = {
			has_character_flag = flag_fat_for_depression
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCGHFP20606
			picture = GFX_evt_drunk
		trigger = {
			has_character_flag = flag_fat_for_sloth
			is_female = no
		}
	}
	desc = {
		text = EVTDESCHHFP20606
			picture = GFX_evt_recovery
		trigger = {
			has_character_flag = flag_fat_for_sloth
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCIHFP20606
			picture = GFX_evt_jugglers_arabic
		trigger = {
			has_character_flag = flag_fat_for_hedonism
			is_female = no
		}
	}
	desc = {
		text = EVTDESCIHFP20606		#EVTDESCLHFP20606 Unneeded
			picture = GFX_evt_brothel
		trigger = {
			has_character_flag = flag_fat_for_hedonism
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCMHFP20606
			picture = GFX_evt_birth
		trigger = {
			has_character_flag = flag_fat_for_family
		}
	}
	desc = {
		text = EVTDESCNHFP20606
			picture = GFX_evt_daughter_asking_father
		trigger = {
			has_character_flag = flag_fat_for_content
		}
	}
	desc = {
		text = EVTDESCOHFP20606
			picture = GFX_evt_fancy_feast
		trigger = {
			has_character_flag = flag_fat_for_carousing
			is_female = no
		}
	}
	desc = {
		text = EVTDESCOHFP20606 #EVTDESCPHFP20606 Unneeded
			picture = GFX_evt_fancy_feast
		trigger = {
			has_character_flag = flag_fat_for_carousing
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCQHFP20606
		picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_fat_for_lust
			trait = celibate
			is_female = no
		}
	}
	desc = {
		text = EVTDESCQHFP20606
		picture = GFX_evt_bad_news_female
		trigger = {
			has_character_flag = flag_fat_for_lust
			trait = celibate
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCRHFP20606
		picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_fat_for_lust
			trait = eunuch
		}
	}
	desc = {
		text = EVTDESCSHFP20606
			picture = GFX_evt_quarrel
		trigger = {
			has_character_flag = flag_fat_for_wroth
			is_female = no
		}
	}
	desc = {
		text = EVTDESCTHFP20606
			picture = GFX_evt_quarrel
		trigger = {
			has_character_flag = flag_fat_for_wroth
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCUHFP20606
			picture = GFX_evt_drunk
		trigger = {
			has_character_flag = flag_fat_for_drunkard
			is_female = no
		}
	}
	desc = {
		text = EVTDESCVHFP20606
			picture = GFX_evt_brothel
		trigger = {
			has_character_flag = flag_fat_for_drunkard
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCWHFP20606
			picture = GFX_evt_feast
		trigger = {
			has_character_flag = flag_fat_for_boredom
			is_female = no
		}
	}
	desc = {
		text = EVTDESCXHFP20606
			picture = GFX_evt_brothel
		trigger = {
			has_character_flag = flag_fat_for_boredom
			is_female = yes
		}
	}
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = { #Find something else to do.
		name = EVTOPTAHFP20606
		trigger = {
			has_character_flag = flag_fat_for_lust
			trait = diligent
		}
		tooltip_info = diligent
		custom_tooltip = { text = tooltip_workout_20600 }
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		balance_weight_small_effect = yes
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0.5
				trait = gluttonous
			}
		}
	}
	option = { #Not the fate of a warrior!
		name = EVTOPTBHFP20606
		trigger = {
			NOT = { has_character_flag = flag_fat_for_lust }
			NOR = {
				has_disease_trigger = yes
				is_maimed_trigger = yes
			}
			combat_rating = 40
		}
		custom_tooltip = { text = tooltip_workout_20600 }
		tooltip_info = combat_rating
		balance_weight_small_effect = yes
		weight_trait_check_effect = yes
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}
	option = { #Comply
		name = {
			text = EVTOPTCHFP20606_A
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_gluttony
					has_character_flag = flag_fat_for_boredom
				}
			}
		}
		name = {
			text = EVTOPTCHFP20606_B
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_stress
					has_character_flag = flag_fat_for_depression
				}
			}
		}
		name = {
			text = EVTOPTCHFP20606_C
			trigger = {
				has_character_flag = flag_fat_for_sloth
			}
		}
		name = {
			text = EVTOPTCHFP20606_D
			trigger = {
				has_character_flag = flag_fat_for_hedonism
			}
		}
		name = {
			text = EVTOPTCHFP20606_F
			trigger = {
				has_character_flag = flag_fat_for_carousing
			}
		}
		name = {
			text = EVTOPTCHFP20606_G
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_family
					has_character_flag = flag_fat_for_content
				}
			}
		}
		name = {
			text = EVTOPTCHFP20606_H
			trigger = {
				has_character_flag = flag_fat_for_lust
			}
		}
		name = {
			text = EVTOPTCHFP20606_I
			trigger = {
				has_character_flag = flag_fat_for_wroth
			}
		}
		name = {
			text = EVTOPTCHFP20606_L
			trigger = {
				has_character_flag = flag_fat_for_drunkard
			}
		}
		custom_tooltip = { text = tooltip_warning_20606 }
		apply_weight_modifier_effect = yes
		if = {
			limit = { NOT = { has_character_flag = flag_primed_physique } }
			gain_weight_large_effect = yes
		}
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		weight_trait_check_effect = yes
		if = {
			limit = {
				OR = {
					has_character_flag = flag_fat_for_gluttony
					has_character_flag = flag_fat_for_boredom
					has_character_flag = flag_fat_for_stress
					has_character_flag = flag_fat_for_depression
					has_character_flag = flag_fat_for_sloth
					has_character_flag = flag_fat_for_hedonism
					has_character_flag = flag_fat_for_carousing
					has_character_flag = flag_fat_for_wroth
					has_character_flag = flag_fat_for_drunkard
				}
			}
			if = {
				limit = { trait = stressed }
				custom_tooltip = { text = tooltip_physique_loses_stressed }
			}
			if = {
				limit = { trait = depressed }
				custom_tooltip = { text = tooltip_physique_loses_depressed }
			}
			if = {
				limit = {
					OR = {
						has_character_flag = flag_fat_for_hedonism
						has_character_flag = flag_fat_for_carousing
						has_character_flag = flag_fat_for_drunkard

					}
				}
				custom_tooltip = { text = tooltip_physique_becomes_popular }
			}
			hidden_tooltip = {
				random_list = {
					45 = {
						modifier = {
							factor = 0
							NOT = { trait = stressed }
						}
						character_event = { id = HFP.20607 days = 50 random = 50 } #Lose stressed
					}
					45 = {
						modifier = {
							factor = 0
							NOT = { trait = depressed }
						}
						character_event = { id = HFP.20608 days = 50 random = 50 } #Lose depressed
					}
					2 = {
						modifier = {
							factor = 0.5
							check_variable = { which = physique_variable value = 20 }
						}
						modifier = {
							factor = 0.5
							NOT = { trait = feeble }
						}
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_fat_for_hedonism
								has_character_flag = flag_fat_for_carousing
							}
						}
						character_event = { id = HFP.20609 days = 50 random = 50 } #Gain health
					}
					5 = {
						modifier = {
							factor = 1.5
							check_variable = { which = physique_variable value = 20 }
						}
						modifier = {
							factor = 1.75
							trait = sturdy
						}
						character_event = { id = HFP.20610 days = 50 random = 50 } #Lose health
					}
					30 = {
						modifier = {
							factor = 0
							NOR = {
								has_character_flag = flag_fat_for_hedonism
								has_character_flag = flag_fat_for_carousing
							}
						}
						modifier = {
							factor = 0.5
							trait = greedy
						}
						character_event = { id = HFP.20611 days = 50 random = 50 } #become charitable, vassal opinion.
					}
					10 = {
						modifier = {
							factor = 0
							is_ruler = no
						}
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_fat_for_stress
								has_character_flag = flag_fat_for_depression
								has_character_flag = flag_fat_for_wroth
							}
						}
						character_event = { id = HFP.20663 days = 50 random = 50 } #Become proud.
					}
					5 = {
						modifier = {
							factor = 0
							has_character_flag = flag_fat_for_wroth
						}
						character_event = { id = HFP.20664 days = 50 random = 50 } #Become patient.
					}
					1 = {
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_fat_for_stress
								has_character_flag = flag_fat_for_depression
								has_character_flag = flag_fat_for_wroth
							}
						}
						character_event = { id = HFP.20665 days = 50 random = 50 } #Become content.
					}
				}
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = flag_fat_for_family
					has_character_flag = flag_fat_for_content
				}
			}
			if = {
				limit = { trait = stressed }
				custom_tooltip = { text = tooltip_physique_loses_stressed }
			}
			if = {
				limit = { trait = depressed }
				custom_tooltip = { text = tooltip_physique_loses_depressed }
			}
			custom_tooltip = { text = tooltip_physique_becomes_beloved }
			hidden_tooltip = {
				random_list = {
					35 = {
						modifier = {
							factor = 0
							NOT = { trait = stressed }
						}
						character_event = { id = HFP.20607 days = 50 random = 50 } #Lose stressed
					}
					35 = {
						modifier = {
							factor = 0
							NOT = { trait = depressed }
						}
						character_event = { id = HFP.20608 days = 50 random = 50 } #Lose depressed
					}
					3 = {
						modifier = {
							factor = 1.5
							check_variable = { which = physique_variable value = 20 }
						}
						modifier = {
							factor = 1.75
							trait = sturdy
						}
						character_event = { id = HFP.20610 days = 50 random = 50 } #Lose health
					}
					30 = {
						modifier = {
							factor = 0.5
							trait = cruel
						}
						character_event = { id = HFP.20613 days = 50 random = 50 } #become kind, loved by family.
					}
					10 = {
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_fat_for_stress
								has_character_flag = flag_fat_for_depression
								has_character_flag = flag_fat_for_wroth
							}
						}
						modifier = {
							factor = 0
							is_ruler = no
						}
						character_event = { id = HFP.20663 days = 50 random = 50 } #Become proud.
					}
					5 = {
						modifier = {
							factor = 0
							has_character_flag = flag_fat_for_wroth
						}
						character_event = { id = HFP.20664 days = 50 random = 50 } #Become patient.
					}
					1 = {
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_fat_for_stress
								has_character_flag = flag_fat_for_depression
								has_character_flag = flag_fat_for_wroth
							}
						}
						character_event = { id = HFP.20665 days = 50 random = 50 } #Become content.
					}
				}
			}
		}

		if = {
			limit = {
				has_character_flag = flag_fat_for_lust
			}
			if = {
				limit = { trait = stressed }
				custom_tooltip = { text = tooltip_physique_loses_stressed }
			}
			if = {
				limit = { trait = depressed }
				custom_tooltip = { text = tooltip_physique_loses_depressed }
			}
			custom_tooltip = { text = tooltip_physique_becomes_learned }
			hidden_tooltip = {
				random_list = {
					35 = {
						modifier = {
							factor = 0
							NOT = { trait = stressed }
						}
						character_event = { id = HFP.20607 days = 50 random = 50 } #Lose stressed
					}
					35 = {
						modifier = {
							factor = 0
							NOT = { trait = depressed }
						}
						character_event = { id = HFP.20608 days = 50 random = 50 } #Lose depressed
					}
					5 = {
						modifier = {
							factor = 1.5
							check_variable = { which = physique_variable value = 20 }
						}
						modifier = {
							factor = 1.75
							trait = sturdy
						}
						character_event = { id = HFP.20610 days = 50 random = 50 } #Lose health
					}
					30 = {
						modifier = {
							factor = 0.5
							trait = cruel
						}
						character_event = { id = HFP.20615 days = 50 random = 50 } #gain learning.
					}
				}
			}
		}
		hidden_tooltip = { #Outside assistance
			#First check for spouse
			#Then check for lover
			#Then check for friend
			#Then check for close relative
			#Else out of luck
			if = { #Spouse helps
				limit = {
					is_married = yes
					any_spouse = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_spouse = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20616 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Lover helps
				limit = {
					any_lover = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_lover = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20616 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Friend helps
				limit = {
					any_friend = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_friend = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20616 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Close relative helps
				limit = {
					any_close_relative = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_close_relative = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20616 days = 10 random = 20 }
				}
				break = yes
			}
		}
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
		}
	}
	option = { #Resist
		name = EVTOPTDHFP20606
		custom_tooltip = { text = tooltip_physique_fat_resist }
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		hidden_tooltip = {
			random_list = {
				80 = { #Success
					character_event = { id = HFP.20621 days = 50 random = 50 } #Balanced recovery.
				}
				20 = { #Failure
					modifier = {
						factor = 1.5
						trait = slothful
					}
					modifier = {
						factor = 1.5
						trait = gluttonous
					}
					modifier = {
						factor = 1.5
						trait = drunkard
					}
					modifier = {
						factor = 1.5
						trait = content
					}
					modifier = {
						factor = 1.75
						trait = hedonist
					}
					modifier = {
						factor = 1.5
						practical_age = 40
					}
					modifier = {
						factor = 0.75
						combat_rating = 20
					}
					modifier = {
						factor = 0.75
						combat_rating = 30
					}
					modifier = {
						factor = 0.5
						combat_rating = 40
					}
					modifier = {
						factor = 0.5
						combat_rating = 50
					}
					character_event = { id = HFP.20622 days = 50 random = 50 } #Relapse, final chance.
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
		}
	}
}

#Acceptance results:
#Fat character no longer stressed
character_event = {
	id = HFP.20607
	desc = EVTDESCHFP20607
	picture = GFX_evt_fancy_feast

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20607
		tooltip_info = is_fat
		if = {
			limit = {
				OR = {
					has_character_modifier = stress_relief
				}
			}
			remove_character_modifier = stress_relief
		}
		if = {
			limit = { NOT = { trait = stressed } }
			custom_tooltip = { text = tooltip_health_improves }
			hidden_tooltip = { health = 0.5 }
		}
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Fat character no longer depressed
character_event = {
	id = HFP.20608
	desc = {
		text = EVTDESCAHFP20608
		trigger = {
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20608
		trigger = {
			is_female = yes
		}
	}
	picture = GFX_evt_fancy_feast

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20608
		tooltip_info = is_fat
		if = {
			limit = {
				OR = {
					has_character_modifier = anti_depression
				}
			}
			remove_character_modifier = anti_depression
		}
		if = {
			limit = { NOT = { trait = depressed } }
			custom_tooltip = { text = tooltip_health_improves }
			hidden_tooltip = { health = 0.5 }
		}
		if = {
			limit = { trait = depressed }
			remove_trait = depressed
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Fat character small health boost.
character_event = {
	id = HFP.20609
	desc = EVTDESCHFP20609
	picture = GFX_evt_fancy_feast

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20609
		tooltip_info = is_fat
		health = 0.25
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}
#Fat character loses health.
character_event = {
	id = HFP.20610
	desc = EVTDESCHFP20610
	picture = GFX_evt_bad_news

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20610
		tooltip_info = is_fat
		custom_tooltip = { text = tooltip_health_deteriorates }
		hidden_tooltip = { health = -0.5 }
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Fat carouser becomes charitable/popular.
character_event = {
	id = HFP.20611
	desc = EVTDESCHFP20611
	picture = GFX_evt_sultan

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20611
		tooltip_info = is_fat
		if = {
			limit = { trait = charitable }
			tiered_prestige_reward_effect = yes
		}
		if = {
			limit = { trait = greedy }
			remove_trait = greedy
		}
		if = {
			limit = { NOT = { trait = charitable } }
			add_trait = charitable
		}
		custom_tooltip = { text = tooltip_physique_popularity }
		hidden_tooltip = {
			any_courtier_or_vassal = {
				limit = {
					NOT = {
						has_opinion_modifier = {
						who = ROOT
						modifier = opinion_did_not_take_my_advice
						}
					}
				}
				character_event = { id = HFP.20612 }
			}
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Notify vassals and courtiers, give opinion.
character_event = {
	id = HFP.20612
	desc = EVTDESCHFP20612
	picture = GFX_evt_sultan

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20612
		opinion = {
			who = FROM
			modifier = opinion_jovial_host
		}
		ai_chance = { factor = 100 }
	}
}

#Fat mother becomes kind/beloved by family.
character_event = {
	id = HFP.20613
	desc = {
		text = EVTDESCAHFP20613
		picture = GFX_evt_daughter_asking_father
		trigger = {
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20613
		picture = GFX_evt_birth
		trigger = {
			is_female = yes
		}
	}
	picture = GFX_evt_daughter_asking_father

	trigger = {
		trait = is_fat
		OR = {
			AND = { #Must still have children.
				is_female = yes
				num_of_children = yes
			}
			AND = { #Must still be married.
				is_female = no
				OR = {
					is_married = yes
					num_of_consorts = 1
				}
			}

		}
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20613
		tooltip_info = is_fat
		if = {
			limit = { trait = kind }
			tiered_piety_reward_effect = yes
		}
		if = {
			limit = { trait = cruel }
			remove_trait = cruel
		}
		if = {
			limit = { NOT = { trait = kind } }
			add_trait = kind
		}
		custom_tooltip = { text = tooltip_physique_beloved }
		hidden_tooltip = {
			any_close_relative = {
				limit = {
					NOT = {
						has_opinion_modifier = {
						who = ROOT
						modifier = opinion_did_not_take_my_advice
						}
					}
				}
				character_event = { id = HFP.20614 }
			}
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Notify close family members, give opinion.
character_event = {
	id = HFP.20614
	desc = {
		text = EVTDESCAHFP20614
		picture = GFX_evt_daughter_asking_father
		trigger = {
			FROM = { is_female = no }
		}
	}
	desc = {
		text = EVTDESCAHFP20614 # EVTDESCBHFP20614 Unneeded
		picture = GFX_evt_birth
		trigger = {
			FROM = { is_female = yes }
		}
	}
	picture = GFX_evt_daughter_asking_father

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20614
		if = {
			limit = { is_female = no }
			opinion = {
			who = FROM
			modifier = opinion_jovial_patriarch
			years = 15
			}
		}
		if = {
			limit = { is_female = yes }
			opinion = {
			who = FROM
			modifier = opinion_jovial_matron
			years = 15
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Fat lustful becomes reader.
character_event = {
	id = HFP.20615
	desc = EVTDESCHFP20615
	picture = GFX_evt_library

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20615
		tooltip_info = is_fat
		if = {
			limit = { trait = diligent }
			change_learning = 2
		}
		if = {
			limit = { trait = slothful }
			remove_trait = slothful
		}
		if = {
			limit = { NOT = { trait = diligent } }
			add_trait = diligent
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}
#############################################

#Spouse/lover/etc. notified of character's state.
character_event = {
	id = HFP.20616
	desc = {
		text = EVTDESCAHFP20616
		trigger = {
			FROM = { is_female = no }
		}
	}
	desc = {
		text = EVTDESCBHFP20616
		trigger = {
			FROM = { is_female = yes }
		}
	}
	picture = GFX_evt_fancy_feast

	trigger = {
		FROM = {
			is_alive = yes
			trait = is_fat
		}
	}

	is_triggered_only = yes

	option = { #Finds nothing wrong.
		name = EVTOPTAHFP20616
		trigger = { trait = is_fat }
		custom_tooltip = { text = tooltip_20616_A }
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_flattered
				years = 5
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = HFP.20617 }
			}
		}
		tooltip_info = is_fat
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.5
				trait = temperate
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
		}
	}
	option = { #Berates politely.
		name = EVTOPTBHFP20616
		custom_tooltip = { text = tooltip_20616_B }
		hidden_tooltip = {
			FROM = {
				set_character_flag = flag_physique_persuasion
				character_event = { id = HFP.20618 }
			}
		}
		trigger = { diplomacy = 10 }
		tooltip_info = diplomacy
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 1.75
				trait = kind
			}
		}
	}
	option = { #Berates rudely.
		name = EVTOPTCHFP20616
		custom_tooltip = { text = tooltip_20616_C }
		hidden_tooltip = {
			FROM = {
				character_event = { id = HFP.20618 }
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 1.75
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
	}
	option = { #Does not care.
		name = EVTOPTDHFP20616
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 4
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
	}
}

#Fat character receives appreciation.
character_event = {
	id = HFP.20617
	desc = EVTDESCHFP20617
	picture = GFX_evt_fancy_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20617
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_flattered
				years = 3
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Fat character warned by loved one.
character_event = {
	id = HFP.20618
	desc = {
		text = EVTDESCAHFP20618
		trigger = {
			has_character_flag = flag_physique_persuasion
		}
	}
	desc = {
		text = EVTDESCBHFP20618
		trigger = {
			NOT = { has_character_flag = flag_physique_persuasion }
		}
	}
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Heed plea
		name = EVTOPTAHFP20618
		custom_tooltip = { text = tooltip_20618_A }
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		remove_weight_modifier_effect = yes
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_took_my_advice
				years = 5
			}
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		clear_fat_flags_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20619 days = 20 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = trusting
			}
		}
	}
	option = { #Ignore
		name = EVTOPTBHFP20618
		custom_tooltip = { text = tooltip_20618_B }

		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_did_not_take_my_advice
				years = 5
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20620 days = 20 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.75
				trait = stubborn
			}
			modifier = {
				factor = 0.15
				has_character_flag = flag_physique_persuasion
			}
		}
	}
	after = { clr_character_flag = flag_physique_persuasion }
}

#Third party notified character took advice.
character_event = {
	id = HFP.20619
	desc = EVTDESCHFP20619
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20619
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_took_my_advice
				years = 5
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Third party notified character ignored advice.
character_event = {
	id = HFP.20620
	desc = EVTDESCHFP20620
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20620
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_did_not_take_my_advice
				years = 5
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Character balanced out.
character_event = {
	id = HFP.20621
	desc = EVTDESCHFP20621
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	immediate = {
		balance_weight_medium_effect = yes
	}

	option = {
		name = EVTOPTAHFP20621
		if = {
			limit = { trait = gluttonous }
			remove_trait = gluttonous
		}
		if = {
			limit = { NOT = { check_variable = { which = physique_variable value = 15 } } }
			weight_trait_check_effect = yes
		}
		clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Character relapse. Last chance.
character_event = {
	id = HFP.20622
	desc = EVTDESCHFP20622
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20622
		trigger = {
			OR = {
				has_character_flag = flag_fat_for_gluttony
				has_character_flag = flag_fat_for_boredom
			}
		}
		custom_tooltip = { text = tooltip_20622_A }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			add_trait = stressed
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTBHFP20622
		trigger = {
			has_character_flag = flag_fat_for_stress
			has_character_flag = flag_fat_for_wroth
		}
		custom_tooltip = { text = tooltip_20622_B }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTCHFP20622
		trigger = { has_character_flag = flag_fat_for_depression }
		custom_tooltip = { text = tooltip_20622_C }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			add_trait = stressed
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTDHFP20622
		trigger = { has_character_flag = flag_fat_for_sloth }
		custom_tooltip = { text = tooltip_20622_D }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			add_trait = stressed
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTEHFP20622
		trigger = {
			OR = {
				has_character_flag = flag_fat_for_hedonism
				has_character_flag = flag_fat_for_carousing
				has_character_flag = flag_fat_for_drunkard
			}
		}
		custom_tooltip = { text = tooltip_20622_E }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTZHFP20622
		trigger = {
			has_character_flag = flag_fat_for_drunkard
		}
		custom_tooltip = { text = tooltip_20622_Z }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			remove_trait = drunkard
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			random = {
				chance = 50
				remove_trait = drunkard
				add_trait = depressed
			}
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTFHFP20622
		trigger = {
			OR = {
				has_character_flag = flag_fat_for_family
				has_character_flag = flag_fat_for_content
			}
		}
		custom_tooltip = { text = tooltip_20622_F }
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		else = {
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTFHGP20622
		trigger = {
			has_character_flag = flag_fat_for_lust
			trait = celibate
			NOT = { trait = eunuch }
		}
		custom_tooltip = { text = tooltip_20622_G }
		remove_trait = celibate
		unprotected_sex_effect_stranger = yes
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTFHHP20622
		trigger = {
			has_character_flag = flag_fat_for_lust
		}
		custom_tooltip = { text = tooltip_20622_H }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		else = {
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_fat_flags_effect = yes
		lose_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = { #Stop trying
		name = {
			text = EVTOPTCHFP20622_A
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_gluttony
					has_character_flag = flag_fat_for_boredom
				}
			}
		}
		name = {
			text = EVTOPTCHFP20622_B
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_stress
					has_character_flag = flag_fat_for_depression
				}
			}
		}
		name = {
			text = EVTOPTCHFP20622_C
			trigger = {
				has_character_flag = flag_fat_for_sloth
			}
		}
		name = {
			text = EVTOPTCHFP20622_D
			trigger = {
				has_character_flag = flag_fat_for_hedonism
			}
		}
		name = {
			text = EVTOPTCHFP20622_D #EVTOPTCHFP20622_E
			trigger = {
				has_character_flag = flag_fat_for_carousing
			}
		}
		name = {
			text = EVTOPTCHFP20622_F
			trigger = {
				OR = {
					has_character_flag = flag_fat_for_family
					has_character_flag = flag_fat_for_content
				}
			}
		}
		name = {
			text = EVTOPTCHFP20622_G
			trigger = {
				has_character_flag = flag_fat_for_lust
			}
		}
		name = {
			text = EVTOPTCHFP20622_H
			trigger = {
				has_character_flag = flag_fat_for_wroth
			}
		}
		name = {
			text = EVTOPTCHFP20622_I
			trigger = {
				has_character_flag = flag_fat_for_drunkard
			}
		}
		custom_tooltip = { text = tooltip_20622_I }
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		remove_character_modifier = hard_diet
		#clear_fat_flags_effect = yes
		gain_weight_small_effect = yes
		ai_chance = { factor = 100 }
	}
}


#Starving - hidden event to determine reason.
character_event = {
	id = HFP.20628
	hide_window = yes

	min_age = 20
	only_capable = yes
	prisoner = no

	trigger = {
		NOT = { trait = is_malnourished }
		#NOT = { trait = gluttonous }
		is_inaccessible_trigger = no
		NOT = { check_variable = { which = physique_variable value = -6 } }
		NOT = { #Can happen only once
 			has_malnourished_for_flag_trigger = yes
		}
		OR = { 				#Possible reasons
			trait = temperate
			trait = stressed
			trait = depressed
			trait = slothful
			trait = scholar
			trait = cannibal_trait
			trait = craven
			has_focus = focus_scholarship
			AND = {
				NOT = { trait = cynical }
				trait = theologian
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					religion_group = indian_group
				}
			}
			AND = {
				NOT = { trait = cynical }
				has_focus = focus_theology
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					religion_group = indian_group
				}
			}
			trait = paranoid
			trait = diligent
			AND = {
				NOT = { trait = gluttonous }
				NOT = { check_variable = { which = physique_variable value = -10 } }
			}
		}
	}

	is_triggered_only = yes

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.85
			war = yes
			in_command = yes
		}
		modifier = {
			factor = 0.75
			trait = gluttonous
		}
		modifier = {
			factor = 0.45
			trait = hedonist
		}
		modifier = {
			factor = 1.25
			trait = one_legged
		}
		modifier = {
			factor = 1.75
			trait = mangled
		}
		modifier = {
			factor = 1.75
			trait = weak
		}
		modifier = {
			factor = 0.95
			trait = strong
		}
		modifier = {
			factor = 0.75
			trait = sturdy
		}
		modifier = {
			factor = 0.95
			trait = robust
		}
		modifier = {
			factor = 1.5
			trait = feeble
		}
		modifier = {
			factor = 1.85
			trait = temperate
		}
		modifier = {
			factor = 0.5
			has_focus = focus_carousing
		}
		modifier = {
			factor = 0.75
			has_focus = focus_family
		}
		modifier = {
			factor = 1.25
			has_focus = focus_scholarship
		}
		modifier = {
			factor = 1.25
			has_focus = focus_theology
		}
		modifier = {
			factor = 0.95
			has_focus = focus_war
		}
		modifier = {
			factor = 0.75
			NOT = { practical_age = 25 }
		}
		modifier = {
			factor = 0.85
			NOT = { practical_age = 35 }
		}
		modifier = {
			factor = 0.5
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 1.25
			trait = depressed
		}
		modifier = {
			factor = 1.25
			is_tribal = yes
		}
		modifier = {
			factor = 1.5
			is_nomadic = yes
		}
		modifier = {
			factor = 1.35
			practical_age = 40
		}
		modifier = {
			factor = 0.5
			# Trophy spouse more likely to watch their weight
			emf_is_trophy_spouse = yes
		}
		modifier = {
			factor = 1.75
			# Lovesick
			trait = shy
			is_married = yes
			has_lover = yes
			NOT = {
				any_lover = {
					OR = {
						is_married = no
						is_married = ROOT
					}
				}
			}
		}
		modifier = {
			factor = 0.75
			is_ruler = no
		}
		modifier = {
			factor = 0.9
			tier = BARON
		}
		modifier = {
			factor = 0.5
			has_character_modifier = well_fed
		}
		modifier = {
			factor = 1.25
		NOT = { check_variable = { which = physique_variable value = -11 } }
		}
		modifier = {
			factor = 1.25
		NOT = { check_variable = { which = physique_variable value = -12 } }
		}
		modifier = {
			factor = 1.5
		NOT = { check_variable = { which = physique_variable value = -13 } }
		}
		modifier = {
			factor = 1.5
		NOT = { check_variable = { which = physique_variable value = -14 } }
		}
		modifier = {
			factor = 1.5		#Should already have it by this point, but just in case...
		NOT = { check_variable = { which = physique_variable value = -15 } }
		}
		modifier = {
			factor = 2
		NOT = { check_variable = { which = physique_variable value = -20 } }
		}
		modifier = {
			factor = 3
		NOT = { check_variable = { which = physique_variable value = -25 } }
		}
	}

	immediate = {
		random_list = { #First pick a reason.
			1 = {
				modifier = {
					factor = 0
					NOT = { trait = temperate }
				}
				set_character_flag = flag_malnourished_for_temperance
			}
			4 = {
				modifier = {
					factor = 0
					NOT = { trait = stressed }
				}
				set_character_flag = flag_malnourished_for_stress
			}
			4 = {
				modifier = {
					factor = 0
					NOT = { trait = depressed }
				}
				set_character_flag = flag_malnourished_for_depression
			}
			1 = {
				modifier = {
					factor = 0
					NOT = { trait = slothful }
				}
				set_character_flag = flag_malnourished_for_sloth
			}
			20 = {
				modifier = {
					factor = 0
					NOT = { trait = scholar }
					NOT = { has_focus = focus_scholarship }
				}
				set_character_flag = flag_malnourished_for_study
			}
			20 = {
				modifier = {
					factor = 0
					trait = cynical
				}
				modifier = {
					factor = 0
					NOT = { has_focus = focus_theology }
					NOT = { trait = theologian }
				}
				modifier = {
					factor = 0
					NOT = { religion_group = christian }
					NOT = { religion_group = muslim }
					NOT = { religion_group = jewish_group }
					NOT = { religion_group = indian_group }
				}
				set_character_flag = flag_malnourished_for_faith
			}
			20 = {
				modifier = {
					factor = 0
					NOT = { trait = paranoid }
				}
				set_character_flag = flag_malnourished_for_paranoia
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { trait = diligent }
				}
				set_character_flag = flag_malnourished_for_diligence
			}
			20 = {
				modifier = {
					factor = 0
					NOT = { trait = cannibal_trait }
				}
				set_character_flag = flag_malnourished_for_cannibal
			}
			2 = {
				modifier = {
					factor = 0
					NOT = { trait = craven }
				}
				set_character_flag = flag_malnourished_for_craven
			}
		}
		if= {
			limit = {
				has_malnourished_for_flag_trigger = no
			}
			set_character_flag = flag_malnourished_for_boredom
		}
		character_event = { id = HFP.20629 } #Then fire actual event.
	}
}

#Growing thinner, what to do?
character_event = {
	id = HFP.20629
	desc = {
		text = EVTDESCAHFP20629
			picture = GFX_evt_garden
		trigger = {
			has_character_flag = flag_malnourished_for_temperance
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20629
			picture = GFX_evt_garden
		trigger = {
			has_character_flag = flag_malnourished_for_temperance
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCCHFP20629
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_malnourished_for_stress
			is_female = no
		}
	}
	desc = {
		text = EVTDESCDHFP20629
			picture = GFX_evt_courtiers_talking
		trigger = {
			has_character_flag = flag_malnourished_for_stress
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCEHFP20629
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_malnourished_for_depression
			is_female = no
		}
	}
	desc = {
		text = EVTDESCEHFP20629 #EVTDESCFHFP20629 Unneeded
			picture = GFX_evt_bad_news_female
		trigger = {
			has_character_flag = flag_malnourished_for_depression
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCGHFP20629
			picture = GFX_evt_drunk
		trigger = {
			has_character_flag = flag_malnourished_for_sloth
			is_female = no
		}
	}
	desc = {
		text = EVTDESCGHFP20629 #EVTDESCHHFP20629 Unneeded
			picture = GFX_evt_recovery
		trigger = {
			has_character_flag = flag_malnourished_for_sloth
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCIHFP20629
			picture = GFX_evt_library
		trigger = {
			has_character_flag = flag_malnourished_for_study
			is_female = no
		}
	}
	desc = {
		text = EVTDESCIHFP20629 #EVTDESCLHFP20629 Unneeded
			picture = GFX_evt_princess_byzantine
		trigger = {
			has_character_flag = flag_malnourished_for_study
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCMHFP20629
			picture = GFX_evt_bishop
		trigger = {
			has_character_flag = flag_malnourished_for_faith
			is_female = no
		}
	}
	desc = {
		text = EVTDESCMHFP20629 #EVTDESCNHFP20629 Unneeded
			picture = GFX_evt_bishop
		trigger = {
			has_character_flag = flag_malnourished_for_faith
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCOHFP20629
			picture = GFX_evt_lunatic
		trigger = {
			has_character_flag = flag_malnourished_for_paranoia
			is_female = no
		}
	}
	desc = {
		text = EVTDESCOHFP20629 #EVTDESCPHFP20629 Unneeded - Gosh darn it, malnurished loc sure is gender neutral...
			picture = GFX_evt_lunatic
		trigger = {
			has_character_flag = flag_malnourished_for_paranoia
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCQHFP20629
			picture = GFX_evt_council
		trigger = {
			has_character_flag = flag_malnourished_for_diligence
			is_female = no
		}
	}
	desc = {
		text = EVTDESCRHFP20629
			picture = GFX_evt_council
		trigger = {
			has_character_flag = flag_malnourished_for_diligence
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCSHFP20629
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_malnourished_for_cannibal
			is_female = no
		}
	}
	desc = {
		text = EVTDESCTHFP20629
			picture = GFX_evt_bad_news_female
		trigger = {
			has_character_flag = flag_malnourished_for_cannibal
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCUHFP20629
			picture = GFX_evt_bad_news
		trigger = {
			has_character_flag = flag_malnourished_for_craven
		}
	}
	desc = {
		text = EVTDESCVHFP20629
			picture = GFX_evt_recovery
		trigger = {
			has_character_flag = flag_malnourished_for_boredom
			is_female = no
		}
	}
	desc = {
		text = EVTDESCWHFP20629
			picture = GFX_evt_recovery
		trigger = {
			has_character_flag = flag_malnourished_for_boredom
			is_female = yes
		}
	}
	picture = GFX_evt_bad_news

	is_triggered_only = yes

	option = { #Rest a bit
		name = EVTOPTAHFP20629
		trigger = {
			NOR = {
				has_character_flag = flag_malnourished_for_paranoia
				has_character_flag = flag_malnourished_for_sloth
				has_character_flag = flag_malnourished_for_boredom
			}
			trait = slothful
		}
		custom_tooltip = { text = tooltip_rest_20600 }
		tooltip_info = slothful
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		balance_weight_small_effect = yes
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0.5
				trait = temperate
			}
		}
	}
	option = { #Not the fate of a warrior!
		name = EVTOPTBHFP20629
		trigger = {
			NOT = { has_character_flag = flag_malnourished_for_diligence }
			NOR = {
				has_disease_trigger = yes
				is_maimed_trigger = yes
			}
			combat_rating = 40
		}
		custom_tooltip = { text = tooltip_workout_20600 }
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		tooltip_info = combat_rating
		balance_weight_small_effect = yes
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = temperate
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
		}
	}
	option = { #Comply
		name = {
			text = EVTOPTCHFP20629_A
			trigger = {
				has_character_flag = flag_malnourished_for_temperance
			}
		}
		name = {
			text = EVTOPTCHFP20629_B
			trigger = {
				OR = {
					has_character_flag = flag_malnourished_for_stress
					has_character_flag = flag_malnourished_for_boredom
				}
			}
		}
		name = {
			text = EVTOPTCHFP20629_C
			trigger = {
				has_character_flag = flag_malnourished_for_depression
			}
		}
		name = {
			text = EVTOPTCHFP20629_D
			trigger = {
				has_character_flag = flag_malnourished_for_study
			}
		}
		name = {
			text = EVTOPTCHFP20629_F
			trigger = {
				has_character_flag = flag_malnourished_for_faith
			}
		}
		name = {
			text = EVTOPTCHFP20629_G
			trigger = {
				has_character_flag = flag_malnourished_for_diligence
			}
		}
		name = {
			text = EVTOPTCHFP20629_H
			trigger = {
				has_character_flag = flag_malnourished_for_paranoia
			}
		}
		name = {
			text = EVTOPTCHFP20629_I
			trigger = {
				has_character_flag = flag_malnourished_for_sloth
			}
		}
		name = {
			text = EVTOPTCHFP20629_L
			trigger = {
				has_character_flag = flag_malnourished_for_cannibal
			}
		}
		name = {
			text = EVTOPTCHFP20629_M
			trigger = {
				has_character_flag = flag_malnourished_for_craven
			}
		}
		custom_tooltip = { text = tooltip_warning_20629 }
		apply_weight_modifier_effect = yes
		if = {
			limit = { NOT = { has_character_flag = flag_primed_physique } } #If character has it, it means the event was fired by the hidden cleanup event, which means the character already fulfills the variable requirements.
			lose_weight_large_effect = yes
		}
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		weight_trait_check_effect = yes
		if = {
			limit = {
				OR = {
					has_character_flag = flag_malnourished_for_temperance
					has_character_flag = flag_malnourished_for_stress
					has_character_flag = flag_malnourished_for_depression
					has_character_flag = flag_malnourished_for_study
					has_character_flag = flag_malnourished_for_faith
					has_character_flag = flag_malnourished_for_diligence
					has_character_flag = flag_malnourished_for_boredom
				}
			}
			if = {
				limit = {
					NOT = { has_character_flag = flag_malnourished_for_study }
				}
				custom_tooltip = { text = tooltip_physique_gains_diligent } #Or related attribute.
			}
			if = {
				limit = {
					has_character_flag = flag_malnourished_for_study
				}
				custom_tooltip = { text = tooltip_physique_becomes_learned_B }
			}
			if = {
				limit = {
					has_character_flag = flag_malnourished_for_faith
				}
				custom_tooltip = { text = tooltip_physique_becomes_zealous }
			}
			hidden_tooltip = {
				random_list = {
					35 = {
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_depression
						}
						character_event = { id = HFP.20630 days = 50 random = 50 } #Becomes diligent or gains stewardship
					}
					35 = {
						modifier = {
							factor = 0
							NOT = { has_character_flag = flag_malnourished_for_depression }
						}
						character_event = { id = HFP.20631 days = 50 random = 50 } #Family's pity (opinion modifier).
					}
					35 = {
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_depression
						}
						character_event = { id = HFP.20633 days = 50 random = 50 } #Gains diplomacy
					}
					35 = {
						modifier = {
							factor = 0
							NOR = {
								has_character_flag = flag_malnourished_for_study
								has_character_flag = flag_malnourished_for_faith
							}
						}
						character_event = { id = HFP.20634 days = 50 random = 50 } #Gains learning
					}
					35 = {
						modifier = {
							factor = 0
							NOT = { has_character_flag = flag_malnourished_for_faith }
						}
						character_event = { id = HFP.20635 days = 50 random = 50 } #Becomes zealous or gains learning
					}
					2 = {
						modifier = {
							factor = 0.5
							NOT = { check_variable = { which = physique_variable value = -20 } }
						}
						modifier = {
							factor = 0.5
							NOT = { trait = sturdy }
						}
						modifier = {
							factor = 0
							OR = {
								has_character_flag = flag_malnourished_for_stress
								has_character_flag = flag_malnourished_for_depression
							}
						}
						character_event = { id = HFP.20636 days = 50 random = 50 } #Gain health
					}
					5 = {
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = physique_variable value = -20 } }
						}
						modifier = {
							factor = 1.75
							trait = feeble
						}
						character_event = { id = HFP.20637 days = 50 random = 50 } #Lose health
					}
					10 = {
						modifier = {
							factor = 0
							is_ruler = no
						}
						character_event = { id = HFP.20666 days = 50 random = 50 } #Become humble.
					}
				}
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = flag_malnourished_for_sloth
					has_character_flag = flag_malnourished_for_paranoia
					has_character_flag = flag_malnourished_for_cannibal
					has_character_flag = flag_malnourished_for_craven
				}
			}
			if = {
				limit = {
					trait = stressed
					NOT = { has_character_flag = flag_malnourished_for_paranoia }
				}
				custom_tooltip = { text = tooltip_physique_loses_stressed }
			}
			if = {
				limit = {
					OR = {
						has_character_flag = flag_malnourished_for_paranoia
						has_character_flag = flag_malnourished_for_cannibal
						has_character_flag = flag_malnourished_for_craven
					}
				}
				custom_tooltip = { text = tooltip_physique_gains_intrigue }
			}
			hidden_tooltip = {
				random_list = {
					35 = {
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_paranoia
						}
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_cannibal
						}
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_craven
						}
						modifier = {
							factor = 0
							NOT = { trait = stressed }
						}
						character_event = { id = HFP.20638 days = 50 random = 50 } #Lose stressed
					}
					2 = {
						modifier = {
							factor = 0.5
							NOT = { check_variable = { which = physique_variable value = -20 } }
						}
						modifier = {
							factor = 0.5
							NOT = { trait = sturdy }
						}
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_paranoia
						}
						character_event = { id = HFP.20636 days = 50 random = 50 } #Gain health
					}
					5 = {
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = physique_variable value = -20 } }
						}
						modifier = {
							factor = 1.75
							trait = feeble
						}
						character_event = { id = HFP.20637 days = 50 random = 50 } #Lose health
					}
					30 = {
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_sloth
						}
						character_event = { id = HFP.20639 days = 50 random = 50 } #Gain intrigue.
					}
					10 = {
						modifier = {
							factor = 0
							trait = envious
						}
						character_event = { id = HFP.20667 days = 50 random = 50 } #Become envious.
					}
					20 = {
						modifier = {
							factor = 0
							trait = cruel
						}
						modifier = {
							factor = 0
							has_character_flag = flag_malnourished_for_craven
						}
						character_event = { id = HFP.20668 days = 50 random = 50 } #Become cruel.
					}
				}
			}
		}

		hidden_tooltip = {
			#Outside assistance
			#First check for spouse
			#Then check for lover
			#Then check for friend
			#Then check for close relative
			#Else out of luck
			if = { #Spouse helps
				limit = {
					is_married = yes
					any_spouse = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_spouse = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20640 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Lover helps
				limit = {
					any_lover = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_lover = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20640 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Friend helps
				limit = {
					any_friend = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_friend = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20640 days = 10 random = 20 }
				}
				break = yes
			}
			if = { #Close relative helps
				limit = {
					any_close_relative = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
				}
				random_close_relative = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
					}
					character_event = { id = HFP.20640 days = 10 random = 20 }
				}
				break = yes
			}
		}
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
		}
	}
	option = { #Resist
		name = EVTOPTDHFP20629
		custom_tooltip = { text = tooltip_physique_malnourished_resist }
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		if = {
			limit = { has_character_flag = flag_primed_physique }
			clr_character_flag = flag_primed_physique
		}
		hidden_tooltip = {
			random_list = {
				80 = { #Success
					character_event = { id = HFP.20645 days = 50 random = 50 } #Balanced recovery.
				}
				20 = { #Failure
					modifier = {
						factor = 1.75
						trait = diligent
					}
					modifier = {
						factor = 1.75
						trait = stressed
					}
					modifier = {
						factor = 1.75
						trait = depressed
					}
					modifier = {
						factor = 1.5
						trait = temperate
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = ambitious
					}
					modifier = {
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						practical_age = 40
					}
					modifier = {
						factor = 0.75
						combat_rating = 20
					}
					modifier = {
						factor = 0.75
						combat_rating = 30
					}
					modifier = {
						factor = 0.5
						combat_rating = 40
					}
					modifier = {
						factor = 0.5
						combat_rating = 50
					}
					character_event = { id = HFP.20646 days = 50 random = 50 } #Relapse, final chance.
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
		}
	}
}

#Malnourished becomes diligent/stewardship
character_event = {
	id = HFP.20630
	desc = EVTDESCHFP20630
	picture = GFX_evt_council

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20630
		tooltip_info = is_malnourished
		if = {
			limit = { trait = diligent }
			change_stewardship = 2
		}
		if = {
			limit = { trait = slothful }
			remove_trait = slothful
		}
		if = {
			limit = { NOT = { trait = diligent } }
			add_trait = diligent
		}
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Depressed Malnourished gains family's pity.
character_event = {
	id = HFP.20631
	desc = EVTDESCHFP20631
	picture = GFX_evt_recovery

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20631
		tooltip_info = is_malnourished
		custom_tooltip = { text = tooltip_physique_pitied }
		hidden_tooltip = {
			any_close_relative = {
				limit = {
					NOR = {
						has_opinion_modifier = {
						who = ROOT
						modifier = opinion_did_not_take_my_advice
						}
						trait = cruel
					}
				}
				character_event = { id = HFP.20632 }
			}
		}
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Notify close family members, give opinion.
character_event = {
	id = HFP.20632
	desc = EVTDESCAHFP20632
	picture = GFX_evt_drunk

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20632
		opinion = {
			who = FROM
			modifier = opinion_pitiful_shell
			years = 15
		}
		ai_chance = { factor = 100 }
	}
}

#Malnourished gains diplomacy
character_event = {
	id = HFP.20633
	desc = EVTDESCHFP20633
	picture = GFX_evt_recieve_letter

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20633
		tooltip_info = is_malnourished
		change_diplomacy = 2
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished gains learning
character_event = {
	id = HFP.20634
	desc = EVTDESCHFP20634
	picture = GFX_evt_library

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20634
		tooltip_info = is_malnourished
		change_learning = 2
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}
#Malnourished becomes zealous/learning
character_event = {
	id = HFP.20635
	desc = EVTDESCHFP20635
	picture = GFX_evt_bishop

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20635
		tooltip_info = is_malnourished
		if = {
			limit = { trait = zealous }
			change_stewardship = 1
		}
		if = {
			limit = { trait = cynical }
			remove_trait = cynical
		}
		if = {
			limit = { NOT = { trait = zealous } }
			add_trait = zealous
		}
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished character small health boost.
character_event = {
	id = HFP.20636
	desc = EVTDESCHFP20636
	picture = GFX_evt_recovery

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20636
		tooltip_info = is_malnourished
		custom_tooltip = { text = tooltip_health_improves }
		hidden_tooltip = { health = 0.25 }
		# clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}
#Malnourished character loses health.
character_event = {
	id = HFP.20637
	desc = EVTDESCHFP20637
	picture = GFX_evt_bad_news

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20637
		tooltip_info = is_malnourished
		custom_tooltip = { text = tooltip_health_deteriorates }
		hidden_tooltip = { health = -0.5 }
		# clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished loses stressed
character_event = {
	id = HFP.20638
	desc = {
		text = EVTDESCAHFP20638
		picture = GFX_evt_recovery
		trigger = {
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20638
		picture = GFX_evt_recovery
		trigger = {
			is_female = yes
		}
	}
	picture = GFX_evt_recovery

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20638
		tooltip_info = is_malnourished
		if = {
			limit = {
				OR = {
					has_character_modifier = stress_relief
				}
			}
			remove_character_modifier = stress_relief
		}
		if = {
			limit = { NOT = { trait = stressed } }
			custom_tooltip = { text = tooltip_health_improves }
			hidden_tooltip = { health = 0.5 }
		}
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished gains intrigue
character_event = {
	id = HFP.20639
	desc = EVTDESCHFP20639
	picture = GFX_evt_lunatic

	trigger = {
		trait = is_malnourished
 		has_malnourished_for_flag_trigger = yes 	#Won't fire if recovered due to third party help in the meantime.
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20639
		tooltip_info = is_malnourished
		if = {
			limit = { NOT = { trait = stressed } }
			custom_tooltip = { text = tooltip_health_improves }
			hidden_tooltip = { health = 0.5 }
		}
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		#clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#############################################

#Spouse/lover/etc. notified of character's state.
character_event = {
	id = HFP.20640
	desc = EVTDESCHFP20640
	picture = GFX_evt_courtiers_talking

	trigger = {
		FROM = {
			is_alive = yes
			trait = is_malnourished
		}
	}

	is_triggered_only = yes

	option = { #Finds nothing wrong.
		name = EVTOPTAHFP20640
		trigger = { trait = is_malnourished }
		custom_tooltip = { text = tooltip_20640_A }
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_flattered
				years = 5
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = HFP.20641 }
			}
		}
		tooltip_info = is_malnourished
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 0.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}
	option = { #Berates politely.
		name = EVTOPTBHFP20640
		custom_tooltip = { text = tooltip_20640_B }
		hidden_tooltip = {
			FROM = {
				set_character_flag = flag_physique_persuasion
				character_event = { id = HFP.20642 }
			}
		}
		trigger = { diplomacy = 10 }
		tooltip_info = diplomacy
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 1.75
				trait = kind
			}
		}
	}
	option = { #Berates rudely.
		name = EVTOPTCHFP20640
		custom_tooltip = { text = tooltip_20640_C }
		hidden_tooltip = {
			FROM = {
				character_event = { id = HFP.20642 }
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 1.75
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
	}
	option = { #Does not care.
		name = EVTOPTDHFP20640
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 4
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
	}
}

#Malnourished character receives appreciation.
character_event = {
	id = HFP.20641
	desc = EVTDESCHFP20641
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20641
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_flattered
				years = 3
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Malnourished character warned by loved one.
character_event = {
	id = HFP.20642
	desc = {
		text = EVTDESCAHFP20642
		trigger = {
			has_character_flag = flag_physique_persuasion
		}
	}
	desc = {
		text = EVTDESCBHFP20642
		trigger = {
			NOT = { has_character_flag = flag_physique_persuasion }
		}
	}
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Heed plea
		name = EVTOPTAHFP20642
		custom_tooltip = { text = tooltip_20642_A }
		remove_weight_modifier_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_took_my_advice
				years = 5
			}
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		clear_malnourished_flags_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20643 days = 20 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = trusting
			}
		}
	}
	option = { #Ignore
		name = EVTOPTBHFP20642
		custom_tooltip = { text = tooltip_20642_B }

		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_did_not_take_my_advice
				years = 5
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20644 days = 20 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.75
				trait = stubborn
			}
			modifier = {
				factor = 0.15
				has_character_flag = flag_physique_persuasion
			}
		}
	}
	after = { clr_character_flag = flag_physique_persuasion }
}

#Third party notified character took advice.
character_event = {
	id = HFP.20643
	desc = EVTDESCHFP20643
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20643
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_took_my_advice
				years = 5
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Third party notified character ignored advice.
character_event = {
	id = HFP.20644
	desc = EVTDESCHFP20644
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20644
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_did_not_take_my_advice
				years = 5
			}
		}
		ai_chance = { factor = 100 }
	}
}

#Character balanced out.
character_event = {
	id = HFP.20645
	desc = EVTDESCHFP20645
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	immediate = {
		balance_weight_medium_effect = yes
	}
	option = {
		name = EVTOPTAHFP20645
		if = {
			limit = { trait = temperate }
			remove_trait = temperate
		}
		if = {
			limit = { check_variable = { which = physique_variable value = -15 } }
			weight_trait_check_effect = yes
		}
		clear_malnourished_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Character relapse. Last chance.
character_event = {
	id = HFP.20646
	desc = EVTDESCHFP20646
	picture = GFX_evt_bad_news

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20646
		trigger = {
			OR = {
				has_character_flag = flag_malnourished_for_temperance
				has_character_flag = flag_malnourished_for_boredom
				has_character_flag = flag_malnourished_for_craven
			}
		}
		custom_tooltip = { text = tooltip_20646_A }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTBHFP20646
		trigger = {
			OR = {
				has_character_flag = flag_malnourished_for_stress
				has_character_flag = flag_malnourished_for_cannibal
			}
		}
		custom_tooltip = { text = tooltip_20646_B }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTCHFP20646
		trigger = { has_character_flag = flag_malnourished_for_depression }
		custom_tooltip = { text = tooltip_20646_C }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTDHFP20646
		trigger = { has_character_flag = flag_malnourished_for_sloth }
		custom_tooltip = { text = tooltip_20646_D }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTEHFP20646
		trigger = {
			has_character_flag = flag_malnourished_for_study
		}
		custom_tooltip = { text = tooltip_20646_E }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTFHFP20646
		trigger = {
			has_character_flag = flag_malnourished_for_faith
		}
		custom_tooltip = { text = tooltip_20646_F }
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTGHFP20646
		trigger = {
			has_character_flag = flag_malnourished_for_paranoia
		}
		custom_tooltip = { text = tooltip_20646_G }
		if = {
			limit = { NOT = { trait = kind } }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPTHHFP20646
		trigger = {
			has_character_flag = flag_malnourished_for_diligence
		}
		custom_tooltip = { text = tooltip_20646_H }
		if = {
			limit = { trait = depressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = depressed } }
			random = {
				chance = 50
				add_trait = depressed
			}
		}
		clear_malnourished_flags_effect = yes
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		ai_chance = { factor = 100 }
	}
	option = { #Stop trying
		name = {
			text = EVTOPTFHIP20646_A
			trigger = {
				OR = {
					has_character_flag = flag_malnourished_for_temperance
					has_character_flag = flag_malnourished_for_boredom
				}
			}
		}
		name = {
			text = EVTOPTFHIP20646_B
			trigger = {
				OR = {
					has_character_flag = flag_malnourished_for_stress
					has_character_flag = flag_malnourished_for_depression
				}
			}
		}
		name = {
			text = EVTOPTFHIP20646_C
			trigger = {
				has_character_flag = flag_malnourished_for_sloth
			}
		}
		name = {
			text = EVTOPTFHIP20646_D
			trigger = {
				has_character_flag = flag_malnourished_for_study
			}
		}
		name = {
			text = EVTOPTFHIP20646_E
			trigger = {
				has_character_flag = flag_malnourished_for_faith
			}
		}
		name = {
			text = EVTOPTFHIP20646_F
			trigger = {
					has_character_flag = flag_malnourished_for_paranoia
			}
		}
		name = {
			text = EVTOPTFHIP20646_G
			trigger = {
				has_character_flag = flag_malnourished_for_diligence
			}
		}
		name = {
			text = EVTOPTFHIP20646_H
			trigger = {
				has_character_flag = flag_malnourished_for_cannibal
			}
		}
		name = {
			text = EVTOPTFHIP20646_I
			trigger = {
				has_character_flag = flag_malnourished_for_craven
			}
		}
		custom_tooltip = { text = tooltip_20646_I }
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		remove_character_modifier = hard_diet
		#clear_malnourished_flags_effect = yes
		lose_weight_small_effect = yes
		ai_chance = { factor = 100 }
	}
}

# Health complications: overweight - chance to recover

# Health complications: underweight - chance to recover

#Character is growing too fat: health warning.
character_event = {
	id = HFP.20647
	desc = {
		text = EVTDESCAHFP20647
		picture = GFX_evt_pagan
		trigger = {
			OR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20647
		picture = GFX_evt_pagan
		trigger = {
			OR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCCHFP20647
		picture = GFX_evt_fancy_feast
		trigger = {
			NOR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = no
		}
	}
	desc = {
		text = EVTDESCDHFP20647
		picture = GFX_evt_fancy_feast
		trigger = {
			NOR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = yes
		}
	}
	picture = GFX_evt_fancy_feast
	min_age = 30	#Unlikely to happen earlier.
	capable_only = yes
	prisoner = no

	is_triggered_only = yes

	trigger = {
		trait = is_fat
		NOT = { has_character_flag = flag_becoming_obese }	#Already had your chance.
		check_variable = { which = physique_variable value = 20 }
	}
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2
			has_character_modifier = well_fed
		}
		modifier = {
			factor = 1.25
		check_variable = { which = physique_variable value = 25 }
		}
		modifier = {
			factor = 1.5
		check_variable = { which = physique_variable value = 30 }
		}
		modifier = {
			factor = 1.5
		check_variable = { which = physique_variable value = 35 }
		}
		modifier = {
			factor = 3
		check_variable = { which = physique_variable value = 40 }
		}
		modifier = {
			factor = 5
		check_variable = { which = physique_variable value = 50 }
		}
		modifier = {
			factor = 10
		check_variable = { which = physique_variable value = 60 }
		}
	}

	option = { #Work out
		name = EVTOPTAHFP20647
		trigger = { trait = diligent }
		custom_tooltip = { text = tooltip_20647_A }
		tooltip_info = diligent
		hidden_tooltip = {
			random_list = {
				10 = { #fluke
					health = 0.1
					balance_weight_small_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #small progress
					if = {
						limit = { trait = gluttonous }
						remove_trait = gluttonous
						character_event = { id = 1031 }
					}
					health = 0.5
					balance_weight_medium_effect = yes
					weight_trait_check_effect = yes
				}
				60 = { #considerable progress
					if = {
						limit = { trait = gluttonous }
						remove_trait = gluttonous
						character_event = { id = 1031 }
					}
					health = 1.0
					balance_weight_large_effect = yes
					weight_trait_check_effect = yes
				}
			}
		}
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		ai_chance = { factor = 40 }
	}

	option = { #Eat less
		name = EVTOPTBHFP20647
		custom_tooltip = { text = tooltip_20647_B }
		hidden_tooltip = {
			random_list = {
				30 = { #fluke
					lose_weight_small_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #small progress
					lose_weight_medium_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #considerable progress
					lose_weight_large_effect = yes
					weight_trait_check_effect = yes
				}
			}
		}
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		ai_chance = { factor = 30 }
	}
	option = { #Does not matter.
		name = EVTOPTCHFP20647
		custom_tooltip = { text = tooltip_20647_C }
		set_character_flag = flag_becoming_obese	#Primed for chance of negative event later in life.
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		hidden_tooltip = {
			if = { #Chance for black boar event
				limit = {
					higher_tier_than = COUNT
					capital_scope = { region = world_europe }
					NOT = { has_character_modifier = black_boar_modifier }
					any_vassal = {
						is_adult = yes
						is_incapable = no
						NOR = {
							trait = paranoid
							trait = deceitful
						}
					}
					is_incapable = no
				}
				random_vassal = {
					limit = {
						is_adult = yes
						is_incapable = no
						NOR = {
							trait = paranoid
							trait = deceitful
						}
					}
					character_event = { id = HFP.20692 days = 150 random = 50 }
				}
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 20 } }
				health = -0.5
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 25 } }
				health = -0.5
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 30 } }
				health = -0.75
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 35 } }
				health = -0.75
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 40 } }
				health = -1.0
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 45 } }
				health = -1.5
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 50 } }
				health = -2.0
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 55 } }
				health = -3.0
			}
		}
		gain_weight_small_effect = yes
		ai_chance = { factor = 30 }
	}
}

#Character is growing too thin: health warning.
character_event = {
	id = HFP.20648
	desc = {
		text = EVTDESCAHFP20648
		trigger = {
			OR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20648
		trigger = {
			OR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCCHFP20648
		trigger = {
			NOR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = no
		}
	}
	desc = {
		text = EVTDESCDHFP20648
		trigger = {
			NOR = {
				is_tribal = yes
				is_nomadic = yes
			}
			is_female = yes
		}
	}
	picture = GFX_evt_bad_news
	min_age = 30	#Unlikely to happen earlier.
	capable_only = yes
	prisoner = no 	#Starvation in prison still handled by vanilla events.

	is_triggered_only = yes

	trigger = {
		trait = is_malnourished
		NOT = { has_character_flag = flag_becoming_underweight }	#Already had your chance.
		NOT = { check_variable = { which = physique_variable value = -20 } }
	}
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2
			has_character_modifier = one_year_fasting
		}
		modifier = {
			factor = 2
			prisoner = yes
		}
		modifier = {
			factor = 1.25
		NOT = { check_variable = { which = physique_variable value = -20 } }
		}
		modifier = {
			factor = 1.5
		NOT = { check_variable = { which = physique_variable value = -25 } }
		}
		modifier = {
			factor = 1.5
		NOT = { check_variable = { which = physique_variable value = -30 } }
		}
		modifier = {
			factor = 3
		NOT = { check_variable = { which = physique_variable value = -35 } }
		}
		modifier = {
			factor = 5
		NOT = { check_variable = { which = physique_variable value = -40 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -45 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -50 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -55 } }
		}
	}

	option = { #Work out
		name = EVTOPTAHFP20648
		trigger = { trait = diligent }
		custom_tooltip = { text = tooltip_20648_A }
		tooltip_info = diligent
		hidden_tooltip = {
			random_list = {
				10 = { #fluke
					health = 0.1
					balance_weight_small_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #small progress
					health = 0.5
					balance_weight_medium_effect = yes
					weight_trait_check_effect = yes
				}
				60 = { #considerable progress
					health = 1.0
					balance_weight_large_effect = yes
					weight_trait_check_effect = yes
				}
			}
		}
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		ai_chance = { factor = 40 }
	}

	option = { #Eat more
		name = EVTOPTBHFP20648
		custom_tooltip = { text = tooltip_20648_B }
		hidden_tooltip = {
			random_list = {
				30 = { #fluke
					gain_weight_small_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #small progress
					if = {
						limit = { trait = temperate }
						remove_trait = temperate
						character_event = { id = 38318 }
					}
					gain_weight_medium_effect = yes
					weight_trait_check_effect = yes
				}
				30 = { #considerable progress
					if = {
						limit = { trait = temperate }
						remove_trait = temperate
						character_event = { id = 38318 }
					}
					gain_weight_large_effect = yes
					weight_trait_check_effect = yes
				}
			}
		}
		if = {
			limit = { trait = stressed }
			custom_tooltip = { text = tooltip_health_deteriorates }
			hidden_tooltip = { health = -0.25 }
		}
		if = {
			limit = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		add_character_modifier = {
			name = hard_diet
			duration = 2500
		}
		remove_weight_modifier_effect = yes
		ai_chance = { factor = 30 }
	}
	option = { #Does not matter.
		name = EVTOPTCHFP20648
		custom_tooltip = { text = tooltip_20648_C }
		set_character_flag = flag_becoming_underweight	#Primed for chance of negative event later in life.
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		hidden_tooltip = {

			if = { #Chance for leechlord event
				limit = {
					is_female = no
					higher_tier_than = COUNT
					NOT = { has_character_modifier = leechlord_modifier }
					any_courtier_or_vassal = { has_minor_title = title_court_physician }
					is_incapable = no
				}
				random_courtier_or_vassal = {
					limit = { has_minor_title = title_court_physician }
					character_event = { id = HFP.20676 days = 150 random = 50 }
				}
			}
			if = { #Chance for whisperer event
				limit = {
					is_female = yes
					higher_tier_than = COUNT
					NOT = { has_character_modifier = whisperer_modifier }
					any_vassal = {
						is_incapable = no
						is_female = no
						is_married = yes
						is_adult = yes
						NOT = { is_married = ROOT }
						NOT = { any_spouse = { NOT = { is_vassal_or_below_of = ROOT } } }
						NOR = {
							trait = cruel
							trait = envious
							trait = lunatic
							trait = possessed
							trait = arbitrary
						}
					}
					is_incapable = no
				}
				random_vassal = {
					limit = {
						is_incapable = no
						is_married = yes
						is_female = no
						is_adult = yes
						NOT = { is_married = ROOT }
						NOT = { any_spouse = { NOT = { is_vassal_or_below_of = ROOT } } }
						NOR = {
							trait = cruel
							trait = envious
							trait = lunatic
							trait = possessed
							trait = arbitrary
						}
					}
					character_event = { id = HFP.20700 days = 150 random = 50 }
				}
			}

			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -20 } } }
				health = -0.5
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -25 } } }
				health = -0.5
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -30 } } }
				health = -0.75
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -35 } } }
				health = -0.75
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -40 } } }
				health = -1.0
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -45 } } }
				health = -1.5
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -50 } } }
				health = -2.0
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -55 } } }
				health = -3.0
			}
		}
		lose_weight_small_effect = yes
		ai_chance = { factor = 30 }
	}
}

# Concerned spouse (about the opposite of either way, depending on traits of both).

#On_action hidden event: concerned friend.
character_event = {
	id = HFP.20649
	hide_window = yes

	min_age = 20
	only_capable = yes
	prisoner = no

	trigger = {
		NOT = { trait = is_malnourished }
		NOT = { trait = is_fat }
		is_inaccessible_trigger = no

		OR = {
			#Either person is genuinely concerned...
			AND = {
				OR = {
					check_variable = { which = physique_variable value = 7 }
					NOT = { check_variable = { which = physique_variable value = -7 } }
				}
				OR = {
					any_spouse = {
						is_within_diplo_range = ROOT
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
						is_adult = yes
						OR = {
							AND = { #Moralizers against fat
								ROOT = { check_variable = { which = physique_variable value = 7 } }
								OR = {
									religion_group = christian
									religion_group = muslim
									religion_group = indian_group
								}
								OR = {
									trait = zealous
									trait = temperate
									trait = theologian
									is_theocracy = yes
								}
							}
							AND = { #Moralizers against thin
								ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
								OR = {
									trait = gluttonous
									trait = duelist
									trait = hunter
									trait = hedonist
								}
							}
							trait = kind 	#Genuine care
							opinion = { 	#Genuine care
								who = ROOT value = 20
							}
						}
					}
					any_lover = { #Only doing it because he cares
						is_inaccessible_trigger = no
						is_within_diplo_range = ROOT
						is_incapable = no
						prisoner = no
						is_adult = yes
					}
					any_friend = { #Only doing it because he cares
						is_inaccessible_trigger = no
						is_within_diplo_range = ROOT
						is_incapable = no
						prisoner = no
						is_adult = yes
					}
					any_close_relative = {
						is_within_diplo_range = ROOT
						is_inaccessible_trigger = no
						is_incapable = no
						prisoner = no
						is_adult = yes
						OR = {
							AND = { #Moralizers against fat
								ROOT = { check_variable = { which = physique_variable value = 7 } }
								OR = {
									religion_group = christian
									religion_group = muslim
									religion_group = indian_group
								}
								OR = {
									trait = zealous
									trait = temperate
									trait = theologian
									is_theocracy = yes
								}
							}
							AND = { #Moralizers against thin
								ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
								OR = {
									trait = gluttonous
									trait = duelist
									trait = hunter
									trait = hedonist
								}
							}
							trait = kind 	#Genuine care
							opinion = { 	#Genuine care
								who = ROOT value = 20
							}
						}
					}
				}
			}
			#...Or has ill intent.
			AND = {
				is_ill_trigger = no  	#Respectable, average person.
				has_negative_congenital_trigger = no
				NOT = { trait = possessed }
				NOT = { trait = lunatic }
				NOT = { practical_age = 50 }
				prestige = 0
				OR = {
					AND = {
						is_female = yes
						ROOT = { is_female = yes }
					}
					AND = {
						is_female = no
						ROOT = { is_female = no }
					}
				}
				check_variable = { which = physique_variable value = -10 }
				NOT = { check_variable = { which = physique_variable value = 10 } }
				any_close_relative = {
					is_inaccessible_trigger = no
					is_incapable = no
					NOT = { trait = kind }
					NOT = { is_lover = ROOT }
					NOT = { is_friend = ROOT }
					prisoner = no
					is_adult = yes
					OR = {
						trait = deceitful
						trait = envious
						trait = cruel
						trait = schemer
						is_rival = ROOT
						NOT = {
							opinion = {
								who = ROOT value = 20
							}
						}
					}
				}
			}
		}
	}

	is_triggered_only = yes

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 1.5
			NOT = { practical_age = 25 }
		}
		modifier = {
			factor = 0.5
			practical_age = 45
		}
		modifier = {
			factor = 0.5
			trait = paranoid
		}
		modifier = {
			factor = 1.75
			trait = trusting
		}
		modifier = {
			factor = 1.25
			prestige = 500
		}
		modifier = {
			factor = 1.25
			wealth = 250
		}
		modifier = {
			factor = 1.5
			is_married = yes
		}
		modifier = {
			factor = 1.75
			num_of_lovers = 1
		}
		modifier = {
			factor = 1.75
			num_of_friends = 1
		}
		modifier = {
			factor = 0.75
			is_tribal = yes
		}
		modifier = {
			factor = 0.75
			is_nomadic = yes
		}
	}

	immediate = {
		random_list = {
			50 = { #First determine if it's good advice...
				modifier = {
					factor = 0
					NOT = {
						OR = {
							check_variable = { which = physique_variable value = 7 }
							NOT = { check_variable = { which = physique_variable value = -7 } }
						}
						OR = {
							any_spouse = {
								is_within_diplo_range = ROOT
								is_inaccessible_trigger = no
								is_incapable = no
								prisoner = no
								is_adult = yes
								OR = {
									AND = { #Moralizers against fat
										ROOT = { check_variable = { which = physique_variable value = 7 } }
										OR = {
											religion_group = christian
											religion_group = muslim
											religion_group = indian_group
										}
										OR = {
											trait = zealous
											trait = temperate
											trait = theologian
											is_theocracy = yes
										}
									}
									AND = { #Moralizers against thin
										ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
										OR = {
											trait = gluttonous
											trait = duelist
											trait = hunter
											trait = hedonist
										}
									}
									trait = kind 	#Genuine care
									opinion = { 	#Genuine care
										who = ROOT value = 20
									}
								}
							}
							any_lover = { #Only doing it because he cares
								is_inaccessible_trigger = no
								is_adult = yes
								is_incapable = no
								prisoner = no
							}
							any_friend = { #Only doing it because he cares
								is_inaccessible_trigger = no
								is_adult = yes
								is_incapable = no
								prisoner = no
							}
							any_close_relative = {
								is_within_diplo_range = ROOT
								is_inaccessible_trigger = no
								is_incapable = no
								is_adult = yes
								prisoner = no
								OR = {
									AND = { #Moralizers against fat
										ROOT = { check_variable = { which = physique_variable value = 7 } }
										OR = {
											religion_group = christian
											religion_group = muslim
											religion_group = indian_group
										}
										OR = {
											trait = zealous
											trait = temperate
											trait = theologian
											is_theocracy = yes
											}
										}
									AND = { #Moralizers against thin
										ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
										OR = {
											trait = gluttonous
											trait = duelist
											trait = hunter
											trait = hedonist
										}
									}
									trait = kind 	#Genuine care
									opinion = { 	#Genuine care
										who = ROOT value = 20
									}
								}
							}
						}
					}
				}
				random_list = { #Now determine who gets the event of the possible existing people.
					25 = {
						modifier = {
							factor = 0
							NOT = {
								any_spouse = {
									is_within_diplo_range = ROOT
									is_inaccessible_trigger = no
									is_incapable = no
									prisoner = no
									is_adult = yes
									OR = {
										AND = { #Moralizers against fat
											ROOT = { check_variable = { which = physique_variable value = 7 } }
											OR = {
												religion_group = christian
												religion_group = muslim
												religion_group = indian_group
											}
											OR = {
												trait = zealous
												trait = temperate
												trait = theologian
												is_theocracy = yes
											}
										}
										AND = { #Moralizers against thin
											ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
											OR = {
												trait = gluttonous
												trait = duelist
												trait = hunter
												trait = hedonist
											}
										}
										trait = kind 	#Genuine care
										opinion = { 	#Genuine care
											who = ROOT value = 20
										}
									}
								}
							}
						}
						random_spouse = {
							limit = {
								is_within_diplo_range = ROOT
								is_inaccessible_trigger = no
								is_incapable = no
								prisoner = no
								is_adult = yes
								OR = {
									AND = { #Moralizers against fat
										ROOT = { check_variable = { which = physique_variable value = 7 } }
										OR = {
											religion_group = christian
											religion_group = muslim
											religion_group = indian_group
										}
										OR = {
											trait = zealous
											trait = temperate
											trait = theologian
											is_theocracy = yes
										}
									}
									AND = { #Moralizers against thin
										ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
										OR = {
											trait = gluttonous
											trait = duelist
											trait = hunter
											trait = hedonist
										}
									}
									trait = kind 	#Genuine care
									opinion = { 	#Genuine care
										who = ROOT value = 20
									}
								}
							}
							character_event = { id = HFP.20650 } #Spouse is worried.
						}
					}
					25 = {
						modifier = {
							factor = 0
							NOT = {
								any_close_relative = {
									is_within_diplo_range = ROOT
									is_inaccessible_trigger = no
									is_incapable = no
									prisoner = no
									is_adult = yes
									OR = {
										AND = { #Moralizers against fat
											ROOT = { check_variable = { which = physique_variable value = 7 } }
											OR = {
												religion_group = christian
												religion_group = muslim
												religion_group = indian_group
											}
											OR = {
												trait = zealous
												trait = temperate
												trait = theologian
												is_theocracy = yes
											}
										}
										AND = { #Moralizers against thin
											ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
											OR = {
												trait = gluttonous
												trait = duelist
												trait = hunter
												trait = hedonist
											}
										}
										trait = kind 	#Genuine care
										opinion = { 	#Genuine care
											who = ROOT value = 20
										}
									}
								}
							}
						}
						random_close_relative = {
							limit = {
								is_within_diplo_range = ROOT
								is_inaccessible_trigger = no
								is_incapable = no
								prisoner = no
								is_adult = yes
								OR = {
									AND = { #Moralizers against fat
										ROOT = { check_variable = { which = physique_variable value = 7 } }
										OR = {
											religion_group = christian
											religion_group = muslim
											religion_group = indian_group
										}
										OR = {
											trait = zealous
											trait = temperate
											trait = theologian
											is_theocracy = yes
										}
									}
									AND = { #Moralizers against thin
										ROOT = { NOT = { check_variable = { which = physique_variable value = -7 } } }
										OR = {
											trait = gluttonous
											trait = duelist
											trait = hunter
											trait = hedonist
										}
									}
									trait = kind 	#Genuine care
									opinion = { 	#Genuine care
										who = ROOT value = 20
									}
								}
							}
							character_event = { id = HFP.20650 } #Relative is worried.
						}
					}
					25 = {
						modifier = {
							factor = 0
							NOT = {
								any_lover = {
									is_inaccessible_trigger = no
									is_adult = yes
									is_incapable = no
									prisoner = no
								}
							}
						}
						random_lover = {
							limit = {
								is_inaccessible_trigger = no
								is_adult = yes
								is_incapable = no
								prisoner = no
							}
							character_event = { id = HFP.20650 } #Lover is worried.
						}
					}
					25 = {
						modifier = {
							factor = 0
							NOT = {
								any_friend = {
									is_inaccessible_trigger = no
									is_adult = yes
									is_incapable = no
									prisoner = no
								}
							}
						}
						random_friend = {
							limit = {
								is_inaccessible_trigger = no
								is_adult = yes
								is_incapable = no
								prisoner = no
							}
							character_event = { id = HFP.20650 } #Friend is worried.
						}
					}
				}
			}
			50 = { #...Or bad advice.
				modifier = {
					factor = 0
					NOT = {
						is_ill_trigger = no  	#Respectable, average person.
						has_negative_congenital_trigger = no
						NOT = { trait = possessed }
						NOT = { trait = lunatic }
						NOT = { practical_age = 50 }
						prestige = 0
						check_variable = { which = physique_variable value = -10 }
						NOT = { check_variable = { which = physique_variable value = 10 } }
						any_close_relative = {
							is_inaccessible_trigger = no
							is_incapable = no
							NOT = { trait = kind }
							NOT = { is_lover = ROOT }
							NOT = { is_friend = ROOT }
							same_sex = ROOT
							prisoner = no
							is_adult = yes
							OR = {
								trait = deceitful
								trait = envious
								trait = cruel
								trait = schemer
								is_rival = ROOT
								NOT = {
									opinion = {
										who = ROOT value = 20
									}
								}
							}
						}
					}
				}
				random_close_relative = {
					limit = {
						is_inaccessible_trigger = no
						is_incapable = no
						NOT = { trait = kind }
						NOT = { is_lover = ROOT }
						NOT = { is_friend = ROOT }
						prisoner = no
						is_adult = yes
						OR = {
							AND = {
								is_female = yes
								ROOT = { is_female = yes }
							}
							AND = {
								is_female = no
								ROOT = { is_female = no }
							}
						}
						OR = {
							trait = deceitful
							trait = envious
							trait = cruel
							trait = schemer
							is_rival = ROOT
							NOT = {
								opinion = {
									who = ROOT value = 20
								}
							}
						}
					}
					character_event = { id = HFP.20651 } #Relative is jealous.
				}
			}
		}
	}
}

#Genuinely concerned character: what to do?
character_event = {
	id = HFP.20650
	desc = {
		text = EVTDESCAHFP20650
		trigger = {
			FROM = {
				check_variable = { which = physique_variable value = 7 }
				is_female = no
			}
		}
		picture = GFX_evt_fancy_feast
	}
	desc = {
		text = EVTDESCBHFP20650
		trigger = {
			FROM = {
				check_variable = { which = physique_variable value = 7 }
				is_female = yes
			}
		}
		picture = GFX_evt_brothel
	}
	desc = {
		text = EVTDESCCHFP20650
		trigger = {
			FROM = {
				NOT = { check_variable = { which = physique_variable value = -7 } }
				is_female = no
			}
		}
		picture = GFX_evt_library
	}
	desc = {
		text = EVTDESCDHFP20650
		trigger = {
			FROM = {
				NOT = { check_variable = { which = physique_variable value = -7 } }
				is_female = yes
			}
		}
		picture = GFX_evt_princess_byzantine
	}
	picture = GFX_evt_fancy_feast

	is_triggered_only = yes

	option = { #Suggest to eat less (+10).
		name = EVTOPTAHFP20650
		custom_tooltip = { text = tooltip_20650_A }
		trigger = {
			FROM = { check_variable = { which = physique_variable value = 5 } }
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20652 days = 10 } } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.75
				OR = {
					trait = zealous
					trait = theologian
					is_theocracy = yes
				}
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = indian_group
				}
			}
			modifier = {
				factor = 1.5
				trait = feeble
			}
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = is_malnourished
			}
			modifier = {
				factor = 1.5
				trait = duelist
			}
			modifier = {
				factor = 1.5
				trait = hunter
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
	}
	option = { #Suggest to eat less (-10).
		name = EVTOPTBHFP20650
		custom_tooltip = { text = tooltip_20650_B }
		trigger = {
			FROM = { NOT = { check_variable = { which = physique_variable value = -5 } } }
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20652 days = 10 } } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.75
				OR = {
					trait = zealous
					trait = theologian
					is_theocracy = yes
				}
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = indian_group
				}
			}
			modifier = {
				factor = 1.5
				trait = feeble
			}
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = is_malnourished
			}

		}
	}
	option = { #Suggest to eat more (+10).
		name = EVTOPTCHFP20650
		custom_tooltip = { text = tooltip_20650_C }
		trigger = {
			FROM = { check_variable = { which = physique_variable value = 5 } }
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20653 days = 10 } } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.75
				trait = hedonist
			}
			modifier = {
				factor = 1.5
				trait = sturdy
			}
			modifier = {
				factor = 1.5
				trait = robust
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = drunkard
			}
			modifier = {
				factor = 1.5
				trait = is_fat
			}
		}
	}
	option = { #Suggest to eat more (-10).
		name = EVTOPTDHFP20650
		custom_tooltip = { text = tooltip_20650_D }
		trigger = {
			FROM = { NOT = { check_variable = { which = physique_variable value = -5 } } }
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20653 days = 10 } } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.75
				trait = hedonist
			}
			modifier = {
				factor = 1.5
				trait = sturdy
			}
			modifier = {
				factor = 1.5
				trait = robust
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = drunkard
			}
			modifier = {
				factor = 1.5
				trait = is_fat
			}
			modifier = {
				factor = 1.5
				trait = duelist
			}
			modifier = {
				factor = 1.5
				trait = hunter
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
		}
	}
	option = { #Not my business
		name = EVTOPTEHFP20650
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.75
				trait = honest
			}
			modifier = {
				factor = 0.75
				trait = gregarious
			}
			modifier = {
				factor = 0
				is_lover = FROM
			}
			modifier = {
				factor = 0
				is_friend = FROM
			}
			modifier = {
				factor = 0.5
				is_married = FROM
			}
		}
	}
}

#Ill-advising character: what to do?
character_event = {
	id = HFP.20651
	desc = EVTDESCAHFP20651
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Suggest is fat.
		name = EVTOPTAHFP20651
		custom_tooltip = { text = tooltip_20651_A }
		set_character_flag = flag_ill_advisor #For localization
		hidden_tooltip = { FROM = { character_event = { id = HFP.20652 days = 10 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = is_malnourished
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = feeble
			}
			modifier = {
				factor = 1.5
				trait = hedonist
			}
			modifier = {
				factor = 1.5
				trait = duelist
			}
			modifier = {
				factor = 1.5
				trait = hunter
			}
		}
	}
	option = { #Suggest is thin.
		name = EVTOPTBHFP20651
		custom_tooltip = { text = tooltip_20651_B }
		set_character_flag = flag_ill_advisor #For localization
		hidden_tooltip = { FROM = { character_event = { id = HFP.20653 days = 10 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = is_fat
			}
			modifier = {
				factor = 1.5
				trait = sturdy
			}
			modifier = { #Would consider it a downgrade.
				factor = 1.5
				OR = {
					trait = zealous
					trait = theologian
					is_theocracy = yes
				}
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = indian_group
				}
			}
			modifier = {
				factor = 1.5
				trait = robust
			}
			modifier = {
				factor = 1.5
				trait = hunter
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.75
				trait = temperate
			}
		}
	}
	option = { #Not my business
		name = EVTOPTDHFP20651
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.75
				trait = deceitful
			}
			modifier = {
				factor = 0.75
				trait = cruel
			}
		}
	}
}

#Character encouraged to eat less.
character_event = {
	id = HFP.20652
	desc = EVTDESCHAFP20652

	trigger = {
		FROM = { is_alive = yes }
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Paranoid
		name = EVTOPTAHFP20652
		custom_tooltip = { text = tooltip_20652_A }
		trigger = { trait = paranoid }
		tooltip_info = paranoid
		hidden_tooltip = { FROM = { character_event = { id = HFP.20658 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = { check_variable = { which = physique_variable value = -7 } }
			}
		}
	}
	option = { #Trusting
		name = EVTOPTBHFP20652
		custom_tooltip = { text = tooltip_20652_B }
		lose_weight_medium_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20655 } } }
		hidden_tooltip = { character_event = { id = HFP.20657  days = 30 } } #Results
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				check_variable = { which = physique_variable value = 7 }
			}
			modifier = {
				factor = 1.75
				is_friend = FROM
			}
			modifier = {
				factor = 1.75
				is_lover = FROM
			}
			modifier = {
				factor = 0.25
				is_rival = FROM
			}
			modifier = {
				factor = 1.5
				is_married = FROM
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 8
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 10
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 12
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 15
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 70 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 90 }
			}
		}
	}
	option = { #Not trusting
		name = EVTOPTCHFP20652
		trigger = { NOT = { trait = trusting } }
		custom_tooltip = { text = tooltip_20652_C }
		random = {
			chance = 30
			if = {
				limit = { trait = stressed }
				custom_tooltip = { text = tooltip_health_deteriorates }
				hidden_tooltip = { health = -0.25 }
			}
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
				hidden_tooltip = { character_event = { id = 38282 } }
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20660 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = { check_variable = { which = physique_variable value = 7 } }
			}
			modifier = {
				factor = 1.75
				trait = stubborn
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -40
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -60
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -80
					}
				}
			}
		}
	}
}

#Character encouraged to eat more.
character_event = {
	id = HFP.20653
	desc = {
		text = EVTDESCAHFP20653
		trigger = {
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20653
		trigger = {
			is_female = yes
		}
	}

	trigger = {
		FROM = { is_alive = yes }
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Paranoid
		name = EVTOPTAHFP20653
		custom_tooltip = { text = tooltip_20653_A }
		trigger = { trait = paranoid }
		tooltip_info = paranoid
		hidden_tooltip = { FROM = { character_event = { id = HFP.20658 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				check_variable = { which = physique_variable value = 10 }
			}
		}
	}
	option = { #Trusting
		name = EVTOPTBHFP20653
		custom_tooltip = { text = tooltip_20653_B }
		gain_weight_medium_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20654 } } }
		hidden_tooltip = { character_event = { id = HFP.20656  days = 30 } } #Results
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = { check_variable = { which = physique_variable value = -10 } }
			}
			modifier = {
				factor = 1.75
				is_friend = FROM
			}
			modifier = {
				factor = 1.75
				is_lover = FROM
			}
			modifier = {
				factor = 0.25
				is_rival = FROM
			}
			modifier = {
				factor = 1.5
				is_married = FROM
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 8
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 10
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 12
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					intrigue = 15
					has_character_flag = flag_ill_advisor
				}
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 70 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 90 }
			}
		}
	}
	option = { #Not trusting
		name = EVTOPTCHFP20653
		trigger = { NOT = { trait = trusting } }
		custom_tooltip = { text = tooltip_20653_C }
		random = {
			chance = 30
			if = {
				limit = { trait = stressed }
				custom_tooltip = { text = tooltip_health_deteriorates }
				hidden_tooltip = { health = -0.25 }
			}
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
				hidden_tooltip = { character_event = { id = 38282 } }
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20659 } } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				check_variable = { which = physique_variable value = 10 }
			}
			modifier = {
				factor = 1.75
				trait = stubborn
			}
			modifier = {
				factor = 1.5
				NOT = {
					opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -40
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -60
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					opinion = {
						who = FROM
						value = -80
					}
				}
			}
		}
	}
}

#Advisor notified: Character is eating more.
character_event = {
	id = HFP.20654
	desc = {
		text = EVTDESCHAFP20654
		trigger = {
			FROM = { is_female = no }
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCHBFP20654
		trigger = {
			FROM = { is_female = yes }
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCHCFP20654
		trigger = {
			has_character_flag = flag_ill_advisor
		}
	}

	trigger = {
		FROM = { is_alive = yes }
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Good
		name = EVTOPTAHFP20654
		if = {
			limit = {
				trait = deceitful
				has_character_flag = flag_ill_advisor
			}
			random = {
				chance = 30
				change_intrigue = 1
			}
		}
		if = {
			limit = {
				NOT = { trait = deceitful }
				has_character_flag = flag_ill_advisor
			}
			random = {
				chance = 30
				add_trait = deceitful
				hidden_tooltip = { character_event = { id = 38255 } }
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = flag_ill_advisor }
				FROM = { NOT = { check_variable = { which = physique_variable value = 10 } } } #Character is recovering.
			}
			tiered_piety_reward_effect = yes
		}
		if = {
			limit = {
				NOT = { has_character_flag = flag_ill_advisor }
				FROM = { check_variable = { which = physique_variable value = 10 } } #Character is getting worse.
			}
			tiered_prestige_reward_effect = yes
		}
		clr_character_flag = flag_ill_advisor
		ai_chance = {
			factor = 100
		}
	}
}

#Advisor notified: Character is eating less.
character_event = {
	id = HFP.20655
	desc = {
		text = EVTDESCHAFP20655
		trigger = {
			FROM = { is_female = no }
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCHBFP20655
		trigger = {
			FROM = { is_female = yes }
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCHCFP20655
		trigger = {
			has_character_flag = flag_ill_advisor
		}
	}

	trigger = {
		FROM = { is_alive = yes }
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Good
		name = EVTOPTAHFP20655
		if = {
			limit = {
				trait = deceitful
				has_character_flag = flag_ill_advisor
			}
			random = {
				chance = 30
				change_intrigue = 1
			}
		}
		if = {
			limit = {
				NOT = { trait = deceitful }
				has_character_flag = flag_ill_advisor
			}
			random = {
				chance = 30
				add_trait = deceitful
				hidden_tooltip = { character_event = { id = 38255 } }
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = flag_ill_advisor }
				FROM = { check_variable = { which = physique_variable value = -10 } } #Character is recovering.
			}
			tiered_piety_reward_effect = yes
		}
		if = {
			limit = {
				NOT = { has_character_flag = flag_ill_advisor }
				FROM = { NOT = { check_variable = { which = physique_variable value = -10 } } } #Character is getting worse.
			}
			tiered_prestige_reward_effect = yes
		}
		clr_character_flag = flag_ill_advisor
		ai_chance = {
			factor = 100
		}
	}
}

#Results of character eating more.
character_event = {
	id = HFP.20656
	desc = {
		text = EVTDESCHAFP20656
		trigger = {
			is_female = no
			check_variable = { which = physique_variable value = 15 }
		}
	}
	desc = {
		text = EVTDESCHBFP20656
		trigger = {
			is_female = yes
			check_variable = { which = physique_variable value = 15 }
		}
	}
	desc = {
		text = EVTDESCHCFP20656
		trigger = {
			is_female = no
			NOT = { check_variable = { which = physique_variable value = 15 } }
		}
	}
	desc = {
		text = EVTDESCHDFP20656
		trigger = {
			is_female = yes
			NOT = { check_variable = { which = physique_variable value = 15 } }
		}
	}

	picture = GFX_evt_fancy_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20656
		set_character_flag = flag_primed_physique #No flavor needed.
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 100
		}
	}
}

#Results of character eating less.
character_event = {
	id = HFP.20657
	desc = {
		text = EVTDESCHAFP20657
		picture = GFX_evt_bad_news
		trigger = {
			NOT = { check_variable = { which = physique_variable value = -15 } }
		}
	}
	desc = {
		text = EVTDESCHCFP20657
		picture = GFX_evt_recovery
		trigger = {
			is_female = no
			check_variable = { which = physique_variable value = -15 }
		}
	}
	desc = {
		text = EVTDESCHDFP20657
		picture = GFX_evt_recovery
		trigger = {
			is_female = yes
			check_variable = { which = physique_variable value = -15 }
		}
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20657
		set_character_flag = flag_primed_physique #No flavor needed.
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 100
		}
	}
}

#Advisor: character doesn't trust you.
character_event = {
	id = HFP.20658
	desc = {
		text = EVTDESCHAFP20658
		trigger = {
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCHBFP20658
		trigger = {
			has_character_flag = flag_ill_advisor
		}
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20658
		clr_character_flag = flag_ill_advisor
		opinion = {
			who = FROM
			modifier = opinion_offended
			years = 5
		}
		ai_chance = {
			factor = 100
		}
	}
}


#Advisor: character doesn't want to eat more.
character_event = {
	id = HFP.20659
	desc = {
		text = EVTDESCAHFP20659
		trigger = {
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCBHFP20659
		trigger = {
			has_character_flag = flag_ill_advisor
		}
	}

	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20659
		clr_character_flag = flag_ill_advisor
		ai_chance = {
			factor = 100
		}
	}
}

#Advisor: character doesn't want to eat less.
character_event = {
	id = HFP.20660
	desc = {
		text = EVTDESCAHFP20660
		trigger = {
			NOT = { has_character_flag = flag_ill_advisor }
		}
	}
	desc = {
		text = EVTDESCBHFP20660
		trigger = {
			has_character_flag = flag_ill_advisor
		}
	}
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20660
		clr_character_flag = flag_ill_advisor
		ai_chance = {
			factor = 100
		}
	}
}


# Health complications: late life health issues.

#Character has become obese.
character_event = {
	id = HFP.20661
	desc = EVTDESCAHFP20661
	picture = GFX_evt_fancy_feast
	min_age = 40	#Unlikely to happen earlier.
	capable_only = yes
	prisoner = no

	is_triggered_only = yes

	trigger = {
		trait = is_fat
		NOT = { has_character_modifier = obese_modifier }
		check_variable = { which = physique_variable value = 30 }
		has_character_flag = flag_becoming_obese		#Gained in HFP.20647
	}
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2
			has_character_modifier = well_fed
		}
		modifier = {
			factor = 1.5
		check_variable = { which = physique_variable value = 35 }
		}
		modifier = {
			factor = 3
		check_variable = { which = physique_variable value = 40 }
		}
		modifier = {
			factor = 5
		check_variable = { which = physique_variable value = 50 }
		}
		modifier = {
			factor = 7
		check_variable = { which = physique_variable value = 60 }
		}
		modifier = {
			factor = 10
		check_variable = { which = physique_variable value = 70 }
		}
	}

	option = { #Too late to do anything anymore.
		name = EVTOPTCHFP20661
		add_character_modifier = {
			name = obese_modifier
			duration = -1
		}
		clr_character_flag = flag_becoming_obese
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = physique_variable value = 35 } }
				health = -0.5
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 40 } }
				health = -0.7
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 45 } }
				health = -0.7
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 50 } }
				health = -1.0
			}
			if = {
				limit = { check_variable = { which = physique_variable value = 55 } }
				health = -2.0
			}
		}
		gain_weight_small_effect = yes
		ai_chance = { factor = 30 }
	}
}

#Character has become severely underweight.
character_event = {
	id = HFP.20662
	desc = EVTDESCAHFP20662
	picture = GFX_evt_bad_news
	min_age = 40	#Unlikely to happen earlier.
	capable_only = yes
	prisoner = no 	#Starvation in prison still handled by vanilla events.

	is_triggered_only = yes

	trigger = {
		trait = is_malnourished
		NOT = { has_character_modifier = severely_underweight_modifier }
		NOT = { check_variable = { which = physique_variable value = -30 } }
		has_character_flag = flag_becoming_underweight 	#Gained in HFP.20648
	}
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 2
			has_character_modifier = one_year_fasting
		}
		modifier = {
			factor = 2
			prisoner = yes
		}
		modifier = {
			factor = 3
		NOT = { check_variable = { which = physique_variable value = -35 } }
		}
		modifier = {
			factor = 5
		NOT = { check_variable = { which = physique_variable value = -40 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -45 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -50 } }
		}
		modifier = {
			factor = 10
		NOT = { check_variable = { which = physique_variable value = -55 } }
		}
	}

	option = { #Too late now.
		name = EVTOPTAHFP20662
		add_character_modifier = {
			name = severely_underweight_modifier
			duration = -1
		}
		clr_character_flag = flag_becoming_underweight
		hidden_tooltip = {
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -30 } } }
				health = -0.75
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -35 } } }
				health = -0.75
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -40 } } }
				health = -1.0
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -45 } } }
				health = -1.5
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -50 } } }
				health = -2.0
			}
			if = {
				limit = { NOT = { check_variable = { which = physique_variable value = -55 } } }
				health = -3.0
			}
		}
		lose_weight_small_effect = yes
		ai_chance = { factor = 30 }
	}
}
######################################
#### Additional Flavor ####

#Fat ruler becomes proud
character_event = {
	id = HFP.20663
	desc = {
		text = EVTDESCAHFP20663
		trigger = { is_female = no }
	}
	desc = {
		text = EVTDESCBHFP20663
		trigger = { is_female = yes }
	}
	picture = GFX_evt_fancy_feast

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20663
		tooltip_info = is_fat
		if = {
			limit = { trait = proud }
			tiered_prestige_reward_effect = yes
		}
		if = {
			limit = { trait = humble }
			remove_trait = humble
		}
		if = {
			limit = { NOT = { trait = proud } }
			add_trait = proud
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Fat ruler becomes patient
character_event = {
	id = HFP.20664
	desc = {
		text = EVTDESCAHFP20664
		trigger = { is_female = no }
	}
	desc = {
		text = EVTDESCBHFP20664
		trigger = { is_female = yes }
	}
	picture = GFX_evt_courtiers_talking

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20664
		tooltip_info = is_fat
		if = {
			limit = { trait = proud }
			piety = 50
		}
		if = {
			limit = { trait = wroth }
			remove_trait = wroth
		}
		if = {
			limit = { NOT = { trait = patient } }
			add_trait = patient
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Fat ruler becomes content
character_event = {
	id = HFP.20665
	desc = {
		text = EVTDESCAHFP20665
		trigger = { is_female = no }
	}
	desc = {
		text = EVTDESCBHFP20665
		trigger = { is_female = yes }
	}
	picture = GFX_evt_recovery

	trigger = {
		trait = is_fat
		has_fat_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20665
		tooltip_info = is_fat
		if = {
			limit = { trait = content }
			piety = 50
		}
		if = {
			limit = { trait = ambitious }
			remove_trait = ambitious
		}
		if = {
			limit = { NOT = { trait = content } }
			add_trait = content
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}


#Malnourished ruler becomes humble
character_event = {
	id = HFP.20666
	desc = {
		text = EVTDESCAHFP20666
	}
	picture = GFX_evt_recovery

	trigger = {
		trait = is_malnourished
		has_malnourished_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20666
		tooltip_info = is_malnourished
		if = {
			limit = { trait = humble }
			piety = 50
		}
		if = {
			limit = { trait = proud }
			remove_trait = proud
		}
		if = {
			limit = { NOT = { trait = humble } }
			add_trait = humble
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished ruler becomes envious
character_event = {
	id = HFP.20667
	desc = {
		text = EVTDESCAHFP20667
		trigger = { is_female = no }
	}
	desc = {
		text = EVTDESCBHFP20667
		trigger = { is_female = yes }
	}
	picture = GFX_evt_scandal

	trigger = {
		trait = is_malnourished
		has_malnourished_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20667
		tooltip_info = is_malnourished
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		if = {
			limit = { NOT = { trait = envious } }
			add_trait = envious
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Malnourished ruler becomes cruel
character_event = {
	id = HFP.20668
	desc = {
		text = EVTDESCAHFP20668
		trigger = { has_character_flag = flag_malnourished_for_paranoid }
	}
	desc = {
		text = EVTDESCBHFP20668
		trigger = { has_character_flag = flag_malnourished_for_slothful }
	}
	desc = {
		text = EVTDESCCHFP20668
		trigger = { has_character_flag = flag_malnourished_for_cannibal }
	}
	picture = GFX_evt_lunatic

	trigger = {
		trait = is_malnourished
		has_malnourished_for_flag_trigger = yes #Won't fire if recovered in the meantime due to thirdparty help
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20668
		tooltip_info = is_malnourished
		if = {
			limit = { trait = kind }
			remove_trait = kind
		}
		if = {
			limit = { NOT = { trait = cruel } }
			add_trait = cruel
		}
		#clear_fat_flags_effect = yes
		ai_chance = { factor = 100 }
	}
}


#Event for sturdy/frail teenage, chance to turn it into something else.
#Chance of triggering in the adolescence event itself.
character_event = {
	id = HFP.20669
	desc = {
		text = EVTDESCAHFP20669
		trigger = {
			trait = sturdy
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20669
		trigger = {
			trait = sturdy
			is_female = yes
		}
	}
	desc = {
		text = EVTDESCCHFP20669
		trigger = {
			trait = feeble
			is_female = no
		}
	}
	desc = {
		text = EVTDESCDHFP20669
		trigger = {
			trait = feeble
			is_female = yes
		}
	}
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = { #Military training is what I need!
		name = EVTOPTAHFP20669
		trigger = {
			NOR = {
				trait = is_fat
				trait = is_malnourished #Shouldn't be either at this age anyway, but, just to be safe...
			}
			OR = {
				trait = sturdy
				trait = feeble #Works for both.
			}
			combat_rating = 15
			OR = {
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		}
		tooltip_info = combat_rating
		custom_tooltip = { text = tooltip_20663_A }
		balance_weight_large_effect = yes
		hidden_tooltip = {
			random_list = {
				80 = { #Success - Character stops being sturdy/feeble
					character_event = { id = HFP.20670 days = 150 random = 150 }
				}
				20 = { #Critical Success - Character becomes brawny
					character_event = { id = HFP.20671 days = 150 random = 150 }
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = { #Eat less.
		name = EVTOPTBHFP20669
		trigger = {
			trait = sturdy
		}
		custom_tooltip = { text = tooltip_20663_B }
		balance_weight_large_effect = yes
		hidden_tooltip = {
			random_list = {
				10 = { #Overboard - Character becomes feeble
					character_event = { id = HFP.20672 days = 150 random = 150 }
				}
				50 = { #Success - Character stops being sturdy
					character_event = { id = HFP.20673 days = 150 random = 150 }
				}
				30 = { #Failure - Character still sturdy
				}
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = { #Eat more.
		name = EVTOPTCHFP20669
		trigger = {
			trait = feeble
		}
		custom_tooltip = { text = tooltip_20663_C }
		balance_weight_large_effect = yes
		hidden_tooltip = {
			random_list = {
				10 = { #Overboard - Character becomes sturdy
					character_event = { id = HFP.20674 days = 150 random = 150 }
				}
				50 = { #Success - Character stops being feeble
					character_event = { id = HFP.20675 days = 150 random = 150 }
				}
				30 = { #Failure - Character still feeble
				}
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = { #Nothing
		name = EVTOPTDHFP20669
		ai_chance = {
			factor = 0
		}
	}
}

#Training removes sturdy/feeble
character_event = {
	id = HFP.20670
	desc = {
		text = EVTDESCAHFP20670
		trigger = {
			trait = sturdy
		}
	}
	desc = {
		text = EVTDESCBHFP20670
		trigger = {
			trait = feeble
		}
	}
	desc = EVTDESCAHFP20670
	picture = GFX_evt_child_sword

	trigger = {
		OR = {
			trait = sturdy
			trait = feeble
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20670
		if = {
			limit = { trait = sturdy }
			remove_trait = sturdy
		}
		if = {
			limit = { trait = feeble }
			remove_trait = feeble
		}
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

#Training makes brawny
character_event = {
	id = HFP.20671
	desc = EVTDESCAHFP20671
	picture = GFX_evt_child_sword

	trigger = {
		OR = {
			trait = sturdy
			trait = feeble
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20671
		if = {
			limit = { trait = sturdy }
			remove_trait = sturdy
		}
		if = {
			limit = { trait = feeble }
			remove_trait = feeble
		}
		add_trait = robust
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

#Sturdy becomes feeble
character_event = {
	id = HFP.20672
	desc = EVTDESCAHFP20672
	picture = GFX_evt_child_reading

	trigger = {
		trait = sturdy
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20672
		if = {
			limit = { trait = sturdy }
			remove_trait = sturdy
		}
		add_trait = feeble
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

#Character no longer sturdy.
character_event = {
	id = HFP.20673
	desc = EVTDESCAHFP20673
	picture = GFX_evt_child_reading

	trigger = {
		trait = sturdy
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20673
		if = {
			limit = { trait = sturdy }
			remove_trait = sturdy
		}
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

#Feeble becomes sturdy
character_event = {
	id = HFP.20674
	desc = {
		text = EVTDESCAHFP20674
		trigger = {
			is_female = no
		}
	}
	desc = {
		text = EVTDESCBHFP20674
		trigger = {
			is_female = yes
		}
	}
	picture = GFX_evt_child_reading

	trigger = {
		trait = feeble
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20674
		if = {
			limit = { trait = feeble }
			remove_trait = feeble
		}
		add_trait = sturdy
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

#Character no longer feeble.
character_event = {
	id = HFP.20675
	desc = EVTDESCAHFP20675
	picture = GFX_evt_child_reading

	trigger = {
		trait = feeble
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20675
		if = {
			limit = { trait = feeble }
			remove_trait = feeble
		}
		prestige = 25
		ai_chance = { factor = 100 }
	}
}

######################################################
#Potential Obese/Underweight flavor. (fired from the events applying those modifiers) - Higher than Count only.

#The Leechlord (requires Reaper's Due).
#Court Physician has brilliant idea.
character_event = {
	id = HFP.20676
	desc = EVTDESCAHFP20676
	picture = GFX_evt_died_old_age

	trigger = {
		has_minor_title = title_court_physician
		FROM = {
			is_alive = yes
			trait = is_malnourished
		}
	}

	is_triggered_only = yes

	option = { #Inform liege.
		name = EVTOPTAHFP20676
		hidden_tooltip = { FROM = { character_event = { id = HFP.20677 } } }
		ai_chance = { factor = 100 }
	}
	option = { #No.
		name = EVTOPTBHFP20676
		ai_chance = { factor = 0 }
	}
}

#Liege informed of treatment to rebalance humors.
character_event = {
	id = HFP.20677
	desc = EVTDESCAHFP20677
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #Yes.
		name = EVTOPTAHFP20677
		custom_tooltip = { text = tooltip_health_improves }
		hidden_tooltip = { health = 0.35 }
		lose_weight_medium_effect = yes
		FROM = {
			show_scope_change = no
			opinion = {
				who = ROOT
				modifier = opinion_loyal_servant
				months = 1200
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20701 } } } #Notify in case it's player.
		hidden_tooltip = { character_event = { id = HFP.20678 days = 30 random = 30 } }
		ai_chance = { factor = 100 }
	}
	option = { #No.
		name = EVTOPTBHFP20677
		hidden_tooltip = { FROM = { character_event = { id = HFP.20702 } } }
		ai_chance = { factor = 0 }
	}
}

#Court Physician notified. (End of his line)
character_event = {
	id = HFP.20701
	desc = EVTDESCAHFP20701
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #No.
		name = EVTOPTAHFP20701
		tiered_piety_reward_effect = yes
		ai_chance = { factor = 100 }
	}
}
#Court Physician notified. (End of his line)
character_event = {
	id = HFP.20702
	desc = EVTDESCAHFP20702
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #No.
		name = EVTOPTAHFP20702
		ai_chance = { factor = 100 }
	}
}

#Time has passed, ruler notices change in behavior.
character_event = {
	id = HFP.20678
	desc = EVTDESCAHFP20678
	picture = GFX_evt_died_old_age
	show_from_from = yes

	is_triggered_only = yes

	option = { #Do not care, but kill physician.
		name = EVTOPTAHFP20678
		trigger = { trait = paranoid }
		tooltip_info = paranoid
		if = {
			limit = { NOT = { trait = cruel } }
			add_trait = cruel
		}
		add_character_modifier = {
			modifier = leechlord_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_leechlord }
		}
		tooltip = {
			FROMFROM = {
				death = {
					death_reason = death_execution_hanging
					killer = ROOT
				}
			}
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20679 } } } #Actually kill Physician.
		ai_chance = { factor = 100 }
	}
	option = { #Do not care.
		name = EVTOPTBHFP20678
		if = {
			limit = { NOT = { trait = cruel } }
			add_trait = cruel
		}
		add_character_modifier = {
			modifier = leechlord_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_leechlord }
		}
		opinion = {
			who = FROMFROM
			modifier = opinion_trusted_servant
			months = 1200
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20703 days = 17 } } } #Notify Physician.
		ai_chance = { factor = 50 }
	}
	option = { #Stop treatment.
		name = EVTOPTCHFP20678
		gain_weight_medium_effect = yes
		remove_opinion = { who = FROMFROM modifier = opinion_trusted_servant }
		custom_tooltip = { text = tooltip_health_deteriorates }
		hidden_tooltip = { health = -0.5 }
		ai_chance = { factor = 0 }
	}
}

#Court Physician notified and executed.
character_event = {
	id = HFP.20679
	desc = EVTDESCAHFP20679
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #No.
		name = EVTOPTAHFP20679
		death = {
			death_reason = death_execution_hanging
			killer = FROM
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20690 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Final notification for Leechlord. - Physician has been killed.
character_event = {
	id = HFP.20690
	desc = EVTDESCAHFP20690
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #Good.
		name = EVTOPTAHFP20690
		ai_chance = { factor = 100 }
	}
}

#Final notification for Physician.
character_event = {
	id = HFP.20703
	desc = EVTDESCAHFP20703
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #Good.
		name = EVTOPTAHFP20703
		hidden_tooltip = { FROM = { character_event = { id = HFP.20691 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Final notification for Leechlord. - Physician still serving you.
character_event = {
	id = HFP.20691
	desc = EVTDESCAHFP20691
	picture = GFX_evt_died_old_age

	is_triggered_only = yes

	option = { #Good.
		name = EVTOPTAHFP20691
		ai_chance = { factor = 100 }
	}
}


#The Whisperer (requires a non-cruel/envious married vassal).
#Potential vassal is concerned about liege.
character_event = {
	id = HFP.20700
	desc = EVTDESCAHFP20700
	picture = GFX_evt_recovery

	trigger = {
		vassal_of = FROM
		is_married = yes
		NOT = { is_married = FROM }
		NOT = { any_spouse = { NOT = { is_vassal_or_below_of = FROM } } }
		FROM = {
			is_alive = yes
			trait = is_malnourished
		}
	}
	is_triggered_only = yes

	option = { #Yes
		name = EVTOPTAHFP20700
		tiered_piety_reward_effect = yes
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_loyal_servant
				months = 1200
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20680 } } }
		ai_chance = { factor = 100 }
	}
	option = { #No
		name = EVTOPTBHFP20700
		ai_chance = { factor = 0 }
	}
}

#Liege is informed of special care.
character_event = {
	id = HFP.20680
	desc = EVTDESCAHFP20680
	picture = GFX_evt_recovery

	is_triggered_only = yes

	option = { #Take advantage of care.
		name = EVTOPTAHFP20680
		custom_tooltip = { text = tooltip_health_improves }
		hidden_tooltip = { health = 0.35 }
		lose_weight_medium_effect = yes
		hidden_tooltip = { FROM = { spouse = { character_event = { id = HFP.20682 days = 30 random = 30 } } } } #Wife of vassal is upset.
		FROM = {
			show_scope_change = no
			opinion = {
				who = ROOT
				modifier = opinion_loyal_servant
				months = 1200
			}
		}
		ai_chance = { factor = 100 }
	}
	option = { #No.
		name = EVTOPTBHFP20680
		hidden_tooltip = { FROM = { character_event = { id = HFP.20681 } } } #Inform, end line.
		ai_chance = { factor = 0 }
	}
}

#Potential vassal notified of inappropriate behavior.
character_event = {
	id = HFP.20681
	desc = EVTDESCAHFP20681
	picture = GFX_evt_recovery

	is_triggered_only = yes

	option = { #Yes
		name = EVTOPTAHFP20681
		tooltip = {
			remove_opinion = {
				who = FROM
				modifier = opinion_loyal_servant
			}
		}
		ai_chance = { factor = 100 }
	}
}
#Spouse of vassal notified.
character_event = {
	id = HFP.20682
	desc = EVTDESCAHFP20682
	picture = GFX_evt_scandal

	trigger = {
		is_vassal_or_below_of = FROM
		is_married = FROMFROM
		FROM = {
			is_alive = yes
			trait = is_malnourished
		}
	}
	is_triggered_only = yes

	option = { #Complain
		name = EVTOPTAHFP20682
		custom_tooltip = { text = tooltip_HFP20682_A }
		hidden_tooltip = { FROM = { character_event = { id = HFP.20683 } } } #Ruler solves the issue.
		ai_chance = { factor = 100 }
	}
	option = { #Do nothing.
		name = EVTOPTBHFP20682
		ai_chance = { factor = 0 }
	}
}

#Ruler: wife (FROM) of vassal (FROMFROMFROM) complained.
character_event = {
	id = HFP.20683
	desc = EVTDESCAHFP20683
	picture = GFX_evt_scandal

	is_triggered_only = yes

	option = { #Make vassal kill wife.
		name = EVTOPTAHFP20683
		trigger = { trait = cruel }
		tooltip_info = cruel
		if = {
			limit = { NOT = { trait = deceitful } }
			add_trait = deceitful
		}
		add_character_modifier = {
			modifier = whisperer_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_whisperer }
		}
		opinion = {
			who = FROMFROMFROM
			modifier = opinion_trusted_servant
			months = 1200
		}
		tooltip = {
			FROM = {
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		hidden_tooltip = { FROMFROMFROM = { character_event = { id = HFP.20684 } } } #Vassal obeys.
		ai_chance = { factor = 100 }
	}
	option = { #Make vassal repudiate wife.
		name = EVTOPTBHFP20683
		if = {
			limit = { NOT = { trait = deceitful } }
			add_trait = deceitful
		}
		add_character_modifier = {
			modifier = whisperer_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_whisperer }
		}
		opinion = {
			who = FROMFROMFROM
			modifier = opinion_trusted_servant
			months = 1200
		}
		hidden_tooltip = { FROMFROMFROM = { character_event = { id = HFP.20686 } } } #Vassal obeys.
		ai_chance = { factor = 50 }
	}
	option = { #Free vassal of vow.
		name = EVTOPTCHFP20683
		if = {
			limit = { NOT = { trait = kind } }
			add_trait = kind
		}
		gain_weight_medium_effect = yes
		remove_opinion = { who = FROMFROMFROM modifier = opinion_trusted_servant }
		custom_tooltip = { text = tooltip_health_deteriorates }
		hidden_tooltip = { health = -0.5 }
		ai_chance = { factor = 0 }
	}
}

#Vassal forced to kill his wife.
character_event = {
	id = HFP.20684
	desc = EVTDESCAHFP20684
	picture = GFX_evt_shadow

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20684
		tooltip = {
			FROMFROM = {
				death = {
					death_reason = death_murder_unknown
				}
			}
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20685 } } } #Actually kill wife.
		ai_chance = { factor = 100 }
	}
}

#Wife is killed.
character_event = {
	id = HFP.20685
	desc = EVTDESCAHFP20685
	picture = GFX_evt_shadow

	is_triggered_only = yes

	option = { #Do nothing.
		name = EVTOPTAHFP20685
		death = {
			death_reason = death_murder_unknown
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20689 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Vassal forced to repudiate his wife.
character_event = {
	id = HFP.20686
	desc = EVTDESCAHFP20686
	picture = GFX_evt_quarrel

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20686
		if = {
			limit = { NOT = { trait = celibate } }
			add_trait = celibate
		}
		FROMFROM = {
			opinion = {
				who = ROOT
				modifier = opinion_repudiated_me
				years = 100
			}
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20687 } } } #Notify wife.
		ai_chance = { factor = 100 }
	}
}

#Wife is notified.
character_event = {
	id = HFP.20687
	desc = EVTDESCAHFP20687
	picture = GFX_evt_quarrel

	is_triggered_only = yes

	option = { #Do nothing.
		name = EVTOPTAHFP20687
		opinion = {
			who = FROM
			modifier = opinion_repudiated_me
			years = 100
		}
		hidden_tooltip = { FROMFROM = { character_event = { id = HFP.20688 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Final notification for Whisperer. - Wife has been repudiated.
character_event = {
	id = HFP.20688
	desc = EVTDESCAHFP20688
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = { #Good.
		name = EVTOPTAHFP20688
		ai_chance = { factor = 100 }
	}
}

#Final notification for Whisperer. - Wife has been killed.
character_event = {
	id = HFP.20689
	desc = EVTDESCAHFP20689
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = { #Good.
		name = EVTOPTAHFP20689
		ai_chance = { factor = 100 }
	}
}

#HFP.20690 and HFP.20691 taken for notifications to Leechlord.

#The Black Boar. (Requres an non-deceitful/paranoid vassal).
#Vassal informed bard under his protection wrote bad song about ruler.
character_event = {
	id = HFP.20692
	desc = EVTDESCAHFP20692
	picture = GFX_evt_jugglers

	trigger = {
		FROM = {
			is_alive = yes
			trait = is_fat
		}
	}

	is_triggered_only = yes

	option = { #Leave him be.
		name = EVTOPTAHFP20692
		custom_tooltip = { text = tooltip_HFP20692_A }
		tiered_prestige_reward_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20693 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
	option = { #Censor him.
		name = EVTOPTBHFP20692
		if = {
			limit = { trait = honest }
			remove_trait = honest
		}
		ai_chance = { factor = 0 }
	}
}

#Ruler hears song
character_event = {
	id = HFP.20693
	desc = EVTDESCAHFP20693
	picture = GFX_evt_jugglers
	hide_from = yes

	trigger = {
		FROM = {
			is_alive = yes
			trait = is_fat
		}
	}

	is_triggered_only = yes

	option = { #Cook the bard.
		name = EVTOPTAHFP20693
		custom_tooltip = { text = tooltip_HFP20693_A }
		if = {
			limit = { NOT = { trait = cruel } }
			add_trait = cruel
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20698 } } } #Notify vassal.
		ai_chance = { factor = 100 }
	}
	option = { #Punish bard lightly.
		name = EVTOPTBHFP20693
		custom_tooltip = { text = tooltip_HFP20693_B }
		if = {
			limit = { trait = just }
			change_stewardship = 1
		}
		if = {
			limit = { NOT = { trait = just } }
			add_trait = just
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20696 } } } #Notify vassal.
		ai_chance = { factor = 100 }
	}
	option = { #Tolerate bard.
		name = EVTOPTCHFP20693
		if = {
			limit = { trait = kind }
			change_diplomacy = 1
		}
		if = {
			limit = { NOT = { trait = kind } }
			add_trait = kind
		}
		FROM = {
			show_scope_change = no
			opinion = {
				who = ROOT
				modifier = opinion_swayed_2
				years = 15
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20694 } } } #Notify vassal.
		ai_chance = { factor = 0 }
	}
}

#Vassal impressed
character_event = {
	id = HFP.20694
	desc = EVTDESCAHFP20694
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHFP20694
		opinion = {
			who = FROM
			modifier = opinion_swayed_2
			years = 15
		}
		hidden_tooltip = { FROM = { character_event = { id = HFP.20695 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Ruler notified.
character_event = {
	id = HFP.20695
	desc = EVTDESCAHFP20695
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = { #
		name = EVTOPTAHFP20695
		ROOT = { give_nickname = nick_the_merry }
		tooltip = {
			FROM = {
				show_scope_change = no
				opinion = {
					who = ROOT
					modifier = opinion_swayed_2
					years = 15
				}
			}
		}
		tiered_prestige_reward_effect = yes
		ai_chance = { factor = 100 }
	}
}

#Vassal: Ruler punished bard lightly, and bard didn't learn the lesson.
character_event = {
	id = HFP.20696
	desc = EVTDESCAHFP20696
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20696
		hidden_tooltip = { FROM = { character_event = { id = HFP.20697 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Ruler notified.
character_event = {
	id = HFP.20697
	desc = EVTDESCAHFP20697
	picture = GFX_evt_jugglers
	hide_from = yes

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20697
		tiered_prestige_negative_effect = yes
		add_character_modifier = {
			modifier = laughing_stock_modifier
			years = 10
		}
		ai_chance = { factor = 100 }
	}
}

#Vassal: Ruler cooked the impudent bard.
character_event = {
	id = HFP.20698
	desc = EVTDESCAHFP20698
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP20698
		tiered_prestige_negative_effect = yes
		hidden_tooltip = { FROM = { character_event = { id = HFP.20699 } } } #Notify ruler.
		ai_chance = { factor = 100 }
	}
}

#Ruler notified.
character_event = {
	id = HFP.20699
	desc = EVTDESCAHFP20699
	picture = GFX_evt_jugglers
	hide_from = yes

	is_triggered_only = yes

	option = { #Be(come) Cannibal.
		name = EVTOPTAHFP20699
		trigger = {
			OR = {
				trait = cannibal_trait
				has_dlc = "Way of Life"
			}
		}
		add_trait = cannibal_trait
		add_character_modifier = {
			modifier = black_boar_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_black_boar }
		}
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						religion = bon
						religion = bon_reformed
					}
					ROOT = { ai = no }
				}
				ROOT = { set_character_flag = achievement_bon_appetit }
			}
		}
		gain_weight_medium_effect = yes
		tiered_piety_negative_effect = yes
		ai_chance = { factor = 100 }
	}
	option = { #Good.
		name = EVTOPTBHFP20699
		trigger = { NOT = { trait = cannibal_trait } }
		add_character_modifier = {
			modifier = black_boar_modifier
			duration = -1
		}
		if = {
			limit = { NOT = { has_nickname = yes } }
			ROOT = { give_nickname = nick_the_black_boar }
		}
		tiered_piety_negative_effect = yes
		ai_chance = { factor = 100 }
	}
}

# Id HFP.20700/HFP.20701/HFP.20702/HFP.20703 taken by missing events.
