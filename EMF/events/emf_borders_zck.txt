# -*- ck2 -*-
# Generated from ZCK source code; compiler version: v0.0-9

namespace = emf_borders
character_event = {
	id = emf_borders.0
	hide_window = yes
	only_playable = yes
	is_patrician = no
	war = no
	ai = yes
	trigger = {
		controls_religion = no
		holy_order = no
		is_merchant_republic = no
		OR = {
			any_demesne_title = {
				tier = baron
				dejure_liege_title = {
					not = { holder = ROOT }
				}
			}
			any_vassal = {
				tier = baron
				capital_holding = {
					dejure_liege_title = {
						not = { holder = ROOT }
					}
				}
			}
		}
	}
	immediate = {
		any_demesne_title = {
			limit = {
				tier = baron
				dejure_liege_title = {
					not = { holder = ROOT }
				}
			}
			dejure_liege_title = {
				owner = {
					grant_title_no_opinion = PREVPREV
				}
			}
		}
		any_vassal = {
			limit = {
				tier = baron
				capital_holding = {
					dejure_liege_title = {
						not = { holder = ROOT }
					}
				}
			}
			capital_holding = {
				dejure_liege_title = {
					owner = {
						set_defacto_vassal = PREVPREVPREV
					}
				}
			}
			character_event = {
				id = emf_borders.1
			}
		}
	}
}
character_event = {
	id = emf_borders.1
	is_triggered_only = yes
	hide_window = yes
	only_rulers = yes
	is_patrician = no
	war = no
	ai = yes
	trigger = {
		tier = baron
		capital_holding = {
			location = {
				ROOT = {
					any_demesne_title = {
						location = {
							not = { province = PREVPREVPREV }
						}
					}
				}
			}
		}
	}
	immediate = {
		capital_holding = {
			location = {
				save_event_target_as = cap_prov
			}
		}
		any_demesne_title = {
			limit = {
				location = {
					not = { province = event_target:cap_prov }
				}
			}
			dejure_liege_title = {
				owner = {
					grant_title_no_opinion = PREVPREV
				}
			}
		}
	}
}
