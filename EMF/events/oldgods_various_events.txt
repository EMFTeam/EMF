# -*- ck2.events -*-

###################################
#
# THE OLD GODS 
# - Various Events
#
###################################

# Written by Henrik Eklund

namespace = TOG
namespace = TGF

### Berserker Events

# Character becomes a Berserker in battle
character_event = {
	id = TOG.3000
	desc = EVTDESC_TOG_3000
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		culture_group = north_germanic
		OR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		is_alive = yes
		NOT = { trait = berserker }
		NOT = { practical_age = 50 }
		OR = {
			trait = wroth
			trait = aggressive_leader
		}
	}

	immediate = {
		disallow_new_battle_events_effect = yes #to keep the tombola from spamming you...
	}
	
	option = {
		name = EVTOPTA_TOG_3000
		if = {
			limit = { trait = craven }
			remove_trait = craven
		}
		add_trait = berserker
		add_blood_splatter_effect = yes
		allow_new_battle_events_effect = yes
	}
}

# Berserker is Maimed in battle
character_event = {
	id = TOG.3001
	desc = EVTDESC_TOG_3001
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		trait = berserker
		NOT = { trait = maimed }
		NOT = { trait = one_legged }
		is_alive = yes
	}

	immediate = {
		disallow_new_battle_events_effect = yes #to keep the tombola from spamming you...
	}
				
	option = {
		name = EVTOPTA_TOG_3001
		add_blood_splatter_effect = yes
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = maimed
			hidden_tooltip = {
				character_event = { id = 38281 }
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_trait = one_legged
			add_trait = severely_injured
			hidden_tooltip = {
				character_event = { id = RIP.11503 } #Notify one-legged
				resolve_severely_injured_effect = yes
			}
		}
		allow_new_battle_events_effect = yes
	}
}

# Berserker is Wounded in battle
character_event = {
	id = TOG.3002
	desc = EVTDESC_TOG_3002
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		trait = berserker
		NOT = { trait = wounded }
		NOT = { is_maimed_trigger = yes }
		is_alive = yes
	}

	immediate = {
		disallow_new_battle_events_effect = yes #to keep the tombola from spamming you...
	}
	
	option = {
		name = EVTOPTA_TOG_3001
		add_trait = wounded
		add_blood_splatter_effect = yes
		allow_new_battle_events_effect = yes
	}
}

# Berserker is Killed in battle
character_event = {
	id = TOG.3003
	desc = EVTDESC_TOG_3003
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		trait = berserker
	}
	
	immediate = {
		disallow_new_battle_events_effect = yes #to keep the tombola from spamming you...
		liege = {
			if = {
				limit = { NOT = { character = ROOT } }
				character_event = { id = HFP.11002 } # (Opponent (liege) is informed that their commander has been killed)
			}
		}
		FROMFROM = {
			if = {
				limit = { NOT = { is_vassal_or_below = ROOT } }
				set_character_flag = temp_battle_kill_242
				character_event = { id = HFP.11003 }
			}
		}
#		FROM = { Outcommented because arcane magic script??
#			if = {
#				limit = { 
#					NOR = { 
#						has_character_flag = temp_battle_kill_242
#						is_vassal_or_below = ROOT
#					}
#				}
#				character_event = { id = HFP.11003 }
#			}
#		}
		FROMFROM = {
			clr_character_flag = temp_battle_kill_242
		}
		if = {
			limit = {
				OR = {
					is_liege_or_above = FROM
					FROM = { character = ROOT }
					NOT = { FROM = { always = yes } }
				}
			}
			death = {
				death_reason = death_battle
			}
			break = yes
		}
		death = {
			death_reason = death_battle
			killer = FROM
		}
	}
	
	option = {
		name = EVTOPTA_TOG_3003
	}
}

# Berserker kills scores of enemies in battle
character_event = {
	id = TOG.3004
	desc = EVTDESC_TOG_3004
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		trait = berserker
	}

	immediate = {
		disallow_new_battle_events_effect = yes #to keep the tombola from spamming you...
	}
	
	option = {
		name = EVTOPTA_TOG_3004
		add_blood_splatter_effect = yes
		prestige = 200
		change_martial = 1
		allow_new_battle_events_effect = yes
	}
}

# Too old to be Berserker
character_event = {
	id = TOG.3005
	desc = EVTDESC_TOG_3005
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		practical_age = 50
		has_dlc = "The Old Gods"
		trait = berserker
		OR = { #Either you must have been a *regular* berserker (no flag), or a special one (gained via a Warrior Lodge) for more than ten years...
			NOT = { has_character_flag = special_berserker }
			had_character_flag = { flag = special_berserker days = 3650 }
		}
	}
	
	option = {
		name = EVTOPTA_TOG_3005
		remove_trait = berserker
		clr_character_flag = special_berserker
	}
}

# Berserker goes berserk against Courtier
character_event = {
	id = TOG.3006
	desc = EVTDESC_TOG_3006
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3006
		add_blood_splatter_effect = yes
		random_list = {
			50 = {
				character_event = { id = TOG.3007 days = 1 tooltip = EVTTOOLTIP_TOG_3007 }
			}
			50 = {
				character_event = { id = TOG.3008 days = 1 tooltip = EVTTOOLTIP_TOG_3008 }
			}
		}
	}
}

# Courtier beaten
character_event = {
	id = TOG.3007
	desc = EVTDESC_TOG_3007
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_TOG_3007
		FROMFROM = {
			add_trait = wounded
			opinion = {
				modifier = opinion_went_berserk
				who = ROOT
			}
		}
	}
}

# Courtier spared
character_event = {
	id = TOG.3008
	desc = EVTDESC_TOG_3008
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_TOG_3008
		piety = 20
	}
}

# Berserker goes berserk against Courtier (Hidden AI)
character_event = {
	id = TOG.3009
	hide_window = yes
	
	is_triggered_only = yes
	
	ai = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		host = { 
			character = liege
			prisoner = no
			trait = berserker
			is_incapable = no
			NOT = {
				opinion = { who = ROOT value = 10 }
			}
			NOT = { is_inaccessible_trigger = yes }
		}
		NOT = { trait = berserker }
		is_primary_heir = no
		is_pretender = no
	}
	
	immediate = {
		add_blood_splatter_effect = yes
		liege = {
			character_event = { id = TOG.3006 }
		}
	}
}

### Varangian Events

# Varangian Guard Founded (Emperor)
narrative_event = {
	id = TOG.3100
	title = EVTNAME_TOG_3100
	desc = EVTDESC_TOG_3100
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_narrative_frame_war
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_TOG_3100
		hidden_tooltip = {
			any_player = {
				limit = {
					culture_group = north_germanic
				}
				narrative_event = { id = TOG.3101 }
			}
		}
	}
}

# Varangian Guard Founded (Norse)
narrative_event = {
	id = TOG.3101
	title = EVTNAME_TOG_3100
	picture = GFX_evt_viking_battle_oldgods
	border = GFX_event_narrative_frame_war
	
	desc = {
		text = EVTDESC_TOG_3101_A
		trigger = { # Men want to join the guard!
			gender_equality_trigger = no
			NOT = {
				has_religion_feature = religion_matriarchal
			}
		}
	}
	desc = {
		text = EVTDESC_TOG_3101_B
		trigger = { # Men *and* women want to join the guard
			gender_equality_trigger = yes
			NOT = {
				has_religion_feature = religion_matriarchal
			}
		}
	}
	desc = {
		text = EVTDESC_TOG_3101_C
		trigger = { # Women want to join the guard!
			has_religion_feature = religion_matriarchal
		}
	}

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3101
		custom_tooltip = { text = varangians_organized }
	}
}

# Varangian Captain gets Varangian trait
character_event = {
	id = TOG.3105
	hide_window = yes	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_landed_title = d_varangian_guard
		NOT = { trait = varangian }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		add_trait = varangian
	}
}

# Hack to deal with male only inheritance (sent from on_new_holder_inheritance)
# (ROOT is the character, FROM is the title, FROMFROM is the old holder)
character_event = {
    id = HFP.19100
    is_triggered_only = yes
    hide_window = yes

    trigger = {
    	NOT = { has_character_flag = varangian_title_sorted }
    	NOT = { has_character_flag = is_chosen_varangian_leader }
    	has_landed_title = d_varangian_guard
    	is_female = no
    	OR = {
	    	top_liege = {
				gender_equality_trigger = yes
			}
	    	any_playable_ruler = {
	    		religion_openly_norse_or_reformed_trigger = yes
				OR = {
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_equal
					has_religion_feature = religion_feature_bon
				}
	    	}
    	}
    }

    immediate = {
    	set_character_flag = varangian_title_sorted

    	liege = { save_event_target_as = true_liege }
		
		if = {
			limit = { has_global_flag = norse_reformation }
			norse_pagan_reformed = { save_event_target_as = emf_varangian_religion }
		}
		else_if = {
			limit = {
				any_playable_ruler = {
					religion = norse_pagan
					OR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_equal
						has_religion_feature = religion_feature_bon
					}
				}
			}
			norse_pagan = { save_event_target_as = emf_varangian_religion }
		}
		else = {
			religion_scope = { save_event_target_as = emf_varangian_religion }
		}
    	if = {
			limit = { event_target:emf_varangian_religion = { has_religion_feature = religion_matriarchal } }
			create_character = {
				random_traits = yes
				dynasty = actually_culture
				religion = event_target:emf_varangian_religion
				culture = norse
				female = yes
				age = 28
				attributes = { martial = 7 }
			}
		}
		else_if = {
			limit = {
				OR = {
					top_liege = {
						gender_equality_trigger = yes
					}
					event_target:emf_varangian_religion = { has_religion_feature = religion_equal }
					event_target:emf_varangian_religion = { has_religion_feature = religion_feature_bon }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = actually_culture
				religion = event_target:emf_varangian_religion
				culture = norse
				female = 50  # 50% chance of being female
				age = 28
				attributes = { martial = 7 }
			}
		}
		else = {
			create_character = {
				random_traits = yes
				dynasty = actually_culture
				religion = event_target:emf_varangian_religion
				culture = norse
				female = no
				age = 28
				attributes = { martial = 7 }
			}
		}
		new_character = {
			random_list = {
				60 = { }
				40 = { change_martial = 1 }
				20 = { change_martial = 2 }
				10 = { change_martial = 3 }
			}
			remove_trait = dull
			emf_remove_lifestyle_traits = yes
			random_list = {
				50 = { }
				12 = { add_trait = duelist }
				12 = { add_trait = hunter }
				12 = { add_trait = strategist }
				8  = { add_trait = robust }
				3  = { add_trait = tall }
				3  = { add_trait = imposing }
				2  = {
					add_trait = tall
					add_trait = imposing
				}
			}
			random = {
				chance = 1
				modifier = {
					factor = 0
					NOT = { has_dlc = "Reapers" }
				}
				add_trait = one_eyed
			}
			if = {
				limit = { is_female = yes }
				add_trait = shieldmaiden
			}
			clear_education_trait = yes
			random_list = {
				10 = { add_trait = misguided_warrior }
				20 = { add_trait = tough_soldier }
				30 = { add_trait = skilled_tactician }
				40 = { add_trait = brilliant_strategist }
			}
			if = {
				limit = {
					trait = brilliant_strategist
					leader_traits == 0
				}
				random_list = {
					10 = { add_trait = inspiring_leader }
					10 = { add_trait = siege_leader }
					10 = { add_trait = organizer }
					10 = { add_trait = cavalry_leader }
					10 = { add_trait = heavy_infantry_leader }
				}
			}
			random = { chance = 50 add_trait = brave }
			emf_dna_set_flags_for_high_health = yes
			health = 1.5
			random_list = {
				10 = { add_age = 1 }
				10 = { add_age = 2 }
				20 = { add_age = 3 }
				40 = { add_age = 4 }
				20 = { add_age = 5 }
				10 = { add_age = 6 }
				10 = { add_age = 7 }
			}
			add_trait = varangian
			emf_new_character_noble = yes
			emf_dna_improve_homozygous_recessive_for_intelligence = yes
			remove_trait = dim
			remove_trait = slow
			remove_trait = imbecile
			emf_dna_improve_homozygous_recessive_for_strength = yes
			remove_trait = delicate
			remove_trait = weak
			set_character_flag = is_chosen_varangian_leader
			d_varangian_guard = {
				grant_title = PREV
			}
			set_defacto_liege = event_target:true_liege
			if = {
				limit = {
					should_evolve_cultures_trigger = yes
					has_global_flag = norse_culture_flipping
					NOT = {
						any_independent_ruler = { # A culturally unified empire shouldn't shatter norse
							culture = norse
							OR = {
								tier = EMPEROR
								num_of_king_titles = 2
							}
						}
					}
					NOT = { religion_head = { culture = norse } }
				}
				random_list = {
					25 = { culture = swedish }
					25 = { culture = norwegian }
					25 = { culture = danish }
					25 = { culture = gothic }
				}
			}
		}
    }
}

# Child has served a few years
character_event = {
	id = TOG.3108
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = wants_varangian
	}
	
	immediate = {
		set_character_flag = serving_varangian
		clr_character_flag = wants_varangian
	}
}

# Child wants to join the Varangians (Child)
character_event = {
	id = TOG.3109
	hide_window = yes
	
	is_triggered_only = yes
	
	ai = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	culture_group = north_germanic
	has_global_flag = varangian_guard_founded
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { practical_age = 40 }
		is_landed = no
		is_patrician = no
		in_command = no
		NOR = { 
			trait = varangian 
			has_character_flag = wants_varangian
			has_character_flag = denied_varangian
		}
		AND = { 
			OR = { #Updated: New gender check for ROOT, to account for special circumstances...
				has_game_rule = { # Game rules are all on!
					name = gender
					value = all
				}
				AND = { # The Old Gods version...
					is_female = no
					gender_equality_trigger = no
				}
				AND = { # Shieldmaidens...
					is_female = yes
					trait = shieldmaiden
					liege = { emf_accepts_shieldmaidens = yes }
				}
				AND = { # Status of women version, allowing women in...
					is_female = yes
					liege = { primary_title = { has_law = status_of_women_4 } }
				}
				AND = { # Boys always dream of fighting, when not explicitly blocked from it
					is_female = no
					NOT = { has_religion_feature = religion_matriarchal } 
				}
				AND = { # Enatic Clans version (no boys allowed)...
					is_female = yes
					has_religion_feature = religion_matriarchal
				}
			}
			OR = { # Regardless, they might ask either parent...
				father = {
					is_alive = yes
					culture_group = north_germanic
					is_ruler = yes
					is_liege_of = ROOT
					prisoner = no
					is_incapable = no
					ROOT = { host = { character = PREVPREV } }
				}
				mother = {
					is_alive = yes
					culture_group = north_germanic
					is_ruler = yes
					is_liege_of = ROOT
					prisoner = no
					is_incapable = no
					ROOT = { host = { character = PREVPREV } }
				}
			}
		}
		NOT = { is_inaccessible_trigger = yes }
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 1.5
			trait = ambitious
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.75
			trait = berserker
		}
		modifier = {
			factor = 1.75
			trait = proud
		}
		modifier = {
			factor = 1.75
			trait = impaler
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
		modifier = {
			factor = 0.5
			trait = content
		}
		modifier = {
			factor = 0.5
			is_primary_heir = yes
		}
		modifier = {
			factor = 0.25
			trait = craven
		}
	}
	
	immediate = {
		random_list = { # Send event to parent-liege...
			50 = {
				trigger = {
					father = {
						is_alive = yes
						culture_group = north_germanic
						is_ruler = yes
						is_liege_of = ROOT
						prisoner = no
						is_incapable = no
						ROOT = { host = { character = PREVPREV } }
					}
				}
				father = { character_event = { id = TOG.3110 } }
			}
			50 = {
				trigger = {
					mother = {
						is_alive = yes
						culture_group = north_germanic
						is_ruler = yes
						is_liege_of = ROOT
						prisoner = no
						is_incapable = no
						ROOT = { host = { character = PREVPREV } }
					}
				}
				mother = { character_event = { id = TOG.3110 } }
			}			
		}
		set_character_flag = wants_varangian
	}
}

# Child wants to join the Varangians (Parent)
character_event = {
	id = TOG.3110
	desc = EVTDESC_TOG_3110
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { 
			FROM = {
				save_event_target_as = my_child
			}
			d_varangian_guard = {
				holder_scope = {
					liege = {
						save_event_target_as = greek_king_or_queen # For loc purposes
					}
				}
			}
		}
	}
	
	option = { # Deny
		name = EVTOPTA_TOG_3110
		FROM = {
			show_scope_change = no
			opinion = {
				modifier = opinion_very_disappointed
				years = 1
				who = ROOT
			}
			clr_character_flag = wants_varangian
			set_character_flag = denied_varangian
		}
		prestige = -100
	}
	option = { # Allow
		name = EVTOPTB_TOG_3110
		d_varangian_guard = {
			show_scope_change = no
			holder_scope = {
				show_scope_change = no
				FROM = {
					show_scope_change = no
					#move_character = PREV #Does not seem to work properly
					force_host = PREV #instead using this
				}
			}
		}
		hidden_tooltip = {
			FROM = { 
				if = {
					limit = { is_female = yes }
					set_character_flag = special_marshal #for safety, so they can go lead armies...
				}
				character_event = { id = TOG.3108 days = 1460 } # 4 years later (set some flags, not really necessary anymore, but why not)
				
				character_event = { id = HFP.19102 days = 1465 random = 300 } # 4 + years later
			}
		}
		prestige = 100
	}
}

# Hidden tombola: fired from event above to determine what happened to Varangian child
# Formely MTTH events, then random yearly events, but for more control, now a delayed tombola event...
character_event = {
	id = HFP.19102
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		is_alive = yes
		varangian_guard_events_default_trigger = yes
	}

	immediate = {
		hidden_effect = {
			### Possible outcomes...
			# Child stays in Greece with wife (Setup)...................... TOG.3111
			# Child returns scarred but seasoned (Setup)................... TOG.3114
			# Child returns with notions of Greek love (Setup)............. TOG.3116
			# Child returns castrated and blinded (Setup).................. TOG.3118 
			# Child returns as excellent strategist (Setup)................ TOG.3120
			# Child returns with PTSD (Setup).............................. TOG.3122
			# Child returns home with Greek wife (Setup)................... TOG.3124
			# Child returns home as a Christian zealot (Setup)............. TOG.3126
			# Child returns home as a seasoned warrior (Setup)............. TOG.3128
			# Child dies in battle (Setup)................................. TOG.3130
			# Child dies outside of battle (Setup)......................... TOG.3398
			# Child returns with loot (Setup).............................. TOG.3132

			random_list = {
				10 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
						is_married = no
						NOR = {
							father = {
								primary_title = {
									current_heir = { character = PREV }
								}
							}
							mother = {
								primary_title = {
									current_heir = { character = PREV }
								}
							}
						}
						had_character_flag = { flag = serving_varangian days = 5 }
					}
					modifier = {
						factor = 1.75
						trait = lustful
					}
					modifier = {
						factor = 1.75
						trait = content
					}
					modifier = {
						factor = 1.75
						trait = slothful
					}
					# Child stays in Greece with spouse (Child)...
					character_event = { id = TOG.3111 } # send outcome event...
				}

				12 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
						is_married = no
						had_character_flag = { flag = serving_varangian days = 5 }
						has_scarred_trait_trigger = no
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 0.25
						trait = craven
					}
					# Child returns scarred but seasoned (Child)
					character_event = { id = TOG.3114 } # send outcome event...
				}

				11 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 1.75
						trait = homosexual
					}
					modifier = {
						factor = 1.75
						trait = lustful
					}
					modifier = {
						factor = 1.75
						trait = hedonist
					}
					modifier = {
						factor = 1.75
						trait = chaste
					}
					# Child returns with notions of Greek love (Child)
					character_event = { id = TOG.3116 } # send outcome event...
				}

				7 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 1.75
						trait = eunuch
					}
					# Setup: Child returns castrated and blinded (Child)
					character_event = { id = TOG.3118 } # send outcome event...
				}

				12 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
						NOT = { trait = brilliant_strategist }
						OR = {
							trait = misguided_warrior
							trait = tough_soldier
							trait = skilled_tactician
						}
					}
					modifier = {
						factor = 1.5
						trait = genius
					}
					modifier = {
						factor = 1.75
						trait = diligent
					}
					modifier = {
						factor = 1.75
						OR = {
							trait = quick
							trait = shrewd
						}
					}
					modifier = {
						factor = 0.5
						OR = {
							trait = slow
							trait = dull
						}
					}
					modifier = {
						factor = 0.5
						trait = imbecile
					}
					# Child returns as excellent strategist (Child)
					character_event = { id = TOG.3120 } # send outcome event...
				}

				11 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 1.75
						trait = depressed
					}
					modifier = {
						factor = 1.75
						trait = kind
					}
					modifier = {
						factor = 1.75
						trait = poet
					}
					modifier = {
						factor = 1.75
						trait = just
					}
					# Child returns with PTSD (Child)
					character_event = { id = TOG.3122 } # send outcome event...
				}

				11 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
						is_married = no
					}
					modifier = {
						factor = 1.75
						trait = lustful
					}
					# Child returns home with Greek spouse (Child)
					character_event = { id = TOG.3124 } # send outcome event...
				}


				12 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
						religion_group = pagan_group
						NOR = {
							trait = zealous
							trait = shieldmaiden
						}
						d_varangian_guard = {
							holder_scope = {
								liege = {
									religion_group = christian
								}
							}
						}
					}
					modifier = {
						factor = 0.20
						trait = cynical
					}
					# Child returns home as a Christian zealot (Child)
					character_event = { id = TOG.3126 } # send outcome event...
				}

				14 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 1.75
						is_strong_trigger = yes
					}
					modifier = {
						factor = 1.75
						OR = {
							trait = quick
							trait = shrewd
						}
					}
					modifier = {
						factor = 1.75
						trait = genius
					}
					modifier = {
						factor = 0.5
						trait = slothful
					}
					modifier = {
						factor = 0.5
						OR = {
							trait = slow
							trait = dull
						}
					}
					modifier = {
						factor = 0.25
						trait = imbecile
					}
					# Child returns home as a seasoned warrior (Child)
					character_event = { id = TOG.3128 } # send outcome event...
				}

				10 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 100
						is_alive = no
						death_reason = death_battle
					}
					modifier = {
						factor = 1.75
						trait = brave
					}
					modifier = {
						factor = 1.75
						trait = wroth
					}
					modifier = {
						factor = 1.75
						trait = berserker
					}
					modifier = {
						factor = 0.25
						trait = craven
					}
					modifier = {
						factor = 1.75
						trait = drunkard
					}
					modifier = {
						factor = 1.75
						trait = wounded
					}
					# Child dies in battle (Child)
					character_event = { id = TOG.3130 } # send outcome event...
				}
				
				10 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 100
						is_alive = no
						NOT = { death_reason = death_battle }
					}
					modifier = {
						factor = 1.75
						has_disease_trigger = yes
						has_minor_disease_trigger = no
					}		
					modifier = {
						factor = 1.75
						has_disease_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = infirm
					}
					modifier = {
						factor = 1.5
						is_incapable = yes
					}
					# Child dies outside of battle (Child)
					character_event = { id = TOG.3398 } # send outcome event...
				}

				12 = {
					trigger = {
						varangian_guard_events_default_trigger = yes
					}
					modifier = {
						factor = 1.75
						trait = greedy
					}
					modifier = {
						factor = 1.75
						stewardship = 10
					}
					# Child returns with loot (Child)
					character_event = { id = TOG.3132 } # send outcome event...
				}
				
			}
		}
	}
}

# Setup: Child stays in Greece with spouse (Child)
character_event = {
	id = TOG.3111
	hide_window = yes	
	is_triggered_only = yes
	
	immediate = {
		add_trait = varangian
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3112 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3112 } }
			}
		}
		d_varangian_guard = {
			holder_scope = {
				liege = {
					character_event = { id = TOG.3113 }
				}
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child stays in Greece with spouse (Norse parent)
character_event = {
	id = TOG.3112
	desc = EVTDESC_TOG_3112
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3112
		tooltip = {
			d_varangian_guard = {
				show_scope_change = no
				holder_scope = {
					show_scope_change = no
					liege = {
						FROM = {
							move_character = PREV
							religion = PREV
						}
					}
				}
			}
			FROM = { show_scope_change = no add_trait = varangian }
		}
	}
}

# Child stays in Greece with spouse (Byzantine Emperor)
character_event = {
	id = TOG.3113
	desc = EVTDESC_TOG_3113
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3113
		if = {
			limit = { FROM = { is_female = yes } }
			d_varangian_guard = {
				holder_scope = {
					liege = {
						capital_scope = {
							create_character = {
								random_traits = yes
								dynasty = random
								female = no
								age = 26
								religion = THIS
								culture = THIS
							}
						}
					}
				}
			}
			new_character = {
				add_spouse = FROM
				emf_new_character_noble = yes
			}
		}
		else = {
			d_varangian_guard = {
				holder_scope = {
					liege = {
						capital_scope = {
							create_character = {
								random_traits = yes
								dynasty = random
								female = yes
								age = 26
								religion = THIS
								culture = THIS
							}
						}
					}
				}
			}
			new_character = {
				add_spouse_matrilineal = FROM
				emf_new_character_noble = yes
			}
		}
		FROM = {
			move_character = ROOT
			religion = ROOT
		}
	}
}

# Setup: Child returns scarred but seasoned (Child)
character_event = {
	id = TOG.3114
	hide_window = yes
	
	is_triggered_only = yes
				
	immediate = {
		add_scarred_high_effect = yes
		add_trait = varangian
		change_martial = 4
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3115 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3115 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns scarred but seasoned
character_event = {
	id = TOG.3115
	desc = EVTDESC_TOG_3115
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3115
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_scarred_high_effect = yes
				add_trait = varangian
				change_martial = 4
			}
		}
	}
}

# Setup: Child returns with notions of Greek love (Child)
character_event = {
	id = TOG.3116
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		add_trait = homosexual
		add_trait = varangian
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3117 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3117 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns with notions of Greek love
character_event = {
	id = TOG.3117
	desc = EVTDESC_TOG_3117
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3117
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = homosexual
				add_trait = varangian
			}
		}
	}
}

# Setup: Child returns castrated and blinded (Child)
character_event = {
	id = TOG.3118
	hide_window = yes
	
	is_triggered_only = yes
		
	immediate = {
		if = {
			limit = {
				trait = one_eyed
			}
			remove_trait = one_eyed
		}
		add_trait = blinded
		if = {
			limit = {
				is_female = no
			}
			add_trait = eunuch
		}
		add_trait = varangian

		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3119 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3119 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns (castrated and) blinded
character_event = {
	id = TOG.3119
	desc = EVTDESC_TOG_3119
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3119
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = blinded
				if = {
					limit = {
						is_female = no
					}
					add_trait = eunuch
				}
				add_trait = varangian
			}
		}
	}
}

# Setup: Child returns as excellent strategist (Child)
character_event = {
	id = TOG.3120
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		change_martial = 2
		add_trait = varangian
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3121 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3121 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns as excellent strategist
character_event = {
	id = TOG.3121
	desc = EVTDESC_TOG_3121
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3121
		if = {
			limit = { FROM = { trait = skilled_tactician } }
			FROM = {
				hidden_tooltip = { remove_trait = skilled_tactician }
				add_trait = brilliant_strategist
			}
		}
		else_if = {
			limit = {
				FROM = {
					OR = {
						trait = misguided_warrior
						trait = tough_soldier
					}	
				}
			}
			FROM = {
				hidden_tooltip = { 
					remove_trait = misguided_warrior
					remove_trait = tough_soldier
				}
				add_trait = skilled_tactician
			}
		}
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				change_martial = 2
				add_trait = varangian
			}
		}
	}
}

# Setup: Child returns with PTSD (Child)
character_event = {
	id = TOG.3122
	hide_window = yes
	
	is_triggered_only = yes
		
	immediate = {
		add_trait = stressed
		add_trait = depressed
		add_trait = varangian
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3123 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3123 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns with PTSD
character_event = {
	id = TOG.3123
	desc = EVTDESC_TOG_3123
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3123
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = stressed
				add_trait = depressed
				add_trait = varangian
			}
		}
	}
}

# Setup: Child returns home with Greek spouse (Child)
character_event = {
	id = TOG.3124
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3125 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3125 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns home with Greek spouse
character_event = {
	id = TOG.3125
	desc = EVTDESC_TOG_3125
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3125
		if = {
			limit = { FROM = { is_female = yes } }
			d_varangian_guard = {
				holder_scope = {
					liege = {
						capital_scope = {
							create_character = {
								random_traits = yes
								dynasty = NONE
								female = no
								age = 26
								religion = THIS
								culture = THIS
							}
						}
					}
				}
			}
			new_character = {
				add_spouse_matrilineal = FROM
				emf_new_character_noble = yes
			}
		}
		else = {
			d_varangian_guard = {
				holder_scope = {
					liege = {
						capital_scope = {
							create_character = {
								random_traits = yes
								dynasty = NONE
								female = yes
								age = 26
								religion = THIS
								culture = THIS
							}
						}
					}
				}
			}
			new_character = {
				add_spouse = FROM
				emf_new_character_noble = yes
			}
		}
		FROM = { add_trait = varangian }
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
	}
}

# Setup: Child returns home as a Christian zealot (Child)
character_event = {
	id = TOG.3126
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		add_trait = zealous
		add_trait = varangian
		d_varangian_guard = {
			holder_scope = {
				liege = {
					capital_scope = {
						ROOT = {
							religion = PREV
						}
					}
				}
			}
		}
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3127 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3127 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Son returns home as a Christian zealot
character_event = {
	id = TOG.3127
	desc = EVTDESC_TOG_3127
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3127
		trigger = {
			NOR = {
				religion = FROM
				AND = {
					religion_group = FROM
					NOT = { is_heresy_of = FROM }
				}
				emf_syncretized_religion_with_FROM = yes
			}
		}
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = zealous
				add_trait = varangian
				d_varangian_guard = {
					holder_scope = {
						liege = {
							capital_scope = {
								FROM = {
									religion = PREV
								}
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_TOG_3127
		trigger = {
			OR = {
				religion = FROM
				AND = {
					religion_group = FROM
					NOT = { is_heresy_of = FROM }
				}
				emf_syncretized_religion_with_FROM = yes
			}
		}
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = zealous
				add_trait = varangian
				d_varangian_guard = {
					holder_scope = {
						liege = {
							capital_scope = {
								FROM = {
									religion = PREV
								}
							}
						}
					}
				}
			}
		}
	}
}

# Setup: Child returns home as a seasoned warrior (Child)
character_event = {
	id = TOG.3128
	hide_window = yes
	
	is_triggered_only = yes
		
	immediate = {
		add_trait = brave
		add_trait = varangian
		change_martial = 2
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3129 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3129 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns home as a seasoned warrior
character_event = {
	id = TOG.3129
	desc = EVTDESC_TOG_3129
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3129
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = {
			tooltip = {
				add_trait = brave
				add_trait = varangian
				change_martial = 2
			}
		}
	}
}

# Setup: Child dies in battle (Child)
character_event = {
	id = TOG.3130
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		add_trait = varangian
		if = {
			limit = {
				is_alive = yes
			}
			death = { death_reason = death_battle }
		}
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3131 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3131 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child dies in battle
character_event = {
	id = TOG.3131
	desc = EVTDESC_TOG_3131
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			d_varangian_guard = {
				holder_scope = {
					liege = {
						save_event_target_as = greek_king_or_queen # For loc purposes
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_TOG_3131
		tooltip = { FROM = { death = { death_reason = death_battle } } }
	}
}

# Setup: Child dies outside of battle (Child)
character_event = {
	id = TOG.3398
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		add_trait = varangian
		if = {
			limit = {
				is_alive = yes
			}
			death = { death_reason = death_missing }
		}
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3131 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3131 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child dies outside of battle
character_event = {
	id = TOG.3399
	desc = EVTDESC_TOG_3399
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			d_varangian_guard = {
				holder_scope = {
					liege = {
						save_event_target_as = greek_king_or_queen # For loc purposes
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_TOG_3112
		FROM = {
			tooltip = {
				add_trait = varangian
			}
		}
	}
}

# Setup: Child returns with loot (Child)
character_event = {
	id = TOG.3132
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		wealth = 150
		add_trait = varangian
		random_list = { #prioritize player parents
			50 = {
				modifier = {
					factor = 100
					father = { ai = no }
				}
				father = { character_event = { id = TOG.3133 } }
			}
			50 = {
				modifier = {
					factor = 100
					mother = { ai = no }
				}
				mother = { character_event = { id = TOG.3133 } }
			}
		}
		clr_character_flag = serving_varangian
	}
}

# Child returns with loot
character_event = {
	id = TOG.3133
	desc = EVTDESC_TOG_3133
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			d_varangian_guard = {
				holder_scope = {
					liege = {
						save_event_target_as = greek_king_or_queen # For loc purposes
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_3133
		if = {
			limit = { ROOT = { is_ruler = yes} }
			FROM = { move_character = ROOT }
		}
		else = {
			liege = { FROM = { move_character = PREV } }
		}
		FROM = { tooltip = { add_trait = varangian } }
		wealth = 150
	}
}

# Setup: Player character dies, ping to new player character (fires from on_death on action)
character_event = {
	id = HFP.19101
	ai = no
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_dlc = "The Old Gods"
		player_heir = {
			OR = {
				has_character_flag = wants_varangian
				has_character_flag = serving_varangian
			}
		}
	}
	
	immediate = {
		player_heir = {
			character_event = { id = TOG.3134 days = 1 }
		}
	}
}

# Player Varangian guard character returns home (fires from event above)
character_event = {
	id = TOG.3134
	desc = EVTDESC_TOG_3134
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_war
	is_triggered_only = yes
	
	ai = no
	
	trigger = {
		has_dlc = "The Old Gods"
		OR = {
			has_character_flag = wants_varangian
			has_character_flag = serving_varangian
		}
		#father_even_if_dead = { is_alive = no }
	}
		
	immediate = {
		clr_character_flag = wants_varangian
		clr_character_flag = serving_varangian
	}
	
	option = {
		name = EVTOPTA_TOG_3134
		add_trait = varangian
		prestige = 200
		wealth = 200
	}
}

# Hidden AI only: Father dies, Son gets Varangian trait
character_event = {
	id = TOG.3135
	hide_window = yes
	
	min_age = 16
	ai = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		OR = {
			has_character_flag = wants_varangian
			has_character_flag = serving_varangian
		}
		father_even_if_dead = { is_alive = no }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		add_trait = varangian
		clr_character_flag = wants_varangian
		clr_character_flag = serving_varangian
	}
}

### Sejdr Events

# Völva Appears
character_event = {
	id = TOG.3200
	desc = EVTDESC_TOG_3200
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		in_command = no
		OR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		NOT = {
			any_courtier_or_vassal = {
				has_minor_title = title_volva
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2200
	}	
	
	option = {
		name = EVTOPTA_TOG_3200
		create_character = {
			random_traits = no
			dynasty = NONE
			female = yes
			age = 35
			religion = ROOT
			culture = ROOT
			trait = mystic
			trait = scholarly_theologian
		}
		new_character = {
			give_minor_title = title_volva
			emf_new_character_priest = yes
		}
	}
	option = {
		name = EVTOPTB_TOG_3200
		custom_tooltip = { text = away_witch }
	}
}

# Young Völva Appears
character_event = {
	id = TOG.3201
	desc = EVTDESC_TOG_3201
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		in_command = no
		OR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		NOT = {
			any_courtier_or_vassal = {
				has_minor_title = title_volva
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2200
	}	
	
	option = {
		name = EVTOPTA_TOG_3201
		create_character = {
			random_traits = no
			dynasty = NONE
			female = yes
			age = 22
			religion = ROOT
			culture = ROOT
			trait = mystic
			trait = scholarly_theologian
			trait = fair
		}
		new_character = {
			give_minor_title = title_volva
			emf_new_character_priest = yes
		}
	}
	option = {
		name = EVTOPTB_TOG_3201
		custom_tooltip = { text = no_witch }
	}
}

# Old Völva Appears
character_event = {
	id = TOG.3202
	desc = EVTDESC_TOG_3202
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		in_command = no
		OR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		NOT = {
			any_courtier_or_vassal = {
				has_minor_title = title_volva
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2200
	}	
	
	option = {
		name = EVTOPTA_TOG_3202
		create_character = {
			random_traits = no
			dynasty = NONE
			female = yes
			age = 53
			religion = ROOT
			culture = ROOT
			trait = mystic
			trait = scholarly_theologian
			trait = ugly
		}
		new_character = {
			give_minor_title = title_volva
			emf_new_character_priest = yes
		}
	}
	option = {
		name = EVTOPTB_TOG_3202
		custom_tooltip = { text = begone_witch }
	}
}

# Völva Warns About Child (AI Spouse)
character_event = {
	id = TOG.3203
	hide_window = yes
	
	only_women = yes
	min_age = 16
	prisoner = no
	only_capable = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		NOT = {
			has_game_rule = {
				name = supernatural_events
				value = off
			}
		}
		OR = {
			ai = no
			has_game_rule = {
				name = supernatural_events
				value = unrestricted
			}
			trigger_if = {
				limit = { father_of_unborn_known = yes }
				father_of_unborn = {
					ai = no
					OR = {
						is_married = ROOT
						ROOT = { is_consort = PREV }
					}
				}
			}
			trigger_else = {
				OR = {
					spouse = {
						ai = no
					}
					any_consort = {
						ai = no
						is_senior_consort_party = yes
					}
				}
			}
		}
		is_pregnant = yes
		OR = {
			AND = {
				OR = {
					is_landed = yes
					is_patrician = yes
				}
				any_courtier_or_vassal = { 
					has_minor_title = title_volva 
				}
			}
			trigger_if = {
				limit = { father_of_unborn_known = yes }
				father_of_unborn = {
					OR = {
						is_landed = yes
						is_patrician = yes
					}
					any_courtier_or_vassal = { 
						has_minor_title = title_volva 
					}
				}
			}
			trigger_else = {
				OR = {
					spouse = {
						OR = {
							is_landed = yes
							is_patrician = yes
						}
						any_courtier_or_vassal = { 
							has_minor_title = title_volva 
						}
					}
					any_consort = {
						is_senior_consort_party = yes
						OR = {
							is_landed = yes
							is_patrician = yes
						}
						any_courtier_or_vassal = { 
							has_minor_title = title_volva 
						}
					}
				}
			}
		}
		NOT = { has_character_flag = pregnant_with_demon }
	}
	
	mean_time_to_happen = {
		months = 550
	}
	
	immediate = {
		set_character_flag = pregnant_with_demon
		if = {
			limit = {
				OR = {
					is_landed = yes
					is_patrician = yes
				}
				any_courtier_or_vassal = {
					has_minor_title = title_volva
				}
			}
			random_courtier_or_vassal = {
				limit = { has_minor_title = title_volva }
				character_event = { id = TOG.3204 }
			}
		}
		if = {
			limit = {
				father_of_unborn_known = yes
			}
			if = {
				limit = {
					father_of_unborn = {
						OR = {
							is_landed = yes
							is_patrician = yes
						}
						any_courtier_or_vassal = {
							has_minor_title = title_volva
						}
					}
				}
				father_of_unborn = {
					random_courtier_or_vassal = {
						limit = { has_minor_title = title_volva }
						character_event = { id = TOG.3204 }
					}
				}
			}
		}
		else_if = {
			limit = {
				spouse = {
					OR = {
						is_landed = yes
						is_patrician = yes
					}
					any_courtier_or_vassal = {
						has_minor_title = title_volva
					}
				}
			}
			spouse = {
				random_courtier_or_vassal = {
					limit = { has_minor_title = title_volva }
					character_event = { id = TOG.3204 }
				}
			}
		}
		else_if = {
			limit = {
				any_consort = {
					is_senior_consort_party = yes
					OR = {
						is_landed = yes
						is_patrician = yes
					}
					any_courtier_or_vassal = { 
						has_minor_title = title_volva 
					}
				}
			}
			random_consort = {
				limit = {
					is_senior_consort_party = yes
					OR = {
						is_landed = yes
						is_patrician = yes
					}
					any_courtier_or_vassal = { 
						has_minor_title = title_volva 
					}
				}
				random_courtier_or_vassal = { 
					limit = { has_minor_title = title_volva }
					character_event = { id = TOG.3204 }
				}
			}
		}
	}
}

# Völva Warns About Child (AI Völva)
character_event = {
	id = TOG.3204
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		liege = {
			character_event = { id = TOG.3205 }
		}
	}
}

# Völva Warns About Child
character_event = {
	id = TOG.3205
	desc = {
		trigger = {
			NOT = { character = FROMFROM }
		}
		text = EVTDESC_TOG_3205
	}
	desc = {
		trigger = {
			character = FROMFROM
		}
		text = EVTDESC_TOG_3205_F
	}
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3205
		FROM = {
			opinion = {
				modifier = opinion_disappointed
				years = 1
				who = ROOT
			}
		}
	}
	option = {
		name = EVTOPTB_TOG_3205
		if = {
			limit = {
				character = FROMFROM
			}
			random = {
				chance = 30
				add_trait = stressed
			}
		}
		else = {
			FROMFROM = {
				opinion = {
					modifier = opinion_disappointed
					years = 1
					who = ROOT
				}
			}
		}
	}
}

# Demon Child is Born
character_event = {
	id = TOG.3206
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		mother = { has_character_flag = pregnant_with_demon }
	}
	
	immediate = {
		emf_dna_add_trait_lefthanded = yes
		random_list = {
			50 = { set_character_flag = demon_child }
			50 = { set_character_flag = demon_child_fake }
		}
		mother = { clr_character_flag = pregnant_with_demon }
	}
}

# Child acts strange I (AI)
character_event = {
	id = TOG.3210
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_strange_1 }
		host = { is_parent_of = ROOT }
	}
	
	mean_time_to_happen = {
		months = 220
	}
	
	immediate = {
		set_character_flag = child_strange_1
		host = { character_event = { id = TOG.3211 } }
	}
}

# Child acts strange I
character_event = {
	id = TOG.3211
	desc = EVTDESC_TOG_3211
	picture = GFX_evt_child_play
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3211
		custom_tooltip = { text = child_acts_strange }
	}
}

# Child acts strange II (AI)
character_event = {
	id = TOG.3212
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_strange_2 }
		host = { is_parent_of = ROOT }
	}
	
	mean_time_to_happen = {
		months = 220
	}
	
	immediate = {
		set_character_flag = child_strange_2
		host = { character_event = { id = TOG.3213 } }
	}
}

# Child acts strange II
character_event = {
	id = TOG.3213
	desc = EVTDESC_TOG_3213
	picture = GFX_evt_child_play
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3213
		custom_tooltip = { text = child_acts_strange }
	}
}

# Child acts strange III (AI)
character_event = {
	id = TOG.3214
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_strange_3 }
		host = { is_parent_of = ROOT }
	}
	
	mean_time_to_happen = {
		months = 220
	}
	
	immediate = {
		set_character_flag = child_strange_3
		host = { character_event = { id = TOG.3215 } }
	}
}

# Child acts strange III
character_event = {
	id = TOG.3215
	desc = EVTDESC_TOG_3215
	picture = GFX_evt_child_play
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3215
		custom_tooltip = { text = child_acts_strange }
	}
}

# Child kills Courtier I (AI Child)
character_event = {
	id = TOG.3216
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_kills_1 }
		OR = {
			has_character_flag = child_strange_1
			has_character_flag = child_strange_2
			has_character_flag = child_strange_3
		}
		host = {
			is_parent_of = ROOT
			prisoner = no
			any_courtier = {
				NOR = { 
					character = ROOT
					is_close_relative = ROOT
					is_married = PREV
					is_consort = PREV
				}
				vassal_of = PREV
				ai = yes
				is_primary_heir = no
				is_pretender = no
				prisoner = no
				age = 13
				in_command = no
			}
		}
	}
	
	mean_time_to_happen = {
		months = 320
	}
	
	immediate = {
		set_character_flag = child_kills_1
		host = { 
			random_courtier = {
				limit = {
					NOR = {
						character = ROOT
						is_close_relative = ROOT
						is_married = PREV
						is_consort = PREV
					}
					vassal_of = PREV
					ai = yes
					is_primary_heir = no
					is_pretender = no
					prisoner = no
					age = 13
					in_command = no
				}
				preferred_limit = {
					is_unimportant_trigger = no
				}
				character_event = { id = TOG.3217 } 
			}
		}
	}
}

# Child kills Courtier I (AI Courtier)
character_event = {
	id = TOG.3217
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		liege = { character_event = { id = TOG.3218 } }
	}
}

#Child kills Courtier I
character_event = {
	id = TOG.3218
	desc = EVTDESC_TOG_3218
	picture = GFX_evt_viking_funeral_oldgods
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3218
		FROM = {
			death = {
				death_reason = death_murder_unknown_fall
				killer = ROOT
			}
		}
	}
}

# Child kills Courtier II (AI Child)
character_event = {
	id = TOG.3219
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_kills_2 }
		OR = {
			has_character_flag = child_strange_1
			has_character_flag = child_strange_2
			has_character_flag = child_strange_3
		}
		host = {
			is_parent_of = ROOT
			prisoner = no
			any_courtier = {
				NOR = {
					character = ROOT
					is_close_relative = ROOT
					is_married = PREV
					is_consort = PREV
				}
				vassal_of = PREV
				ai = yes
				is_primary_heir = no
				is_pretender = no
				prisoner = no
				age = 13
				in_command = no
			}
		}
	}
	
	mean_time_to_happen = {
		months = 320
	}
	
	immediate = {
		set_character_flag = child_kills_2
		host = {
			random_courtier = {
				limit = {
					NOR = {
						character = ROOT
						is_close_relative = ROOT
						is_married = PREV
						is_consort = PREV
					}
					vassal_of = PREV
					ai = yes
					is_primary_heir = no
					is_pretender = no
					prisoner = no
					age = 13
					in_command = no
				}
				preferred_limit = {
					is_unimportant_trigger = no
				}
				character_event = { id = TOG.3220 } 
			}
		}
	}
}

# Child kills Courtier II (AI Courtier)
character_event = {
	id = TOG.3220
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		liege = { character_event = { id = TOG.3221 } }
	}
}

#Child kills Courtier II
character_event = {
	id = TOG.3221
	desc = EVTDESC_TOG_3221
	picture = GFX_evt_viking_funeral_oldgods
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3221
		FROM = {
			death = {
				death_reason = death_murder_unknown_fall
				killer = ROOT
			}
		}
	}
}

# Child kills Courtier III (AI Child)
character_event = {
	id = TOG.3222
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_kills_3 }
		OR = {
			has_character_flag = child_strange_1
			has_character_flag = child_strange_2
			has_character_flag = child_strange_3
		}
		host = {
			is_parent_of = ROOT
			prisoner = no
			any_courtier = {
				NOR = {
					character = ROOT
					is_close_relative = ROOT
					is_married = PREV
					is_consort = PREV
				}
				vassal_of = PREV
				ai = yes
				is_primary_heir = no
				is_pretender = no
				prisoner = no
				age = 13
				in_command = no
			}
		}
	}
	
	mean_time_to_happen = {
		months = 320
	}
	
	immediate = {
		set_character_flag = child_kills_3
		host = {
			random_courtier = {
				limit = {
					NOR = {
						character = ROOT
						is_close_relative = ROOT
						is_married = PREV
						is_consort = PREV
					}
					vassal_of = PREV
					ai = yes
					is_primary_heir = no
					is_pretender = no
					prisoner = no
					age = 13
					in_command = no
				}
				preferred_limit = {
					is_unimportant_trigger = no
				}
				character_event = { id = TOG.3223 } 
			}
		}
	}
}

# Child kills Courtier III (AI Courtier)
character_event = {
	id = TOG.3223
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		liege = { character_event = { id = TOG.3224 } }
	}
}

#Child kills Courtier III
character_event = {
	id = TOG.3224
	desc = EVTDESC_TOG_3224
	picture = GFX_evt_viking_funeral_oldgods
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3224
		FROM = {
			death = {
				death_reason = death_murder_unknown_drowning
				killer = ROOT
			}
		}
	}
}

# Völva Wants Exorcism (AI Child)
character_event = {
	id = TOG.3250
	hide_window = yes
	
	min_age = 4
	max_age = 16
	ai = yes
	has_dlc = "The Old Gods"
	
	trigger = {
		NOT = { has_character_flag = child_exorcism }
		OR = {
			has_character_flag = demon_child
			has_character_flag = demon_child_fake
		}
		host = {
			is_parent_of = ROOT
			any_courtier_or_vassal = {
				has_minor_title = title_volva
			}
		}
	}
	
	mean_time_to_happen = {
		months = 680
	}
	
	immediate = {
		set_character_flag = child_exorcism
		host = {
			random_courtier_or_vassal = {
				limit = { has_minor_title = title_volva }
				character_event = { id = TOG.3251 }
			}
		}
	}
}

# Völva Wants Exorcism (AI Völva)
character_event = {
	id = TOG.3251
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = exorcist_volva
		liege = {
			character_event = { id = TOG.3252 }
		}
	}
}

# Völva Wants Exorcism
character_event = {
	id = TOG.3252
	desc = EVTDESC_TOG_3252
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3252
		hidden_tooltip = {
			character_event = { id = TOG.3253 days = 7 }
		}
		custom_tooltip = { text = exorcism_approved }
	}
	option = {
		name = EVTOPTB_TOG_3252
		FROM = {
			opinion = {
				modifier = opinion_very_disappointed
				years = 2
				who = ROOT
			}
		}
		custom_tooltip = { text = exorcism_denied }
	}
}

# Exorcism Begins
character_event = {
	id = TOG.3253
	desc = EVTDESC_TOG_3253
	picture = GFX_evt_pagan
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_TOG_3253
		
		custom_tooltip = {
			text = exorcism_begins
			hidden_tooltip = {
				random_child = {
					limit = { has_character_flag = child_exorcism }
					character_event = { id = TOG.3254 days = 3 }
				}
			}
		}
	}
}

# Exorcism Begins (AI Child)
character_event = {
	id = TOG.3254
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:exorcist_volva = {
			character_event = { id = TOG.3255 }
		}
	}
}

# Exorcism Begins (AI Völva)
character_event = {
	id = TOG.3255
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		liege = {
			random_list = {
				20 = { character_event = { id = TOG.3256 days = 3 } }
				20 = { character_event = { id = TOG.3257 days = 3 } }
				40 = { character_event = { id = TOG.3258 days = 3 } }
				20 = { character_event = { id = TOG.3259 days = 3 } }
			}
		}
	}
}

# Exorcism Completed - Völva Dies
character_event = {
	id = TOG.3256
	desc = EVTDESC_TOG_3256
	picture = GFX_evt_child_play
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3256
		FROM = {
			death = {
				death_reason = death_murder_butchered
			}
		}
		FROMFROM = { # Flags removed, no more events
			clr_character_flag = demon_child
			clr_character_flag = demon_child_fake
			clr_character_flag = child_exorcism
		}
	}
}

# Exorcism Completed - Child Dies
character_event = {
	id = TOG.3257
	desc = EVTDESC_TOG_3257
	picture = GFX_evt_viking_funeral_oldgods
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3257
		FROMFROM = {
			death = {
				death_reason = death_sacrificed_norse
			}
		}
		FROM = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
	}
	option = {
		name = EVTOPTB_TOG_3257
		FROMFROM = {
			death = {
				death_reason = death_sacrificed_norse
			}
		}
		FROM = {
			banish = yes
		}
	}
	option = {
		name = EVTOPTC_TOG_3257
		FROMFROM = {
			death = {
				death_reason = death_sacrificed_norse
			}
		}
	}
}

# Exorcism Completed - Child is Unharmed
character_event = {
	id = TOG.3258
	desc = EVTDESC_TOG_3258
	picture = GFX_evt_pagan
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3258
		FROMFROM = {
			clr_character_flag = demon_child
			clr_character_flag = demon_child_fake
			clr_character_flag = child_exorcism
			remove_character_modifier = voice_of_satan
			remove_character_modifier = voice_of_jesus
			remove_character_modifier = holy_comet
			remove_character_modifier = lycanthropy
			remove_trait = possessed
		}
	}
}

# Exorcism Completed - Child is Hurt
character_event = {
	id = TOG.3259
	desc = EVTDESC_TOG_3259
	picture = GFX_evt_pagan
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTB_TOG_3257
		FROMFROM = {
			clr_character_flag = demon_child
			clr_character_flag = demon_child_fake
			clr_character_flag = child_exorcism
			remove_character_modifier = voice_of_satan
			remove_character_modifier = voice_of_jesus
			remove_character_modifier = holy_comet
			remove_character_modifier = lycanthropy
			remove_trait = possessed
		}
		FROM = {
			banish = yes
		}
	}
	option = {
		name = EVTOPTC_TOG_3257
		FROMFROM = {
			clr_character_flag = demon_child
			clr_character_flag = demon_child_fake
			clr_character_flag = child_exorcism
			remove_character_modifier = voice_of_satan
			remove_character_modifier = voice_of_jesus
			remove_character_modifier = holy_comet
			remove_character_modifier = lycanthropy
			remove_trait = possessed
		}
	}
}

# Child Becomes Adult
character_event = {
	id = TOG.3260
	hide_window = yes
	
	min_age = 16
	max_age = 17
	has_character_flag = demon_child
	has_dlc = "The Old Gods"
	
	trigger = {
		FROM = { always = yes }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		clr_character_flag = demon_child
		clr_character_flag = demon_child_fake
		clr_character_flag = child_exorcism
	}
}

### Looting Events

# +2 Axe
character_event = {
	id = TOG.3300
	desc = EVTDESC_TOG_3300
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		NOT = { has_artifact = loot_axe }
		FROM = { always = yes }
	}
	
	option = {
		name = EVTOPTA_TOG_3300
		add_artifact = loot_axe
		new_artifact = {
			set_creation_date = 1.1.1
		}
	}
	option = {
		name = EVTOPTB_TOG_3300
		prestige = 10
	}
}

# Strange Chest
character_event = {
	id = TOG.3301
	desc = EVTDESC_TOG_3301
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		NOT = { 
			has_artifact = strange_chest 
			has_character_flag = found_chest
		}
		FROM = { always = yes }
	}
	
	option = {
		name = EVTOPTA_TOG_3301
		custom_tooltip = { text = found_chest }
		add_artifact = strange_chest
		set_character_flag = found_chest
	}
}

# Key Found
character_event = {
	id = TOG.3302
	desc = EVTDESC_TOG_3302
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		has_artifact = strange_chest
		has_character_flag = found_chest
		FROM = { always = yes }
	}
	
	option = {
		name = EVTOPTA_TOG_3302
		custom_tooltip = {
			text = opens_chest
			hidden_tooltip = {
				random_list = {
					40 = { character_event = { id = TOG.3306 } }
					40 = {
						additive_modifier = {
							value = -5
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
						character_event = { id = TOG.3307 }
					}
					40 = { character_event = { id = TOG.3308 } }
					5 = {
						modifier = {
							factor = 0
							has_game_rule = {
								name = supernatural_events
								value = off
							}
						}
						character_event = { id = TOG.3309 }
					}
				}
			}
		}
	}
}

# Key Found by Child or relative
character_event = {
	id = TOG.3303
	desc = EVTDESC_TOG_3303
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "The Old Gods"
		has_artifact = strange_chest
		NOT = { 
			has_character_flag = found_chest
			any_dynasty_member = {
				has_character_flag = found_chest
			}
		}
		FROM = { always = yes }
	}
	
	option = {
		name = EVTOPTA_TOG_3303
		custom_tooltip = {
			text = opens_chest
			hidden_tooltip = {
				random_list = {
					40 = { character_event = { id = TOG.3306 } }
					40 = {
						additive_modifier = {
							value = -5
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
						character_event = { id = TOG.3307 }
					}
					40 = { character_event = { id = TOG.3308 } }
					5 = { 
						modifier = {
							factor = 0
							has_game_rule = {
								name = supernatural_events
								value = off
							}
						}
						character_event = { id = TOG.3309 } 
					}
				}
			}
		}
	}
}

# Chest Opened, Contains Gold
character_event = {
	id = TOG.3306
	desc = EVTDESC_TOG_3306
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_economy
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3306
		wealth = 200
		destroy_artifact = strange_chest
	}
}

# Chest Opened, Contains Parchments
character_event = {
	id = TOG.3307
	desc = EVTDESC_TOG_3307
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_economy
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3307
		custom_tooltip = { text = chest_empty }
		destroy_artifact = strange_chest
	}
}

# Chest Opened, Contains Junk
character_event = {
	id = TOG.3308
	desc = EVTDESC_TOG_3308
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_economy
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_TOG_3308
		wealth = 10
		destroy_artifact = strange_chest
	}
}

# Chest Opened, Contains Seraphim
character_event = {
	id = TOG.3309
	desc = EVTDESC_TOG_3309
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_economy
	
	hide_from = yes
	
	is_triggered_only = yes
		
	option = {
		name = EVTOPTA_TOG_3309
		custom_tooltip = { text = seraphims }
		destroy_artifact = strange_chest
	}
}

#Viking Trait Gained
character_event = {
	id = TGF.3320
	desc = { 
		trigger = { 
			OR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_viking
				}
			}
		} 
		text = EVTDESC_TOG_3320
	}
	desc = { 
		trigger = { 
			NOR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_viking
				}
			}
		} 
		text = EVTDESC_TOG_3320_HF
	}
	picture = { 
		trigger = { is_female = no } 
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = { 
		trigger = { is_female = yes } 
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war
	
	hide_from = yes
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		NOR = { 
			trait = viking
			trait = pirate
			trait = ravager
			trait = seaking
			trait = sea_queen
		}
		OR = {
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_viking
				bloodline_is_active_for = PREV
			}
			emf_seafaring_religion = yes
		}
		FROM = { always = yes }
	}
	
	option = {
		name = EVTOPTA_TOG_3320
		if = {
			limit = { 
				OR = {  
					religion = norse_pagan
					religion = norse_pagan_reformed
				} 
			}
			add_trait = viking
		}
		if = {
			limit = { 
				NOR = {  
					religion = norse_pagan
					religion = norse_pagan_reformed
				} 
			}
			if = {
				limit = {
					any_owned_bloodline = {
						has_bloodline_flag = bloodline_viking
						bloodline_is_active_for = PREV
					}
				}
				set_character_flag = acquired_pirate_trait_by_bloodline
			}
			add_trait = pirate
		}
		hidden_tooltip = {
			set_variable = { which = viking_raids value = 0 }
		}
	}
}

#Ravager 
character_event = {
	id = TGF.3321
	desc = { 
		trigger = { 
			OR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_viking
				}
			}
		} 
		text = TOG.3321.d
	}
	desc = { 
		trigger = { 
			NOR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_viking
				}
			}
		} 
		text = EVTDESC_TOG_3321_HF
	}
	picture = { 
		trigger = { is_female = no } 
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = { 
		trigger = { is_female = yes } 
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war
	
	hide_from = yes
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			trait = viking
			trait = pirate
		}
		NOR = { 
			trait = ravager
			trait = seaking
			trait = sea_queen
		}
		OR = {
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_viking
				bloodline_is_active_for = PREV
			}
			emf_seafaring_religion = yes
		}
		check_variable = { which = viking_raids value = 50 }
		FROM = { always = yes }
	}
	
	option = {
		name = TOG.3321.a
		if = {
			limit = { 
				trait = pirate
			}
			remove_trait = pirate
		}
		if = {
			limit = { 
				trait = viking
			}
			remove_trait = viking
		}
		add_trait = ravager
	}
}

#Sea King
character_event = {
	id = TGF.3322
	desc = TOG.3322.d
	picture = { 
		trigger = { is_female = no } 
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = { 
		trigger = { is_female = yes } 
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war
	
	hide_from = yes
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		trait = ravager
		NOR = { 
			trait = seaking
			trait = sea_queen
		}
		OR = {
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_viking
				bloodline_is_active_for = PREV
			}
			emf_seafaring_religion = yes
		}
		check_variable = { which = viking_raids value = 100 }
		FROM = { always = yes }
	}
	
	option = {
		name = TOG.3322.a
		remove_trait = ravager
		if = {
			limit = {
				is_female = no
			}
			add_trait = seaking
		}
		if = {
			limit = {
				is_female = yes
			}
			add_trait = sea_queen
		}
	}
}

character_event = {
	id = TGF.3323
	
	hide_window = yes
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			trait = pirate
			trait = viking
			trait = ravager
			trait = seaking #Top trait, but there's still chance of gaining a Bloodline if variable goes high enough.
			trait = sea_queen
		}
		OR = {
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_viking
				bloodline_is_active_for = PREV
			}
			emf_seafaring_religion = yes
		}
		FROM = { always = yes }
	}
	
	immediate = {
		change_variable = { which = viking_raids value = 1 }
	}
}

### Event Contest Winners

# Son of the Buffalo Woman
character_event = {
	id = TOG.3403
	hide_window = yes
	
	min_age = 16
	only_women = yes
	capable_only = yes
	prisoner = no
	only_playable = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_spouse = {
			OR = {
				religion = west_african_pagan
				religion = west_african_pagan_reformed
				AND = {
					culture = manden
					any_demesne_province = {
						OR = {
							religion = west_african_pagan
							religion = west_african_pagan_reformed
						}
					}
				}
			}
			has_lover = no
			is_alive = yes
			NOT = { has_character_flag = buffalo_woman }
		}
		OR = {
			trait = ugly
			trait = hunchback
			trait = harelip
			trait = clubfooted
			trait = dwarf
		}
		num_of_children = 0
		has_lover = no
		is_pregnant = no
		NOT = {
			has_alternate_start_parameter = {
				key = religion_names
				value = random
			}
		}
	}
	
	immediate = {
		random_spouse = {
			limit = {
				OR = {
					religion = west_african_pagan
					religion = west_african_pagan_reformed
					AND = {
						culture = manden
						any_demesne_province = {
							OR = {
								religion = west_african_pagan
								religion = west_african_pagan_reformed
							}
						}
					}
				}
				has_lover = no
				is_alive = yes
				NOT = { has_character_flag = buffalo_woman }
			}
			preferred_limit = {
				is_main_spouse = yes
			}
			character_event = { id = TOG.3400 days = 3 }
		}
	}
}

# Son of the Buffalo Woman
character_event = {
	id = TOG.3400
	desc = EVTDESC_TOG_3400
	picture = GFX_evt_comet
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = buffalo_woman
	}
	
	option = {
		name = EVTOPTA_TOG_3400
		piety = 30
		random_list = {
			90 = { }
			10 = { add_lover = FROM }
		}
		unprotected_sex_effect = yes
	}
	option = {
		name = EVTOPTB_TOG_3400
		trigger = {
			OR = {
				religion = west_african_pagan
				religion = west_african_pagan_reformed
			}
		}
		piety = -30
		FROM = {
			opinion = {
				modifier = opinion_spurned
				who = ROOT
			}
		}
	}
	option = {
		name = EVTOPTC_TOG_3400
		trigger = {
			NOT = {
				OR = {
					religion = west_african_pagan
					religion = west_african_pagan_reformed
				}
			}
		}
		piety = 30
		FROM = {
			opinion = {
				modifier = opinion_spurned
				who = ROOT
			}
		}
	}
}

# Peijaiset
character_event = {
	id = TOG.3401
	desc = EVTDESC_TOG_3401
	picture = GFX_evt_hunt
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	only_playable = yes
	
	trigger = {
		OR = {
			religion = finnish_pagan
			religion = finnish_pagan_reformed
		}
		NOT = { has_character_flag = peijaiset }
		NOT = { is_inaccessible_trigger = yes }
		NOT = {
			has_alternate_start_parameter = {
				key = religion_names
				value = random
			}
		}
	}
	
	immediate = {
		set_character_flag = peijaiset
	}
	
	option = {
		name = EVTOPTA_TOG_3401
		prestige = 100
		wealth = -50
	}
	option = {
		name = EVTOPTB_TOG_3401
		prestige = -25
	}
	option = {
		name = EVTOPTC_TOG_3401
		tooltip_info = greedy
		trigger = {
			trait = greedy
		}
		prestige = -25
		wealth = 50
	}
	option = {
		name = EVTOPTD_TOG_3401
		tooltip_info = zealous
		trigger = {
			trait = zealous
		}
		prestige = 100
		piety = 50
		wealth = -50
	}
}

# Will the real Odin please stand up?
character_event = {
	id = TOG.3402
	desc = EVTDESC_TOG_3402
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	only_playable = yes
	
	trigger = {
		NOT = {
			has_game_rule = {
				name = supernatural_events
				value = off
			}
		}
		OR = {
			ai = no
			has_game_rule = {
				name = supernatural_events
				value = unrestricted
			}
		}
		OR = {
			religion = norse_pagan
			religion = norse_pagan_reformed
		}
		NOT = { has_character_flag = odin_event }
		NOT = { is_inaccessible_trigger = yes }
		NOT = {
			has_alternate_start_parameter = {
				key = religion_names
				value = random
			}
		}
	}
	
	immediate = {
		set_character_flag = odin_event
	}
	
	option = {
		name = EVTOPTA_TOG_3402
		wealth = 50
		prestige = 50
		add_trait = zealous
		custom_tooltip = { text = odin_option_a }
	}
	option = {
		name = EVTOPTB_TOG_3402
		prestige = -50
		if = {
			limit = {
				NOT = {
					lifestyle_traits = 1
				}
				NOT = { has_dlc = "Way of Life" }
			}
			add_trait = hunter
		}
		custom_tooltip = { text = odin_option_b }
	}
	option = {
		name = EVTOPTC_TOG_3402
		prestige = -50
		if = {
			limit = { trait = zealous }
			remove_trait = zealous
		}
		if = {
			limit = { NOT = { trait = zealous } }
			add_trait = cynical
		}
		custom_tooltip = { text = odin_option_c }
	}
}

###End contest winner events###

character_event = {
	id = TOG.3404
	desc = TOG.3404.d
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			capital_scope = {
				has_province_modifier = loot_prosperity_boost
			}
		}
	}
	
	option = {
		name = EXCELLENT
		capital_scope = {
			add_province_modifier = {
				name = loot_prosperity_boost
				duration = 1825
			}
			hidden_tooltip = {
				change_variable = { which = prosperity_value value = 12 }
			}
		}
	}
}
